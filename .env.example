# TomeHub Backend Configuration Example
# Copy this to .env and fill in your actual values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DB_USER=ADMIN
DB_PASSWORD=your_oracle_password_here
DB_DSN=tomehubdb_high

# Database Connection Pool (Task A1 - Updated for increased throughput)
# These settings control how many concurrent database connections are available
# Default values shown below are optimized for handling 100-150 concurrent users
DB_POOL_MIN=5                  # Minimum connections to maintain in pool
DB_POOL_MAX=40                 # Maximum connections (increased from 20 to 40)
DB_POOL_TIMEOUT=30             # Seconds to wait for available connection (raise if hitting timeouts)
DB_POOL_RECYCLE=3600           # Recycle connections every 1 hour to prevent stale connections

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================
ENVIRONMENT=development
GOOGLE_APPLICATION_CREDENTIALS=/path/to/firebase/credentials.json

# ============================================================================
# AI & LLM CONFIGURATION
# ============================================================================
GEMINI_API_KEY=your_gemini_api_key_here

# Model Versions (for cache invalidation)
# Format: v1, v2, v1.0.1, etc.
# CRITICAL: Increment these when deploying model changes
EMBEDDING_MODEL_VERSION=v2
LLM_MODEL_VERSION=v1

# ============================================================================
# CACHING CONFIGURATION
# ============================================================================
CACHE_ENABLED=true
CACHE_L1_MAXSIZE=1000          # In-memory cache entries
CACHE_L1_TTL=600               # L1 cache time-to-live (seconds)
REDIS_URL=redis://localhost:6379/0  # Optional L2 cache (Redis)

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ============================================================================
# RATE LIMITING (Task A3 - Phase A Quick Wins)
# ============================================================================
RATE_LIMIT_GLOBAL=1000         # Requests per minute, global
RATE_LIMIT_SEARCH=100          # Searches per minute, per user
RATE_LIMIT_INGEST=10           # Ingestions per minute, per user

# ============================================================================
# MEMORY MONITORING (Task A2 - Phase A Quick Wins)
# ============================================================================
MEMORY_WARNING_THRESHOLD=0.75   # 75% system memory usage triggers warning
MEMORY_CRITICAL_THRESHOLD=0.85  # 85% system memory usage triggers critical alert
MEMORY_CHECK_INTERVAL=30        # Check memory every N seconds

# ============================================================================
# OBSERVABILITY & LOGGING
# ============================================================================
SENTRY_DSN=optional_sentry_dsn_here

# ============================================================================
# DEPLOYMENT TRACKING
# ============================================================================
# Created automatically by scripts/record_deployment_versions.py
# Do not edit manually - contains .deployed file path
# DEPLOYED_VERSIONS_FILE=.deployed
