# Mutlaka Yapilmasi Gerekenler (Layer 2/3/4) - 2026-02-12

**Kapsam:** Addendum degerlendirmesi + guncel repo gercekleri.  
**Dil:** Turkce (ASCII)  
**Not:** Kod degisikligi yok; bu rapor oncelik ve gerekce icindir.

---

## Mutlaka Yapilacaklar (P0)

### P0-0) Layer-3 Explorer model governance'i netlestir (Pilot)
**Neden kritik?** LLM davranisi tek policy ile tanimli olmazsa kalite/maliyet/latency problemleri izlenemez.
**Beklenen fayda:** Explorer'da kontrollu Qwen denemesi, tum diger akislarin stabil Gemini politikasinda kalmasi.
**Basari kriteri:** Sadece `EXPLORER` modunda `qwen/qwen3-next-80b-a3b-instruct` primary, hata/kota durumunda Gemini fallback; tum diger tasklarda Gemini primary korunur.

### P0-1) Fusion modunu uretimde netlestir ve izlenebilir yap
**Neden kritik?** RRF yolu mevcut olsa bile concat varsayilan. Uretimde hangi modun calistigi net degilse kalite/latency tartismasi soyut kalir.
**Beklenen fayda:** Ranking kalitesinin tutarli hale gelmesi, kararlarin telemetriye dayanmasi.
**Basari kriteri:** Uretimde `retrieval_fusion_mode` telemetry ile izleniyor; concat/rrf secimi acik ve onayli.

### P0-2) `/api/search` vs `/api/smart-search` farkini urun seviyesinde netlestir
**Neden kritik?** Graph retrieval farki nedeniyle ayni sorguda farkli davranis olusuyor. Bu destek maliyeti ve kullanici guvenini etkiler.
**Beklenen fayda:** Destek taleplerinde azalma, beklenti yonetimi, dogru endpoint secimi.
**Basari kriteri:** Dokumantasyon/urun metni ile hangi endpointin ne yaptigi acik; gerekiyorsa UI'da etikete yansitildi.

### P0-3) Graph enrichment'in fiili etkisini dogrula
**Neden kritik?** Enrichment tetikleyici var ama etkisi (coverage, latency, basari orani) belirsizse graph kalitesi ve retrieval etkisi tahmine kalir.
**Beklenen fayda:** Graph coverage gorunurlugu, stale graph riskinin azalmasi.
**Basari kriteri:** Enrichment calismalari icin sayisal metrik (linked_chunks/eligible_chunks, duration_ms) gozlemleniyor ve threshold tanimli.

## Kisa Vade (P1)

### P1-1) Query expansion politikasini tek-kelime/typo icin netlestir
**Neden?** Tek kelime/typo sorgularda expansion devre disi; recall kaybi olusuyor.
**Beklenen fayda:** Kisa sorgularda daha iyi lexical/semantic denge.
**Basari kriteri:** Belirlenen sorgu setinde ilk sayfa lexical coverage artisi.

### P1-2) Router karar kalitesini olc
**Neden?** Router aktif ama basit kural seti kullaniliyor; etkinlik bilinmiyor.
**Beklenen fayda:** Latency/kalite dengesinde daha kontrollu kararlar.
**Basari kriteri:** Router secimlerinin p95 ve nDCG etkisi raporlanir.

### P1-3) B Smart Judge: OUT_OF_NETWORK borderline audit tie-break
**Neden?** Rule/embedding bazli audit bazi sinir durumlarda kararsiz kaliyor.
**Beklenen fayda:** Halusinasyon riski yuksek sorularda daha tutarli kalite karari.
**Basari kriteri:** `OUT_OF_NETWORK` ve `3.0-5.0` confidence bandinda LLM tie-break devreye girer; kota dolarsa rule-based fallback devam eder.

## Orta Vade (P2)

### P2-1) Graph + vector freshness SLA
**Neden?** Vector ve graph readiness ayrik; "ne zaman tam hazir" belirsiz.
**Beklenen fayda:** Kullaniciya dogru hazirlik durumu, operasyonel kestirilebilirlik.
**Basari kriteri:** `vector_ready/graph_ready/fully_ready` state'leri uretimde standart raporlanir.

### P2-2) Telemetry standardizasyonu
**Neden?** Maliyet/latency tartismalari net metrik olmadan spekulatif kaliyor.
**Beklenen fayda:** Karar kalitesinde iyilesme, regression tespiti.
**Basari kriteri:** LLM/task bazli p95 ve token kullanimi metrikleri dashboard'da gorunur.

### P2-3) A Night Shift: background enrichment pilotu
**Neden?** Ingestion sonrasi derin zenginlestirme yoksa kutuphane "statik" kaliyor.
**Beklenen fayda:** Chapter profile, key takeaways gibi gece calisan deger ureten indeksleme.
**Basari kriteri:** Kullanici akisini bloklamadan background job ile enrichment coverage ve hata oranlari olculur; kademeli rollout uygulanir.

---

# Kapanis
Bu liste, guncel repo gerceklerine gore "ertelememesi gereken" konulari onceliklendirir. Model tarafinda karar: sadece Layer-3 Explorer pilotunda Qwen primary, Gemini fallback; sistem geneline yayilim bu iterasyonda yoktur.
