function x7(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function U1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rx={exports:{}},bd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3;function y7(){if(a3)return bd;a3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return bd.Fragment=e,bd.jsx=n,bd.jsxs=n,bd}var s3;function v7(){return s3||(s3=1,Rx.exports=y7()),Rx.exports}var g=v7(),Ix={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o3;function b7(){if(o3)return it;o3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=m&&R[m]||R["@@iterator"],typeof R=="function"?R:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function S(R,$,Z){this.props=R,this.context=$,this.refs=E,this.updater=Z||v}S.prototype.isReactComponent={},S.prototype.setState=function(R,$){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,$,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function _(){}_.prototype=S.prototype;function N(R,$,Z){this.props=R,this.context=$,this.refs=E,this.updater=Z||v}var k=N.prototype=new _;k.constructor=N,C(k,S.prototype),k.isPureReactComponent=!0;var O=Array.isArray;function I(){}var M={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function B(R,$,Z){var pe=Z.ref;return{$$typeof:t,type:R,key:$,ref:pe!==void 0?pe:null,props:Z}}function le(R,$){return B(R.type,$,R.props)}function ae(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function fe(R){var $={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(Z){return $[Z]})}var W=/\/+/g;function de(R,$){return typeof R=="object"&&R!==null&&R.key!=null?fe(""+R.key):$.toString(36)}function xe(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(I,I):(R.status="pending",R.then(function($){R.status==="pending"&&(R.status="fulfilled",R.value=$)},function($){R.status==="pending"&&(R.status="rejected",R.reason=$)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function H(R,$,Z,pe,ge){var Q=typeof R;(Q==="undefined"||Q==="boolean")&&(R=null);var Ee=!1;if(R===null)Ee=!0;else switch(Q){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(R.$$typeof){case t:case e:Ee=!0;break;case f:return Ee=R._init,H(Ee(R._payload),$,Z,pe,ge)}}if(Ee)return ge=ge(R),Ee=pe===""?"."+de(R,0):pe,O(ge)?(Z="",Ee!=null&&(Z=Ee.replace(W,"$&/")+"/"),H(ge,$,Z,"",function(oe){return oe})):ge!=null&&(ae(ge)&&(ge=le(ge,Z+(ge.key==null||R&&R.key===ge.key?"":(""+ge.key).replace(W,"$&/")+"/")+Ee)),$.push(ge)),1;Ee=0;var ie=pe===""?".":pe+":";if(O(R))for(var K=0;K<R.length;K++)pe=R[K],Q=ie+de(pe,K),Ee+=H(pe,$,Z,Q,ge);else if(K=y(R),typeof K=="function")for(R=K.call(R),K=0;!(pe=R.next()).done;)pe=pe.value,Q=ie+de(pe,K++),Ee+=H(pe,$,Z,Q,ge);else if(Q==="object"){if(typeof R.then=="function")return H(xe(R),$,Z,pe,ge);throw $=String(R),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function J(R,$,Z){if(R==null)return R;var pe=[],ge=0;return H(R,pe,"","",function(Q){return $.call(Z,Q,ge++)}),pe}function q(R){if(R._status===-1){var $=R._result;$=$(),$.then(function(Z){(R._status===0||R._status===-1)&&(R._status=1,R._result=Z)},function(Z){(R._status===0||R._status===-1)&&(R._status=2,R._result=Z)}),R._status===-1&&(R._status=0,R._result=$)}if(R._status===1)return R._result.default;throw R._result}var F=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},z={map:J,forEach:function(R,$,Z){J(R,function(){$.apply(this,arguments)},Z)},count:function(R){var $=0;return J(R,function(){$++}),$},toArray:function(R){return J(R,function($){return $})||[]},only:function(R){if(!ae(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return it.Activity=p,it.Children=z,it.Component=S,it.Fragment=n,it.Profiler=i,it.PureComponent=N,it.StrictMode=r,it.Suspense=c,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,it.__COMPILER_RUNTIME={__proto__:null,c:function(R){return M.H.useMemoCache(R)}},it.cache=function(R){return function(){return R.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(R,$,Z){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var pe=C({},R.props),ge=R.key;if($!=null)for(Q in $.key!==void 0&&(ge=""+$.key),$)!L.call($,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&$.ref===void 0||(pe[Q]=$[Q]);var Q=arguments.length-2;if(Q===1)pe.children=Z;else if(1<Q){for(var Ee=Array(Q),ie=0;ie<Q;ie++)Ee[ie]=arguments[ie+2];pe.children=Ee}return B(R.type,ge,pe)},it.createContext=function(R){return R={$$typeof:s,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},it.createElement=function(R,$,Z){var pe,ge={},Q=null;if($!=null)for(pe in $.key!==void 0&&(Q=""+$.key),$)L.call($,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(ge[pe]=$[pe]);var Ee=arguments.length-2;if(Ee===1)ge.children=Z;else if(1<Ee){for(var ie=Array(Ee),K=0;K<Ee;K++)ie[K]=arguments[K+2];ge.children=ie}if(R&&R.defaultProps)for(pe in Ee=R.defaultProps,Ee)ge[pe]===void 0&&(ge[pe]=Ee[pe]);return B(R,Q,ge)},it.createRef=function(){return{current:null}},it.forwardRef=function(R){return{$$typeof:o,render:R}},it.isValidElement=ae,it.lazy=function(R){return{$$typeof:f,_payload:{_status:-1,_result:R},_init:q}},it.memo=function(R,$){return{$$typeof:d,type:R,compare:$===void 0?null:$}},it.startTransition=function(R){var $=M.T,Z={};M.T=Z;try{var pe=R(),ge=M.S;ge!==null&&ge(Z,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(I,F)}catch(Q){F(Q)}finally{$!==null&&Z.types!==null&&($.types=Z.types),M.T=$}},it.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},it.use=function(R){return M.H.use(R)},it.useActionState=function(R,$,Z){return M.H.useActionState(R,$,Z)},it.useCallback=function(R,$){return M.H.useCallback(R,$)},it.useContext=function(R){return M.H.useContext(R)},it.useDebugValue=function(){},it.useDeferredValue=function(R,$){return M.H.useDeferredValue(R,$)},it.useEffect=function(R,$){return M.H.useEffect(R,$)},it.useEffectEvent=function(R){return M.H.useEffectEvent(R)},it.useId=function(){return M.H.useId()},it.useImperativeHandle=function(R,$,Z){return M.H.useImperativeHandle(R,$,Z)},it.useInsertionEffect=function(R,$){return M.H.useInsertionEffect(R,$)},it.useLayoutEffect=function(R,$){return M.H.useLayoutEffect(R,$)},it.useMemo=function(R,$){return M.H.useMemo(R,$)},it.useOptimistic=function(R,$){return M.H.useOptimistic(R,$)},it.useReducer=function(R,$,Z){return M.H.useReducer(R,$,Z)},it.useRef=function(R){return M.H.useRef(R)},it.useState=function(R){return M.H.useState(R)},it.useSyncExternalStore=function(R,$,Z){return M.H.useSyncExternalStore(R,$,Z)},it.useTransition=function(){return M.H.useTransition()},it.version="19.2.0",it}var l3;function Pf(){return l3||(l3=1,Ix.exports=b7()),Ix.exports}var A=Pf();const nt=U1(A);var Lx={exports:{}},wd={},jx={exports:{}},Px={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c3;function w7(){return c3||(c3=1,(function(t){function e(H,J){var q=H.length;H.push(J);e:for(;0<q;){var F=q-1>>>1,z=H[F];if(0<i(z,J))H[F]=J,H[q]=z,q=F;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var J=H[0],q=H.pop();if(q!==J){H[0]=q;e:for(var F=0,z=H.length,R=z>>>1;F<R;){var $=2*(F+1)-1,Z=H[$],pe=$+1,ge=H[pe];if(0>i(Z,q))pe<z&&0>i(ge,Z)?(H[F]=ge,H[pe]=q,F=pe):(H[F]=Z,H[$]=q,F=$);else if(pe<z&&0>i(ge,q))H[F]=ge,H[pe]=q,F=pe;else break e}}return J}function i(H,J){var q=H.sortIndex-J.sortIndex;return q!==0?q:H.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],d=[],f=1,p=null,m=3,y=!1,v=!1,C=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function k(H){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=H)r(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(d)}}function O(H){if(C=!1,k(H),!v)if(n(c)!==null)v=!0,I||(I=!0,fe());else{var J=n(d);J!==null&&xe(O,J.startTime-H)}}var I=!1,M=-1,L=5,B=-1;function le(){return E?!0:!(t.unstable_now()-B<L)}function ae(){if(E=!1,I){var H=t.unstable_now();B=H;var J=!0;try{e:{v=!1,C&&(C=!1,_(M),M=-1),y=!0;var q=m;try{t:{for(k(H),p=n(c);p!==null&&!(p.expirationTime>H&&le());){var F=p.callback;if(typeof F=="function"){p.callback=null,m=p.priorityLevel;var z=F(p.expirationTime<=H);if(H=t.unstable_now(),typeof z=="function"){p.callback=z,k(H),J=!0;break t}p===n(c)&&r(c),k(H)}else r(c);p=n(c)}if(p!==null)J=!0;else{var R=n(d);R!==null&&xe(O,R.startTime-H),J=!1}}break e}finally{p=null,m=q,y=!1}J=void 0}}finally{J?fe():I=!1}}}var fe;if(typeof N=="function")fe=function(){N(ae)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,de=W.port2;W.port1.onmessage=ae,fe=function(){de.postMessage(null)}}else fe=function(){S(ae,0)};function xe(H,J){M=S(function(){H(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var q=m;m=J;try{return H()}finally{m=q}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=m;m=H;try{return J()}finally{m=q}},t.unstable_scheduleCallback=function(H,J,q){var F=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?F+q:F):q=F,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=q+z,H={id:f++,callback:J,priorityLevel:H,startTime:q,expirationTime:z,sortIndex:-1},q>F?(H.sortIndex=q,e(d,H),n(c)===null&&H===n(d)&&(C?(_(M),M=-1):C=!0,xe(O,q-F))):(H.sortIndex=z,e(c,H),v||y||(v=!0,I||(I=!0,fe()))),H},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(H){var J=m;return function(){var q=m;m=J;try{return H.apply(this,arguments)}finally{m=q}}}})(Px)),Px}var u3;function C7(){return u3||(u3=1,jx.exports=w7()),jx.exports}var Bx={exports:{}},Mr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d3;function E7(){if(d3)return Mr;d3=1;var t=Pf();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Mr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mr.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(c,d,null,f)},Mr.flushSync=function(c){var d=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=d,r.p=f,r.d.f()}},Mr.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},Mr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Mr.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=o(f,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:y}):f==="script"&&r.d.X(c,{crossOrigin:p,integrity:m,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Mr.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=o(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},Mr.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=o(f,d.crossOrigin);r.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Mr.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=o(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},Mr.requestFormReset=function(c){r.d.r(c)},Mr.unstable_batchedUpdates=function(c,d){return c(d)},Mr.useFormState=function(c,d,f){return s.H.useFormState(c,d,f)},Mr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Mr.version="19.2.0",Mr}var f3;function qk(){if(f3)return Bx.exports;f3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bx.exports=E7(),Bx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h3;function S7(){if(h3)return wd;h3=1;var t=C7(),e=Pf(),n=qk();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function d(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(r(188));return u!==l?null:l}for(var h=l,x=u;;){var b=h.return;if(b===null)break;var w=b.alternate;if(w===null){if(x=b.return,x!==null){h=x;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===h)return c(b),l;if(w===x)return c(b),u;w=w.sibling}throw Error(r(188))}if(h.return!==x.return)h=b,x=w;else{for(var T=!1,D=b.child;D;){if(D===h){T=!0,h=b,x=w;break}if(D===x){T=!0,x=b,h=w;break}D=D.sibling}if(!T){for(D=w.child;D;){if(D===h){T=!0,h=w,x=b;break}if(D===x){T=!0,x=w,h=b;break}D=D.sibling}if(!T)throw Error(r(189))}}if(h.alternate!==x)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?l:u}function f(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=f(l),u!==null)return u;l=l.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function fe(l){return l===null||typeof l!="object"?null:(l=ae&&l[ae]||l["@@iterator"],typeof l=="function"?l:null)}var W=Symbol.for("react.client.reference");function de(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===W?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case C:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case v:return"Portal";case N:return l.displayName||"Context";case _:return(l._context.displayName||"Context")+".Consumer";case k:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case M:return u=l.displayName||null,u!==null?u:de(l.type)||"Memo";case L:u=l._payload,l=l._init;try{return de(l(u))}catch{}}return null}var xe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},F=[],z=-1;function R(l){return{current:l}}function $(l){0>z||(l.current=F[z],F[z]=null,z--)}function Z(l,u){z++,F[z]=l.current,l.current=u}var pe=R(null),ge=R(null),Q=R(null),Ee=R(null);function ie(l,u){switch(Z(Q,u),Z(ge,l),Z(pe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?NA(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=NA(u),l=kA(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}$(pe),Z(pe,l)}function K(){$(pe),$(ge),$(Q)}function oe(l){l.memoizedState!==null&&Z(Ee,l);var u=pe.current,h=kA(u,l.type);u!==h&&(Z(ge,l),Z(pe,h))}function ke(l){ge.current===l&&($(pe),$(ge)),Ee.current===l&&($(Ee),gd._currentValue=q)}var Oe,Ue;function Ke(l){if(Oe===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Oe=u&&u[1]||"",Ue=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+l+Ue}var mt=!1;function $t(l,u){if(!l||mt)return"";mt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(u){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(ce){var se=ce}Reflect.construct(l,[],be)}else{try{be.call()}catch(ce){se=ce}l.call(be.prototype)}}else{try{throw Error()}catch(ce){se=ce}(be=l())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(ce){if(ce&&se&&typeof ce.stack=="string")return[ce.stack,se.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=x.DetermineComponentFrameRoot(),T=w[0],D=w[1];if(T&&D){var U=T.split(`
`),re=D.split(`
`);for(b=x=0;x<U.length&&!U[x].includes("DetermineComponentFrameRoot");)x++;for(;b<re.length&&!re[b].includes("DetermineComponentFrameRoot");)b++;if(x===U.length||b===re.length)for(x=U.length-1,b=re.length-1;1<=x&&0<=b&&U[x]!==re[b];)b--;for(;1<=x&&0<=b;x--,b--)if(U[x]!==re[b]){if(x!==1||b!==1)do if(x--,b--,0>b||U[x]!==re[b]){var me=`
`+U[x].replace(" at new "," at ");return l.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",l.displayName)),me}while(1<=x&&0<=b);break}}}finally{mt=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?Ke(h):""}function je(l,u){switch(l.tag){case 26:case 27:case 5:return Ke(l.type);case 16:return Ke("Lazy");case 13:return l.child!==u&&u!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return $t(l.type,!1);case 11:return $t(l.type.render,!1);case 1:return $t(l.type,!0);case 31:return Ke("Activity");default:return""}}function Je(l){try{var u="",h=null;do u+=je(l,h),h=l,l=l.return;while(l);return u}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var Ie=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,Ve=t.unstable_cancelCallback,wn=t.unstable_shouldYield,Jr=t.unstable_requestPaint,an=t.unstable_now,Ha=t.unstable_getCurrentPriorityLevel,pi=t.unstable_ImmediatePriority,On=t.unstable_UserBlockingPriority,Mn=t.unstable_NormalPriority,Gt=t.unstable_LowPriority,mi=t.unstable_IdlePriority,pr=t.log,ki=t.unstable_setDisableYieldValue,gi=null,pn=null;function mr(l){if(typeof pr=="function"&&ki(l),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(gi,l)}catch{}}var Ln=Math.clz32?Math.clz32:ta,Ho=Math.log,Gn=Math.LN2;function ta(l){return l>>>=0,l===0?32:31-(Ho(l)/Gn|0)|0}var Qr=256,Oi=262144,At=4194304;function Bt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Cn(l,u,h){var x=l.pendingLanes;if(x===0)return 0;var b=0,w=l.suspendedLanes,T=l.pingedLanes;l=l.warmLanes;var D=x&134217727;return D!==0?(x=D&~w,x!==0?b=Bt(x):(T&=D,T!==0?b=Bt(T):h||(h=D&~l,h!==0&&(b=Bt(h))))):(D=x&~w,D!==0?b=Bt(D):T!==0?b=Bt(T):h||(h=x&~l,h!==0&&(b=Bt(h)))),b===0?0:u!==0&&u!==b&&(u&w)===0&&(w=b&-b,h=u&-u,w>=h||w===32&&(h&4194048)!==0)?u:b}function Wt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function _t(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tt(){var l=At;return At<<=1,(At&62914560)===0&&(At=4194304),l}function nr(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function kr(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function mn(l,u,h,x,b,w){var T=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var D=l.entanglements,U=l.expirationTimes,re=l.hiddenUpdates;for(h=T&~h;0<h;){var me=31-Ln(h),be=1<<me;D[me]=0,U[me]=-1;var se=re[me];if(se!==null)for(re[me]=null,me=0;me<se.length;me++){var ce=se[me];ce!==null&&(ce.lane&=-536870913)}h&=~be}x!==0&&zr(l,x,0),w!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=w&~(T&~u))}function zr(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var x=31-Ln(u);l.entangledLanes|=u,l.entanglements[x]=l.entanglements[x]|1073741824|h&261930}function rr(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var x=31-Ln(h),b=1<<x;b&u|l[x]&u&&(l[x]|=u),h&=~b}}function Or(l,u){var h=u&-u;return h=(h&42)!==0?1:jn(h),(h&(l.suspendedLanes|u))!==0?0:h}function jn(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function xi(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function V(){var l=J.p;return l!==0?l:(l=window.event,l===void 0?32:JA(l.type))}function X(l,u){var h=J.p;try{return J.p=l,u()}finally{J.p=h}}var Ce=Math.random().toString(36).slice(2),Se="__reactFiber$"+Ce,ue="__reactProps$"+Ce,ve="__reactContainer$"+Ce,Ae="__reactEvents$"+Ce,et="__reactListeners$"+Ce,Fe="__reactHandles$"+Ce,st="__reactResources$"+Ce,rt="__reactMarker$"+Ce;function gn(l){delete l[Se],delete l[ue],delete l[Ae],delete l[et],delete l[Fe]}function yt(l){var u=l[Se];if(u)return u;for(var h=l.parentNode;h;){if(u=h[ve]||h[Se]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=jA(l);l!==null;){if(h=l[Se])return h;l=jA(l)}return u}l=h,h=l.parentNode}return null}function Mt(l){if(l=l[Se]||l[ve]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function ei(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function Mi(l){var u=l[st];return u||(u=l[st]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Pn(l){l[rt]=!0}var Ur=new Set,lh={};function Di(l,u){Va(l,u),Va(l+"Capture",u)}function Va(l,u){for(lh[l]=u,l=0;l<u.length;l++)Ur.add(u[l])}var ku=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ou={},Mu={};function Nm(l){return Ie.call(Mu,l)?!0:Ie.call(Ou,l)?!1:ku.test(l)?Mu[l]=!0:(Ou[l]=!0,!1)}function Du(l,u,h){if(Nm(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var x=u.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function ql(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function ee(l,u,h,x){if(x===null)l.removeAttribute(h);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+x)}}function P(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Me(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function _e(l,u,h){var x=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var b=x.get,w=x.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(T){h=""+T,w.call(this,T)}}),Object.defineProperty(l,u,{enumerable:x.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function ft(l){if(!l._valueTracker){var u=Me(l)?"checked":"value";l._valueTracker=_e(l,u,""+l[u])}}function qt(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),x="";return l&&(x=Me(l)?l.checked?"true":"false":l.value),l=x,l!==h?(u.setValue(l),!0):!1}function xn(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var wa=/[\n"\\]/g;function yn(l){return l.replace(wa,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function yi(l,u,h,x,b,w,T,D){l.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?l.type=T:l.removeAttribute("type"),u!=null?T==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+P(u)):l.value!==""+P(u)&&(l.value=""+P(u)):T!=="submit"&&T!=="reset"||l.removeAttribute("value"),u!=null?Vo(l,T,P(u)):h!=null?Vo(l,T,P(h)):x!=null&&l.removeAttribute("value"),b==null&&w!=null&&(l.defaultChecked=!!w),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?l.name=""+P(D):l.removeAttribute("name")}function Ca(l,u,h,x,b,w,T,D){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(l.type=w),u!=null||h!=null){if(!(w!=="submit"&&w!=="reset"||u!=null)){ft(l);return}h=h!=null?""+P(h):"",u=u!=null?""+P(u):h,D||u===l.value||(l.value=u),l.defaultValue=u}x=x??b,x=typeof x!="function"&&typeof x!="symbol"&&!!x,l.checked=D?l.checked:!!x,l.defaultChecked=!!x,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(l.name=T),ft(l)}function Vo(l,u,h){u==="number"&&xn(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function Kl(l,u,h,x){if(l=l.options,u){u={};for(var b=0;b<h.length;b++)u["$"+h[b]]=!0;for(h=0;h<l.length;h++)b=u.hasOwnProperty("$"+l[h].value),l[h].selected!==b&&(l[h].selected=b),b&&x&&(l[h].defaultSelected=!0)}else{for(h=""+P(h),u=null,b=0;b<l.length;b++){if(l[b].value===h){l[b].selected=!0,x&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function EC(l,u,h){if(u!=null&&(u=""+P(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+P(h):""}function SC(l,u,h,x){if(u==null){if(x!=null){if(h!=null)throw Error(r(92));if(xe(x)){if(1<x.length)throw Error(r(93));x=x[0]}h=x}h==null&&(h=""),u=h}h=P(u),l.defaultValue=h,x=l.textContent,x===h&&x!==""&&x!==null&&(l.value=x),ft(l)}function Xl(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var fI=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function AC(l,u,h){var x=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?x?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":x?l.setProperty(u,h):typeof h!="number"||h===0||fI.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function _C(l,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,h!=null){for(var x in h)!h.hasOwnProperty(x)||u!=null&&u.hasOwnProperty(x)||(x.indexOf("--")===0?l.setProperty(x,""):x==="float"?l.cssFloat="":l[x]="");for(var b in u)x=u[b],u.hasOwnProperty(b)&&h[b]!==x&&AC(l,b,x)}else for(var w in u)u.hasOwnProperty(w)&&AC(l,w,u[w])}function km(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hI=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ch(l){return pI.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function $a(){}var Om=null;function Mm(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Yl=null,Zl=null;function TC(l){var u=Mt(l);if(u&&(l=u.stateNode)){var h=l[ue]||null;e:switch(l=u.stateNode,u.type){case"input":if(yi(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+yn(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var x=h[u];if(x!==l&&x.form===l.form){var b=x[ue]||null;if(!b)throw Error(r(90));yi(x,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<h.length;u++)x=h[u],x.form===l.form&&qt(x)}break e;case"textarea":EC(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Kl(l,!!h.multiple,u,!1)}}}var Dm=!1;function NC(l,u,h){if(Dm)return l(u,h);Dm=!0;try{var x=l(u);return x}finally{if(Dm=!1,(Yl!==null||Zl!==null)&&(Yh(),Yl&&(u=Yl,l=Zl,Zl=Yl=null,TC(u),l)))for(u=0;u<l.length;u++)TC(l[u])}}function Ru(l,u){var h=l.stateNode;if(h===null)return null;var x=h[ue]||null;if(x===null)return null;h=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rm=!1;if(Ga)try{var Iu={};Object.defineProperty(Iu,"passive",{get:function(){Rm=!0}}),window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{Rm=!1}var ks=null,Im=null,uh=null;function kC(){if(uh)return uh;var l,u=Im,h=u.length,x,b="value"in ks?ks.value:ks.textContent,w=b.length;for(l=0;l<h&&u[l]===b[l];l++);var T=h-l;for(x=1;x<=T&&u[h-x]===b[w-x];x++);return uh=b.slice(l,1<x?1-x:void 0)}function dh(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function fh(){return!0}function OC(){return!1}function ti(l){function u(h,x,b,w,T){this._reactName=h,this._targetInst=b,this.type=x,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var D in l)l.hasOwnProperty(D)&&(h=l[D],this[D]=h?h(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?fh:OC,this.isPropagationStopped=OC,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=fh)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=fh)},persist:function(){},isPersistent:fh}),u}var $o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hh=ti($o),Lu=p({},$o,{view:0,detail:0}),mI=ti(Lu),Lm,jm,ju,ph=p({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bm,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ju&&(ju&&l.type==="mousemove"?(Lm=l.screenX-ju.screenX,jm=l.screenY-ju.screenY):jm=Lm=0,ju=l),Lm)},movementY:function(l){return"movementY"in l?l.movementY:jm}}),MC=ti(ph),gI=p({},ph,{dataTransfer:0}),xI=ti(gI),yI=p({},Lu,{relatedTarget:0}),Pm=ti(yI),vI=p({},$o,{animationName:0,elapsedTime:0,pseudoElement:0}),bI=ti(vI),wI=p({},$o,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),CI=ti(wI),EI=p({},$o,{data:0}),DC=ti(EI),SI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_I={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TI(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=_I[l])?!!u[l]:!1}function Bm(){return TI}var NI=p({},Lu,{key:function(l){if(l.key){var u=SI[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=dh(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?AI[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bm,charCode:function(l){return l.type==="keypress"?dh(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?dh(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),kI=ti(NI),OI=p({},ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RC=ti(OI),MI=p({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bm}),DI=ti(MI),RI=p({},$o,{propertyName:0,elapsedTime:0,pseudoElement:0}),II=ti(RI),LI=p({},ph,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),jI=ti(LI),PI=p({},$o,{newState:0,oldState:0}),BI=ti(PI),FI=[9,13,27,32],Fm=Ga&&"CompositionEvent"in window,Pu=null;Ga&&"documentMode"in document&&(Pu=document.documentMode);var zI=Ga&&"TextEvent"in window&&!Pu,IC=Ga&&(!Fm||Pu&&8<Pu&&11>=Pu),LC=" ",jC=!1;function PC(l,u){switch(l){case"keyup":return FI.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BC(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Jl=!1;function UI(l,u){switch(l){case"compositionend":return BC(u);case"keypress":return u.which!==32?null:(jC=!0,LC);case"textInput":return l=u.data,l===LC&&jC?null:l;default:return null}}function HI(l,u){if(Jl)return l==="compositionend"||!Fm&&PC(l,u)?(l=kC(),uh=Im=ks=null,Jl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return IC&&u.locale!=="ko"?null:u.data;default:return null}}var VI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FC(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!VI[l.type]:u==="textarea"}function zC(l,u,h,x){Yl?Zl?Zl.push(x):Zl=[x]:Yl=x,u=rp(u,"onChange"),0<u.length&&(h=new hh("onChange","change",null,h,x),l.push({event:h,listeners:u}))}var Bu=null,Fu=null;function $I(l){CA(l,0)}function mh(l){var u=ei(l);if(qt(u))return l}function UC(l,u){if(l==="change")return u}var HC=!1;if(Ga){var zm;if(Ga){var Um="oninput"in document;if(!Um){var VC=document.createElement("div");VC.setAttribute("oninput","return;"),Um=typeof VC.oninput=="function"}zm=Um}else zm=!1;HC=zm&&(!document.documentMode||9<document.documentMode)}function $C(){Bu&&(Bu.detachEvent("onpropertychange",GC),Fu=Bu=null)}function GC(l){if(l.propertyName==="value"&&mh(Fu)){var u=[];zC(u,Fu,l,Mm(l)),NC($I,u)}}function GI(l,u,h){l==="focusin"?($C(),Bu=u,Fu=h,Bu.attachEvent("onpropertychange",GC)):l==="focusout"&&$C()}function WI(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return mh(Fu)}function qI(l,u){if(l==="click")return mh(u)}function KI(l,u){if(l==="input"||l==="change")return mh(u)}function XI(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var vi=typeof Object.is=="function"?Object.is:XI;function zu(l,u){if(vi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),x=Object.keys(u);if(h.length!==x.length)return!1;for(x=0;x<h.length;x++){var b=h[x];if(!Ie.call(u,b)||!vi(l[b],u[b]))return!1}return!0}function WC(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function qC(l,u){var h=WC(l);l=0;for(var x;h;){if(h.nodeType===3){if(x=l+h.textContent.length,l<=u&&x>=u)return{node:h,offset:u-l};l=x}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=WC(h)}}function KC(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?KC(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function XC(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=xn(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=xn(l.document)}return u}function Hm(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var YI=Ga&&"documentMode"in document&&11>=document.documentMode,Ql=null,Vm=null,Uu=null,$m=!1;function YC(l,u,h){var x=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;$m||Ql==null||Ql!==xn(x)||(x=Ql,"selectionStart"in x&&Hm(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Uu&&zu(Uu,x)||(Uu=x,x=rp(Vm,"onSelect"),0<x.length&&(u=new hh("onSelect","select",null,u,h),l.push({event:u,listeners:x}),u.target=Ql)))}function Go(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var ec={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionrun:Go("Transition","TransitionRun"),transitionstart:Go("Transition","TransitionStart"),transitioncancel:Go("Transition","TransitionCancel"),transitionend:Go("Transition","TransitionEnd")},Gm={},ZC={};Ga&&(ZC=document.createElement("div").style,"AnimationEvent"in window||(delete ec.animationend.animation,delete ec.animationiteration.animation,delete ec.animationstart.animation),"TransitionEvent"in window||delete ec.transitionend.transition);function Wo(l){if(Gm[l])return Gm[l];if(!ec[l])return l;var u=ec[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in ZC)return Gm[l]=u[h];return l}var JC=Wo("animationend"),QC=Wo("animationiteration"),eE=Wo("animationstart"),ZI=Wo("transitionrun"),JI=Wo("transitionstart"),QI=Wo("transitioncancel"),tE=Wo("transitionend"),nE=new Map,Wm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wm.push("scrollEnd");function na(l,u){nE.set(l,u),Di(u,[l])}var gh=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ri=[],tc=0,qm=0;function xh(){for(var l=tc,u=qm=tc=0;u<l;){var h=Ri[u];Ri[u++]=null;var x=Ri[u];Ri[u++]=null;var b=Ri[u];Ri[u++]=null;var w=Ri[u];if(Ri[u++]=null,x!==null&&b!==null){var T=x.pending;T===null?b.next=b:(b.next=T.next,T.next=b),x.pending=b}w!==0&&rE(h,b,w)}}function yh(l,u,h,x){Ri[tc++]=l,Ri[tc++]=u,Ri[tc++]=h,Ri[tc++]=x,qm|=x,l.lanes|=x,l=l.alternate,l!==null&&(l.lanes|=x)}function Km(l,u,h,x){return yh(l,u,h,x),vh(l)}function qo(l,u){return yh(l,null,null,u),vh(l)}function rE(l,u,h){l.lanes|=h;var x=l.alternate;x!==null&&(x.lanes|=h);for(var b=!1,w=l.return;w!==null;)w.childLanes|=h,x=w.alternate,x!==null&&(x.childLanes|=h),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(b=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,b&&u!==null&&(b=31-Ln(h),l=w.hiddenUpdates,x=l[b],x===null?l[b]=[u]:x.push(u),u.lane=h|536870912),w):null}function vh(l){if(50<cd)throw cd=0,rx=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var nc={};function eL(l,u,h,x){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(l,u,h,x){return new eL(l,u,h,x)}function Xm(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Wa(l,u){var h=l.alternate;return h===null?(h=bi(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function iE(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function bh(l,u,h,x,b,w){var T=0;if(x=l,typeof l=="function")Xm(l)&&(T=1);else if(typeof l=="string")T=a7(l,h,pe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=bi(31,h,u,b),l.elementType=B,l.lanes=w,l;case C:return Ko(h.children,b,w,u);case E:T=8,b|=24;break;case S:return l=bi(12,h,u,b|2),l.elementType=S,l.lanes=w,l;case O:return l=bi(13,h,u,b),l.elementType=O,l.lanes=w,l;case I:return l=bi(19,h,u,b),l.elementType=I,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case N:T=10;break e;case _:T=9;break e;case k:T=11;break e;case M:T=14;break e;case L:T=16,x=null;break e}T=29,h=Error(r(130,l===null?"null":typeof l,"")),x=null}return u=bi(T,h,u,b),u.elementType=l,u.type=x,u.lanes=w,u}function Ko(l,u,h,x){return l=bi(7,l,x,u),l.lanes=h,l}function Ym(l,u,h){return l=bi(6,l,null,u),l.lanes=h,l}function aE(l){var u=bi(18,null,null,0);return u.stateNode=l,u}function Zm(l,u,h){return u=bi(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var sE=new WeakMap;function Ii(l,u){if(typeof l=="object"&&l!==null){var h=sE.get(l);return h!==void 0?h:(u={value:l,source:u,stack:Je(u)},sE.set(l,u),u)}return{value:l,source:u,stack:Je(u)}}var rc=[],ic=0,wh=null,Hu=0,Li=[],ji=0,Os=null,Ea=1,Sa="";function qa(l,u){rc[ic++]=Hu,rc[ic++]=wh,wh=l,Hu=u}function oE(l,u,h){Li[ji++]=Ea,Li[ji++]=Sa,Li[ji++]=Os,Os=l;var x=Ea;l=Sa;var b=32-Ln(x)-1;x&=~(1<<b),h+=1;var w=32-Ln(u)+b;if(30<w){var T=b-b%5;w=(x&(1<<T)-1).toString(32),x>>=T,b-=T,Ea=1<<32-Ln(u)+b|h<<b|x,Sa=w+l}else Ea=1<<w|h<<b|x,Sa=l}function Jm(l){l.return!==null&&(qa(l,1),oE(l,1,0))}function Qm(l){for(;l===wh;)wh=rc[--ic],rc[ic]=null,Hu=rc[--ic],rc[ic]=null;for(;l===Os;)Os=Li[--ji],Li[ji]=null,Sa=Li[--ji],Li[ji]=null,Ea=Li[--ji],Li[ji]=null}function lE(l,u){Li[ji++]=Ea,Li[ji++]=Sa,Li[ji++]=Os,Ea=u.id,Sa=u.overflow,Os=l}var gr=null,sn=null,vt=!1,Ms=null,Pi=!1,eg=Error(r(519));function Ds(l){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vu(Ii(u,l)),eg}function cE(l){var u=l.stateNode,h=l.type,x=l.memoizedProps;switch(u[Se]=l,u[ue]=x,h){case"dialog":pt("cancel",u),pt("close",u);break;case"iframe":case"object":case"embed":pt("load",u);break;case"video":case"audio":for(h=0;h<dd.length;h++)pt(dd[h],u);break;case"source":pt("error",u);break;case"img":case"image":case"link":pt("error",u),pt("load",u);break;case"details":pt("toggle",u);break;case"input":pt("invalid",u),Ca(u,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":pt("invalid",u);break;case"textarea":pt("invalid",u),SC(u,x.value,x.defaultValue,x.children)}h=x.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||x.suppressHydrationWarning===!0||_A(u.textContent,h)?(x.popover!=null&&(pt("beforetoggle",u),pt("toggle",u)),x.onScroll!=null&&pt("scroll",u),x.onScrollEnd!=null&&pt("scrollend",u),x.onClick!=null&&(u.onclick=$a),u=!0):u=!1,u||Ds(l,!0)}function uE(l){for(gr=l.return;gr;)switch(gr.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:gr=gr.return}}function ac(l){if(l!==gr)return!1;if(!vt)return uE(l),vt=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||yx(l.type,l.memoizedProps)),h=!h),h&&sn&&Ds(l),uE(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));sn=LA(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));sn=LA(l)}else u===27?(u=sn,Ws(l.type)?(l=Ex,Ex=null,sn=l):sn=u):sn=gr?Fi(l.stateNode.nextSibling):null;return!0}function Xo(){sn=gr=null,vt=!1}function tg(){var l=Ms;return l!==null&&(ai===null?ai=l:ai.push.apply(ai,l),Ms=null),l}function Vu(l){Ms===null?Ms=[l]:Ms.push(l)}var ng=R(null),Yo=null,Ka=null;function Rs(l,u,h){Z(ng,u._currentValue),u._currentValue=h}function Xa(l){l._currentValue=ng.current,$(ng)}function rg(l,u,h){for(;l!==null;){var x=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),l===h)break;l=l.return}}function ig(l,u,h,x){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var w=b.dependencies;if(w!==null){var T=b.child;w=w.firstContext;e:for(;w!==null;){var D=w;w=b;for(var U=0;U<u.length;U++)if(D.context===u[U]){w.lanes|=h,D=w.alternate,D!==null&&(D.lanes|=h),rg(w.return,h,l),x||(T=null);break e}w=D.next}}else if(b.tag===18){if(T=b.return,T===null)throw Error(r(341));T.lanes|=h,w=T.alternate,w!==null&&(w.lanes|=h),rg(T,h,l),T=null}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===l){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}}function sc(l,u,h,x){l=null;for(var b=u,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var T=b.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var D=b.type;vi(b.pendingProps.value,T.value)||(l!==null?l.push(D):l=[D])}}else if(b===Ee.current){if(T=b.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(gd):l=[gd])}b=b.return}l!==null&&ig(u,l,h,x),u.flags|=262144}function Ch(l){for(l=l.firstContext;l!==null;){if(!vi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Zo(l){Yo=l,Ka=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function xr(l){return dE(Yo,l)}function Eh(l,u){return Yo===null&&Zo(l),dE(l,u)}function dE(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Ka===null){if(l===null)throw Error(r(308));Ka=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Ka=Ka.next=u;return h}var tL=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,x){l.push(x)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},nL=t.unstable_scheduleCallback,rL=t.unstable_NormalPriority,Bn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ag(){return{controller:new tL,data:new Map,refCount:0}}function $u(l){l.refCount--,l.refCount===0&&nL(rL,function(){l.controller.abort()})}var Gu=null,sg=0,oc=0,lc=null;function iL(l,u){if(Gu===null){var h=Gu=[];sg=0,oc=cx(),lc={status:"pending",value:void 0,then:function(x){h.push(x)}}}return sg++,u.then(fE,fE),u}function fE(){if(--sg===0&&Gu!==null){lc!==null&&(lc.status="fulfilled");var l=Gu;Gu=null,oc=0,lc=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function aL(l,u){var h=[],x={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return l.then(function(){x.status="fulfilled",x.value=u;for(var b=0;b<h.length;b++)(0,h[b])(u)},function(b){for(x.status="rejected",x.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),x}var hE=H.S;H.S=function(l,u){YS=an(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&iL(l,u),hE!==null&&hE(l,u)};var Jo=R(null);function og(){var l=Jo.current;return l!==null?l:Kt.pooledCache}function Sh(l,u){u===null?Z(Jo,Jo.current):Z(Jo,u.pool)}function pE(){var l=og();return l===null?null:{parent:Bn._currentValue,pool:l}}var cc=Error(r(460)),lg=Error(r(474)),Ah=Error(r(542)),_h={then:function(){}};function mE(l){return l=l.status,l==="fulfilled"||l==="rejected"}function gE(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then($a,$a),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,yE(l),l;default:if(typeof u.status=="string")u.then($a,$a);else{if(l=Kt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(x){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=x}},function(x){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=x}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,yE(l),l}throw el=u,cc}}function Qo(l){try{var u=l._init;return u(l._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(el=h,cc):h}}var el=null;function xE(){if(el===null)throw Error(r(459));var l=el;return el=null,l}function yE(l){if(l===cc||l===Ah)throw Error(r(483))}var uc=null,Wu=0;function Th(l){var u=Wu;return Wu+=1,uc===null&&(uc=[]),gE(uc,l,u)}function qu(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function Nh(l,u){throw u.$$typeof===m?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function vE(l){function u(Y,G){if(l){var ne=Y.deletions;ne===null?(Y.deletions=[G],Y.flags|=16):ne.push(G)}}function h(Y,G){if(!l)return null;for(;G!==null;)u(Y,G),G=G.sibling;return null}function x(Y){for(var G=new Map;Y!==null;)Y.key!==null?G.set(Y.key,Y):G.set(Y.index,Y),Y=Y.sibling;return G}function b(Y,G){return Y=Wa(Y,G),Y.index=0,Y.sibling=null,Y}function w(Y,G,ne){return Y.index=ne,l?(ne=Y.alternate,ne!==null?(ne=ne.index,ne<G?(Y.flags|=67108866,G):ne):(Y.flags|=67108866,G)):(Y.flags|=1048576,G)}function T(Y){return l&&Y.alternate===null&&(Y.flags|=67108866),Y}function D(Y,G,ne,ye){return G===null||G.tag!==6?(G=Ym(ne,Y.mode,ye),G.return=Y,G):(G=b(G,ne),G.return=Y,G)}function U(Y,G,ne,ye){var We=ne.type;return We===C?me(Y,G,ne.props.children,ye,ne.key):G!==null&&(G.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===L&&Qo(We)===G.type)?(G=b(G,ne.props),qu(G,ne),G.return=Y,G):(G=bh(ne.type,ne.key,ne.props,null,Y.mode,ye),qu(G,ne),G.return=Y,G)}function re(Y,G,ne,ye){return G===null||G.tag!==4||G.stateNode.containerInfo!==ne.containerInfo||G.stateNode.implementation!==ne.implementation?(G=Zm(ne,Y.mode,ye),G.return=Y,G):(G=b(G,ne.children||[]),G.return=Y,G)}function me(Y,G,ne,ye,We){return G===null||G.tag!==7?(G=Ko(ne,Y.mode,ye,We),G.return=Y,G):(G=b(G,ne),G.return=Y,G)}function be(Y,G,ne){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Ym(""+G,Y.mode,ne),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return ne=bh(G.type,G.key,G.props,null,Y.mode,ne),qu(ne,G),ne.return=Y,ne;case v:return G=Zm(G,Y.mode,ne),G.return=Y,G;case L:return G=Qo(G),be(Y,G,ne)}if(xe(G)||fe(G))return G=Ko(G,Y.mode,ne,null),G.return=Y,G;if(typeof G.then=="function")return be(Y,Th(G),ne);if(G.$$typeof===N)return be(Y,Eh(Y,G),ne);Nh(Y,G)}return null}function se(Y,G,ne,ye){var We=G!==null?G.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return We!==null?null:D(Y,G,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return ne.key===We?U(Y,G,ne,ye):null;case v:return ne.key===We?re(Y,G,ne,ye):null;case L:return ne=Qo(ne),se(Y,G,ne,ye)}if(xe(ne)||fe(ne))return We!==null?null:me(Y,G,ne,ye,null);if(typeof ne.then=="function")return se(Y,G,Th(ne),ye);if(ne.$$typeof===N)return se(Y,G,Eh(Y,ne),ye);Nh(Y,ne)}return null}function ce(Y,G,ne,ye,We){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Y=Y.get(ne)||null,D(G,Y,""+ye,We);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case y:return Y=Y.get(ye.key===null?ne:ye.key)||null,U(G,Y,ye,We);case v:return Y=Y.get(ye.key===null?ne:ye.key)||null,re(G,Y,ye,We);case L:return ye=Qo(ye),ce(Y,G,ne,ye,We)}if(xe(ye)||fe(ye))return Y=Y.get(ne)||null,me(G,Y,ye,We,null);if(typeof ye.then=="function")return ce(Y,G,ne,Th(ye),We);if(ye.$$typeof===N)return ce(Y,G,ne,Eh(G,ye),We);Nh(G,ye)}return null}function Pe(Y,G,ne,ye){for(var We=null,Ct=null,He=G,ot=G=0,xt=null;He!==null&&ot<ne.length;ot++){He.index>ot?(xt=He,He=null):xt=He.sibling;var Et=se(Y,He,ne[ot],ye);if(Et===null){He===null&&(He=xt);break}l&&He&&Et.alternate===null&&u(Y,He),G=w(Et,G,ot),Ct===null?We=Et:Ct.sibling=Et,Ct=Et,He=xt}if(ot===ne.length)return h(Y,He),vt&&qa(Y,ot),We;if(He===null){for(;ot<ne.length;ot++)He=be(Y,ne[ot],ye),He!==null&&(G=w(He,G,ot),Ct===null?We=He:Ct.sibling=He,Ct=He);return vt&&qa(Y,ot),We}for(He=x(He);ot<ne.length;ot++)xt=ce(He,Y,ot,ne[ot],ye),xt!==null&&(l&&xt.alternate!==null&&He.delete(xt.key===null?ot:xt.key),G=w(xt,G,ot),Ct===null?We=xt:Ct.sibling=xt,Ct=xt);return l&&He.forEach(function(Zs){return u(Y,Zs)}),vt&&qa(Y,ot),We}function Ze(Y,G,ne,ye){if(ne==null)throw Error(r(151));for(var We=null,Ct=null,He=G,ot=G=0,xt=null,Et=ne.next();He!==null&&!Et.done;ot++,Et=ne.next()){He.index>ot?(xt=He,He=null):xt=He.sibling;var Zs=se(Y,He,Et.value,ye);if(Zs===null){He===null&&(He=xt);break}l&&He&&Zs.alternate===null&&u(Y,He),G=w(Zs,G,ot),Ct===null?We=Zs:Ct.sibling=Zs,Ct=Zs,He=xt}if(Et.done)return h(Y,He),vt&&qa(Y,ot),We;if(He===null){for(;!Et.done;ot++,Et=ne.next())Et=be(Y,Et.value,ye),Et!==null&&(G=w(Et,G,ot),Ct===null?We=Et:Ct.sibling=Et,Ct=Et);return vt&&qa(Y,ot),We}for(He=x(He);!Et.done;ot++,Et=ne.next())Et=ce(He,Y,ot,Et.value,ye),Et!==null&&(l&&Et.alternate!==null&&He.delete(Et.key===null?ot:Et.key),G=w(Et,G,ot),Ct===null?We=Et:Ct.sibling=Et,Ct=Et);return l&&He.forEach(function(g7){return u(Y,g7)}),vt&&qa(Y,ot),We}function Ut(Y,G,ne,ye){if(typeof ne=="object"&&ne!==null&&ne.type===C&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:e:{for(var We=ne.key;G!==null;){if(G.key===We){if(We=ne.type,We===C){if(G.tag===7){h(Y,G.sibling),ye=b(G,ne.props.children),ye.return=Y,Y=ye;break e}}else if(G.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===L&&Qo(We)===G.type){h(Y,G.sibling),ye=b(G,ne.props),qu(ye,ne),ye.return=Y,Y=ye;break e}h(Y,G);break}else u(Y,G);G=G.sibling}ne.type===C?(ye=Ko(ne.props.children,Y.mode,ye,ne.key),ye.return=Y,Y=ye):(ye=bh(ne.type,ne.key,ne.props,null,Y.mode,ye),qu(ye,ne),ye.return=Y,Y=ye)}return T(Y);case v:e:{for(We=ne.key;G!==null;){if(G.key===We)if(G.tag===4&&G.stateNode.containerInfo===ne.containerInfo&&G.stateNode.implementation===ne.implementation){h(Y,G.sibling),ye=b(G,ne.children||[]),ye.return=Y,Y=ye;break e}else{h(Y,G);break}else u(Y,G);G=G.sibling}ye=Zm(ne,Y.mode,ye),ye.return=Y,Y=ye}return T(Y);case L:return ne=Qo(ne),Ut(Y,G,ne,ye)}if(xe(ne))return Pe(Y,G,ne,ye);if(fe(ne)){if(We=fe(ne),typeof We!="function")throw Error(r(150));return ne=We.call(ne),Ze(Y,G,ne,ye)}if(typeof ne.then=="function")return Ut(Y,G,Th(ne),ye);if(ne.$$typeof===N)return Ut(Y,G,Eh(Y,ne),ye);Nh(Y,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,G!==null&&G.tag===6?(h(Y,G.sibling),ye=b(G,ne),ye.return=Y,Y=ye):(h(Y,G),ye=Ym(ne,Y.mode,ye),ye.return=Y,Y=ye),T(Y)):h(Y,G)}return function(Y,G,ne,ye){try{Wu=0;var We=Ut(Y,G,ne,ye);return uc=null,We}catch(He){if(He===cc||He===Ah)throw He;var Ct=bi(29,He,null,Y.mode);return Ct.lanes=ye,Ct.return=Y,Ct}finally{}}}var tl=vE(!0),bE=vE(!1),Is=!1;function cg(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ug(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ls(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function js(l,u,h){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(Nt&2)!==0){var b=x.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),x.pending=u,u=vh(l),rE(l,null,h),u}return yh(l,x,u,h),vh(l)}function Ku(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var x=u.lanes;x&=l.pendingLanes,h|=x,u.lanes=h,rr(l,h)}}function dg(l,u){var h=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,h===x)){var b=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var T={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};w===null?b=w=T:w=w.next=T,h=h.next}while(h!==null);w===null?b=w=u:w=w.next=u}else b=w=u;h={baseState:x.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:x.shared,callbacks:x.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var fg=!1;function Xu(){if(fg){var l=lc;if(l!==null)throw l}}function Yu(l,u,h,x){fg=!1;var b=l.updateQueue;Is=!1;var w=b.firstBaseUpdate,T=b.lastBaseUpdate,D=b.shared.pending;if(D!==null){b.shared.pending=null;var U=D,re=U.next;U.next=null,T===null?w=re:T.next=re,T=U;var me=l.alternate;me!==null&&(me=me.updateQueue,D=me.lastBaseUpdate,D!==T&&(D===null?me.firstBaseUpdate=re:D.next=re,me.lastBaseUpdate=U))}if(w!==null){var be=b.baseState;T=0,me=re=U=null,D=w;do{var se=D.lane&-536870913,ce=se!==D.lane;if(ce?(gt&se)===se:(x&se)===se){se!==0&&se===oc&&(fg=!0),me!==null&&(me=me.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Pe=l,Ze=D;se=u;var Ut=h;switch(Ze.tag){case 1:if(Pe=Ze.payload,typeof Pe=="function"){be=Pe.call(Ut,be,se);break e}be=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ze.payload,se=typeof Pe=="function"?Pe.call(Ut,be,se):Pe,se==null)break e;be=p({},be,se);break e;case 2:Is=!0}}se=D.callback,se!==null&&(l.flags|=64,ce&&(l.flags|=8192),ce=b.callbacks,ce===null?b.callbacks=[se]:ce.push(se))}else ce={lane:se,tag:D.tag,payload:D.payload,callback:D.callback,next:null},me===null?(re=me=ce,U=be):me=me.next=ce,T|=se;if(D=D.next,D===null){if(D=b.shared.pending,D===null)break;ce=D,D=ce.next,ce.next=null,b.lastBaseUpdate=ce,b.shared.pending=null}}while(!0);me===null&&(U=be),b.baseState=U,b.firstBaseUpdate=re,b.lastBaseUpdate=me,w===null&&(b.shared.lanes=0),Us|=T,l.lanes=T,l.memoizedState=be}}function wE(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function CE(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)wE(h[l],u)}var dc=R(null),kh=R(0);function EE(l,u){l=is,Z(kh,l),Z(dc,u),is=l|u.baseLanes}function hg(){Z(kh,is),Z(dc,dc.current)}function pg(){is=kh.current,$(dc),$(kh)}var wi=R(null),Bi=null;function Ps(l){var u=l.alternate;Z(Dn,Dn.current&1),Z(wi,l),Bi===null&&(u===null||dc.current!==null||u.memoizedState!==null)&&(Bi=l)}function mg(l){Z(Dn,Dn.current),Z(wi,l),Bi===null&&(Bi=l)}function SE(l){l.tag===22?(Z(Dn,Dn.current),Z(wi,l),Bi===null&&(Bi=l)):Bs()}function Bs(){Z(Dn,Dn.current),Z(wi,wi.current)}function Ci(l){$(wi),Bi===l&&(Bi=null),$(Dn)}var Dn=R(0);function Oh(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||wx(h)||Cx(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Ya=0,at=null,Ft=null,Fn=null,Mh=!1,fc=!1,nl=!1,Dh=0,Zu=0,hc=null,sL=0;function En(){throw Error(r(321))}function gg(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!vi(l[h],u[h]))return!1;return!0}function xg(l,u,h,x,b,w){return Ya=w,at=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?oS:Dg,nl=!1,w=h(x,b),nl=!1,fc&&(w=_E(u,h,x,b)),AE(l),w}function AE(l){H.H=ed;var u=Ft!==null&&Ft.next!==null;if(Ya=0,Fn=Ft=at=null,Mh=!1,Zu=0,hc=null,u)throw Error(r(300));l===null||zn||(l=l.dependencies,l!==null&&Ch(l)&&(zn=!0))}function _E(l,u,h,x){at=l;var b=0;do{if(fc&&(hc=null),Zu=0,fc=!1,25<=b)throw Error(r(301));if(b+=1,Fn=Ft=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}H.H=lS,w=u(h,x)}while(fc);return w}function oL(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?Ju(u):u,l=l.useState()[0],(Ft!==null?Ft.memoizedState:null)!==l&&(at.flags|=1024),u}function yg(){var l=Dh!==0;return Dh=0,l}function vg(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function bg(l){if(Mh){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Mh=!1}Ya=0,Fn=Ft=at=null,fc=!1,Zu=Dh=0,hc=null}function Hr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?at.memoizedState=Fn=l:Fn=Fn.next=l,Fn}function Rn(){if(Ft===null){var l=at.alternate;l=l!==null?l.memoizedState:null}else l=Ft.next;var u=Fn===null?at.memoizedState:Fn.next;if(u!==null)Fn=u,Ft=l;else{if(l===null)throw at.alternate===null?Error(r(467)):Error(r(310));Ft=l,l={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Fn===null?at.memoizedState=Fn=l:Fn=Fn.next=l}return Fn}function Rh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ju(l){var u=Zu;return Zu+=1,hc===null&&(hc=[]),l=gE(hc,l,u),u=at,(Fn===null?u.memoizedState:Fn.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?oS:Dg),l}function Ih(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ju(l);if(l.$$typeof===N)return xr(l)}throw Error(r(438,String(l)))}function wg(l){var u=null,h=at.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var x=at.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(u={data:x.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=Rh(),at.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),x=0;x<l;x++)h[x]=le;return u.index++,h}function Za(l,u){return typeof u=="function"?u(l):u}function Lh(l){var u=Rn();return Cg(u,Ft,l)}function Cg(l,u,h){var x=l.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=h;var b=l.baseQueue,w=x.pending;if(w!==null){if(b!==null){var T=b.next;b.next=w.next,w.next=T}u.baseQueue=b=w,x.pending=null}if(w=l.baseState,b===null)l.memoizedState=w;else{u=b.next;var D=T=null,U=null,re=u,me=!1;do{var be=re.lane&-536870913;if(be!==re.lane?(gt&be)===be:(Ya&be)===be){var se=re.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),be===oc&&(me=!0);else if((Ya&se)===se){re=re.next,se===oc&&(me=!0);continue}else be={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(D=U=be,T=w):U=U.next=be,at.lanes|=se,Us|=se;be=re.action,nl&&h(w,be),w=re.hasEagerState?re.eagerState:h(w,be)}else se={lane:be,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(D=U=se,T=w):U=U.next=se,at.lanes|=be,Us|=be;re=re.next}while(re!==null&&re!==u);if(U===null?T=w:U.next=D,!vi(w,l.memoizedState)&&(zn=!0,me&&(h=lc,h!==null)))throw h;l.memoizedState=w,l.baseState=T,l.baseQueue=U,x.lastRenderedState=w}return b===null&&(x.lanes=0),[l.memoizedState,x.dispatch]}function Eg(l){var u=Rn(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var x=h.dispatch,b=h.pending,w=u.memoizedState;if(b!==null){h.pending=null;var T=b=b.next;do w=l(w,T.action),T=T.next;while(T!==b);vi(w,u.memoizedState)||(zn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),h.lastRenderedState=w}return[w,x]}function TE(l,u,h){var x=at,b=Rn(),w=vt;if(w){if(h===void 0)throw Error(r(407));h=h()}else h=u();var T=!vi((Ft||b).memoizedState,h);if(T&&(b.memoizedState=h,zn=!0),b=b.queue,_g(OE.bind(null,x,b,l),[l]),b.getSnapshot!==u||T||Fn!==null&&Fn.memoizedState.tag&1){if(x.flags|=2048,pc(9,{destroy:void 0},kE.bind(null,x,b,h,u),null),Kt===null)throw Error(r(349));w||(Ya&127)!==0||NE(x,u,h)}return h}function NE(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=at.updateQueue,u===null?(u=Rh(),at.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function kE(l,u,h,x){u.value=h,u.getSnapshot=x,ME(u)&&DE(l)}function OE(l,u,h){return h(function(){ME(u)&&DE(l)})}function ME(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!vi(l,h)}catch{return!0}}function DE(l){var u=qo(l,2);u!==null&&si(u,l,2)}function Sg(l){var u=Hr();if(typeof l=="function"){var h=l;if(l=h(),nl){mr(!0);try{h()}finally{mr(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:l},u}function RE(l,u,h,x){return l.baseState=h,Cg(l,Ft,typeof x=="function"?x:Za)}function lL(l,u,h,x,b){if(Bh(l))throw Error(r(485));if(l=u.action,l!==null){var w={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){w.listeners.push(T)}};H.T!==null?h(!0):w.isTransition=!1,x(w),h=u.pending,h===null?(w.next=u.pending=w,IE(u,w)):(w.next=h.next,u.pending=h.next=w)}}function IE(l,u){var h=u.action,x=u.payload,b=l.state;if(u.isTransition){var w=H.T,T={};H.T=T;try{var D=h(b,x),U=H.S;U!==null&&U(T,D),LE(l,u,D)}catch(re){Ag(l,u,re)}finally{w!==null&&T.types!==null&&(w.types=T.types),H.T=w}}else try{w=h(b,x),LE(l,u,w)}catch(re){Ag(l,u,re)}}function LE(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(x){jE(l,u,x)},function(x){return Ag(l,u,x)}):jE(l,u,h)}function jE(l,u,h){u.status="fulfilled",u.value=h,PE(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,IE(l,h)))}function Ag(l,u,h){var x=l.pending;if(l.pending=null,x!==null){x=x.next;do u.status="rejected",u.reason=h,PE(u),u=u.next;while(u!==x)}l.action=null}function PE(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function BE(l,u){return u}function FE(l,u){if(vt){var h=Kt.formState;if(h!==null){e:{var x=at;if(vt){if(sn){t:{for(var b=sn,w=Pi;b.nodeType!==8;){if(!w){b=null;break t}if(b=Fi(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){sn=Fi(b.nextSibling),x=b.data==="F!";break e}}Ds(x)}x=!1}x&&(u=h[0])}}return h=Hr(),h.memoizedState=h.baseState=u,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:BE,lastRenderedState:u},h.queue=x,h=iS.bind(null,at,x),x.dispatch=h,x=Sg(!1),w=Mg.bind(null,at,!1,x.queue),x=Hr(),b={state:u,dispatch:null,action:l,pending:null},x.queue=b,h=lL.bind(null,at,b,w,h),b.dispatch=h,x.memoizedState=l,[u,h,!1]}function zE(l){var u=Rn();return UE(u,Ft,l)}function UE(l,u,h){if(u=Cg(l,u,BE)[0],l=Lh(Za)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var x=Ju(u)}catch(T){throw T===cc?Ah:T}else x=u;u=Rn();var b=u.queue,w=b.dispatch;return h!==u.memoizedState&&(at.flags|=2048,pc(9,{destroy:void 0},cL.bind(null,b,h),null)),[x,w,l]}function cL(l,u){l.action=u}function HE(l){var u=Rn(),h=Ft;if(h!==null)return UE(u,h,l);Rn(),u=u.memoizedState,h=Rn();var x=h.queue.dispatch;return h.memoizedState=l,[u,x,!1]}function pc(l,u,h,x){return l={tag:l,create:h,deps:x,inst:u,next:null},u=at.updateQueue,u===null&&(u=Rh(),at.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(x=h.next,h.next=l,l.next=x,u.lastEffect=l),l}function VE(){return Rn().memoizedState}function jh(l,u,h,x){var b=Hr();at.flags|=l,b.memoizedState=pc(1|u,{destroy:void 0},h,x===void 0?null:x)}function Ph(l,u,h,x){var b=Rn();x=x===void 0?null:x;var w=b.memoizedState.inst;Ft!==null&&x!==null&&gg(x,Ft.memoizedState.deps)?b.memoizedState=pc(u,w,h,x):(at.flags|=l,b.memoizedState=pc(1|u,w,h,x))}function $E(l,u){jh(8390656,8,l,u)}function _g(l,u){Ph(2048,8,l,u)}function uL(l){at.flags|=4;var u=at.updateQueue;if(u===null)u=Rh(),at.updateQueue=u,u.events=[l];else{var h=u.events;h===null?u.events=[l]:h.push(l)}}function GE(l){var u=Rn().memoizedState;return uL({ref:u,nextImpl:l}),function(){if((Nt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function WE(l,u){return Ph(4,2,l,u)}function qE(l,u){return Ph(4,4,l,u)}function KE(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function XE(l,u,h){h=h!=null?h.concat([l]):null,Ph(4,4,KE.bind(null,u,l),h)}function Tg(){}function YE(l,u){var h=Rn();u=u===void 0?null:u;var x=h.memoizedState;return u!==null&&gg(u,x[1])?x[0]:(h.memoizedState=[l,u],l)}function ZE(l,u){var h=Rn();u=u===void 0?null:u;var x=h.memoizedState;if(u!==null&&gg(u,x[1]))return x[0];if(x=l(),nl){mr(!0);try{l()}finally{mr(!1)}}return h.memoizedState=[x,u],x}function Ng(l,u,h){return h===void 0||(Ya&1073741824)!==0&&(gt&261930)===0?l.memoizedState=u:(l.memoizedState=h,l=JS(),at.lanes|=l,Us|=l,h)}function JE(l,u,h,x){return vi(h,u)?h:dc.current!==null?(l=Ng(l,h,x),vi(l,u)||(zn=!0),l):(Ya&42)===0||(Ya&1073741824)!==0&&(gt&261930)===0?(zn=!0,l.memoizedState=h):(l=JS(),at.lanes|=l,Us|=l,u)}function QE(l,u,h,x,b){var w=J.p;J.p=w!==0&&8>w?w:8;var T=H.T,D={};H.T=D,Mg(l,!1,u,h);try{var U=b(),re=H.S;if(re!==null&&re(D,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var me=aL(U,x);Qu(l,u,me,Ai(l))}else Qu(l,u,x,Ai(l))}catch(be){Qu(l,u,{then:function(){},status:"rejected",reason:be},Ai())}finally{J.p=w,T!==null&&D.types!==null&&(T.types=D.types),H.T=T}}function dL(){}function kg(l,u,h,x){if(l.tag!==5)throw Error(r(476));var b=eS(l).queue;QE(l,b,u,q,h===null?dL:function(){return tS(l),h(x)})}function eS(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:q},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function tS(l){var u=eS(l);u.next===null&&(u=l.alternate.memoizedState),Qu(l,u.next.queue,{},Ai())}function Og(){return xr(gd)}function nS(){return Rn().memoizedState}function rS(){return Rn().memoizedState}function fL(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Ai();l=Ls(h);var x=js(u,l,h);x!==null&&(si(x,u,h),Ku(x,u,h)),u={cache:ag()},l.payload=u;return}u=u.return}}function hL(l,u,h){var x=Ai();h={lane:x,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Bh(l)?aS(u,h):(h=Km(l,u,h,x),h!==null&&(si(h,l,x),sS(h,u,x)))}function iS(l,u,h){var x=Ai();Qu(l,u,h,x)}function Qu(l,u,h,x){var b={lane:x,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Bh(l))aS(u,b);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var T=u.lastRenderedState,D=w(T,h);if(b.hasEagerState=!0,b.eagerState=D,vi(D,T))return yh(l,u,b,0),Kt===null&&xh(),!1}catch{}finally{}if(h=Km(l,u,b,x),h!==null)return si(h,l,x),sS(h,u,x),!0}return!1}function Mg(l,u,h,x){if(x={lane:2,revertLane:cx(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Bh(l)){if(u)throw Error(r(479))}else u=Km(l,h,x,2),u!==null&&si(u,l,2)}function Bh(l){var u=l.alternate;return l===at||u!==null&&u===at}function aS(l,u){fc=Mh=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function sS(l,u,h){if((h&4194048)!==0){var x=u.lanes;x&=l.pendingLanes,h|=x,u.lanes=h,rr(l,h)}}var ed={readContext:xr,use:Ih,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};ed.useEffectEvent=En;var oS={readContext:xr,use:Ih,useCallback:function(l,u){return Hr().memoizedState=[l,u===void 0?null:u],l},useContext:xr,useEffect:$E,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,jh(4194308,4,KE.bind(null,u,l),h)},useLayoutEffect:function(l,u){return jh(4194308,4,l,u)},useInsertionEffect:function(l,u){jh(4,2,l,u)},useMemo:function(l,u){var h=Hr();u=u===void 0?null:u;var x=l();if(nl){mr(!0);try{l()}finally{mr(!1)}}return h.memoizedState=[x,u],x},useReducer:function(l,u,h){var x=Hr();if(h!==void 0){var b=h(u);if(nl){mr(!0);try{h(u)}finally{mr(!1)}}}else b=u;return x.memoizedState=x.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},x.queue=l,l=l.dispatch=hL.bind(null,at,l),[x.memoizedState,l]},useRef:function(l){var u=Hr();return l={current:l},u.memoizedState=l},useState:function(l){l=Sg(l);var u=l.queue,h=iS.bind(null,at,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:Tg,useDeferredValue:function(l,u){var h=Hr();return Ng(h,l,u)},useTransition:function(){var l=Sg(!1);return l=QE.bind(null,at,l.queue,!0,!1),Hr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var x=at,b=Hr();if(vt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),Kt===null)throw Error(r(349));(gt&127)!==0||NE(x,u,h)}b.memoizedState=h;var w={value:h,getSnapshot:u};return b.queue=w,$E(OE.bind(null,x,w,l),[l]),x.flags|=2048,pc(9,{destroy:void 0},kE.bind(null,x,w,h,u),null),h},useId:function(){var l=Hr(),u=Kt.identifierPrefix;if(vt){var h=Sa,x=Ea;h=(x&~(1<<32-Ln(x)-1)).toString(32)+h,u="_"+u+"R_"+h,h=Dh++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=sL++,u="_"+u+"r_"+h.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:Og,useFormState:FE,useActionState:FE,useOptimistic:function(l){var u=Hr();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=Mg.bind(null,at,!0,h),h.dispatch=u,[l,u]},useMemoCache:wg,useCacheRefresh:function(){return Hr().memoizedState=fL.bind(null,at)},useEffectEvent:function(l){var u=Hr(),h={impl:l};return u.memoizedState=h,function(){if((Nt&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},Dg={readContext:xr,use:Ih,useCallback:YE,useContext:xr,useEffect:_g,useImperativeHandle:XE,useInsertionEffect:WE,useLayoutEffect:qE,useMemo:ZE,useReducer:Lh,useRef:VE,useState:function(){return Lh(Za)},useDebugValue:Tg,useDeferredValue:function(l,u){var h=Rn();return JE(h,Ft.memoizedState,l,u)},useTransition:function(){var l=Lh(Za)[0],u=Rn().memoizedState;return[typeof l=="boolean"?l:Ju(l),u]},useSyncExternalStore:TE,useId:nS,useHostTransitionStatus:Og,useFormState:zE,useActionState:zE,useOptimistic:function(l,u){var h=Rn();return RE(h,Ft,l,u)},useMemoCache:wg,useCacheRefresh:rS};Dg.useEffectEvent=GE;var lS={readContext:xr,use:Ih,useCallback:YE,useContext:xr,useEffect:_g,useImperativeHandle:XE,useInsertionEffect:WE,useLayoutEffect:qE,useMemo:ZE,useReducer:Eg,useRef:VE,useState:function(){return Eg(Za)},useDebugValue:Tg,useDeferredValue:function(l,u){var h=Rn();return Ft===null?Ng(h,l,u):JE(h,Ft.memoizedState,l,u)},useTransition:function(){var l=Eg(Za)[0],u=Rn().memoizedState;return[typeof l=="boolean"?l:Ju(l),u]},useSyncExternalStore:TE,useId:nS,useHostTransitionStatus:Og,useFormState:HE,useActionState:HE,useOptimistic:function(l,u){var h=Rn();return Ft!==null?RE(h,Ft,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:wg,useCacheRefresh:rS};lS.useEffectEvent=GE;function Rg(l,u,h,x){u=l.memoizedState,h=h(x,u),h=h==null?u:p({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var Ig={enqueueSetState:function(l,u,h){l=l._reactInternals;var x=Ai(),b=Ls(x);b.payload=u,h!=null&&(b.callback=h),u=js(l,b,x),u!==null&&(si(u,l,x),Ku(u,l,x))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var x=Ai(),b=Ls(x);b.tag=1,b.payload=u,h!=null&&(b.callback=h),u=js(l,b,x),u!==null&&(si(u,l,x),Ku(u,l,x))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Ai(),x=Ls(h);x.tag=2,u!=null&&(x.callback=u),u=js(l,x,h),u!==null&&(si(u,l,h),Ku(u,l,h))}};function cS(l,u,h,x,b,w,T){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,w,T):u.prototype&&u.prototype.isPureReactComponent?!zu(h,x)||!zu(b,w):!0}function uS(l,u,h,x){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,x),u.state!==l&&Ig.enqueueReplaceState(u,u.state,null)}function rl(l,u){var h=u;if("ref"in u){h={};for(var x in u)x!=="ref"&&(h[x]=u[x])}if(l=l.defaultProps){h===u&&(h=p({},h));for(var b in l)h[b]===void 0&&(h[b]=l[b])}return h}function dS(l){gh(l)}function fS(l){console.error(l)}function hS(l){gh(l)}function Fh(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(x){setTimeout(function(){throw x})}}function pS(l,u,h){try{var x=l.onCaughtError;x(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Lg(l,u,h){return h=Ls(h),h.tag=3,h.payload={element:null},h.callback=function(){Fh(l,u)},h}function mS(l){return l=Ls(l),l.tag=3,l}function gS(l,u,h,x){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var w=x.value;l.payload=function(){return b(w)},l.callback=function(){pS(u,h,x)}}var T=h.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(l.callback=function(){pS(u,h,x),typeof b!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var D=x.stack;this.componentDidCatch(x.value,{componentStack:D!==null?D:""})})}function pL(l,u,h,x,b){if(h.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(u=h.alternate,u!==null&&sc(u,h,b,!0),h=wi.current,h!==null){switch(h.tag){case 31:case 13:return Bi===null?Zh():h.alternate===null&&Sn===0&&(Sn=3),h.flags&=-257,h.flags|=65536,h.lanes=b,x===_h?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([x]):u.add(x),sx(l,x,b)),!1;case 22:return h.flags|=65536,x===_h?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([x])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([x]):h.add(x)),sx(l,x,b)),!1}throw Error(r(435,h.tag))}return sx(l,x,b),Zh(),!1}if(vt)return u=wi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,x!==eg&&(l=Error(r(422),{cause:x}),Vu(Ii(l,h)))):(x!==eg&&(u=Error(r(423),{cause:x}),Vu(Ii(u,h))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,x=Ii(x,h),b=Lg(l.stateNode,x,b),dg(l,b),Sn!==4&&(Sn=2)),!1;var w=Error(r(520),{cause:x});if(w=Ii(w,h),ld===null?ld=[w]:ld.push(w),Sn!==4&&(Sn=2),u===null)return!0;x=Ii(x,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=b&-b,h.lanes|=l,l=Lg(h.stateNode,x,l),dg(h,l),!1;case 1:if(u=h.type,w=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Hs===null||!Hs.has(w))))return h.flags|=65536,b&=-b,h.lanes|=b,b=mS(b),gS(b,l,h,x),dg(h,b),!1}h=h.return}while(h!==null);return!1}var jg=Error(r(461)),zn=!1;function yr(l,u,h,x){u.child=l===null?bE(u,null,h,x):tl(u,l.child,h,x)}function xS(l,u,h,x,b){h=h.render;var w=u.ref;if("ref"in x){var T={};for(var D in x)D!=="ref"&&(T[D]=x[D])}else T=x;return Zo(u),x=xg(l,u,h,T,w,b),D=yg(),l!==null&&!zn?(vg(l,u,b),Ja(l,u,b)):(vt&&D&&Jm(u),u.flags|=1,yr(l,u,x,b),u.child)}function yS(l,u,h,x,b){if(l===null){var w=h.type;return typeof w=="function"&&!Xm(w)&&w.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=w,vS(l,u,w,x,b)):(l=bh(h.type,null,x,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(w=l.child,!$g(l,b)){var T=w.memoizedProps;if(h=h.compare,h=h!==null?h:zu,h(T,x)&&l.ref===u.ref)return Ja(l,u,b)}return u.flags|=1,l=Wa(w,x),l.ref=u.ref,l.return=u,u.child=l}function vS(l,u,h,x,b){if(l!==null){var w=l.memoizedProps;if(zu(w,x)&&l.ref===u.ref)if(zn=!1,u.pendingProps=x=w,$g(l,b))(l.flags&131072)!==0&&(zn=!0);else return u.lanes=l.lanes,Ja(l,u,b)}return Pg(l,u,h,x,b)}function bS(l,u,h,x){var b=x.children,w=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((u.flags&128)!==0){if(w=w!==null?w.baseLanes|h:h,l!==null){for(x=u.child=l.child,b=0;x!==null;)b=b|x.lanes|x.childLanes,x=x.sibling;x=b&~w}else x=0,u.child=null;return wS(l,u,w,h,x)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Sh(u,w!==null?w.cachePool:null),w!==null?EE(u,w):hg(),SE(u);else return x=u.lanes=536870912,wS(l,u,w!==null?w.baseLanes|h:h,h,x)}else w!==null?(Sh(u,w.cachePool),EE(u,w),Bs(),u.memoizedState=null):(l!==null&&Sh(u,null),hg(),Bs());return yr(l,u,b,h),u.child}function td(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function wS(l,u,h,x,b){var w=og();return w=w===null?null:{parent:Bn._currentValue,pool:w},u.memoizedState={baseLanes:h,cachePool:w},l!==null&&Sh(u,null),hg(),SE(u),l!==null&&sc(l,u,x,!0),u.childLanes=b,null}function zh(l,u){return u=Hh({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function CS(l,u,h){return tl(u,l.child,null,h),l=zh(u,u.pendingProps),l.flags|=2,Ci(u),u.memoizedState=null,l}function mL(l,u,h){var x=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(vt){if(x.mode==="hidden")return l=zh(u,x),u.lanes=536870912,td(null,l);if(mg(u),(l=sn)?(l=IA(l,Pi),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Os!==null?{id:Ea,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},h=aE(l),h.return=u,u.child=h,gr=u,sn=null)):l=null,l===null)throw Ds(u);return u.lanes=536870912,null}return zh(u,x)}var w=l.memoizedState;if(w!==null){var T=w.dehydrated;if(mg(u),b)if(u.flags&256)u.flags&=-257,u=CS(l,u,h);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(r(558));else if(zn||sc(l,u,h,!1),b=(h&l.childLanes)!==0,zn||b){if(x=Kt,x!==null&&(T=Or(x,h),T!==0&&T!==w.retryLane))throw w.retryLane=T,qo(l,T),si(x,l,T),jg;Zh(),u=CS(l,u,h)}else l=w.treeContext,sn=Fi(T.nextSibling),gr=u,vt=!0,Ms=null,Pi=!1,l!==null&&lE(u,l),u=zh(u,x),u.flags|=4096;return u}return l=Wa(l.child,{mode:x.mode,children:x.children}),l.ref=u.ref,u.child=l,l.return=u,l}function Uh(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function Pg(l,u,h,x,b){return Zo(u),h=xg(l,u,h,x,void 0,b),x=yg(),l!==null&&!zn?(vg(l,u,b),Ja(l,u,b)):(vt&&x&&Jm(u),u.flags|=1,yr(l,u,h,b),u.child)}function ES(l,u,h,x,b,w){return Zo(u),u.updateQueue=null,h=_E(u,x,h,b),AE(l),x=yg(),l!==null&&!zn?(vg(l,u,w),Ja(l,u,w)):(vt&&x&&Jm(u),u.flags|=1,yr(l,u,h,w),u.child)}function SS(l,u,h,x,b){if(Zo(u),u.stateNode===null){var w=nc,T=h.contextType;typeof T=="object"&&T!==null&&(w=xr(T)),w=new h(x,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Ig,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=x,w.state=u.memoizedState,w.refs={},cg(u),T=h.contextType,w.context=typeof T=="object"&&T!==null?xr(T):nc,w.state=u.memoizedState,T=h.getDerivedStateFromProps,typeof T=="function"&&(Rg(u,h,T,x),w.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(T=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),T!==w.state&&Ig.enqueueReplaceState(w,w.state,null),Yu(u,x,w,b),Xu(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),x=!0}else if(l===null){w=u.stateNode;var D=u.memoizedProps,U=rl(h,D);w.props=U;var re=w.context,me=h.contextType;T=nc,typeof me=="object"&&me!==null&&(T=xr(me));var be=h.getDerivedStateFromProps;me=typeof be=="function"||typeof w.getSnapshotBeforeUpdate=="function",D=u.pendingProps!==D,me||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D||re!==T)&&uS(u,w,x,T),Is=!1;var se=u.memoizedState;w.state=se,Yu(u,x,w,b),Xu(),re=u.memoizedState,D||se!==re||Is?(typeof be=="function"&&(Rg(u,h,be,x),re=u.memoizedState),(U=Is||cS(u,h,U,x,se,re,T))?(me||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=re),w.props=x,w.state=re,w.context=T,x=U):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{w=u.stateNode,ug(l,u),T=u.memoizedProps,me=rl(h,T),w.props=me,be=u.pendingProps,se=w.context,re=h.contextType,U=nc,typeof re=="object"&&re!==null&&(U=xr(re)),D=h.getDerivedStateFromProps,(re=typeof D=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==be||se!==U)&&uS(u,w,x,U),Is=!1,se=u.memoizedState,w.state=se,Yu(u,x,w,b),Xu();var ce=u.memoizedState;T!==be||se!==ce||Is||l!==null&&l.dependencies!==null&&Ch(l.dependencies)?(typeof D=="function"&&(Rg(u,h,D,x),ce=u.memoizedState),(me=Is||cS(u,h,me,x,se,ce,U)||l!==null&&l.dependencies!==null&&Ch(l.dependencies))?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(x,ce,U),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(x,ce,U)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===l.memoizedProps&&se===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===l.memoizedProps&&se===l.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=ce),w.props=x,w.state=ce,w.context=U,x=me):(typeof w.componentDidUpdate!="function"||T===l.memoizedProps&&se===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===l.memoizedProps&&se===l.memoizedState||(u.flags|=1024),x=!1)}return w=x,Uh(l,u),x=(u.flags&128)!==0,w||x?(w=u.stateNode,h=x&&typeof h.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,l!==null&&x?(u.child=tl(u,l.child,null,b),u.child=tl(u,null,h,b)):yr(l,u,h,b),u.memoizedState=w.state,l=u.child):l=Ja(l,u,b),l}function AS(l,u,h,x){return Xo(),u.flags|=256,yr(l,u,h,x),u.child}var Bg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fg(l){return{baseLanes:l,cachePool:pE()}}function zg(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=Si),l}function _S(l,u,h){var x=u.pendingProps,b=!1,w=(u.flags&128)!==0,T;if((T=w)||(T=l!==null&&l.memoizedState===null?!1:(Dn.current&2)!==0),T&&(b=!0,u.flags&=-129),T=(u.flags&32)!==0,u.flags&=-33,l===null){if(vt){if(b?Ps(u):Bs(),(l=sn)?(l=IA(l,Pi),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Os!==null?{id:Ea,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},h=aE(l),h.return=u,u.child=h,gr=u,sn=null)):l=null,l===null)throw Ds(u);return Cx(l)?u.lanes=32:u.lanes=536870912,null}var D=x.children;return x=x.fallback,b?(Bs(),b=u.mode,D=Hh({mode:"hidden",children:D},b),x=Ko(x,b,h,null),D.return=u,x.return=u,D.sibling=x,u.child=D,x=u.child,x.memoizedState=Fg(h),x.childLanes=zg(l,T,h),u.memoizedState=Bg,td(null,x)):(Ps(u),Ug(u,D))}var U=l.memoizedState;if(U!==null&&(D=U.dehydrated,D!==null)){if(w)u.flags&256?(Ps(u),u.flags&=-257,u=Hg(l,u,h)):u.memoizedState!==null?(Bs(),u.child=l.child,u.flags|=128,u=null):(Bs(),D=x.fallback,b=u.mode,x=Hh({mode:"visible",children:x.children},b),D=Ko(D,b,h,null),D.flags|=2,x.return=u,D.return=u,x.sibling=D,u.child=x,tl(u,l.child,null,h),x=u.child,x.memoizedState=Fg(h),x.childLanes=zg(l,T,h),u.memoizedState=Bg,u=td(null,x));else if(Ps(u),Cx(D)){if(T=D.nextSibling&&D.nextSibling.dataset,T)var re=T.dgst;T=re,x=Error(r(419)),x.stack="",x.digest=T,Vu({value:x,source:null,stack:null}),u=Hg(l,u,h)}else if(zn||sc(l,u,h,!1),T=(h&l.childLanes)!==0,zn||T){if(T=Kt,T!==null&&(x=Or(T,h),x!==0&&x!==U.retryLane))throw U.retryLane=x,qo(l,x),si(T,l,x),jg;wx(D)||Zh(),u=Hg(l,u,h)}else wx(D)?(u.flags|=192,u.child=l.child,u=null):(l=U.treeContext,sn=Fi(D.nextSibling),gr=u,vt=!0,Ms=null,Pi=!1,l!==null&&lE(u,l),u=Ug(u,x.children),u.flags|=4096);return u}return b?(Bs(),D=x.fallback,b=u.mode,U=l.child,re=U.sibling,x=Wa(U,{mode:"hidden",children:x.children}),x.subtreeFlags=U.subtreeFlags&65011712,re!==null?D=Wa(re,D):(D=Ko(D,b,h,null),D.flags|=2),D.return=u,x.return=u,x.sibling=D,u.child=x,td(null,x),x=u.child,D=l.child.memoizedState,D===null?D=Fg(h):(b=D.cachePool,b!==null?(U=Bn._currentValue,b=b.parent!==U?{parent:U,pool:U}:b):b=pE(),D={baseLanes:D.baseLanes|h,cachePool:b}),x.memoizedState=D,x.childLanes=zg(l,T,h),u.memoizedState=Bg,td(l.child,x)):(Ps(u),h=l.child,l=h.sibling,h=Wa(h,{mode:"visible",children:x.children}),h.return=u,h.sibling=null,l!==null&&(T=u.deletions,T===null?(u.deletions=[l],u.flags|=16):T.push(l)),u.child=h,u.memoizedState=null,h)}function Ug(l,u){return u=Hh({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Hh(l,u){return l=bi(22,l,null,u),l.lanes=0,l}function Hg(l,u,h){return tl(u,l.child,null,h),l=Ug(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function TS(l,u,h){l.lanes|=u;var x=l.alternate;x!==null&&(x.lanes|=u),rg(l.return,u,h)}function Vg(l,u,h,x,b,w){var T=l.memoizedState;T===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:h,tailMode:b,treeForkCount:w}:(T.isBackwards=u,T.rendering=null,T.renderingStartTime=0,T.last=x,T.tail=h,T.tailMode=b,T.treeForkCount=w)}function NS(l,u,h){var x=u.pendingProps,b=x.revealOrder,w=x.tail;x=x.children;var T=Dn.current,D=(T&2)!==0;if(D?(T=T&1|2,u.flags|=128):T&=1,Z(Dn,T),yr(l,u,x,h),x=vt?Hu:0,!D&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&TS(l,h,u);else if(l.tag===19)TS(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(h=u.child,b=null;h!==null;)l=h.alternate,l!==null&&Oh(l)===null&&(b=h),h=h.sibling;h=b,h===null?(b=u.child,u.child=null):(b=h.sibling,h.sibling=null),Vg(u,!1,b,h,w,x);break;case"backwards":case"unstable_legacy-backwards":for(h=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&Oh(l)===null){u.child=b;break}l=b.sibling,b.sibling=h,h=b,b=l}Vg(u,!0,h,null,w,x);break;case"together":Vg(u,!1,null,null,void 0,x);break;default:u.memoizedState=null}return u.child}function Ja(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),Us|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(sc(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,h=Wa(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Wa(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function $g(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Ch(l)))}function gL(l,u,h){switch(u.tag){case 3:ie(u,u.stateNode.containerInfo),Rs(u,Bn,l.memoizedState.cache),Xo();break;case 27:case 5:oe(u);break;case 4:ie(u,u.stateNode.containerInfo);break;case 10:Rs(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,mg(u),null;break;case 13:var x=u.memoizedState;if(x!==null)return x.dehydrated!==null?(Ps(u),u.flags|=128,null):(h&u.child.childLanes)!==0?_S(l,u,h):(Ps(u),l=Ja(l,u,h),l!==null?l.sibling:null);Ps(u);break;case 19:var b=(l.flags&128)!==0;if(x=(h&u.childLanes)!==0,x||(sc(l,u,h,!1),x=(h&u.childLanes)!==0),b){if(x)return NS(l,u,h);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Z(Dn,Dn.current),x)break;return null;case 22:return u.lanes=0,bS(l,u,h,u.pendingProps);case 24:Rs(u,Bn,l.memoizedState.cache)}return Ja(l,u,h)}function kS(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)zn=!0;else{if(!$g(l,h)&&(u.flags&128)===0)return zn=!1,gL(l,u,h);zn=(l.flags&131072)!==0}else zn=!1,vt&&(u.flags&1048576)!==0&&oE(u,Hu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var x=u.pendingProps;if(l=Qo(u.elementType),u.type=l,typeof l=="function")Xm(l)?(x=rl(l,x),u.tag=1,u=SS(null,u,l,x,h)):(u.tag=0,u=Pg(null,u,l,x,h));else{if(l!=null){var b=l.$$typeof;if(b===k){u.tag=11,u=xS(null,u,l,x,h);break e}else if(b===M){u.tag=14,u=yS(null,u,l,x,h);break e}}throw u=de(l)||l,Error(r(306,u,""))}}return u;case 0:return Pg(l,u,u.type,u.pendingProps,h);case 1:return x=u.type,b=rl(x,u.pendingProps),SS(l,u,x,b,h);case 3:e:{if(ie(u,u.stateNode.containerInfo),l===null)throw Error(r(387));x=u.pendingProps;var w=u.memoizedState;b=w.element,ug(l,u),Yu(u,x,null,h);var T=u.memoizedState;if(x=T.cache,Rs(u,Bn,x),x!==w.cache&&ig(u,[Bn],h,!0),Xu(),x=T.element,w.isDehydrated)if(w={element:x,isDehydrated:!1,cache:T.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=AS(l,u,x,h);break e}else if(x!==b){b=Ii(Error(r(424)),u),Vu(b),u=AS(l,u,x,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(sn=Fi(l.firstChild),gr=u,vt=!0,Ms=null,Pi=!0,h=bE(u,null,x,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Xo(),x===b){u=Ja(l,u,h);break e}yr(l,u,x,h)}u=u.child}return u;case 26:return Uh(l,u),l===null?(h=zA(u.type,null,u.pendingProps,null))?u.memoizedState=h:vt||(h=u.type,l=u.pendingProps,x=ip(Q.current).createElement(h),x[Se]=u,x[ue]=l,vr(x,h,l),Pn(x),u.stateNode=x):u.memoizedState=zA(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return oe(u),l===null&&vt&&(x=u.stateNode=PA(u.type,u.pendingProps,Q.current),gr=u,Pi=!0,b=sn,Ws(u.type)?(Ex=b,sn=Fi(x.firstChild)):sn=b),yr(l,u,u.pendingProps.children,h),Uh(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&vt&&((b=x=sn)&&(x=WL(x,u.type,u.pendingProps,Pi),x!==null?(u.stateNode=x,gr=u,sn=Fi(x.firstChild),Pi=!1,b=!0):b=!1),b||Ds(u)),oe(u),b=u.type,w=u.pendingProps,T=l!==null?l.memoizedProps:null,x=w.children,yx(b,w)?x=null:T!==null&&yx(b,T)&&(u.flags|=32),u.memoizedState!==null&&(b=xg(l,u,oL,null,null,h),gd._currentValue=b),Uh(l,u),yr(l,u,x,h),u.child;case 6:return l===null&&vt&&((l=h=sn)&&(h=qL(h,u.pendingProps,Pi),h!==null?(u.stateNode=h,gr=u,sn=null,l=!0):l=!1),l||Ds(u)),null;case 13:return _S(l,u,h);case 4:return ie(u,u.stateNode.containerInfo),x=u.pendingProps,l===null?u.child=tl(u,null,x,h):yr(l,u,x,h),u.child;case 11:return xS(l,u,u.type,u.pendingProps,h);case 7:return yr(l,u,u.pendingProps,h),u.child;case 8:return yr(l,u,u.pendingProps.children,h),u.child;case 12:return yr(l,u,u.pendingProps.children,h),u.child;case 10:return x=u.pendingProps,Rs(u,u.type,x.value),yr(l,u,x.children,h),u.child;case 9:return b=u.type._context,x=u.pendingProps.children,Zo(u),b=xr(b),x=x(b),u.flags|=1,yr(l,u,x,h),u.child;case 14:return yS(l,u,u.type,u.pendingProps,h);case 15:return vS(l,u,u.type,u.pendingProps,h);case 19:return NS(l,u,h);case 31:return mL(l,u,h);case 22:return bS(l,u,h,u.pendingProps);case 24:return Zo(u),x=xr(Bn),l===null?(b=og(),b===null&&(b=Kt,w=ag(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=h),b=w),u.memoizedState={parent:x,cache:b},cg(u),Rs(u,Bn,b)):((l.lanes&h)!==0&&(ug(l,u),Yu(u,null,null,h),Xu()),b=l.memoizedState,w=u.memoizedState,b.parent!==x?(b={parent:x,cache:x},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Rs(u,Bn,x)):(x=w.cache,Rs(u,Bn,x),x!==b.cache&&ig(u,[Bn],h,!0))),yr(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Qa(l){l.flags|=4}function Gg(l,u,h,x,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(nA())l.flags|=8192;else throw el=_h,lg}else l.flags&=-16777217}function OS(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!GA(u))if(nA())l.flags|=8192;else throw el=_h,lg}function Vh(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Tt():536870912,l.lanes|=u,yc|=u)}function nd(l,u){if(!vt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function on(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,x=0;if(u)for(var b=l.child;b!==null;)h|=b.lanes|b.childLanes,x|=b.subtreeFlags&65011712,x|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)h|=b.lanes|b.childLanes,x|=b.subtreeFlags,x|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=x,l.childLanes=h,u}function xL(l,u,h){var x=u.pendingProps;switch(Qm(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(u),null;case 1:return on(u),null;case 3:return h=u.stateNode,x=null,l!==null&&(x=l.memoizedState.cache),u.memoizedState.cache!==x&&(u.flags|=2048),Xa(Bn),K(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(ac(u)?Qa(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,tg())),on(u),null;case 26:var b=u.type,w=u.memoizedState;return l===null?(Qa(u),w!==null?(on(u),OS(u,w)):(on(u),Gg(u,b,null,x,h))):w?w!==l.memoizedState?(Qa(u),on(u),OS(u,w)):(on(u),u.flags&=-16777217):(l=l.memoizedProps,l!==x&&Qa(u),on(u),Gg(u,b,l,x,h)),null;case 27:if(ke(u),h=Q.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==x&&Qa(u);else{if(!x){if(u.stateNode===null)throw Error(r(166));return on(u),null}l=pe.current,ac(u)?cE(u):(l=PA(b,x,h),u.stateNode=l,Qa(u))}return on(u),null;case 5:if(ke(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==x&&Qa(u);else{if(!x){if(u.stateNode===null)throw Error(r(166));return on(u),null}if(w=pe.current,ac(u))cE(u);else{var T=ip(Q.current);switch(w){case 1:w=T.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=T.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=T.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof x.is=="string"?T.createElement("select",{is:x.is}):T.createElement("select"),x.multiple?w.multiple=!0:x.size&&(w.size=x.size);break;default:w=typeof x.is=="string"?T.createElement(b,{is:x.is}):T.createElement(b)}}w[Se]=u,w[ue]=x;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)w.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=w;e:switch(vr(w,b,x),b){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&Qa(u)}}return on(u),Gg(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,h),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==x&&Qa(u);else{if(typeof x!="string"&&u.stateNode===null)throw Error(r(166));if(l=Q.current,ac(u)){if(l=u.stateNode,h=u.memoizedProps,x=null,b=gr,b!==null)switch(b.tag){case 27:case 5:x=b.memoizedProps}l[Se]=u,l=!!(l.nodeValue===h||x!==null&&x.suppressHydrationWarning===!0||_A(l.nodeValue,h)),l||Ds(u,!0)}else l=ip(l).createTextNode(x),l[Se]=u,u.stateNode=l}return on(u),null;case 31:if(h=u.memoizedState,l===null||l.memoizedState!==null){if(x=ac(u),h!==null){if(l===null){if(!x)throw Error(r(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Se]=u}else Xo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;on(u),l=!1}else h=tg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=h),l=!0;if(!l)return u.flags&256?(Ci(u),u):(Ci(u),null);if((u.flags&128)!==0)throw Error(r(558))}return on(u),null;case 13:if(x=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=ac(u),x!==null&&x.dehydrated!==null){if(l===null){if(!b)throw Error(r(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Se]=u}else Xo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;on(u),b=!1}else b=tg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(Ci(u),u):(Ci(u),null)}return Ci(u),(u.flags&128)!==0?(u.lanes=h,u):(h=x!==null,l=l!==null&&l.memoizedState!==null,h&&(x=u.child,b=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(b=x.alternate.memoizedState.cachePool.pool),w=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(w=x.memoizedState.cachePool.pool),w!==b&&(x.flags|=2048)),h!==l&&h&&(u.child.flags|=8192),Vh(u,u.updateQueue),on(u),null);case 4:return K(),l===null&&hx(u.stateNode.containerInfo),on(u),null;case 10:return Xa(u.type),on(u),null;case 19:if($(Dn),x=u.memoizedState,x===null)return on(u),null;if(b=(u.flags&128)!==0,w=x.rendering,w===null)if(b)nd(x,!1);else{if(Sn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(w=Oh(l),w!==null){for(u.flags|=128,nd(x,!1),l=w.updateQueue,u.updateQueue=l,Vh(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)iE(h,l),h=h.sibling;return Z(Dn,Dn.current&1|2),vt&&qa(u,x.treeForkCount),u.child}l=l.sibling}x.tail!==null&&an()>Kh&&(u.flags|=128,b=!0,nd(x,!1),u.lanes=4194304)}else{if(!b)if(l=Oh(w),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,Vh(u,l),nd(x,!0),x.tail===null&&x.tailMode==="hidden"&&!w.alternate&&!vt)return on(u),null}else 2*an()-x.renderingStartTime>Kh&&h!==536870912&&(u.flags|=128,b=!0,nd(x,!1),u.lanes=4194304);x.isBackwards?(w.sibling=u.child,u.child=w):(l=x.last,l!==null?l.sibling=w:u.child=w,x.last=w)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=an(),l.sibling=null,h=Dn.current,Z(Dn,b?h&1|2:h&1),vt&&qa(u,x.treeForkCount),l):(on(u),null);case 22:case 23:return Ci(u),pg(),x=u.memoizedState!==null,l!==null?l.memoizedState!==null!==x&&(u.flags|=8192):x&&(u.flags|=8192),x?(h&536870912)!==0&&(u.flags&128)===0&&(on(u),u.subtreeFlags&6&&(u.flags|=8192)):on(u),h=u.updateQueue,h!==null&&Vh(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==h&&(u.flags|=2048),l!==null&&$(Jo),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Xa(Bn),on(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function yL(l,u){switch(Qm(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Xa(Bn),K(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return ke(u),null;case 31:if(u.memoizedState!==null){if(Ci(u),u.alternate===null)throw Error(r(340));Xo()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Ci(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Xo()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return $(Dn),null;case 4:return K(),null;case 10:return Xa(u.type),null;case 22:case 23:return Ci(u),pg(),l!==null&&$(Jo),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Xa(Bn),null;case 25:return null;default:return null}}function MS(l,u){switch(Qm(u),u.tag){case 3:Xa(Bn),K();break;case 26:case 27:case 5:ke(u);break;case 4:K();break;case 31:u.memoizedState!==null&&Ci(u);break;case 13:Ci(u);break;case 19:$(Dn);break;case 10:Xa(u.type);break;case 22:case 23:Ci(u),pg(),l!==null&&$(Jo);break;case 24:Xa(Bn)}}function rd(l,u){try{var h=u.updateQueue,x=h!==null?h.lastEffect:null;if(x!==null){var b=x.next;h=b;do{if((h.tag&l)===l){x=void 0;var w=h.create,T=h.inst;x=w(),T.destroy=x}h=h.next}while(h!==b)}}catch(D){Lt(u,u.return,D)}}function Fs(l,u,h){try{var x=u.updateQueue,b=x!==null?x.lastEffect:null;if(b!==null){var w=b.next;x=w;do{if((x.tag&l)===l){var T=x.inst,D=T.destroy;if(D!==void 0){T.destroy=void 0,b=u;var U=h,re=D;try{re()}catch(me){Lt(b,U,me)}}}x=x.next}while(x!==w)}}catch(me){Lt(u,u.return,me)}}function DS(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{CE(u,h)}catch(x){Lt(l,l.return,x)}}}function RS(l,u,h){h.props=rl(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(x){Lt(l,u,x)}}function id(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var x=l.stateNode;break;case 30:x=l.stateNode;break;default:x=l.stateNode}typeof h=="function"?l.refCleanup=h(x):h.current=x}}catch(b){Lt(l,u,b)}}function Aa(l,u){var h=l.ref,x=l.refCleanup;if(h!==null)if(typeof x=="function")try{x()}catch(b){Lt(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Lt(l,u,b)}else h.current=null}function IS(l){var u=l.type,h=l.memoizedProps,x=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&x.focus();break e;case"img":h.src?x.src=h.src:h.srcSet&&(x.srcset=h.srcSet)}}catch(b){Lt(l,l.return,b)}}function Wg(l,u,h){try{var x=l.stateNode;zL(x,l.type,h,u),x[ue]=u}catch(b){Lt(l,l.return,b)}}function LS(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ws(l.type)||l.tag===4}function qg(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||LS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ws(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Kg(l,u,h){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=$a));else if(x!==4&&(x===27&&Ws(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(Kg(l,u,h),l=l.sibling;l!==null;)Kg(l,u,h),l=l.sibling}function $h(l,u,h){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(x!==4&&(x===27&&Ws(l.type)&&(h=l.stateNode),l=l.child,l!==null))for($h(l,u,h),l=l.sibling;l!==null;)$h(l,u,h),l=l.sibling}function jS(l){var u=l.stateNode,h=l.memoizedProps;try{for(var x=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);vr(u,x,h),u[Se]=l,u[ue]=h}catch(w){Lt(l,l.return,w)}}var es=!1,Un=!1,Xg=!1,PS=typeof WeakSet=="function"?WeakSet:Set,ir=null;function vL(l,u){if(l=l.containerInfo,gx=dp,l=XC(l),Hm(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var x=h.getSelection&&h.getSelection();if(x&&x.rangeCount!==0){h=x.anchorNode;var b=x.anchorOffset,w=x.focusNode;x=x.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break e}var T=0,D=-1,U=-1,re=0,me=0,be=l,se=null;t:for(;;){for(var ce;be!==h||b!==0&&be.nodeType!==3||(D=T+b),be!==w||x!==0&&be.nodeType!==3||(U=T+x),be.nodeType===3&&(T+=be.nodeValue.length),(ce=be.firstChild)!==null;)se=be,be=ce;for(;;){if(be===l)break t;if(se===h&&++re===b&&(D=T),se===w&&++me===x&&(U=T),(ce=be.nextSibling)!==null)break;be=se,se=be.parentNode}be=ce}h=D===-1||U===-1?null:{start:D,end:U}}else h=null}h=h||{start:0,end:0}}else h=null;for(xx={focusedElem:l,selectionRange:h},dp=!1,ir=u;ir!==null;)if(u=ir,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,ir=l;else for(;ir!==null;){switch(u=ir,w=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(h=0;h<l.length;h++)b=l[h],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&w!==null){l=void 0,h=u,b=w.memoizedProps,w=w.memoizedState,x=h.stateNode;try{var Pe=rl(h.type,b);l=x.getSnapshotBeforeUpdate(Pe,w),x.__reactInternalSnapshotBeforeUpdate=l}catch(Ze){Lt(h,h.return,Ze)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)bx(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":bx(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,ir=l;break}ir=u.return}}function BS(l,u,h){var x=h.flags;switch(h.tag){case 0:case 11:case 15:ns(l,h),x&4&&rd(5,h);break;case 1:if(ns(l,h),x&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(T){Lt(h,h.return,T)}else{var b=rl(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(T){Lt(h,h.return,T)}}x&64&&DS(h),x&512&&id(h,h.return);break;case 3:if(ns(l,h),x&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{CE(l,u)}catch(T){Lt(h,h.return,T)}}break;case 27:u===null&&x&4&&jS(h);case 26:case 5:ns(l,h),u===null&&x&4&&IS(h),x&512&&id(h,h.return);break;case 12:ns(l,h);break;case 31:ns(l,h),x&4&&US(l,h);break;case 13:ns(l,h),x&4&&HS(l,h),x&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=NL.bind(null,h),KL(l,h))));break;case 22:if(x=h.memoizedState!==null||es,!x){u=u!==null&&u.memoizedState!==null||Un,b=es;var w=Un;es=x,(Un=u)&&!w?rs(l,h,(h.subtreeFlags&8772)!==0):ns(l,h),es=b,Un=w}break;case 30:break;default:ns(l,h)}}function FS(l){var u=l.alternate;u!==null&&(l.alternate=null,FS(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&gn(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var hn=null,ni=!1;function ts(l,u,h){for(h=h.child;h!==null;)zS(l,u,h),h=h.sibling}function zS(l,u,h){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(gi,h)}catch{}switch(h.tag){case 26:Un||Aa(h,u),ts(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Un||Aa(h,u);var x=hn,b=ni;Ws(h.type)&&(hn=h.stateNode,ni=!1),ts(l,u,h),hd(h.stateNode),hn=x,ni=b;break;case 5:Un||Aa(h,u);case 6:if(x=hn,b=ni,hn=null,ts(l,u,h),hn=x,ni=b,hn!==null)if(ni)try{(hn.nodeType===9?hn.body:hn.nodeName==="HTML"?hn.ownerDocument.body:hn).removeChild(h.stateNode)}catch(w){Lt(h,u,w)}else try{hn.removeChild(h.stateNode)}catch(w){Lt(h,u,w)}break;case 18:hn!==null&&(ni?(l=hn,DA(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),_c(l)):DA(hn,h.stateNode));break;case 4:x=hn,b=ni,hn=h.stateNode.containerInfo,ni=!0,ts(l,u,h),hn=x,ni=b;break;case 0:case 11:case 14:case 15:Fs(2,h,u),Un||Fs(4,h,u),ts(l,u,h);break;case 1:Un||(Aa(h,u),x=h.stateNode,typeof x.componentWillUnmount=="function"&&RS(h,u,x)),ts(l,u,h);break;case 21:ts(l,u,h);break;case 22:Un=(x=Un)||h.memoizedState!==null,ts(l,u,h),Un=x;break;default:ts(l,u,h)}}function US(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{_c(l)}catch(h){Lt(u,u.return,h)}}}function HS(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{_c(l)}catch(h){Lt(u,u.return,h)}}function bL(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new PS),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new PS),u;default:throw Error(r(435,l.tag))}}function Gh(l,u){var h=bL(l);u.forEach(function(x){if(!h.has(x)){h.add(x);var b=kL.bind(null,l,x);x.then(b,b)}})}function ri(l,u){var h=u.deletions;if(h!==null)for(var x=0;x<h.length;x++){var b=h[x],w=l,T=u,D=T;e:for(;D!==null;){switch(D.tag){case 27:if(Ws(D.type)){hn=D.stateNode,ni=!1;break e}break;case 5:hn=D.stateNode,ni=!1;break e;case 3:case 4:hn=D.stateNode.containerInfo,ni=!0;break e}D=D.return}if(hn===null)throw Error(r(160));zS(w,T,b),hn=null,ni=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)VS(u,l),u=u.sibling}var ra=null;function VS(l,u){var h=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ri(u,l),ii(l),x&4&&(Fs(3,l,l.return),rd(3,l),Fs(5,l,l.return));break;case 1:ri(u,l),ii(l),x&512&&(Un||h===null||Aa(h,h.return)),x&64&&es&&(l=l.updateQueue,l!==null&&(x=l.callbacks,x!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?x:h.concat(x))));break;case 26:var b=ra;if(ri(u,l),ii(l),x&512&&(Un||h===null||Aa(h,h.return)),x&4){var w=h!==null?h.memoizedState:null;if(x=l.memoizedState,h===null)if(x===null)if(l.stateNode===null){e:{x=l.type,h=l.memoizedProps,b=b.ownerDocument||b;t:switch(x){case"title":w=b.getElementsByTagName("title")[0],(!w||w[rt]||w[Se]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(x),b.head.insertBefore(w,b.querySelector("head > title"))),vr(w,x,h),w[Se]=l,Pn(w),x=w;break e;case"link":var T=VA("link","href",b).get(x+(h.href||""));if(T){for(var D=0;D<T.length;D++)if(w=T[D],w.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&w.getAttribute("rel")===(h.rel==null?null:h.rel)&&w.getAttribute("title")===(h.title==null?null:h.title)&&w.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){T.splice(D,1);break t}}w=b.createElement(x),vr(w,x,h),b.head.appendChild(w);break;case"meta":if(T=VA("meta","content",b).get(x+(h.content||""))){for(D=0;D<T.length;D++)if(w=T[D],w.getAttribute("content")===(h.content==null?null:""+h.content)&&w.getAttribute("name")===(h.name==null?null:h.name)&&w.getAttribute("property")===(h.property==null?null:h.property)&&w.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&w.getAttribute("charset")===(h.charSet==null?null:h.charSet)){T.splice(D,1);break t}}w=b.createElement(x),vr(w,x,h),b.head.appendChild(w);break;default:throw Error(r(468,x))}w[Se]=l,Pn(w),x=w}l.stateNode=x}else $A(b,l.type,l.stateNode);else l.stateNode=HA(b,x,l.memoizedProps);else w!==x?(w===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):w.count--,x===null?$A(b,l.type,l.stateNode):HA(b,x,l.memoizedProps)):x===null&&l.stateNode!==null&&Wg(l,l.memoizedProps,h.memoizedProps)}break;case 27:ri(u,l),ii(l),x&512&&(Un||h===null||Aa(h,h.return)),h!==null&&x&4&&Wg(l,l.memoizedProps,h.memoizedProps);break;case 5:if(ri(u,l),ii(l),x&512&&(Un||h===null||Aa(h,h.return)),l.flags&32){b=l.stateNode;try{Xl(b,"")}catch(Pe){Lt(l,l.return,Pe)}}x&4&&l.stateNode!=null&&(b=l.memoizedProps,Wg(l,b,h!==null?h.memoizedProps:b)),x&1024&&(Xg=!0);break;case 6:if(ri(u,l),ii(l),x&4){if(l.stateNode===null)throw Error(r(162));x=l.memoizedProps,h=l.stateNode;try{h.nodeValue=x}catch(Pe){Lt(l,l.return,Pe)}}break;case 3:if(op=null,b=ra,ra=ap(u.containerInfo),ri(u,l),ra=b,ii(l),x&4&&h!==null&&h.memoizedState.isDehydrated)try{_c(u.containerInfo)}catch(Pe){Lt(l,l.return,Pe)}Xg&&(Xg=!1,$S(l));break;case 4:x=ra,ra=ap(l.stateNode.containerInfo),ri(u,l),ii(l),ra=x;break;case 12:ri(u,l),ii(l);break;case 31:ri(u,l),ii(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Gh(l,x)));break;case 13:ri(u,l),ii(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(qh=an()),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Gh(l,x)));break;case 22:b=l.memoizedState!==null;var U=h!==null&&h.memoizedState!==null,re=es,me=Un;if(es=re||b,Un=me||U,ri(u,l),Un=me,es=re,ii(l),x&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(h===null||U||es||Un||il(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){U=h=u;try{if(w=U.stateNode,b)T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{D=U.stateNode;var be=U.memoizedProps.style,se=be!=null&&be.hasOwnProperty("display")?be.display:null;D.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Pe){Lt(U,U.return,Pe)}}}else if(u.tag===6){if(h===null){U=u;try{U.stateNode.nodeValue=b?"":U.memoizedProps}catch(Pe){Lt(U,U.return,Pe)}}}else if(u.tag===18){if(h===null){U=u;try{var ce=U.stateNode;b?RA(ce,!0):RA(U.stateNode,!1)}catch(Pe){Lt(U,U.return,Pe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}x&4&&(x=l.updateQueue,x!==null&&(h=x.retryQueue,h!==null&&(x.retryQueue=null,Gh(l,h))));break;case 19:ri(u,l),ii(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Gh(l,x)));break;case 30:break;case 21:break;default:ri(u,l),ii(l)}}function ii(l){var u=l.flags;if(u&2){try{for(var h,x=l.return;x!==null;){if(LS(x)){h=x;break}x=x.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var b=h.stateNode,w=qg(l);$h(l,w,b);break;case 5:var T=h.stateNode;h.flags&32&&(Xl(T,""),h.flags&=-33);var D=qg(l);$h(l,D,T);break;case 3:case 4:var U=h.stateNode.containerInfo,re=qg(l);Kg(l,re,U);break;default:throw Error(r(161))}}catch(me){Lt(l,l.return,me)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function $S(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;$S(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function ns(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)BS(l,u.alternate,u),u=u.sibling}function il(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Fs(4,u,u.return),il(u);break;case 1:Aa(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&RS(u,u.return,h),il(u);break;case 27:hd(u.stateNode);case 26:case 5:Aa(u,u.return),il(u);break;case 22:u.memoizedState===null&&il(u);break;case 30:il(u);break;default:il(u)}l=l.sibling}}function rs(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var x=u.alternate,b=l,w=u,T=w.flags;switch(w.tag){case 0:case 11:case 15:rs(b,w,h),rd(4,w);break;case 1:if(rs(b,w,h),x=w,b=x.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(re){Lt(x,x.return,re)}if(x=w,b=x.updateQueue,b!==null){var D=x.stateNode;try{var U=b.shared.hiddenCallbacks;if(U!==null)for(b.shared.hiddenCallbacks=null,b=0;b<U.length;b++)wE(U[b],D)}catch(re){Lt(x,x.return,re)}}h&&T&64&&DS(w),id(w,w.return);break;case 27:jS(w);case 26:case 5:rs(b,w,h),h&&x===null&&T&4&&IS(w),id(w,w.return);break;case 12:rs(b,w,h);break;case 31:rs(b,w,h),h&&T&4&&US(b,w);break;case 13:rs(b,w,h),h&&T&4&&HS(b,w);break;case 22:w.memoizedState===null&&rs(b,w,h),id(w,w.return);break;case 30:break;default:rs(b,w,h)}u=u.sibling}}function Yg(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&$u(h))}function Zg(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&$u(l))}function ia(l,u,h,x){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)GS(l,u,h,x),u=u.sibling}function GS(l,u,h,x){var b=u.flags;switch(u.tag){case 0:case 11:case 15:ia(l,u,h,x),b&2048&&rd(9,u);break;case 1:ia(l,u,h,x);break;case 3:ia(l,u,h,x),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&$u(l)));break;case 12:if(b&2048){ia(l,u,h,x),l=u.stateNode;try{var w=u.memoizedProps,T=w.id,D=w.onPostCommit;typeof D=="function"&&D(T,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(U){Lt(u,u.return,U)}}else ia(l,u,h,x);break;case 31:ia(l,u,h,x);break;case 13:ia(l,u,h,x);break;case 23:break;case 22:w=u.stateNode,T=u.alternate,u.memoizedState!==null?w._visibility&2?ia(l,u,h,x):ad(l,u):w._visibility&2?ia(l,u,h,x):(w._visibility|=2,mc(l,u,h,x,(u.subtreeFlags&10256)!==0||!1)),b&2048&&Yg(T,u);break;case 24:ia(l,u,h,x),b&2048&&Zg(u.alternate,u);break;default:ia(l,u,h,x)}}function mc(l,u,h,x,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var w=l,T=u,D=h,U=x,re=T.flags;switch(T.tag){case 0:case 11:case 15:mc(w,T,D,U,b),rd(8,T);break;case 23:break;case 22:var me=T.stateNode;T.memoizedState!==null?me._visibility&2?mc(w,T,D,U,b):ad(w,T):(me._visibility|=2,mc(w,T,D,U,b)),b&&re&2048&&Yg(T.alternate,T);break;case 24:mc(w,T,D,U,b),b&&re&2048&&Zg(T.alternate,T);break;default:mc(w,T,D,U,b)}u=u.sibling}}function ad(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,x=u,b=x.flags;switch(x.tag){case 22:ad(h,x),b&2048&&Yg(x.alternate,x);break;case 24:ad(h,x),b&2048&&Zg(x.alternate,x);break;default:ad(h,x)}u=u.sibling}}var sd=8192;function gc(l,u,h){if(l.subtreeFlags&sd)for(l=l.child;l!==null;)WS(l,u,h),l=l.sibling}function WS(l,u,h){switch(l.tag){case 26:gc(l,u,h),l.flags&sd&&l.memoizedState!==null&&s7(h,ra,l.memoizedState,l.memoizedProps);break;case 5:gc(l,u,h);break;case 3:case 4:var x=ra;ra=ap(l.stateNode.containerInfo),gc(l,u,h),ra=x;break;case 22:l.memoizedState===null&&(x=l.alternate,x!==null&&x.memoizedState!==null?(x=sd,sd=16777216,gc(l,u,h),sd=x):gc(l,u,h));break;default:gc(l,u,h)}}function qS(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function od(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var x=u[h];ir=x,XS(x,l)}qS(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)KS(l),l=l.sibling}function KS(l){switch(l.tag){case 0:case 11:case 15:od(l),l.flags&2048&&Fs(9,l,l.return);break;case 3:od(l);break;case 12:od(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Wh(l)):od(l);break;default:od(l)}}function Wh(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var x=u[h];ir=x,XS(x,l)}qS(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Fs(8,u,u.return),Wh(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,Wh(u));break;default:Wh(u)}l=l.sibling}}function XS(l,u){for(;ir!==null;){var h=ir;switch(h.tag){case 0:case 11:case 15:Fs(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var x=h.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:$u(h.memoizedState.cache)}if(x=h.child,x!==null)x.return=h,ir=x;else e:for(h=l;ir!==null;){x=ir;var b=x.sibling,w=x.return;if(FS(x),x===h){ir=null;break e}if(b!==null){b.return=w,ir=b;break e}ir=w}}}var wL={getCacheForType:function(l){var u=xr(Bn),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h},cacheSignal:function(){return xr(Bn).controller.signal}},CL=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Kt=null,ht=null,gt=0,It=0,Ei=null,zs=!1,xc=!1,Jg=!1,is=0,Sn=0,Us=0,al=0,Qg=0,Si=0,yc=0,ld=null,ai=null,ex=!1,qh=0,YS=0,Kh=1/0,Xh=null,Hs=null,Wn=0,Vs=null,vc=null,as=0,tx=0,nx=null,ZS=null,cd=0,rx=null;function Ai(){return(Nt&2)!==0&&gt!==0?gt&-gt:H.T!==null?cx():V()}function JS(){if(Si===0)if((gt&536870912)===0||vt){var l=Oi;Oi<<=1,(Oi&3932160)===0&&(Oi=262144),Si=l}else Si=536870912;return l=wi.current,l!==null&&(l.flags|=32),Si}function si(l,u,h){(l===Kt&&(It===2||It===9)||l.cancelPendingCommit!==null)&&(bc(l,0),$s(l,gt,Si,!1)),kr(l,h),((Nt&2)===0||l!==Kt)&&(l===Kt&&((Nt&2)===0&&(al|=h),Sn===4&&$s(l,gt,Si,!1)),_a(l))}function QS(l,u,h){if((Nt&6)!==0)throw Error(r(327));var x=!h&&(u&127)===0&&(u&l.expiredLanes)===0||Wt(l,u),b=x?AL(l,u):ax(l,u,!0),w=x;do{if(b===0){xc&&!x&&$s(l,u,0,!1);break}else{if(h=l.current.alternate,w&&!EL(h)){b=ax(l,u,!1),w=!1;continue}if(b===2){if(w=u,l.errorRecoveryDisabledLanes&w)var T=0;else T=l.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){u=T;e:{var D=l;b=ld;var U=D.current.memoizedState.isDehydrated;if(U&&(bc(D,T).flags|=256),T=ax(D,T,!1),T!==2){if(Jg&&!U){D.errorRecoveryDisabledLanes|=w,al|=w,b=4;break e}w=ai,ai=b,w!==null&&(ai===null?ai=w:ai.push.apply(ai,w))}b=T}if(w=!1,b!==2)continue}}if(b===1){bc(l,0),$s(l,u,0,!0);break}e:{switch(x=l,w=b,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:$s(x,u,Si,!zs);break e;case 2:ai=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(b=qh+300-an(),10<b)){if($s(x,u,Si,!zs),Cn(x,0,!0)!==0)break e;as=u,x.timeoutHandle=OA(eA.bind(null,x,h,ai,Xh,ex,u,Si,al,yc,zs,w,"Throttled",-0,0),b);break e}eA(x,h,ai,Xh,ex,u,Si,al,yc,zs,w,null,-0,0)}}break}while(!0);_a(l)}function eA(l,u,h,x,b,w,T,D,U,re,me,be,se,ce){if(l.timeoutHandle=-1,be=u.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$a},WS(u,w,be);var Pe=(w&62914560)===w?qh-an():(w&4194048)===w?YS-an():0;if(Pe=o7(be,Pe),Pe!==null){as=w,l.cancelPendingCommit=Pe(lA.bind(null,l,u,w,h,x,b,T,D,U,me,be,null,se,ce)),$s(l,w,T,!re);return}}lA(l,u,w,h,x,b,T,D,U)}function EL(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var x=0;x<h.length;x++){var b=h[x],w=b.getSnapshot;b=b.value;try{if(!vi(w(),b))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function $s(l,u,h,x){u&=~Qg,u&=~al,l.suspendedLanes|=u,l.pingedLanes&=~u,x&&(l.warmLanes|=u),x=l.expirationTimes;for(var b=u;0<b;){var w=31-Ln(b),T=1<<w;x[w]=-1,b&=~T}h!==0&&zr(l,h,u)}function Yh(){return(Nt&6)===0?(ud(0),!1):!0}function ix(){if(ht!==null){if(It===0)var l=ht.return;else l=ht,Ka=Yo=null,bg(l),uc=null,Wu=0,l=ht;for(;l!==null;)MS(l.alternate,l),l=l.return;ht=null}}function bc(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,VL(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),as=0,ix(),Kt=l,ht=h=Wa(l.current,null),gt=u,It=0,Ei=null,zs=!1,xc=Wt(l,u),Jg=!1,yc=Si=Qg=al=Us=Sn=0,ai=ld=null,ex=!1,(u&8)!==0&&(u|=u&32);var x=l.entangledLanes;if(x!==0)for(l=l.entanglements,x&=u;0<x;){var b=31-Ln(x),w=1<<b;u|=l[b],x&=~w}return is=u,xh(),h}function tA(l,u){at=null,H.H=ed,u===cc||u===Ah?(u=xE(),It=3):u===lg?(u=xE(),It=4):It=u===jg?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ei=u,ht===null&&(Sn=1,Fh(l,Ii(u,l.current)))}function nA(){var l=wi.current;return l===null?!0:(gt&4194048)===gt?Bi===null:(gt&62914560)===gt||(gt&536870912)!==0?l===Bi:!1}function rA(){var l=H.H;return H.H=ed,l===null?ed:l}function iA(){var l=H.A;return H.A=wL,l}function Zh(){Sn=4,zs||(gt&4194048)!==gt&&wi.current!==null||(xc=!0),(Us&134217727)===0&&(al&134217727)===0||Kt===null||$s(Kt,gt,Si,!1)}function ax(l,u,h){var x=Nt;Nt|=2;var b=rA(),w=iA();(Kt!==l||gt!==u)&&(Xh=null,bc(l,u)),u=!1;var T=Sn;e:do try{if(It!==0&&ht!==null){var D=ht,U=Ei;switch(It){case 8:ix(),T=6;break e;case 3:case 2:case 9:case 6:wi.current===null&&(u=!0);var re=It;if(It=0,Ei=null,wc(l,D,U,re),h&&xc){T=0;break e}break;default:re=It,It=0,Ei=null,wc(l,D,U,re)}}SL(),T=Sn;break}catch(me){tA(l,me)}while(!0);return u&&l.shellSuspendCounter++,Ka=Yo=null,Nt=x,H.H=b,H.A=w,ht===null&&(Kt=null,gt=0,xh()),T}function SL(){for(;ht!==null;)aA(ht)}function AL(l,u){var h=Nt;Nt|=2;var x=rA(),b=iA();Kt!==l||gt!==u?(Xh=null,Kh=an()+500,bc(l,u)):xc=Wt(l,u);e:do try{if(It!==0&&ht!==null){u=ht;var w=Ei;t:switch(It){case 1:It=0,Ei=null,wc(l,u,w,1);break;case 2:case 9:if(mE(w)){It=0,Ei=null,sA(u);break}u=function(){It!==2&&It!==9||Kt!==l||(It=7),_a(l)},w.then(u,u);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:mE(w)?(It=0,Ei=null,sA(u)):(It=0,Ei=null,wc(l,u,w,7));break;case 5:var T=null;switch(ht.tag){case 26:T=ht.memoizedState;case 5:case 27:var D=ht;if(T?GA(T):D.stateNode.complete){It=0,Ei=null;var U=D.sibling;if(U!==null)ht=U;else{var re=D.return;re!==null?(ht=re,Jh(re)):ht=null}break t}}It=0,Ei=null,wc(l,u,w,5);break;case 6:It=0,Ei=null,wc(l,u,w,6);break;case 8:ix(),Sn=6;break e;default:throw Error(r(462))}}_L();break}catch(me){tA(l,me)}while(!0);return Ka=Yo=null,H.H=x,H.A=b,Nt=h,ht!==null?0:(Kt=null,gt=0,xh(),Sn)}function _L(){for(;ht!==null&&!wn();)aA(ht)}function aA(l){var u=kS(l.alternate,l,is);l.memoizedProps=l.pendingProps,u===null?Jh(l):ht=u}function sA(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=ES(h,u,u.pendingProps,u.type,void 0,gt);break;case 11:u=ES(h,u,u.pendingProps,u.type.render,u.ref,gt);break;case 5:bg(u);default:MS(h,u),u=ht=iE(u,is),u=kS(h,u,is)}l.memoizedProps=l.pendingProps,u===null?Jh(l):ht=u}function wc(l,u,h,x){Ka=Yo=null,bg(u),uc=null,Wu=0;var b=u.return;try{if(pL(l,b,u,h,gt)){Sn=1,Fh(l,Ii(h,l.current)),ht=null;return}}catch(w){if(b!==null)throw ht=b,w;Sn=1,Fh(l,Ii(h,l.current)),ht=null;return}u.flags&32768?(vt||x===1?l=!0:xc||(gt&536870912)!==0?l=!1:(zs=l=!0,(x===2||x===9||x===3||x===6)&&(x=wi.current,x!==null&&x.tag===13&&(x.flags|=16384))),oA(u,l)):Jh(u)}function Jh(l){var u=l;do{if((u.flags&32768)!==0){oA(u,zs);return}l=u.return;var h=xL(u.alternate,u,is);if(h!==null){ht=h;return}if(u=u.sibling,u!==null){ht=u;return}ht=u=l}while(u!==null);Sn===0&&(Sn=5)}function oA(l,u){do{var h=yL(l.alternate,l);if(h!==null){h.flags&=32767,ht=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){ht=l;return}ht=l=h}while(l!==null);Sn=6,ht=null}function lA(l,u,h,x,b,w,T,D,U){l.cancelPendingCommit=null;do Qh();while(Wn!==0);if((Nt&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=qm,mn(l,h,w,T,D,U),l===Kt&&(ht=Kt=null,gt=0),vc=u,Vs=l,as=h,tx=w,nx=b,ZS=x,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,OL(Mn,function(){return hA(),null})):(l.callbackNode=null,l.callbackPriority=0),x=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||x){x=H.T,H.T=null,b=J.p,J.p=2,T=Nt,Nt|=4;try{vL(l,u,h)}finally{Nt=T,J.p=b,H.T=x}}Wn=1,cA(),uA(),dA()}}function cA(){if(Wn===1){Wn=0;var l=Vs,u=vc,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=H.T,H.T=null;var x=J.p;J.p=2;var b=Nt;Nt|=4;try{VS(u,l);var w=xx,T=XC(l.containerInfo),D=w.focusedElem,U=w.selectionRange;if(T!==D&&D&&D.ownerDocument&&KC(D.ownerDocument.documentElement,D)){if(U!==null&&Hm(D)){var re=U.start,me=U.end;if(me===void 0&&(me=re),"selectionStart"in D)D.selectionStart=re,D.selectionEnd=Math.min(me,D.value.length);else{var be=D.ownerDocument||document,se=be&&be.defaultView||window;if(se.getSelection){var ce=se.getSelection(),Pe=D.textContent.length,Ze=Math.min(U.start,Pe),Ut=U.end===void 0?Ze:Math.min(U.end,Pe);!ce.extend&&Ze>Ut&&(T=Ut,Ut=Ze,Ze=T);var Y=qC(D,Ze),G=qC(D,Ut);if(Y&&G&&(ce.rangeCount!==1||ce.anchorNode!==Y.node||ce.anchorOffset!==Y.offset||ce.focusNode!==G.node||ce.focusOffset!==G.offset)){var ne=be.createRange();ne.setStart(Y.node,Y.offset),ce.removeAllRanges(),Ze>Ut?(ce.addRange(ne),ce.extend(G.node,G.offset)):(ne.setEnd(G.node,G.offset),ce.addRange(ne))}}}}for(be=[],ce=D;ce=ce.parentNode;)ce.nodeType===1&&be.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<be.length;D++){var ye=be[D];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}dp=!!gx,xx=gx=null}finally{Nt=b,J.p=x,H.T=h}}l.current=u,Wn=2}}function uA(){if(Wn===2){Wn=0;var l=Vs,u=vc,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=H.T,H.T=null;var x=J.p;J.p=2;var b=Nt;Nt|=4;try{BS(l,u.alternate,u)}finally{Nt=b,J.p=x,H.T=h}}Wn=3}}function dA(){if(Wn===4||Wn===3){Wn=0,Jr();var l=Vs,u=vc,h=as,x=ZS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Wn=5:(Wn=0,vc=Vs=null,fA(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Hs=null),xi(h),u=u.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(gi,u,void 0,(u.current.flags&128)===128)}catch{}if(x!==null){u=H.T,b=J.p,J.p=2,H.T=null;try{for(var w=l.onRecoverableError,T=0;T<x.length;T++){var D=x[T];w(D.value,{componentStack:D.stack})}}finally{H.T=u,J.p=b}}(as&3)!==0&&Qh(),_a(l),b=l.pendingLanes,(h&261930)!==0&&(b&42)!==0?l===rx?cd++:(cd=0,rx=l):cd=0,ud(0)}}function fA(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,$u(u)))}function Qh(){return cA(),uA(),dA(),hA()}function hA(){if(Wn!==5)return!1;var l=Vs,u=tx;tx=0;var h=xi(as),x=H.T,b=J.p;try{J.p=32>h?32:h,H.T=null,h=nx,nx=null;var w=Vs,T=as;if(Wn=0,vc=Vs=null,as=0,(Nt&6)!==0)throw Error(r(331));var D=Nt;if(Nt|=4,KS(w.current),GS(w,w.current,T,h),Nt=D,ud(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(gi,w)}catch{}return!0}finally{J.p=b,H.T=x,fA(l,u)}}function pA(l,u,h){u=Ii(h,u),u=Lg(l.stateNode,u,2),l=js(l,u,2),l!==null&&(kr(l,2),_a(l))}function Lt(l,u,h){if(l.tag===3)pA(l,l,h);else for(;u!==null;){if(u.tag===3){pA(u,l,h);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Hs===null||!Hs.has(x))){l=Ii(h,l),h=mS(2),x=js(u,h,2),x!==null&&(gS(h,x,u,l),kr(x,2),_a(x));break}}u=u.return}}function sx(l,u,h){var x=l.pingCache;if(x===null){x=l.pingCache=new CL;var b=new Set;x.set(u,b)}else b=x.get(u),b===void 0&&(b=new Set,x.set(u,b));b.has(h)||(Jg=!0,b.add(h),l=TL.bind(null,l,u,h),u.then(l,l))}function TL(l,u,h){var x=l.pingCache;x!==null&&x.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,Kt===l&&(gt&h)===h&&(Sn===4||Sn===3&&(gt&62914560)===gt&&300>an()-qh?(Nt&2)===0&&bc(l,0):Qg|=h,yc===gt&&(yc=0)),_a(l)}function mA(l,u){u===0&&(u=Tt()),l=qo(l,u),l!==null&&(kr(l,u),_a(l))}function NL(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),mA(l,h)}function kL(l,u){var h=0;switch(l.tag){case 31:case 13:var x=l.stateNode,b=l.memoizedState;b!==null&&(h=b.retryLane);break;case 19:x=l.stateNode;break;case 22:x=l.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(u),mA(l,h)}function OL(l,u){return Le(l,u)}var ep=null,Cc=null,ox=!1,tp=!1,lx=!1,Gs=0;function _a(l){l!==Cc&&l.next===null&&(Cc===null?ep=Cc=l:Cc=Cc.next=l),tp=!0,ox||(ox=!0,DL())}function ud(l,u){if(!lx&&tp){lx=!0;do for(var h=!1,x=ep;x!==null;){if(l!==0){var b=x.pendingLanes;if(b===0)var w=0;else{var T=x.suspendedLanes,D=x.pingedLanes;w=(1<<31-Ln(42|l)+1)-1,w&=b&~(T&~D),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(h=!0,vA(x,w))}else w=gt,w=Cn(x,x===Kt?w:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(w&3)===0||Wt(x,w)||(h=!0,vA(x,w));x=x.next}while(h);lx=!1}}function ML(){gA()}function gA(){tp=ox=!1;var l=0;Gs!==0&&HL()&&(l=Gs);for(var u=an(),h=null,x=ep;x!==null;){var b=x.next,w=xA(x,u);w===0?(x.next=null,h===null?ep=b:h.next=b,b===null&&(Cc=h)):(h=x,(l!==0||(w&3)!==0)&&(tp=!0)),x=b}Wn!==0&&Wn!==5||ud(l),Gs!==0&&(Gs=0)}function xA(l,u){for(var h=l.suspendedLanes,x=l.pingedLanes,b=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var T=31-Ln(w),D=1<<T,U=b[T];U===-1?((D&h)===0||(D&x)!==0)&&(b[T]=_t(D,u)):U<=u&&(l.expiredLanes|=D),w&=~D}if(u=Kt,h=gt,h=Cn(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x=l.callbackNode,h===0||l===u&&(It===2||It===9)||l.cancelPendingCommit!==null)return x!==null&&x!==null&&Ve(x),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||Wt(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(x!==null&&Ve(x),xi(h)){case 2:case 8:h=On;break;case 32:h=Mn;break;case 268435456:h=mi;break;default:h=Mn}return x=yA.bind(null,l),h=Le(h,x),l.callbackPriority=u,l.callbackNode=h,u}return x!==null&&x!==null&&Ve(x),l.callbackPriority=2,l.callbackNode=null,2}function yA(l,u){if(Wn!==0&&Wn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(Qh()&&l.callbackNode!==h)return null;var x=gt;return x=Cn(l,l===Kt?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x===0?null:(QS(l,x,u),xA(l,an()),l.callbackNode!=null&&l.callbackNode===h?yA.bind(null,l):null)}function vA(l,u){if(Qh())return null;QS(l,u,!0)}function DL(){$L(function(){(Nt&6)!==0?Le(pi,ML):gA()})}function cx(){if(Gs===0){var l=oc;l===0&&(l=Qr,Qr<<=1,(Qr&261888)===0&&(Qr=256)),Gs=l}return Gs}function bA(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ch(""+l)}function wA(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function RL(l,u,h,x,b){if(u==="submit"&&h&&h.stateNode===b){var w=bA((b[ue]||null).action),T=x.submitter;T&&(u=(u=T[ue]||null)?bA(u.formAction):T.getAttribute("formAction"),u!==null&&(w=u,T=null));var D=new hh("action","action",null,x,b);l.push({event:D,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Gs!==0){var U=T?wA(b,T):new FormData(b);kg(h,{pending:!0,data:U,method:b.method,action:w},null,U)}}else typeof w=="function"&&(D.preventDefault(),U=T?wA(b,T):new FormData(b),kg(h,{pending:!0,data:U,method:b.method,action:w},w,U))},currentTarget:b}]})}}for(var ux=0;ux<Wm.length;ux++){var dx=Wm[ux],IL=dx.toLowerCase(),LL=dx[0].toUpperCase()+dx.slice(1);na(IL,"on"+LL)}na(JC,"onAnimationEnd"),na(QC,"onAnimationIteration"),na(eE,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(ZI,"onTransitionRun"),na(JI,"onTransitionStart"),na(QI,"onTransitionCancel"),na(tE,"onTransitionEnd"),Va("onMouseEnter",["mouseout","mouseover"]),Va("onMouseLeave",["mouseout","mouseover"]),Va("onPointerEnter",["pointerout","pointerover"]),Va("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dd));function CA(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var x=l[h],b=x.event;x=x.listeners;e:{var w=void 0;if(u)for(var T=x.length-1;0<=T;T--){var D=x[T],U=D.instance,re=D.currentTarget;if(D=D.listener,U!==w&&b.isPropagationStopped())break e;w=D,b.currentTarget=re;try{w(b)}catch(me){gh(me)}b.currentTarget=null,w=U}else for(T=0;T<x.length;T++){if(D=x[T],U=D.instance,re=D.currentTarget,D=D.listener,U!==w&&b.isPropagationStopped())break e;w=D,b.currentTarget=re;try{w(b)}catch(me){gh(me)}b.currentTarget=null,w=U}}}}function pt(l,u){var h=u[Ae];h===void 0&&(h=u[Ae]=new Set);var x=l+"__bubble";h.has(x)||(EA(u,l,2,!1),h.add(x))}function fx(l,u,h){var x=0;u&&(x|=4),EA(h,l,x,u)}var np="_reactListening"+Math.random().toString(36).slice(2);function hx(l){if(!l[np]){l[np]=!0,Ur.forEach(function(h){h!=="selectionchange"&&(jL.has(h)||fx(h,!1,l),fx(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[np]||(u[np]=!0,fx("selectionchange",!1,u))}}function EA(l,u,h,x){switch(JA(u)){case 2:var b=u7;break;case 8:b=d7;break;default:b=Nx}h=b.bind(null,u,h,l),b=void 0,!Rm||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),x?b!==void 0?l.addEventListener(u,h,{capture:!0,passive:b}):l.addEventListener(u,h,!0):b!==void 0?l.addEventListener(u,h,{passive:b}):l.addEventListener(u,h,!1)}function px(l,u,h,x,b){var w=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var T=x.tag;if(T===3||T===4){var D=x.stateNode.containerInfo;if(D===b)break;if(T===4)for(T=x.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===b)return;T=T.return}for(;D!==null;){if(T=yt(D),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){x=w=T;continue e}D=D.parentNode}}x=x.return}NC(function(){var re=w,me=Mm(h),be=[];e:{var se=nE.get(l);if(se!==void 0){var ce=hh,Pe=l;switch(l){case"keypress":if(dh(h)===0)break e;case"keydown":case"keyup":ce=kI;break;case"focusin":Pe="focus",ce=Pm;break;case"focusout":Pe="blur",ce=Pm;break;case"beforeblur":case"afterblur":ce=Pm;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=MC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=xI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=DI;break;case JC:case QC:case eE:ce=bI;break;case tE:ce=II;break;case"scroll":case"scrollend":ce=mI;break;case"wheel":ce=jI;break;case"copy":case"cut":case"paste":ce=CI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=RC;break;case"toggle":case"beforetoggle":ce=BI}var Ze=(u&4)!==0,Ut=!Ze&&(l==="scroll"||l==="scrollend"),Y=Ze?se!==null?se+"Capture":null:se;Ze=[];for(var G=re,ne;G!==null;){var ye=G;if(ne=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ne===null||Y===null||(ye=Ru(G,Y),ye!=null&&Ze.push(fd(G,ye,ne))),Ut)break;G=G.return}0<Ze.length&&(se=new ce(se,Pe,null,h,me),be.push({event:se,listeners:Ze}))}}if((u&7)===0){e:{if(se=l==="mouseover"||l==="pointerover",ce=l==="mouseout"||l==="pointerout",se&&h!==Om&&(Pe=h.relatedTarget||h.fromElement)&&(yt(Pe)||Pe[ve]))break e;if((ce||se)&&(se=me.window===me?me:(se=me.ownerDocument)?se.defaultView||se.parentWindow:window,ce?(Pe=h.relatedTarget||h.toElement,ce=re,Pe=Pe?yt(Pe):null,Pe!==null&&(Ut=a(Pe),Ze=Pe.tag,Pe!==Ut||Ze!==5&&Ze!==27&&Ze!==6)&&(Pe=null)):(ce=null,Pe=re),ce!==Pe)){if(Ze=MC,ye="onMouseLeave",Y="onMouseEnter",G="mouse",(l==="pointerout"||l==="pointerover")&&(Ze=RC,ye="onPointerLeave",Y="onPointerEnter",G="pointer"),Ut=ce==null?se:ei(ce),ne=Pe==null?se:ei(Pe),se=new Ze(ye,G+"leave",ce,h,me),se.target=Ut,se.relatedTarget=ne,ye=null,yt(me)===re&&(Ze=new Ze(Y,G+"enter",Pe,h,me),Ze.target=ne,Ze.relatedTarget=Ut,ye=Ze),Ut=ye,ce&&Pe)t:{for(Ze=PL,Y=ce,G=Pe,ne=0,ye=Y;ye;ye=Ze(ye))ne++;ye=0;for(var We=G;We;We=Ze(We))ye++;for(;0<ne-ye;)Y=Ze(Y),ne--;for(;0<ye-ne;)G=Ze(G),ye--;for(;ne--;){if(Y===G||G!==null&&Y===G.alternate){Ze=Y;break t}Y=Ze(Y),G=Ze(G)}Ze=null}else Ze=null;ce!==null&&SA(be,se,ce,Ze,!1),Pe!==null&&Ut!==null&&SA(be,Ut,Pe,Ze,!0)}}e:{if(se=re?ei(re):window,ce=se.nodeName&&se.nodeName.toLowerCase(),ce==="select"||ce==="input"&&se.type==="file")var Ct=UC;else if(FC(se))if(HC)Ct=KI;else{Ct=WI;var He=GI}else ce=se.nodeName,!ce||ce.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?re&&km(re.elementType)&&(Ct=UC):Ct=qI;if(Ct&&(Ct=Ct(l,re))){zC(be,Ct,h,me);break e}He&&He(l,se,re),l==="focusout"&&re&&se.type==="number"&&re.memoizedProps.value!=null&&Vo(se,"number",se.value)}switch(He=re?ei(re):window,l){case"focusin":(FC(He)||He.contentEditable==="true")&&(Ql=He,Vm=re,Uu=null);break;case"focusout":Uu=Vm=Ql=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,YC(be,h,me);break;case"selectionchange":if(YI)break;case"keydown":case"keyup":YC(be,h,me)}var ot;if(Fm)e:{switch(l){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Jl?PC(l,h)&&(xt="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(xt="onCompositionStart");xt&&(IC&&h.locale!=="ko"&&(Jl||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Jl&&(ot=kC()):(ks=me,Im="value"in ks?ks.value:ks.textContent,Jl=!0)),He=rp(re,xt),0<He.length&&(xt=new DC(xt,l,null,h,me),be.push({event:xt,listeners:He}),ot?xt.data=ot:(ot=BC(h),ot!==null&&(xt.data=ot)))),(ot=zI?UI(l,h):HI(l,h))&&(xt=rp(re,"onBeforeInput"),0<xt.length&&(He=new DC("onBeforeInput","beforeinput",null,h,me),be.push({event:He,listeners:xt}),He.data=ot)),RL(be,l,re,h,me)}CA(be,u)})}function fd(l,u,h){return{instance:l,listener:u,currentTarget:h}}function rp(l,u){for(var h=u+"Capture",x=[];l!==null;){var b=l,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Ru(l,h),b!=null&&x.unshift(fd(l,b,w)),b=Ru(l,u),b!=null&&x.push(fd(l,b,w))),l.tag===3)return x;l=l.return}return[]}function PL(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function SA(l,u,h,x,b){for(var w=u._reactName,T=[];h!==null&&h!==x;){var D=h,U=D.alternate,re=D.stateNode;if(D=D.tag,U!==null&&U===x)break;D!==5&&D!==26&&D!==27||re===null||(U=re,b?(re=Ru(h,w),re!=null&&T.unshift(fd(h,re,U))):b||(re=Ru(h,w),re!=null&&T.push(fd(h,re,U)))),h=h.return}T.length!==0&&l.push({event:u,listeners:T})}var BL=/\r\n?/g,FL=/\u0000|\uFFFD/g;function AA(l){return(typeof l=="string"?l:""+l).replace(BL,`
`).replace(FL,"")}function _A(l,u){return u=AA(u),AA(l)===u}function zt(l,u,h,x,b,w){switch(h){case"children":typeof x=="string"?u==="body"||u==="textarea"&&x===""||Xl(l,x):(typeof x=="number"||typeof x=="bigint")&&u!=="body"&&Xl(l,""+x);break;case"className":ql(l,"class",x);break;case"tabIndex":ql(l,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":ql(l,h,x);break;case"style":_C(l,x,w);break;case"data":if(u!=="object"){ql(l,"data",x);break}case"src":case"href":if(x===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(h);break}x=ch(""+x),l.setAttribute(h,x);break;case"action":case"formAction":if(typeof x=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(h==="formAction"?(u!=="input"&&zt(l,u,"name",b.name,b,null),zt(l,u,"formEncType",b.formEncType,b,null),zt(l,u,"formMethod",b.formMethod,b,null),zt(l,u,"formTarget",b.formTarget,b,null)):(zt(l,u,"encType",b.encType,b,null),zt(l,u,"method",b.method,b,null),zt(l,u,"target",b.target,b,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(h);break}x=ch(""+x),l.setAttribute(h,x);break;case"onClick":x!=null&&(l.onclick=$a);break;case"onScroll":x!=null&&pt("scroll",l);break;case"onScrollEnd":x!=null&&pt("scrollend",l);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(h=x.__html,h!=null){if(b.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"multiple":l.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":l.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){l.removeAttribute("xlink:href");break}h=ch(""+x),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(h,""+x):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":x===!0?l.setAttribute(h,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(h,x):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?l.setAttribute(h,x):l.removeAttribute(h);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?l.removeAttribute(h):l.setAttribute(h,x);break;case"popover":pt("beforetoggle",l),pt("toggle",l),Du(l,"popover",x);break;case"xlinkActuate":ee(l,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ee(l,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ee(l,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ee(l,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ee(l,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ee(l,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ee(l,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ee(l,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ee(l,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Du(l,"is",x);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=hI.get(h)||h,Du(l,h,x))}}function mx(l,u,h,x,b,w){switch(h){case"style":_C(l,x,w);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(h=x.__html,h!=null){if(b.children!=null)throw Error(r(60));l.innerHTML=h}}break;case"children":typeof x=="string"?Xl(l,x):(typeof x=="number"||typeof x=="bigint")&&Xl(l,""+x);break;case"onScroll":x!=null&&pt("scroll",l);break;case"onScrollEnd":x!=null&&pt("scrollend",l);break;case"onClick":x!=null&&(l.onclick=$a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lh.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),u=h.slice(2,b?h.length-7:void 0),w=l[ue]||null,w=w!=null?w[h]:null,typeof w=="function"&&l.removeEventListener(u,w,b),typeof x=="function")){typeof w!="function"&&w!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,x,b);break e}h in l?l[h]=x:x===!0?l.setAttribute(h,""):Du(l,h,x)}}}function vr(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",l),pt("load",l);var x=!1,b=!1,w;for(w in h)if(h.hasOwnProperty(w)){var T=h[w];if(T!=null)switch(w){case"src":x=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:zt(l,u,w,T,h,null)}}b&&zt(l,u,"srcSet",h.srcSet,h,null),x&&zt(l,u,"src",h.src,h,null);return;case"input":pt("invalid",l);var D=w=T=b=null,U=null,re=null;for(x in h)if(h.hasOwnProperty(x)){var me=h[x];if(me!=null)switch(x){case"name":b=me;break;case"type":T=me;break;case"checked":U=me;break;case"defaultChecked":re=me;break;case"value":w=me;break;case"defaultValue":D=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,u));break;default:zt(l,u,x,me,h,null)}}Ca(l,w,D,U,re,T,b,!1);return;case"select":pt("invalid",l),x=T=w=null;for(b in h)if(h.hasOwnProperty(b)&&(D=h[b],D!=null))switch(b){case"value":w=D;break;case"defaultValue":T=D;break;case"multiple":x=D;default:zt(l,u,b,D,h,null)}u=w,h=T,l.multiple=!!x,u!=null?Kl(l,!!x,u,!1):h!=null&&Kl(l,!!x,h,!0);return;case"textarea":pt("invalid",l),w=b=x=null;for(T in h)if(h.hasOwnProperty(T)&&(D=h[T],D!=null))switch(T){case"value":x=D;break;case"defaultValue":b=D;break;case"children":w=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:zt(l,u,T,D,h,null)}SC(l,x,b,w);return;case"option":for(U in h)if(h.hasOwnProperty(U)&&(x=h[U],x!=null))switch(U){case"selected":l.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:zt(l,u,U,x,h,null)}return;case"dialog":pt("beforetoggle",l),pt("toggle",l),pt("cancel",l),pt("close",l);break;case"iframe":case"object":pt("load",l);break;case"video":case"audio":for(x=0;x<dd.length;x++)pt(dd[x],l);break;case"image":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"embed":case"source":case"link":pt("error",l),pt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in h)if(h.hasOwnProperty(re)&&(x=h[re],x!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:zt(l,u,re,x,h,null)}return;default:if(km(u)){for(me in h)h.hasOwnProperty(me)&&(x=h[me],x!==void 0&&mx(l,u,me,x,h,void 0));return}}for(D in h)h.hasOwnProperty(D)&&(x=h[D],x!=null&&zt(l,u,D,x,h,null))}function zL(l,u,h,x){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,T=null,D=null,U=null,re=null,me=null;for(ce in h){var be=h[ce];if(h.hasOwnProperty(ce)&&be!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":U=be;default:x.hasOwnProperty(ce)||zt(l,u,ce,null,x,be)}}for(var se in x){var ce=x[se];if(be=h[se],x.hasOwnProperty(se)&&(ce!=null||be!=null))switch(se){case"type":w=ce;break;case"name":b=ce;break;case"checked":re=ce;break;case"defaultChecked":me=ce;break;case"value":T=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,u));break;default:ce!==be&&zt(l,u,se,ce,x,be)}}yi(l,T,D,U,re,me,w,b);return;case"select":ce=T=D=se=null;for(w in h)if(U=h[w],h.hasOwnProperty(w)&&U!=null)switch(w){case"value":break;case"multiple":ce=U;default:x.hasOwnProperty(w)||zt(l,u,w,null,x,U)}for(b in x)if(w=x[b],U=h[b],x.hasOwnProperty(b)&&(w!=null||U!=null))switch(b){case"value":se=w;break;case"defaultValue":D=w;break;case"multiple":T=w;default:w!==U&&zt(l,u,b,w,x,U)}u=D,h=T,x=ce,se!=null?Kl(l,!!h,se,!1):!!x!=!!h&&(u!=null?Kl(l,!!h,u,!0):Kl(l,!!h,h?[]:"",!1));return;case"textarea":ce=se=null;for(D in h)if(b=h[D],h.hasOwnProperty(D)&&b!=null&&!x.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:zt(l,u,D,null,x,b)}for(T in x)if(b=x[T],w=h[T],x.hasOwnProperty(T)&&(b!=null||w!=null))switch(T){case"value":se=b;break;case"defaultValue":ce=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==w&&zt(l,u,T,b,x,w)}EC(l,se,ce);return;case"option":for(var Pe in h)if(se=h[Pe],h.hasOwnProperty(Pe)&&se!=null&&!x.hasOwnProperty(Pe))switch(Pe){case"selected":l.selected=!1;break;default:zt(l,u,Pe,null,x,se)}for(U in x)if(se=x[U],ce=h[U],x.hasOwnProperty(U)&&se!==ce&&(se!=null||ce!=null))switch(U){case"selected":l.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:zt(l,u,U,se,x,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in h)se=h[Ze],h.hasOwnProperty(Ze)&&se!=null&&!x.hasOwnProperty(Ze)&&zt(l,u,Ze,null,x,se);for(re in x)if(se=x[re],ce=h[re],x.hasOwnProperty(re)&&se!==ce&&(se!=null||ce!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,u));break;default:zt(l,u,re,se,x,ce)}return;default:if(km(u)){for(var Ut in h)se=h[Ut],h.hasOwnProperty(Ut)&&se!==void 0&&!x.hasOwnProperty(Ut)&&mx(l,u,Ut,void 0,x,se);for(me in x)se=x[me],ce=h[me],!x.hasOwnProperty(me)||se===ce||se===void 0&&ce===void 0||mx(l,u,me,se,x,ce);return}}for(var Y in h)se=h[Y],h.hasOwnProperty(Y)&&se!=null&&!x.hasOwnProperty(Y)&&zt(l,u,Y,null,x,se);for(be in x)se=x[be],ce=h[be],!x.hasOwnProperty(be)||se===ce||se==null&&ce==null||zt(l,u,be,se,x,ce)}function TA(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UL(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,h=performance.getEntriesByType("resource"),x=0;x<h.length;x++){var b=h[x],w=b.transferSize,T=b.initiatorType,D=b.duration;if(w&&D&&TA(T)){for(T=0,D=b.responseEnd,x+=1;x<h.length;x++){var U=h[x],re=U.startTime;if(re>D)break;var me=U.transferSize,be=U.initiatorType;me&&TA(be)&&(U=U.responseEnd,T+=me*(U<D?1:(D-re)/(U-re)))}if(--x,u+=8*(w+T)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var gx=null,xx=null;function ip(l){return l.nodeType===9?l:l.ownerDocument}function NA(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kA(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function yx(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var vx=null;function HL(){var l=window.event;return l&&l.type==="popstate"?l===vx?!1:(vx=l,!0):(vx=null,!1)}var OA=typeof setTimeout=="function"?setTimeout:void 0,VL=typeof clearTimeout=="function"?clearTimeout:void 0,MA=typeof Promise=="function"?Promise:void 0,$L=typeof queueMicrotask=="function"?queueMicrotask:typeof MA<"u"?function(l){return MA.resolve(null).then(l).catch(GL)}:OA;function GL(l){setTimeout(function(){throw l})}function Ws(l){return l==="head"}function DA(l,u){var h=u,x=0;do{var b=h.nextSibling;if(l.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"||h==="/&"){if(x===0){l.removeChild(b),_c(u);return}x--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")x++;else if(h==="html")hd(l.ownerDocument.documentElement);else if(h==="head"){h=l.ownerDocument.head,hd(h);for(var w=h.firstChild;w;){var T=w.nextSibling,D=w.nodeName;w[rt]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&w.rel.toLowerCase()==="stylesheet"||h.removeChild(w),w=T}}else h==="body"&&hd(l.ownerDocument.body);h=b}while(h);_c(u)}function RA(l,u){var h=l;l=0;do{var x=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(l===0)break;l--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||l++;h=x}while(h)}function bx(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":bx(h),gn(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function WL(l,u,h,x){for(;l.nodeType===1;){var b=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!x&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(x){if(!l[rt])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(w=l.getAttribute("rel"),w==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(w!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(w=l.getAttribute("src"),(w!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===w)return l}else return l;if(l=Fi(l.nextSibling),l===null)break}return null}function qL(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Fi(l.nextSibling),l===null))return null;return l}function IA(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Fi(l.nextSibling),l===null))return null;return l}function wx(l){return l.data==="$?"||l.data==="$~"}function Cx(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function KL(l,u){var h=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||h.readyState!=="loading")u();else{var x=function(){u(),h.removeEventListener("DOMContentLoaded",x)};h.addEventListener("DOMContentLoaded",x),l._reactRetry=x}}function Fi(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var Ex=null;function LA(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="/$"||h==="/&"){if(u===0)return Fi(l.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}l=l.nextSibling}return null}function jA(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return l;u--}else h!=="/$"&&h!=="/&"||u++}l=l.previousSibling}return null}function PA(l,u,h){switch(u=ip(h),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function hd(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);gn(l)}var zi=new Map,BA=new Set;function ap(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ss=J.d;J.d={f:XL,r:YL,D:ZL,C:JL,L:QL,m:e7,X:n7,S:t7,M:r7};function XL(){var l=ss.f(),u=Yh();return l||u}function YL(l){var u=Mt(l);u!==null&&u.tag===5&&u.type==="form"?tS(u):ss.r(l)}var Ec=typeof document>"u"?null:document;function FA(l,u,h){var x=Ec;if(x&&typeof u=="string"&&u){var b=yn(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),BA.has(b)||(BA.add(b),l={rel:l,crossOrigin:h,href:u},x.querySelector(b)===null&&(u=x.createElement("link"),vr(u,"link",l),Pn(u),x.head.appendChild(u)))}}function ZL(l){ss.D(l),FA("dns-prefetch",l,null)}function JL(l,u){ss.C(l,u),FA("preconnect",l,u)}function QL(l,u,h){ss.L(l,u,h);var x=Ec;if(x&&l&&u){var b='link[rel="preload"][as="'+yn(u)+'"]';u==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+yn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+yn(h.imageSizes)+'"]')):b+='[href="'+yn(l)+'"]';var w=b;switch(u){case"style":w=Sc(l);break;case"script":w=Ac(l)}zi.has(w)||(l=p({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),zi.set(w,l),x.querySelector(b)!==null||u==="style"&&x.querySelector(pd(w))||u==="script"&&x.querySelector(md(w))||(u=x.createElement("link"),vr(u,"link",l),Pn(u),x.head.appendChild(u)))}}function e7(l,u){ss.m(l,u);var h=Ec;if(h&&l){var x=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+yn(x)+'"][href="'+yn(l)+'"]',w=b;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ac(l)}if(!zi.has(w)&&(l=p({rel:"modulepreload",href:l},u),zi.set(w,l),h.querySelector(b)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(md(w)))return}x=h.createElement("link"),vr(x,"link",l),Pn(x),h.head.appendChild(x)}}}function t7(l,u,h){ss.S(l,u,h);var x=Ec;if(x&&l){var b=Mi(x).hoistableStyles,w=Sc(l);u=u||"default";var T=b.get(w);if(!T){var D={loading:0,preload:null};if(T=x.querySelector(pd(w)))D.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":u},h),(h=zi.get(w))&&Sx(l,h);var U=T=x.createElement("link");Pn(U),vr(U,"link",l),U._p=new Promise(function(re,me){U.onload=re,U.onerror=me}),U.addEventListener("load",function(){D.loading|=1}),U.addEventListener("error",function(){D.loading|=2}),D.loading|=4,sp(T,u,x)}T={type:"stylesheet",instance:T,count:1,state:D},b.set(w,T)}}}function n7(l,u){ss.X(l,u);var h=Ec;if(h&&l){var x=Mi(h).hoistableScripts,b=Ac(l),w=x.get(b);w||(w=h.querySelector(md(b)),w||(l=p({src:l,async:!0},u),(u=zi.get(b))&&Ax(l,u),w=h.createElement("script"),Pn(w),vr(w,"link",l),h.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},x.set(b,w))}}function r7(l,u){ss.M(l,u);var h=Ec;if(h&&l){var x=Mi(h).hoistableScripts,b=Ac(l),w=x.get(b);w||(w=h.querySelector(md(b)),w||(l=p({src:l,async:!0,type:"module"},u),(u=zi.get(b))&&Ax(l,u),w=h.createElement("script"),Pn(w),vr(w,"link",l),h.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},x.set(b,w))}}function zA(l,u,h,x){var b=(b=Q.current)?ap(b):null;if(!b)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Sc(h.href),h=Mi(b).hoistableStyles,x=h.get(u),x||(x={type:"style",instance:null,count:0,state:null},h.set(u,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=Sc(h.href);var w=Mi(b).hoistableStyles,T=w.get(l);if(T||(b=b.ownerDocument||b,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(l,T),(w=b.querySelector(pd(l)))&&!w._p&&(T.instance=w,T.state.loading=5),zi.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},zi.set(l,h),w||i7(b,l,h,T.state))),u&&x===null)throw Error(r(528,""));return T}if(u&&x!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ac(h),h=Mi(b).hoistableScripts,x=h.get(u),x||(x={type:"script",instance:null,count:0,state:null},h.set(u,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Sc(l){return'href="'+yn(l)+'"'}function pd(l){return'link[rel="stylesheet"]['+l+"]"}function UA(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function i7(l,u,h,x){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?x.loading=1:(u=l.createElement("link"),x.preload=u,u.addEventListener("load",function(){return x.loading|=1}),u.addEventListener("error",function(){return x.loading|=2}),vr(u,"link",h),Pn(u),l.head.appendChild(u))}function Ac(l){return'[src="'+yn(l)+'"]'}function md(l){return"script[async]"+l}function HA(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var x=l.querySelector('style[data-href~="'+yn(h.href)+'"]');if(x)return u.instance=x,Pn(x),x;var b=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return x=(l.ownerDocument||l).createElement("style"),Pn(x),vr(x,"style",b),sp(x,h.precedence,l),u.instance=x;case"stylesheet":b=Sc(h.href);var w=l.querySelector(pd(b));if(w)return u.state.loading|=4,u.instance=w,Pn(w),w;x=UA(h),(b=zi.get(b))&&Sx(x,b),w=(l.ownerDocument||l).createElement("link"),Pn(w);var T=w;return T._p=new Promise(function(D,U){T.onload=D,T.onerror=U}),vr(w,"link",x),u.state.loading|=4,sp(w,h.precedence,l),u.instance=w;case"script":return w=Ac(h.src),(b=l.querySelector(md(w)))?(u.instance=b,Pn(b),b):(x=h,(b=zi.get(w))&&(x=p({},h),Ax(x,b)),l=l.ownerDocument||l,b=l.createElement("script"),Pn(b),vr(b,"link",x),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(x=u.instance,u.state.loading|=4,sp(x,h.precedence,l));return u.instance}function sp(l,u,h){for(var x=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=x.length?x[x.length-1]:null,w=b,T=0;T<x.length;T++){var D=x[T];if(D.dataset.precedence===u)w=D;else if(w!==b)break}w?w.parentNode.insertBefore(l,w.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function Sx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function Ax(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var op=null;function VA(l,u,h){if(op===null){var x=new Map,b=op=new Map;b.set(h,x)}else b=op,x=b.get(h),x||(x=new Map,b.set(h,x));if(x.has(l))return x;for(x.set(l,null),h=h.getElementsByTagName(l),b=0;b<h.length;b++){var w=h[b];if(!(w[rt]||w[Se]||l==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var T=w.getAttribute(u)||"";T=l+T;var D=x.get(T);D?D.push(w):x.set(T,[w])}}return x}function $A(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function a7(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function GA(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function s7(l,u,h,x){if(h.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var b=Sc(x.href),w=u.querySelector(pd(b));if(w){u=w._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=lp.bind(l),u.then(l,l)),h.state.loading|=4,h.instance=w,Pn(w);return}w=u.ownerDocument||u,x=UA(x),(b=zi.get(b))&&Sx(x,b),w=w.createElement("link"),Pn(w);var T=w;T._p=new Promise(function(D,U){T.onload=D,T.onerror=U}),vr(w,"link",x),h.instance=w}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(l.count++,h=lp.bind(l),u.addEventListener("load",h),u.addEventListener("error",h))}}var _x=0;function o7(l,u){return l.stylesheets&&l.count===0&&up(l,l.stylesheets),0<l.count||0<l.imgCount?function(h){var x=setTimeout(function(){if(l.stylesheets&&up(l,l.stylesheets),l.unsuspend){var w=l.unsuspend;l.unsuspend=null,w()}},6e4+u);0<l.imgBytes&&_x===0&&(_x=62500*UL());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&up(l,l.stylesheets),l.unsuspend)){var w=l.unsuspend;l.unsuspend=null,w()}},(l.imgBytes>_x?50:800)+u);return l.unsuspend=h,function(){l.unsuspend=null,clearTimeout(x),clearTimeout(b)}}:null}function lp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)up(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var cp=null;function up(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,cp=new Map,u.forEach(l7,l),cp=null,lp.call(l))}function l7(l,u){if(!(u.state.loading&4)){var h=cp.get(l);if(h)var x=h.get(null);else{h=new Map,cp.set(l,h);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var T=b[w];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(h.set(T.dataset.precedence,T),x=T)}x&&h.set(null,x)}b=u.instance,T=b.getAttribute("data-precedence"),w=h.get(T)||x,w===x&&h.set(null,b),h.set(T,b),this.count++,x=lp.bind(this),b.addEventListener("load",x),b.addEventListener("error",x),w?w.parentNode.insertBefore(b,w.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var gd={$$typeof:N,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function c7(l,u,h,x,b,w,T,D,U){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.hiddenUpdates=nr(null),this.identifierPrefix=x,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function WA(l,u,h,x,b,w,T,D,U,re,me,be){return l=new c7(l,u,h,T,U,re,me,be,D),u=1,w===!0&&(u|=24),w=bi(3,null,null,u),l.current=w,w.stateNode=l,u=ag(),u.refCount++,l.pooledCache=u,u.refCount++,w.memoizedState={element:x,isDehydrated:h,cache:u},cg(w),l}function qA(l){return l?(l=nc,l):nc}function KA(l,u,h,x,b,w){b=qA(b),x.context===null?x.context=b:x.pendingContext=b,x=Ls(u),x.payload={element:h},w=w===void 0?null:w,w!==null&&(x.callback=w),h=js(l,x,u),h!==null&&(si(h,l,u),Ku(h,l,u))}function XA(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function Tx(l,u){XA(l,u),(l=l.alternate)&&XA(l,u)}function YA(l){if(l.tag===13||l.tag===31){var u=qo(l,67108864);u!==null&&si(u,l,67108864),Tx(l,67108864)}}function ZA(l){if(l.tag===13||l.tag===31){var u=Ai();u=jn(u);var h=qo(l,u);h!==null&&si(h,l,u),Tx(l,u)}}var dp=!0;function u7(l,u,h,x){var b=H.T;H.T=null;var w=J.p;try{J.p=2,Nx(l,u,h,x)}finally{J.p=w,H.T=b}}function d7(l,u,h,x){var b=H.T;H.T=null;var w=J.p;try{J.p=8,Nx(l,u,h,x)}finally{J.p=w,H.T=b}}function Nx(l,u,h,x){if(dp){var b=kx(x);if(b===null)px(l,u,x,fp,h),QA(l,x);else if(h7(b,l,u,h,x))x.stopPropagation();else if(QA(l,x),u&4&&-1<f7.indexOf(l)){for(;b!==null;){var w=Mt(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var T=Bt(w.pendingLanes);if(T!==0){var D=w;for(D.pendingLanes|=2,D.entangledLanes|=2;T;){var U=1<<31-Ln(T);D.entanglements[1]|=U,T&=~U}_a(w),(Nt&6)===0&&(Kh=an()+500,ud(0))}}break;case 31:case 13:D=qo(w,2),D!==null&&si(D,w,2),Yh(),Tx(w,2)}if(w=kx(x),w===null&&px(l,u,x,fp,h),w===b)break;b=w}b!==null&&x.stopPropagation()}else px(l,u,x,null,h)}}function kx(l){return l=Mm(l),Ox(l)}var fp=null;function Ox(l){if(fp=null,l=yt(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=s(u),l!==null)return l;l=null}else if(h===31){if(l=o(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return fp=l,null}function JA(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ha()){case pi:return 2;case On:return 8;case Mn:case Gt:return 32;case mi:return 268435456;default:return 32}default:return 32}}var Mx=!1,qs=null,Ks=null,Xs=null,xd=new Map,yd=new Map,Ys=[],f7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QA(l,u){switch(l){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":xd.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(u.pointerId)}}function vd(l,u,h,x,b,w){return l===null||l.nativeEvent!==w?(l={blockedOn:u,domEventName:h,eventSystemFlags:x,nativeEvent:w,targetContainers:[b]},u!==null&&(u=Mt(u),u!==null&&YA(u)),l):(l.eventSystemFlags|=x,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function h7(l,u,h,x,b){switch(u){case"focusin":return qs=vd(qs,l,u,h,x,b),!0;case"dragenter":return Ks=vd(Ks,l,u,h,x,b),!0;case"mouseover":return Xs=vd(Xs,l,u,h,x,b),!0;case"pointerover":var w=b.pointerId;return xd.set(w,vd(xd.get(w)||null,l,u,h,x,b)),!0;case"gotpointercapture":return w=b.pointerId,yd.set(w,vd(yd.get(w)||null,l,u,h,x,b)),!0}return!1}function e3(l){var u=yt(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){l.blockedOn=u,X(l.priority,function(){ZA(h)});return}}else if(u===31){if(u=o(h),u!==null){l.blockedOn=u,X(l.priority,function(){ZA(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function hp(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=kx(l.nativeEvent);if(h===null){h=l.nativeEvent;var x=new h.constructor(h.type,h);Om=x,h.target.dispatchEvent(x),Om=null}else return u=Mt(h),u!==null&&YA(u),l.blockedOn=h,!1;u.shift()}return!0}function t3(l,u,h){hp(l)&&h.delete(u)}function p7(){Mx=!1,qs!==null&&hp(qs)&&(qs=null),Ks!==null&&hp(Ks)&&(Ks=null),Xs!==null&&hp(Xs)&&(Xs=null),xd.forEach(t3),yd.forEach(t3)}function pp(l,u){l.blockedOn===u&&(l.blockedOn=null,Mx||(Mx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,p7)))}var mp=null;function n3(l){mp!==l&&(mp=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){mp===l&&(mp=null);for(var u=0;u<l.length;u+=3){var h=l[u],x=l[u+1],b=l[u+2];if(typeof x!="function"){if(Ox(x||h)===null)continue;break}var w=Mt(h);w!==null&&(l.splice(u,3),u-=3,kg(w,{pending:!0,data:b,method:h.method,action:x},x,b))}}))}function _c(l){function u(U){return pp(U,l)}qs!==null&&pp(qs,l),Ks!==null&&pp(Ks,l),Xs!==null&&pp(Xs,l),xd.forEach(u),yd.forEach(u);for(var h=0;h<Ys.length;h++){var x=Ys[h];x.blockedOn===l&&(x.blockedOn=null)}for(;0<Ys.length&&(h=Ys[0],h.blockedOn===null);)e3(h),h.blockedOn===null&&Ys.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(x=0;x<h.length;x+=3){var b=h[x],w=h[x+1],T=b[ue]||null;if(typeof w=="function")T||n3(h);else if(T){var D=null;if(w&&w.hasAttribute("formAction")){if(b=w,T=w[ue]||null)D=T.formAction;else if(Ox(b)!==null)continue}else D=T.action;typeof D=="function"?h[x+1]=D:(h.splice(x,3),x-=3),n3(h)}}}function r3(){function l(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(T){return b=T})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),x||setTimeout(h,20)}function h(){if(!x&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){x=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function Dx(l){this._internalRoot=l}gp.prototype.render=Dx.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,x=Ai();KA(h,x,l,u,null,null)},gp.prototype.unmount=Dx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;KA(l.current,2,null,l,null,null),Yh(),u[ve]=null}};function gp(l){this._internalRoot=l}gp.prototype.unstable_scheduleHydration=function(l){if(l){var u=V();l={blockedOn:null,target:l,priority:u};for(var h=0;h<Ys.length&&u!==0&&u<Ys[h].priority;h++);Ys.splice(h,0,l),h===0&&e3(l)}};var i3=e.version;if(i3!=="19.2.0")throw Error(r(527,i3,"19.2.0"));J.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=d(u),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var m7={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xp.isDisabled&&xp.supportsFiber)try{gi=xp.inject(m7),pn=xp}catch{}}return wd.createRoot=function(l,u){if(!i(l))throw Error(r(299));var h=!1,x="",b=dS,w=fS,T=hS;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),u=WA(l,1,!1,null,null,h,x,null,b,w,T,r3),l[ve]=u.current,hx(l),new Dx(u)},wd.hydrateRoot=function(l,u,h){if(!i(l))throw Error(r(299));var x=!1,b="",w=dS,T=fS,D=hS,U=null;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(w=h.onUncaughtError),h.onCaughtError!==void 0&&(T=h.onCaughtError),h.onRecoverableError!==void 0&&(D=h.onRecoverableError),h.formState!==void 0&&(U=h.formState)),u=WA(l,1,!0,u,h??null,x,b,U,w,T,D,r3),u.context=qA(null),h=u.current,x=Ai(),x=jn(x),b=Ls(x),b.callback=null,js(h,b,x),h=x,u.current.lanes=h,kr(u,h),_a(u),l[ve]=u.current,hx(l),new gp(u)},wd.version="19.2.0",wd}var p3;function A7(){if(p3)return Lx.exports;p3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Lx.exports=S7(),Lx.exports}var _7=A7();const T7=U1(_7);/**
 * react-router v7.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var m3="popstate";function g3(t){return typeof t=="object"&&t!=null&&"pathname"in t&&"search"in t&&"hash"in t&&"state"in t&&"key"in t}function N7(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=yu(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Ov("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,d=c.indexOf("#");o=d===-1?c:c.slice(0,d)}return o+"#"+(typeof a=="string"?a:ff(a))}function r(i,a){ga(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return O7(e,n,r,t)}function tr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ga(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k7(){return Math.random().toString(36).substring(2,10)}function x3(t,e){return{usr:t.state,key:t.key,idx:e,masked:t.unstable_mask?{pathname:t.pathname,search:t.search,hash:t.hash}:void 0}}function Ov(t,e,n=null,r,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?yu(e):e,state:n,key:e&&e.key||r||k7(),unstable_mask:i}}function ff({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function O7(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,d=f();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function f(){return(s.state||{idx:null}).idx}function p(){o="POP";let E=f(),S=E==null?null:E-d;d=E,c&&c({action:o,location:C.location,delta:S})}function m(E,S){o="PUSH";let _=g3(E)?E:Ov(C.location,E,S);n&&n(_,E),d=f()+1;let N=x3(_,d),k=C.createHref(_.unstable_mask||_);try{s.pushState(N,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(k)}a&&c&&c({action:o,location:C.location,delta:1})}function y(E,S){o="REPLACE";let _=g3(E)?E:Ov(C.location,E,S);n&&n(_,E),d=f();let N=x3(_,d),k=C.createHref(_.unstable_mask||_);s.replaceState(N,"",k),a&&c&&c({action:o,location:C.location,delta:0})}function v(E){return M7(E)}let C={get action(){return o},get location(){return t(i,s)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(m3,p),c=E,()=>{i.removeEventListener(m3,p),c=null}},createHref(E){return e(i,E)},createURL:v,encodeLocation(E){let S=v(E);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:y,go(E){return s.go(E)}};return C}function M7(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),tr(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ff(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Kk(t,e,n="/"){return D7(t,e,n,!1)}function D7(t,e,n,r){let i=typeof e=="string"?yu(e):e,a=Cs(i.pathname||"/",n);if(a==null)return null;let s=Xk(t);R7(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let d=$7(a);o=H7(s[c],d,r)}return o}function Xk(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,d)=>{let f={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;tr(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Da([r,f.relativePath]),m=n.concat(f);s.children&&s.children.length>0&&(tr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Xk(s.children,e,m,p,c)),!(s.path==null&&!s.index)&&e.push({path:p,score:z7(p,s.index),routesMeta:m})};return t.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))a(s,o);else for(let d of Yk(s.path))a(s,o,!0,d)}),e}function Yk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=Yk(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function R7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:U7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var I7=/^:[\w-]+$/,L7=3,j7=2,P7=1,B7=10,F7=-2,y3=t=>t==="*";function z7(t,e){let n=t.split("/"),r=n.length;return n.some(y3)&&(r+=F7),e&&(r+=j7),n.filter(i=>!y3(i)).reduce((i,a)=>i+(I7.test(a)?L7:a===""?P7:B7),r)}function U7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function H7(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",p=y0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=y0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:Da([a,p.pathname]),pathnameBase:K7(Da([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=Da([a,p.pathnameBase]))}return s}function y0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=V7(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:p},m)=>{if(f==="*"){let v=o[m]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=o[m];return p&&!y?d[f]=void 0:d[f]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:t}}function V7(t,e=!1,n=!0){ga(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c,d,f)=>{if(r.push({paramName:o,isOptional:c!=null}),c){let p=f.charAt(d+s.length);return p&&p!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function $7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ga(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Cs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var G7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function W7(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?yu(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=v3(n.substring(1),"/"):a=v3(n,e)):a=e,{pathname:a,search:X7(r),hash:Y7(i)}}function v3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fx(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function q7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zk(t){let e=q7(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function fb(t,e,n,r=!1){let i;typeof t=="string"?i=yu(t):(i={...t},tr(!i.pathname||!i.pathname.includes("?"),Fx("?","pathname","search",i)),tr(!i.pathname||!i.pathname.includes("#"),Fx("#","pathname","hash",i)),tr(!i.search||!i.search.includes("#"),Fx("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}o=p>=0?e[p]:"/"}let c=W7(i,o),d=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var Da=t=>t.join("/").replace(/\/\/+/g,"/"),K7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),X7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Y7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Z7=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function J7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Q7(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Jk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qk(t,e){let n=t;if(typeof n!="string"||!G7.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(Jk)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=Cs(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{ga(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var e5=["POST","PUT","PATCH","DELETE"];new Set(e5);var e9=["GET",...e5];new Set(e9);var vu=A.createContext(null);vu.displayName="DataRouter";var H1=A.createContext(null);H1.displayName="DataRouterState";var t9=A.createContext(!1),t5=A.createContext({isTransitioning:!1});t5.displayName="ViewTransition";var n9=A.createContext(new Map);n9.displayName="Fetchers";var r9=A.createContext(null);r9.displayName="Await";var ea=A.createContext(null);ea.displayName="Navigation";var V1=A.createContext(null);V1.displayName="Location";var Ts=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ts.displayName="Route";var hb=A.createContext(null);hb.displayName="RouteError";var n5="REACT_ROUTER_ERROR",i9="REDIRECT",a9="ROUTE_ERROR_RESPONSE";function s9(t){if(t.startsWith(`${n5}:${i9}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function o9(t){if(t.startsWith(`${n5}:${a9}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Z7(e.status,e.statusText,e.data)}catch{}}function l9(t,{relative:e}={}){tr(Bf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(ea),{hash:i,pathname:a,search:s}=Ff(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:Da([n,a])),r.createHref({pathname:o,search:s,hash:i})}function Bf(){return A.useContext(V1)!=null}function Io(){return tr(Bf(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(V1).location}var r5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function i5(t){A.useContext(ea).static||A.useLayoutEffect(t)}function c9(){let{isDataRoute:t}=A.useContext(Ts);return t?C9():u9()}function u9(){tr(Bf(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(vu),{basename:e,navigator:n}=A.useContext(ea),{matches:r}=A.useContext(Ts),{pathname:i}=Io(),a=JSON.stringify(Zk(r)),s=A.useRef(!1);return i5(()=>{s.current=!0}),A.useCallback((c,d={})=>{if(ga(s.current,r5),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=fb(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Da([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,a,i,t])}A.createContext(null);function Ff(t,{relative:e}={}){let{matches:n}=A.useContext(Ts),{pathname:r}=Io(),i=JSON.stringify(Zk(n));return A.useMemo(()=>fb(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function d9(t,e,n){tr(Bf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=A.useContext(ea),{matches:i}=A.useContext(Ts),a=i[i.length-1],s=a?a.params:{},o=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let E=d&&d.path||"";s5(o,!d||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${o}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let f=Io(),p;p=f;let m=p.pathname||"/",y=m;if(c!=="/"){let E=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=Kk(t,{pathname:y});return ga(d||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),ga(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),g9(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},s,E.params),pathname:Da([c,r.encodeLocation?r.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Da([c,r.encodeLocation?r.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),i,n)}function f9(){let t=w9(),e=J7(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var h9=A.createElement(f9,null),a5=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=o9(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(Ts.Provider,{value:this.props.routeContext},A.createElement(hb.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(p9,{error:t},e):e}};a5.contextType=t9;var zx=new WeakMap;function p9({children:t,error:e}){let{basename:n}=A.useContext(ea);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=s9(e.digest);if(r){let i=zx.get(e);if(i)throw i;let a=Qk(r.location,n);if(Jk&&!zx.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw zx.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function m9({routeContext:t,match:e,children:n}){let r=A.useContext(vu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Ts.Provider,{value:t},n)}function g9(t,e=[],n){let r=n==null?void 0:n.state;if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=r==null?void 0:r.errors;if(a!=null){let f=i.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);tr(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let s=!1,o=-1;if(n&&r){s=r.renderFallback;for(let f=0;f<i.length;f++){let p=i[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(o=f),p.route.id){let{loaderData:m,errors:y}=r,v=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||v){n.isStatic&&(s=!0),o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}}let c=n==null?void 0:n.onError,d=r&&c?(f,p)=>{var m,y;c(f,{location:r.location,params:((y=(m=r.matches)==null?void 0:m[0])==null?void 0:y.params)??{},unstable_pattern:Q7(r.matches),errorInfo:p})}:void 0;return i.reduceRight((f,p,m)=>{let y,v=!1,C=null,E=null;r&&(y=a&&p.route.id?a[p.route.id]:void 0,C=p.route.errorElement||h9,s&&(o<0&&m===0?(s5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,E=null):o===m&&(v=!0,E=p.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,m+1)),_=()=>{let N;return y?N=C:v?N=E:p.route.Component?N=A.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=f,A.createElement(m9,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:r!=null},children:N})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?A.createElement(a5,{location:r.location,revalidation:r.revalidation,component:C,error:y,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:d}):_()},null)}function pb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x9(t){let e=A.useContext(vu);return tr(e,pb(t)),e}function y9(t){let e=A.useContext(H1);return tr(e,pb(t)),e}function v9(t){let e=A.useContext(Ts);return tr(e,pb(t)),e}function mb(t){let e=v9(t),n=e.matches[e.matches.length-1];return tr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function b9(){return mb("useRouteId")}function w9(){var r;let t=A.useContext(hb),e=y9("useRouteError"),n=mb("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function C9(){let{router:t}=x9("useNavigate"),e=mb("useNavigate"),n=A.useRef(!1);return i5(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{ga(n.current,r5),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var b3={};function s5(t,e,n){!e&&!b3[t]&&(b3[t]=!0,ga(!1,n))}A.memo(E9);function E9({routes:t,future:e,state:n,isStatic:r,onError:i}){return d9(t,void 0,{state:n,isStatic:r,onError:i})}function S9({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){tr(!Bf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=yu(n));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:y="default",unstable_mask:v}=n,C=A.useMemo(()=>{let E=Cs(d,o);return E==null?null:{location:{pathname:E,search:f,hash:p,state:m,key:y,unstable_mask:v},navigationType:r}},[o,d,f,p,m,y,r,v]);return ga(C!=null,`<Router basename="${o}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:A.createElement(ea.Provider,{value:c},A.createElement(V1.Provider,{children:e,value:C}))}var qp="get",Kp="application/x-www-form-urlencoded";function $1(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function A9(t){return $1(t)&&t.tagName.toLowerCase()==="button"}function _9(t){return $1(t)&&t.tagName.toLowerCase()==="form"}function T9(t){return $1(t)&&t.tagName.toLowerCase()==="input"}function N9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function k9(t,e){return t.button===0&&(!e||e==="_self")&&!N9(t)}var yp=null;function O9(){if(yp===null)try{new FormData(document.createElement("form"),0),yp=!1}catch{yp=!0}return yp}var M9=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ux(t){return t!=null&&!M9.has(t)?(ga(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kp}"`),null):t}function D9(t,e){let n,r,i,a,s;if(_9(t)){let o=t.getAttribute("action");r=o?Cs(o,e):null,n=t.getAttribute("method")||qp,i=Ux(t.getAttribute("enctype"))||Kp,a=new FormData(t)}else if(A9(t)||T9(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?Cs(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||qp,i=Ux(t.getAttribute("formenctype"))||Ux(o.getAttribute("enctype"))||Kp,a=new FormData(o,t),!O9()){let{name:d,type:f,value:p}=t;if(f==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,p)}}else{if($1(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qp,r=null,i=Kp,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function R9(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Cs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function I9(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function L9(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function j9(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await I9(a,n);return s.links?s.links():[]}return[]}));return z9(r.flat(1).filter(L9).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function w3(t,e,n,r,i,a){let s=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,o=(c,d)=>{var f;return n[d].pathname!==c.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,d)=>s(c,d)||o(c,d)):a==="data"?e.filter((c,d)=>{var p;let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function P9(t,e,{includeHydrateFallback:n}={}){return B9(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function B9(t){return[...new Set(t)]}function F9(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function z9(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(F9(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function o5(){let t=A.useContext(vu);return gb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function U9(){let t=A.useContext(H1);return gb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var xb=A.createContext(void 0);xb.displayName="FrameworkContext";function l5(){let t=A.useContext(xb);return gb(t,"You must render this element inside a <HydratedRouter> element"),t}function H9(t,e){let n=A.useContext(xb),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,m=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let C=S=>{S.forEach(_=>{s(_.isIntersecting)})},E=new IntersectionObserver(C,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[t]),A.useEffect(()=>{if(r){let C=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(C)}}},[r]);let y=()=>{i(!0)},v=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:Cd(o,y),onBlur:Cd(c,v),onMouseEnter:Cd(d,y),onMouseLeave:Cd(f,v),onTouchStart:Cd(p,y)}]:[!1,m,{}]}function Cd(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function V9({page:t,...e}){let{router:n}=o5(),r=A.useMemo(()=>Kk(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(G9,{page:t,matches:r,...e}):null}function $9(t){let{manifest:e,routeModules:n}=l5(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return j9(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function G9({page:t,matches:e,...n}){let r=Io(),{future:i,manifest:a,routeModules:s}=l5(),{basename:o}=o5(),{loaderData:c,matches:d}=U9(),f=A.useMemo(()=>w3(t,e,d,a,r,"data"),[t,e,d,a,r]),p=A.useMemo(()=>w3(t,e,d,a,r,"assets"),[t,e,d,a,r]),m=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let C=new Set,E=!1;if(e.forEach(_=>{var k;let N=a.routes[_.route.id];!N||!N.hasLoader||(!f.some(O=>O.route.id===_.route.id)&&_.route.id in c&&((k=s[_.route.id])!=null&&k.shouldRevalidate)||N.hasClientLoader?E=!0:C.add(_.route.id))}),C.size===0)return[];let S=R9(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return E&&C.size>0&&S.searchParams.set("_routes",e.filter(_=>C.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),y=A.useMemo(()=>P9(p,a),[p,a]),v=$9(p);return A.createElement(A.Fragment,null,m.map(C=>A.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),y.map(C=>A.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),v.map(({key:C,link:E})=>A.createElement("link",{key:C,nonce:n.nonce,...E,crossOrigin:E.crossOrigin??n.crossOrigin})))}function W9(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var q9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{q9&&(window.__reactRouterVersion="7.13.1")}catch{}function K9({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=N7({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(d=>{n===!1?o(d):A.startTransition(()=>o(d))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(S9,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var c5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u5=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,unstable_mask:o,state:c,target:d,to:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...v},C){let{basename:E,navigator:S,unstable_useTransitions:_}=A.useContext(ea),N=typeof f=="string"&&c5.test(f),k=Qk(f,E);f=k.to;let O=l9(f,{relative:i}),I=Io(),M=null;if(o){let xe=fb(o,[],I.unstable_mask?I.unstable_mask.pathname:"/",!0);E!=="/"&&(xe.pathname=xe.pathname==="/"?E:Da([E,xe.pathname])),M=S.createHref(xe)}let[L,B,le]=H9(r,v),ae=J9(f,{replace:s,unstable_mask:o,state:c,target:d,preventScrollReset:p,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:_});function fe(xe){e&&e(xe),xe.defaultPrevented||ae(xe)}let W=!(k.isExternal||a),de=A.createElement("a",{...v,...le,href:(W?M:void 0)||k.absoluteURL||O,onClick:W?fe:e,ref:W9(C,B),target:d,"data-discover":!N&&n==="render"?"true":void 0});return L&&!N?A.createElement(A.Fragment,null,de,A.createElement(V9,{page:O})):de});u5.displayName="Link";var X9=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...d},f){let p=Ff(s,{relative:d.relative}),m=Io(),y=A.useContext(H1),{navigator:v,basename:C}=A.useContext(ea),E=y!=null&&rj(p)&&o===!0,S=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,_=m.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(_=_.toLowerCase(),N=N?N.toLowerCase():null,S=S.toLowerCase()),N&&C&&(N=Cs(N,C)||N);const k=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=_===S||!i&&_.startsWith(S)&&_.charAt(k)==="/",I=N!=null&&(N===S||!i&&N.startsWith(S)&&N.charAt(S.length)==="/"),M={isActive:O,isPending:I,isTransitioning:E},L=O?e:void 0,B;typeof r=="function"?B=r(M):B=[r,O?"active":null,I?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let le=typeof a=="function"?a(M):a;return A.createElement(u5,{...d,"aria-current":L,className:B,ref:f,style:le,to:s,viewTransition:o},typeof c=="function"?c(M):c)});X9.displayName="NavLink";var Y9=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=qp,action:o,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:m,...y},v)=>{let{unstable_useTransitions:C}=A.useContext(ea),E=tj(),S=nj(o,{relative:d}),_=s.toLowerCase()==="get"?"get":"post",N=typeof o=="string"&&c5.test(o),k=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let I=O.nativeEvent.submitter,M=(I==null?void 0:I.getAttribute("formmethod"))||s,L=()=>E(I||O.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:i,state:a,relative:d,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:m});C&&n!==!1?A.startTransition(()=>L()):L()};return A.createElement("form",{ref:v,method:_,action:S,onSubmit:r?c:k,...y,"data-discover":!N&&t==="render"?"true":void 0})});Y9.displayName="Form";function Z9(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d5(t){let e=A.useContext(vu);return tr(e,Z9(t)),e}function J9(t,{target:e,replace:n,unstable_mask:r,state:i,preventScrollReset:a,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:d}={}){let f=c9(),p=Io(),m=Ff(t,{relative:s});return A.useCallback(y=>{if(k9(y,e)){y.preventDefault();let v=n!==void 0?n:ff(p)===ff(m),C=()=>f(t,{replace:v,unstable_mask:r,state:i,preventScrollReset:a,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:c});d?A.startTransition(()=>C()):C()}},[p,f,m,n,r,i,e,t,a,s,o,c,d])}var Q9=0,ej=()=>`__${String(++Q9)}__`;function tj(){let{router:t}=d5("useSubmit"),{basename:e}=A.useContext(ea),n=b9(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:d,formData:f,body:p}=D9(a,e);if(s.navigate===!1){let m=s.fetcherKey||ej();await r(m,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function nj(t,{relative:e}={}){let{basename:n}=A.useContext(ea),r=A.useContext(Ts);tr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Ff(t||".",{relative:e})},s=Io();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(p=>p).forEach(p=>o.append("index",p));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Da([n,a.pathname])),ff(a)}function rj(t,{relative:e}={}){let n=A.useContext(t5);tr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=d5("useViewTransitionState"),i=Ff(t,{relative:e});if(!n.isTransitioning)return!1;let a=Cs(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Cs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return y0(i.pathname,s)!=null||y0(i.pathname,a)!=null}var jc=qk();const ij=U1(jc),aj="modulepreload",sj=function(t){return"/"+t},C3={},jl=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let s=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=s(n.map(d=>{if(d=sj(d),d in C3)return;C3[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":aj,f||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),E3=t=>{const e=lj(t);return e.charAt(0).toUpperCase()+e.slice(1)},f5=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),cj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...uj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:f5("lucide",i),...!a&&!cj(o)&&{"aria-hidden":"true"},...o},[...s.map(([d,f])=>A.createElement(d,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(dj,{ref:a,iconNode:e,className:f5(`lucide-${oj(E3(t))}`,`lucide-${t}`,r),...i}));return n.displayName=E3(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],h5=Ne("arrow-left",fj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pj=Ne("arrow-right",hj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],gj=Ne("arrow-up-down",mj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],yj=Ne("bold",xj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],_l=Ne("book-open",vj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],yb=Ne("book",bj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],S3=Ne("bot",wj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],p5=Ne("brain",Cj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],eu=Ne("calendar",Ej);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],tu=Ne("camera",Sj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vb=Ne("check",Aj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xl=Ne("chevron-down",_j);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Co=Ne("chevron-left",Tj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],m5=Ne("chevron-right",Nj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],g5=Ne("chevron-up",kj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],nu=Ne("circle-alert",Oj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],hf=Ne("circle-check-big",Mj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Rj=Ne("circle-question-mark",Dj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lj=Ne("clock-3",Ij);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pj=Ne("clock",jj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Fj=Ne("columns-3",Bj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],x5=Ne("compass",zj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Hj=Ne("database",Uj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$j=Ne("download",Vj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],Wj=Ne("eraser",Gj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],G1=Ne("external-link",qj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A3=Ne("eye",Kj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],y5=Ne("file-braces",Xj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],Zj=Ne("file-search",Yj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zf=Ne("file-text",Jj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],eP=Ne("folder-plus",Qj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],_3=Ne("folder",tP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],rP=Ne("funnel",nP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],aP=Ne("gauge",iP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],W1=Ne("globe",sP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],T3=Ne("grip-vertical",oP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],v0=Ne("hash",lP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],uP=Ne("heading-1",cP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],fP=Ne("heading-2",dP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],N3=Ne("image",hP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mP=Ne("info",pP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],xP=Ne("italic",gP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],vP=Ne("layers",yP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]],v5=Ne("layout-panel-left",bP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],bb=Ne("library",wP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],k3=Ne("link",CP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]],O3=Ne("list-filter",EP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],AP=Ne("list-ordered",SP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],TP=Ne("list",_P);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],In=Ne("loader-circle",NP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],OP=Ne("log-out",kP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],DP=Ne("map-pin",MP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],IP=Ne("menu",RP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Mv=Ne("message-circle",LP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],PP=Ne("moon",jP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],FP=Ne("network",BP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],UP=Ne("palette",zP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],b0=Ne("pen-tool",HP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],w0=Ne("pen",VP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],M3=Ne("pencil-line",$P);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],WP=Ne("pencil",GP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],b5=Ne("play",qP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dv=Ne("plus",KP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],pf=Ne("quote",XP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],w5=Ne("rotate-ccw",YP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]],JP=Ne("rows-3",ZP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],eB=Ne("save",QP);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],nB=Ne("scan-line",tB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ms=Ne("search",rB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],aB=Ne("send",iB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Hx=Ne("settings-2",sB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lB=Ne("shield-check",oB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],uB=Ne("skip-forward",cB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],fB=Ne("sliders-horizontal",dB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ra=Ne("sparkles",hB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mB=Ne("square-check-big",pB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],xB=Ne("square",gB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Tc=Ne("star",yB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],ru=Ne("sticky-note",vB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],wB=Ne("sun",bB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],EB=Ne("table-2",CB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],AB=Ne("thumbs-down",SB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],TB=Ne("thumbs-up",_B);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tl=Ne("trash-2",NB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xo=Ne("triangle-alert",kB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],MB=Ne("type",OB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],RB=Ne("underline",DB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],C0=Ne("upload",IB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wb=Ne("user",LB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],PB=Ne("wand-sparkles",jB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],FB=Ne("waves",BB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xa=Ne("x",zB);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],HB=Ne("zap",UB),q1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bu(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Cb(t){return"nodeType"in t}function Zr(t){var e,n;return t?bu(t)?t:Cb(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Eb(t){const{Document:e}=Zr(t);return t instanceof e}function Uf(t){return bu(t)?!1:t instanceof Zr(t).HTMLElement}function C5(t){return t instanceof Zr(t).SVGElement}function wu(t){return t?bu(t)?t.document:Cb(t)?Eb(t)?t:Uf(t)||C5(t)?t.ownerDocument:document:document:document}const Es=q1?A.useLayoutEffect:A.useEffect;function K1(t){const e=A.useRef(t);return Es(()=>{e.current=t}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function VB(){const t=A.useRef(null),e=A.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=A.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function mf(t,e){e===void 0&&(e=[t]);const n=A.useRef(t);return Es(()=>{n.current!==t&&(n.current=t)},e),n}function Hf(t,e){const n=A.useRef();return A.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function E0(t){const e=K1(t),n=A.useRef(null),r=A.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function S0(t){const e=A.useRef();return A.useEffect(()=>{e.current=t},[t]),e.current}let Vx={};function X1(t,e){return A.useMemo(()=>{if(e)return e;const n=Vx[t]==null?0:Vx[t]+1;return Vx[t]=n,t+"-"+n},[t,e])}function E5(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,s)=>{const o=Object.entries(s);for(const[c,d]of o){const f=a[c];f!=null&&(a[c]=f+t*d)}return a},{...e})}}const Wc=E5(1),A0=E5(-1);function $B(t){return"clientX"in t&&"clientY"in t}function Sb(t){if(!t)return!1;const{KeyboardEvent:e}=Zr(t.target);return e&&t instanceof e}function GB(t){if(!t)return!1;const{TouchEvent:e}=Zr(t.target);return e&&t instanceof e}function _0(t){if(GB(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return $B(t)?{x:t.clientX,y:t.clientY}:null}const iu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[iu.Translate.toString(t),iu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),D3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function WB(t){return t.matches(D3)?t:t.querySelector(D3)}const qB={display:"none"};function KB(t){let{id:e,value:n}=t;return nt.createElement("div",{id:e,style:qB},n)}function XB(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return nt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function YB(){const[t,e]=A.useState("");return{announce:A.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const S5=A.createContext(null);function ZB(t){const e=A.useContext(S5);A.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function JB(){const[t]=A.useState(()=>new Set),e=A.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[A.useCallback(r=>{let{type:i,event:a}=r;t.forEach(s=>{var o;return(o=s[i])==null?void 0:o.call(s,a)})},[t]),e]}const QB={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},eF={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function tF(t){let{announcements:e=eF,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=QB}=t;const{announce:a,announcement:s}=YB(),o=X1("DndLiveRegion"),[c,d]=A.useState(!1);if(A.useEffect(()=>{d(!0)},[]),ZB(A.useMemo(()=>({onDragStart(p){let{active:m}=p;a(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:y}=p;e.onDragMove&&a(e.onDragMove({active:m,over:y}))},onDragOver(p){let{active:m,over:y}=p;a(e.onDragOver({active:m,over:y}))},onDragEnd(p){let{active:m,over:y}=p;a(e.onDragEnd({active:m,over:y}))},onDragCancel(p){let{active:m,over:y}=p;a(e.onDragCancel({active:m,over:y}))}}),[a,e])),!c)return null;const f=nt.createElement(nt.Fragment,null,nt.createElement(KB,{id:r,value:i.draggable}),nt.createElement(XB,{id:o,announcement:s}));return n?jc.createPortal(f,n):f}var Zn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Zn||(Zn={}));function T0(){}function R3(t,e){return A.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function nF(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return A.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const ya=Object.freeze({x:0,y:0});function rF(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function iF(t,e){const n=_0(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function aF(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function sF(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function oF(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function I3(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const lF=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=I3(e,e.left,e.top),a=[];for(const s of r){const{id:o}=s,c=n.get(o);if(c){const d=rF(I3(c),i);a.push({id:o,data:{droppableContainer:s,value:d}})}}return a.sort(aF)};function cF(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),s=i-r,o=a-n;if(r<i&&n<a){const c=e.width*e.height,d=t.width*t.height,f=s*o,p=f/(c+d-f);return Number(p.toFixed(4))}return 0}const uF=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const a of r){const{id:s}=a,o=n.get(s);if(o){const c=cF(o,e);c>0&&i.push({id:s,data:{droppableContainer:a,value:c}})}}return i.sort(sF)};function dF(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function A5(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ya}function fF(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i.reduce((s,o)=>({...s,top:s.top+t*o.y,bottom:s.bottom+t*o.y,left:s.left+t*o.x,right:s.right+t*o.x}),{...n})}}const hF=fF(1);function _5(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function pF(t,e,n){const r=_5(e);if(!r)return t;const{scaleX:i,scaleY:a,x:s,y:o}=r,c=t.left-s-(1-i)*parseFloat(n),d=t.top-o-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),f=i?t.width/i:t.width,p=a?t.height/a:t.height;return{width:f,height:p,top:d,right:c+f,bottom:d+p,left:c}}const mF={ignoreTransform:!1};function Vf(t,e){e===void 0&&(e=mF);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:f}=Zr(t).getComputedStyle(t);d&&(n=pF(n,d,f))}const{top:r,left:i,width:a,height:s,bottom:o,right:c}=n;return{top:r,left:i,width:a,height:s,bottom:o,right:c}}function L3(t){return Vf(t,{ignoreTransform:!0})}function gF(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function xF(t,e){return e===void 0&&(e=Zr(t).getComputedStyle(t)),e.position==="fixed"}function yF(t,e){e===void 0&&(e=Zr(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?n.test(a):!1})}function Ab(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Eb(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Uf(i)||C5(i)||n.includes(i))return n;const a=Zr(t).getComputedStyle(i);return i!==t&&yF(i,a)&&n.push(i),xF(i,a)?n:r(i.parentNode)}return t?r(t):n}function T5(t){const[e]=Ab(t,1);return e??null}function $x(t){return!q1||!t?null:bu(t)?t:Cb(t)?Eb(t)||t===wu(t).scrollingElement?window:Uf(t)?t:null:null}function N5(t){return bu(t)?t.scrollX:t.scrollLeft}function k5(t){return bu(t)?t.scrollY:t.scrollTop}function Rv(t){return{x:N5(t),y:k5(t)}}var or;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(or||(or={}));function O5(t){return!q1||!t?!1:t===document.scrollingElement}function M5(t){const e={x:0,y:0},n=O5(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,s=t.scrollTop>=r.y,o=t.scrollLeft>=r.x;return{isTop:i,isLeft:a,isBottom:s,isRight:o,maxScroll:r,minScroll:e}}const vF={x:.2,y:.2};function bF(t,e,n,r,i){let{top:a,left:s,right:o,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=vF);const{isTop:d,isBottom:f,isLeft:p,isRight:m}=M5(t),y={x:0,y:0},v={x:0,y:0},C={height:e.height*i.y,width:e.width*i.x};return!d&&a<=e.top+C.height?(y.y=or.Backward,v.y=r*Math.abs((e.top+C.height-a)/C.height)):!f&&c>=e.bottom-C.height&&(y.y=or.Forward,v.y=r*Math.abs((e.bottom-C.height-c)/C.height)),!m&&o>=e.right-C.width?(y.x=or.Forward,v.x=r*Math.abs((e.right-C.width-o)/C.width)):!p&&s<=e.left+C.width&&(y.x=or.Backward,v.x=r*Math.abs((e.left+C.width-s)/C.width)),{direction:y,speed:v}}function wF(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:s}=window;return{top:0,left:0,right:a,bottom:s,width:a,height:s}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function D5(t){return t.reduce((e,n)=>Wc(e,Rv(n)),ya)}function CF(t){return t.reduce((e,n)=>e+N5(n),0)}function EF(t){return t.reduce((e,n)=>e+k5(n),0)}function R5(t,e){if(e===void 0&&(e=Vf),!t)return;const{top:n,left:r,bottom:i,right:a}=e(t);T5(t)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const SF=[["x",["left","right"],CF],["y",["top","bottom"],EF]];class _b{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ab(n),i=D5(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,s,o]of SF)for(const c of s)Object.defineProperty(this,c,{get:()=>{const d=o(r),f=i[a]-d;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $d{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function AF(t){const{EventTarget:e}=Zr(t);return t instanceof e?t:wu(t)}function Gx(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Gi;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Gi||(Gi={}));function j3(t){t.preventDefault()}function _F(t){t.stopPropagation()}var Xt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Xt||(Xt={}));const I5={start:[Xt.Space,Xt.Enter],cancel:[Xt.Esc],end:[Xt.Space,Xt.Enter,Xt.Tab]},TF=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Xt.Right:return{...n,x:n.x+25};case Xt.Left:return{...n,x:n.x-25};case Xt.Down:return{...n,y:n.y+25};case Xt.Up:return{...n,y:n.y-25}}};class L5{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new $d(wu(n)),this.windowListeners=new $d(Zr(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Gi.Resize,this.handleCancel),this.windowListeners.add(Gi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Gi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&R5(r),n(ya)}handleKeyDown(e){if(Sb(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:a=I5,coordinateGetter:s=TF,scrollBehavior:o="smooth"}=i,{code:c}=e;if(a.end.includes(c)){this.handleEnd(e);return}if(a.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=r.current,f=d?{x:d.left,y:d.top}:ya;this.referenceCoordinates||(this.referenceCoordinates=f);const p=s(e,{active:n,context:r.current,currentCoordinates:f});if(p){const m=A0(p,f),y={x:0,y:0},{scrollableAncestors:v}=r.current;for(const C of v){const E=e.code,{isTop:S,isRight:_,isLeft:N,isBottom:k,maxScroll:O,minScroll:I}=M5(C),M=wF(C),L={x:Math.min(E===Xt.Right?M.right-M.width/2:M.right,Math.max(E===Xt.Right?M.left:M.left+M.width/2,p.x)),y:Math.min(E===Xt.Down?M.bottom-M.height/2:M.bottom,Math.max(E===Xt.Down?M.top:M.top+M.height/2,p.y))},B=E===Xt.Right&&!_||E===Xt.Left&&!N,le=E===Xt.Down&&!k||E===Xt.Up&&!S;if(B&&L.x!==p.x){const ae=C.scrollLeft+m.x,fe=E===Xt.Right&&ae<=O.x||E===Xt.Left&&ae>=I.x;if(fe&&!m.y){C.scrollTo({left:ae,behavior:o});return}fe?y.x=C.scrollLeft-ae:y.x=E===Xt.Right?C.scrollLeft-O.x:C.scrollLeft-I.x,y.x&&C.scrollBy({left:-y.x,behavior:o});break}else if(le&&L.y!==p.y){const ae=C.scrollTop+m.y,fe=E===Xt.Down&&ae<=O.y||E===Xt.Up&&ae>=I.y;if(fe&&!m.x){C.scrollTo({top:ae,behavior:o});return}fe?y.y=C.scrollTop-ae:y.y=E===Xt.Down?C.scrollTop-O.y:C.scrollTop-I.y,y.y&&C.scrollBy({top:-y.y,behavior:o});break}}this.handleMove(e,Wc(A0(p,this.referenceCoordinates),y))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}L5.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=I5,onActivation:i}=e,{active:a}=n;const{code:s}=t.nativeEvent;if(r.start.includes(s)){const o=a.activatorNode.current;return o&&t.target!==o?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function P3(t){return!!(t&&"distance"in t)}function B3(t){return!!(t&&"delay"in t)}class Tb{constructor(e,n,r){var i;r===void 0&&(r=AF(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:a}=e,{target:s}=a;this.props=e,this.events=n,this.document=wu(s),this.documentListeners=new $d(this.document),this.listeners=new $d(r),this.windowListeners=new $d(Zr(s)),this.initialCoordinates=(i=_0(a))!=null?i:ya,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Gi.Resize,this.handleCancel),this.windowListeners.add(Gi.DragStart,j3),this.windowListeners.add(Gi.VisibilityChange,this.handleCancel),this.windowListeners.add(Gi.ContextMenu,j3),this.documentListeners.add(Gi.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(B3(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(P3(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Gi.Click,_F,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Gi.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:a}=this,{onMove:s,options:{activationConstraint:o}}=a;if(!i)return;const c=(n=_0(e))!=null?n:ya,d=A0(i,c);if(!r&&o){if(P3(o)){if(o.tolerance!=null&&Gx(d,o.tolerance))return this.handleCancel();if(Gx(d,o.distance))return this.handleStart()}if(B3(o)&&Gx(d,o.tolerance))return this.handleCancel();this.handlePending(o,d);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Xt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const NF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Nb extends Tb{constructor(e){const{event:n}=e,r=wu(n.target);super(e,NF,r)}}Nb.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const kF={move:{name:"mousemove"},end:{name:"mouseup"}};var Iv;(function(t){t[t.RightClick=2]="RightClick"})(Iv||(Iv={}));class OF extends Tb{constructor(e){super(e,kF,wu(e.event.target))}}OF.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Iv.RightClick?!1:(r==null||r({event:n}),!0)}}];const Wx={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class j5 extends Tb{constructor(e){super(e,Wx)}static setup(){return window.addEventListener(Wx.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Wx.move.name,e)};function e(){}}}j5.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Gd;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Gd||(Gd={}));var N0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(N0||(N0={}));function MF(t){let{acceleration:e,activator:n=Gd.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:s=5,order:o=N0.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:f,delta:p,threshold:m}=t;const y=RF({delta:p,disabled:!a}),[v,C]=VB(),E=A.useRef({x:0,y:0}),S=A.useRef({x:0,y:0}),_=A.useMemo(()=>{switch(n){case Gd.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Gd.DraggableRect:return i}},[n,i,c]),N=A.useRef(null),k=A.useCallback(()=>{const I=N.current;if(!I)return;const M=E.current.x*S.current.x,L=E.current.y*S.current.y;I.scrollBy(M,L)},[]),O=A.useMemo(()=>o===N0.TreeOrder?[...d].reverse():d,[o,d]);A.useEffect(()=>{if(!a||!d.length||!_){C();return}for(const I of O){if((r==null?void 0:r(I))===!1)continue;const M=d.indexOf(I),L=f[M];if(!L)continue;const{direction:B,speed:le}=bF(I,L,_,e,m);for(const ae of["x","y"])y[ae][B[ae]]||(le[ae]=0,B[ae]=0);if(le.x>0||le.y>0){C(),N.current=I,v(k,s),E.current=le,S.current=B;return}}E.current={x:0,y:0},S.current={x:0,y:0},C()},[e,k,r,C,a,s,JSON.stringify(_),JSON.stringify(y),v,d,O,f,JSON.stringify(m)])}const DF={x:{[or.Backward]:!1,[or.Forward]:!1},y:{[or.Backward]:!1,[or.Forward]:!1}};function RF(t){let{delta:e,disabled:n}=t;const r=S0(e);return Hf(i=>{if(n||!r||!i)return DF;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[or.Backward]:i.x[or.Backward]||a.x===-1,[or.Forward]:i.x[or.Forward]||a.x===1},y:{[or.Backward]:i.y[or.Backward]||a.y===-1,[or.Forward]:i.y[or.Forward]||a.y===1}}},[n,e,r])}function IF(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Hf(i=>{var a;return e==null?null:(a=r??i)!=null?a:null},[r,e])}function LF(t,e){return A.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,a=i.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,r)}));return[...n,...a]},[]),[t,e])}var gf;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(gf||(gf={}));var Lv;(function(t){t.Optimized="optimized"})(Lv||(Lv={}));const F3=new Map;function jF(t,e){let{dragging:n,dependencies:r,config:i}=e;const[a,s]=A.useState(null),{frequency:o,measure:c,strategy:d}=i,f=A.useRef(t),p=E(),m=mf(p),y=A.useCallback(function(S){S===void 0&&(S=[]),!m.current&&s(_=>_===null?S:_.concat(S.filter(N=>!_.includes(N))))},[m]),v=A.useRef(null),C=Hf(S=>{if(p&&!n)return F3;if(!S||S===F3||f.current!==t||a!=null){const _=new Map;for(let N of t){if(!N)continue;if(a&&a.length>0&&!a.includes(N.id)&&N.rect.current){_.set(N.id,N.rect.current);continue}const k=N.node.current,O=k?new _b(c(k),k):null;N.rect.current=O,O&&_.set(N.id,O)}return _}return S},[t,a,n,p,c]);return A.useEffect(()=>{f.current=t},[t]),A.useEffect(()=>{p||y()},[n,p]),A.useEffect(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),A.useEffect(()=>{p||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{y(),v.current=null},o))},[o,p,y,...r]),{droppableRects:C,measureDroppableContainers:y,measuringScheduled:a!=null};function E(){switch(d){case gf.Always:return!1;case gf.BeforeDragging:return n;default:return!n}}}function kb(t,e){return Hf(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function PF(t,e){return kb(t,e)}function BF(t){let{callback:e,disabled:n}=t;const r=K1(e),i=A.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return A.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Y1(t){let{callback:e,disabled:n}=t;const r=K1(e),i=A.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return A.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function FF(t){return new _b(Vf(t),t)}function z3(t,e,n){e===void 0&&(e=FF);const[r,i]=A.useState(null);function a(){i(c=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=c??n)!=null?d:null}const f=e(t);return JSON.stringify(c)===JSON.stringify(f)?c:f})}const s=BF({callback(c){if(t)for(const d of c){const{type:f,target:p}=d;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){a();break}}}}),o=Y1({callback:a});return Es(()=>{a(),t?(o==null||o.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[t]),r}function zF(t){const e=kb(t);return A5(t,e)}const U3=[];function UF(t){const e=A.useRef(t),n=Hf(r=>t?r&&r!==U3&&t&&e.current&&t.parentNode===e.current.parentNode?r:Ab(t):U3,[t]);return A.useEffect(()=>{e.current=t},[t]),n}function HF(t){const[e,n]=A.useState(null),r=A.useRef(t),i=A.useCallback(a=>{const s=$x(a.target);s&&n(o=>o?(o.set(s,Rv(s)),new Map(o)):null)},[]);return A.useEffect(()=>{const a=r.current;if(t!==a){s(a);const o=t.map(c=>{const d=$x(c);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,Rv(d)]):null}).filter(c=>c!=null);n(o.length?new Map(o):null),r.current=t}return()=>{s(t),s(a)};function s(o){o.forEach(c=>{const d=$x(c);d==null||d.removeEventListener("scroll",i)})}},[i,t]),A.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,s)=>Wc(a,s),ya):D5(t):ya,[t,e])}function H3(t,e){e===void 0&&(e=[]);const n=A.useRef(null);return A.useEffect(()=>{n.current=null},e),A.useEffect(()=>{const r=t!==ya;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?A0(t,n.current):ya}function VF(t){A.useEffect(()=>{if(!q1)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function $F(t,e){return A.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:a}=r;return n[i]=s=>{a(s,e)},n},{}),[t,e])}function P5(t){return A.useMemo(()=>t?gF(t):null,[t])}const V3=[];function GF(t,e){e===void 0&&(e=Vf);const[n]=t,r=P5(n?Zr(n):null),[i,a]=A.useState(V3);function s(){a(()=>t.length?t.map(c=>O5(c)?r:new _b(e(c),c)):V3)}const o=Y1({callback:s});return Es(()=>{o==null||o.disconnect(),s(),t.forEach(c=>o==null?void 0:o.observe(c))},[t]),i}function B5(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Uf(e)?e:t}function WF(t){let{measure:e}=t;const[n,r]=A.useState(null),i=A.useCallback(d=>{for(const{target:f}of d)if(Uf(f)){r(p=>{const m=e(f);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),a=Y1({callback:i}),s=A.useCallback(d=>{const f=B5(d);a==null||a.disconnect(),f&&(a==null||a.observe(f)),r(f?e(f):null)},[e,a]),[o,c]=E0(s);return A.useMemo(()=>({nodeRef:o,rect:n,setRef:c}),[n,o,c])}const qF=[{sensor:Nb,options:{}},{sensor:L5,options:{}}],KF={current:{}},Xp={draggable:{measure:L3},droppable:{measure:L3,strategy:gf.WhileDragging,frequency:Lv.Optimized},dragOverlay:{measure:Vf}};class Wd extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const XF={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:T0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xp,measureDroppableContainers:T0,windowRect:null,measuringScheduled:!1},F5={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:T0,draggableNodes:new Map,over:null,measureDroppableContainers:T0},$f=A.createContext(F5),z5=A.createContext(XF);function YF(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wd}}}function ZF(t,e){switch(e.type){case Zn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Zn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Zn.DragEnd:case Zn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Zn.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Wd(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Zn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const s=new Wd(t.droppable.containers);return s.set(n,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:s}}}case Zn.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new Wd(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function JF(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=A.useContext($f),a=S0(r),s=S0(n==null?void 0:n.id);return A.useEffect(()=>{if(!e&&!r&&a&&s!=null){if(!Sb(a)||document.activeElement===a.target)return;const o=i.get(s);if(!o)return;const{activatorNode:c,node:d}=o;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[c.current,d.current]){if(!f)continue;const p=WB(f);if(p){p.focus();break}}})}},[r,e,i,s,a]),null}function U5(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...r}),n):n}function QF(t){return A.useMemo(()=>({draggable:{...Xp.draggable,...t==null?void 0:t.draggable},droppable:{...Xp.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Xp.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function ez(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const a=A.useRef(!1),{x:s,y:o}=typeof i=="boolean"?{x:i,y:i}:i;Es(()=>{if(!s&&!o||!e){a.current=!1;return}if(a.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const f=n(d),p=A5(f,r);if(s||(p.x=0),o||(p.y=0),a.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=T5(d);m&&m.scrollBy({top:p.y,left:p.x})}},[e,s,o,r,n])}const Z1=A.createContext({...ya,scaleX:1,scaleY:1});var ao;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ao||(ao={}));const tz=A.memo(function(e){var n,r,i,a;let{id:s,accessibility:o,autoScroll:c=!0,children:d,sensors:f=qF,collisionDetection:p=uF,measuring:m,modifiers:y,...v}=e;const C=A.useReducer(ZF,void 0,YF),[E,S]=C,[_,N]=JB(),[k,O]=A.useState(ao.Uninitialized),I=k===ao.Initialized,{draggable:{active:M,nodes:L,translate:B},droppable:{containers:le}}=E,ae=M!=null?L.get(M):null,fe=A.useRef({initial:null,translated:null}),W=A.useMemo(()=>{var At;return M!=null?{id:M,data:(At=ae==null?void 0:ae.data)!=null?At:KF,rect:fe}:null},[M,ae]),de=A.useRef(null),[xe,H]=A.useState(null),[J,q]=A.useState(null),F=mf(v,Object.values(v)),z=X1("DndDescribedBy",s),R=A.useMemo(()=>le.getEnabled(),[le]),$=QF(m),{droppableRects:Z,measureDroppableContainers:pe,measuringScheduled:ge}=jF(R,{dragging:I,dependencies:[B.x,B.y],config:$.droppable}),Q=IF(L,M),Ee=A.useMemo(()=>J?_0(J):null,[J]),ie=Oi(),K=PF(Q,$.draggable.measure);ez({activeNode:M!=null?L.get(M):null,config:ie.layoutShiftCompensation,initialRect:K,measure:$.draggable.measure});const oe=z3(Q,$.draggable.measure,K),ke=z3(Q?Q.parentElement:null),Oe=A.useRef({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:Z,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:le,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=le.getNodeFor((n=Oe.current.over)==null?void 0:n.id),Ke=WF({measure:$.dragOverlay.measure}),mt=(r=Ke.nodeRef.current)!=null?r:Q,$t=I?(i=Ke.rect)!=null?i:oe:null,je=!!(Ke.nodeRef.current&&Ke.rect),Je=zF(je?null:oe),Ie=P5(mt?Zr(mt):null),Le=UF(I?Ue??Q:null),Ve=GF(Le),wn=U5(y,{transform:{x:B.x-Je.x,y:B.y-Je.y,scaleX:1,scaleY:1},activatorEvent:J,active:W,activeNodeRect:oe,containerNodeRect:ke,draggingNodeRect:$t,over:Oe.current.over,overlayNodeRect:Ke.rect,scrollableAncestors:Le,scrollableAncestorRects:Ve,windowRect:Ie}),Jr=Ee?Wc(Ee,B):null,an=HF(Le),Ha=H3(an),pi=H3(an,[oe]),On=Wc(wn,Ha),Mn=$t?hF($t,wn):null,Gt=W&&Mn?p({active:W,collisionRect:Mn,droppableRects:Z,droppableContainers:R,pointerCoordinates:Jr}):null,mi=oF(Gt,"id"),[pr,ki]=A.useState(null),gi=je?wn:Wc(wn,pi),pn=dF(gi,(a=pr==null?void 0:pr.rect)!=null?a:null,oe),mr=A.useRef(null),Ln=A.useCallback((At,Bt)=>{let{sensor:Cn,options:Wt}=Bt;if(de.current==null)return;const _t=L.get(de.current);if(!_t)return;const Tt=At.nativeEvent,nr=new Cn({active:de.current,activeNode:_t,event:Tt,options:Wt,context:Oe,onAbort(mn){if(!L.get(mn))return;const{onDragAbort:rr}=F.current,Or={id:mn};rr==null||rr(Or),_({type:"onDragAbort",event:Or})},onPending(mn,zr,rr,Or){if(!L.get(mn))return;const{onDragPending:xi}=F.current,V={id:mn,constraint:zr,initialCoordinates:rr,offset:Or};xi==null||xi(V),_({type:"onDragPending",event:V})},onStart(mn){const zr=de.current;if(zr==null)return;const rr=L.get(zr);if(!rr)return;const{onDragStart:Or}=F.current,jn={activatorEvent:Tt,active:{id:zr,data:rr.data,rect:fe}};jc.unstable_batchedUpdates(()=>{Or==null||Or(jn),O(ao.Initializing),S({type:Zn.DragStart,initialCoordinates:mn,active:zr}),_({type:"onDragStart",event:jn}),H(mr.current),q(Tt)})},onMove(mn){S({type:Zn.DragMove,coordinates:mn})},onEnd:kr(Zn.DragEnd),onCancel:kr(Zn.DragCancel)});mr.current=nr;function kr(mn){return async function(){const{active:rr,collisions:Or,over:jn,scrollAdjustedTranslate:xi}=Oe.current;let V=null;if(rr&&xi){const{cancelDrop:X}=F.current;V={activatorEvent:Tt,active:rr,collisions:Or,delta:xi,over:jn},mn===Zn.DragEnd&&typeof X=="function"&&await Promise.resolve(X(V))&&(mn=Zn.DragCancel)}de.current=null,jc.unstable_batchedUpdates(()=>{S({type:mn}),O(ao.Uninitialized),ki(null),H(null),q(null),mr.current=null;const X=mn===Zn.DragEnd?"onDragEnd":"onDragCancel";if(V){const Ce=F.current[X];Ce==null||Ce(V),_({type:X,event:V})}})}}},[L]),Ho=A.useCallback((At,Bt)=>(Cn,Wt)=>{const _t=Cn.nativeEvent,Tt=L.get(Wt);if(de.current!==null||!Tt||_t.dndKit||_t.defaultPrevented)return;const nr={active:Tt};At(Cn,Bt.options,nr)===!0&&(_t.dndKit={capturedBy:Bt.sensor},de.current=Wt,Ln(Cn,Bt))},[L,Ln]),Gn=LF(f,Ho);VF(f),Es(()=>{oe&&k===ao.Initializing&&O(ao.Initialized)},[oe,k]),A.useEffect(()=>{const{onDragMove:At}=F.current,{active:Bt,activatorEvent:Cn,collisions:Wt,over:_t}=Oe.current;if(!Bt||!Cn)return;const Tt={active:Bt,activatorEvent:Cn,collisions:Wt,delta:{x:On.x,y:On.y},over:_t};jc.unstable_batchedUpdates(()=>{At==null||At(Tt),_({type:"onDragMove",event:Tt})})},[On.x,On.y]),A.useEffect(()=>{const{active:At,activatorEvent:Bt,collisions:Cn,droppableContainers:Wt,scrollAdjustedTranslate:_t}=Oe.current;if(!At||de.current==null||!Bt||!_t)return;const{onDragOver:Tt}=F.current,nr=Wt.get(mi),kr=nr&&nr.rect.current?{id:nr.id,rect:nr.rect.current,data:nr.data,disabled:nr.disabled}:null,mn={active:At,activatorEvent:Bt,collisions:Cn,delta:{x:_t.x,y:_t.y},over:kr};jc.unstable_batchedUpdates(()=>{ki(kr),Tt==null||Tt(mn),_({type:"onDragOver",event:mn})})},[mi]),Es(()=>{Oe.current={activatorEvent:J,active:W,activeNode:Q,collisionRect:Mn,collisions:Gt,droppableRects:Z,draggableNodes:L,draggingNode:mt,draggingNodeRect:$t,droppableContainers:le,over:pr,scrollableAncestors:Le,scrollAdjustedTranslate:On},fe.current={initial:$t,translated:Mn}},[W,Q,Gt,Mn,L,mt,$t,Z,le,pr,Le,On]),MF({...ie,delta:B,draggingRect:Mn,pointerCoordinates:Jr,scrollableAncestors:Le,scrollableAncestorRects:Ve});const ta=A.useMemo(()=>({active:W,activeNode:Q,activeNodeRect:oe,activatorEvent:J,collisions:Gt,containerNodeRect:ke,dragOverlay:Ke,draggableNodes:L,droppableContainers:le,droppableRects:Z,over:pr,measureDroppableContainers:pe,scrollableAncestors:Le,scrollableAncestorRects:Ve,measuringConfiguration:$,measuringScheduled:ge,windowRect:Ie}),[W,Q,oe,J,Gt,ke,Ke,L,le,Z,pr,pe,Le,Ve,$,ge,Ie]),Qr=A.useMemo(()=>({activatorEvent:J,activators:Gn,active:W,activeNodeRect:oe,ariaDescribedById:{draggable:z},dispatch:S,draggableNodes:L,over:pr,measureDroppableContainers:pe}),[J,Gn,W,oe,S,z,L,pr,pe]);return nt.createElement(S5.Provider,{value:N},nt.createElement($f.Provider,{value:Qr},nt.createElement(z5.Provider,{value:ta},nt.createElement(Z1.Provider,{value:pn},d)),nt.createElement(JF,{disabled:(o==null?void 0:o.restoreFocus)===!1})),nt.createElement(tF,{...o,hiddenTextDescribedById:z}));function Oi(){const At=(xe==null?void 0:xe.autoScrollEnabled)===!1,Bt=typeof c=="object"?c.enabled===!1:c===!1,Cn=I&&!At&&!Bt;return typeof c=="object"?{...c,enabled:Cn}:{enabled:Cn}}}),nz=A.createContext(null),$3="button",rz="Draggable";function iz(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const a=X1(rz),{activators:s,activatorEvent:o,active:c,activeNodeRect:d,ariaDescribedById:f,draggableNodes:p,over:m}=A.useContext($f),{role:y=$3,roleDescription:v="draggable",tabIndex:C=0}=i??{},E=(c==null?void 0:c.id)===e,S=A.useContext(E?Z1:nz),[_,N]=E0(),[k,O]=E0(),I=$F(s,e),M=mf(n);Es(()=>(p.set(e,{id:e,key:a,node:_,activatorNode:k,data:M}),()=>{const B=p.get(e);B&&B.key===a&&p.delete(e)}),[p,e]);const L=A.useMemo(()=>({role:y,tabIndex:C,"aria-disabled":r,"aria-pressed":E&&y===$3?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[r,y,C,E,v,f.draggable]);return{active:c,activatorEvent:o,activeNodeRect:d,attributes:L,isDragging:E,listeners:r?void 0:I,node:_,over:m,setNodeRef:N,setActivatorNodeRef:O,transform:S}}function az(){return A.useContext(z5)}const sz="Droppable",oz={timeout:25};function lz(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const a=X1(sz),{active:s,dispatch:o,over:c,measureDroppableContainers:d}=A.useContext($f),f=A.useRef({disabled:n}),p=A.useRef(!1),m=A.useRef(null),y=A.useRef(null),{disabled:v,updateMeasurementsFor:C,timeout:E}={...oz,...i},S=mf(C??r),_=A.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{d(Array.isArray(S.current)?S.current:[S.current]),y.current=null},E)},[E]),N=Y1({callback:_,disabled:v||!s}),k=A.useCallback((L,B)=>{N&&(B&&(N.unobserve(B),p.current=!1),L&&N.observe(L))},[N]),[O,I]=E0(k),M=mf(e);return A.useEffect(()=>{!N||!O.current||(N.disconnect(),p.current=!1,N.observe(O.current))},[O,N]),A.useEffect(()=>(o({type:Zn.RegisterDroppable,element:{id:r,key:a,disabled:n,node:O,rect:m,data:M}}),()=>o({type:Zn.UnregisterDroppable,key:a,id:r})),[r]),A.useEffect(()=>{n!==f.current.disabled&&(o({type:Zn.SetDroppableDisabled,id:r,key:a,disabled:n}),f.current.disabled=n)},[r,a,n,o]),{active:s,rect:m,isOver:(c==null?void 0:c.id)===r,node:O,over:c,setNodeRef:I}}function cz(t){let{animation:e,children:n}=t;const[r,i]=A.useState(null),[a,s]=A.useState(null),o=S0(n);return!n&&!r&&o&&i(o),Es(()=>{if(!a)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){i(null);return}Promise.resolve(e(d,a)).then(()=>{i(null)})},[e,r,a]),nt.createElement(nt.Fragment,null,n,r?A.cloneElement(r,{ref:s}):null)}const uz={x:0,y:0,scaleX:1,scaleY:1};function dz(t){let{children:e}=t;return nt.createElement($f.Provider,{value:F5},nt.createElement(Z1.Provider,{value:uz},e))}const fz={position:"fixed",touchAction:"none"},hz=t=>Sb(t)?"transform 250ms ease":void 0,pz=A.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:a,className:s,rect:o,style:c,transform:d,transition:f=hz}=t;if(!o)return null;const p=i?d:{...d,scaleX:1,scaleY:1},m={...fz,width:o.width,height:o.height,top:o.top,left:o.left,transform:iu.Transform.toString(p),transformOrigin:i&&r?iF(r,o):void 0,transition:typeof f=="function"?f(r):f,...c};return nt.createElement(n,{className:s,style:m,ref:e},a)}),mz=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:a,className:s}=t;if(a!=null&&a.active)for(const[o,c]of Object.entries(a.active))c!==void 0&&(i[o]=n.node.style.getPropertyValue(o),n.node.style.setProperty(o,c));if(a!=null&&a.dragOverlay)for(const[o,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(o,c);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[c,d]of Object.entries(i))n.node.style.setProperty(c,d);s!=null&&s.active&&n.node.classList.remove(s.active)}},gz=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:iu.Transform.toString(e)},{transform:iu.Transform.toString(n)}]},xz={duration:250,easing:"ease",keyframes:gz,sideEffects:mz({styles:{active:{opacity:"0"}}})};function yz(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return K1((a,s)=>{if(e===null)return;const o=n.get(a);if(!o)return;const c=o.node.current;if(!c)return;const d=B5(s);if(!d)return;const{transform:f}=Zr(s).getComputedStyle(s),p=_5(f);if(!p)return;const m=typeof e=="function"?e:vz(e);return R5(c,i.draggable.measure),m({active:{id:a,data:o.data,node:c,rect:i.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:s,rect:i.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:i,transform:p})})}function vz(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...xz,...t};return a=>{let{active:s,dragOverlay:o,transform:c,...d}=a;if(!e)return;const f={x:o.rect.left-s.rect.left,y:o.rect.top-s.rect.top},p={scaleX:c.scaleX!==1?s.rect.width*c.scaleX/o.rect.width:1,scaleY:c.scaleY!==1?s.rect.height*c.scaleY/o.rect.height:1},m={x:c.x-f.x,y:c.y-f.y,...p},y=i({...d,active:s,dragOverlay:o,transform:{initial:c,final:m}}),[v]=y,C=y[y.length-1];if(JSON.stringify(v)===JSON.stringify(C))return;const E=r==null?void 0:r({active:s,dragOverlay:o,...d}),S=o.node.animate(y,{duration:e,easing:n,fill:"forwards"});return new Promise(_=>{S.onfinish=()=>{E==null||E(),_()}})}}let G3=0;function bz(t){return A.useMemo(()=>{if(t!=null)return G3++,G3},[t])}const wz=nt.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:a,modifiers:s,wrapperElement:o="div",className:c,zIndex:d=999}=t;const{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:y,draggableNodes:v,droppableContainers:C,dragOverlay:E,over:S,measuringConfiguration:_,scrollableAncestors:N,scrollableAncestorRects:k,windowRect:O}=az(),I=A.useContext(Z1),M=bz(p==null?void 0:p.id),L=U5(s,{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:y,draggingNodeRect:E.rect,over:S,overlayNodeRect:E.rect,scrollableAncestors:N,scrollableAncestorRects:k,transform:I,windowRect:O}),B=kb(m),le=yz({config:r,draggableNodes:v,droppableContainers:C,measuringConfiguration:_}),ae=B?E.setRef:void 0;return nt.createElement(dz,null,nt.createElement(cz,{animation:le},p&&M?nt.createElement(pz,{key:M,id:p.id,ref:ae,as:o,activatorEvent:f,adjustScale:e,className:c,transition:a,rect:B,style:{zIndex:d,...i},transform:L},n):null))});function Cz(t,e,n){const r={...t};return e.top+t.y<=n.top?r.y=n.top-e.top:e.bottom+t.y>=n.top+n.height&&(r.y=n.top+n.height-e.bottom),e.left+t.x<=n.left?r.x=n.left-e.left:e.right+t.x>=n.left+n.width&&(r.x=n.left+n.width-e.right),r}const W3=t=>{let{transform:e,draggingNodeRect:n,windowRect:r}=t;return!n||!r?e:Cz(e,n,r)},Ez=4,k0=["Felsefe","Sosyoloji","Psikoloji","Bilim ve Teknoloji","Din ve nan","Tarih","nceleme ve Aratrma","Ekonomi ve Hukuk","Trk Edebiyat","Dnya Edebiyat","Sanat ve Kltr","Dier"],q3=({activeCategory:t,onCategoryChange:e,categories:n=k0})=>g.jsxs("div",{className:"w-full flex flex-col gap-2 p-3 bg-card border border-white/10 rounded-2xl",children:[g.jsxs("h3",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-1 px-1 flex items-center gap-2",children:[g.jsx("span",{className:"w-1 h-1 bg-[#CC561E] rounded-full"}),"Discovery Areas"]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("button",{onClick:()=>e(null),className:`w-full flex items-center justify-between px-3 py-2 rounded-xl text-xs font-medium transition-all duration-300 border bg-card text-card-foreground ${t===null?"border-[#CC561E] shadow-[0_0_12px_rgba(204,86,30,0.35)]":"border-white/10 hover:border-white/20 hover:bg-card/90"}`,children:[g.jsx("span",{className:t===null?"text-card-foreground":"text-card-foreground/80",children:"All Categories"}),t===null&&g.jsx("div",{className:"w-1.5 h-1.5 bg-[#CC561E] rounded-full animate-pulse mr-1"})]}),n.map(r=>g.jsxs("button",{onClick:()=>e(r),className:`w-full flex items-center justify-between px-3 py-2 rounded-xl text-xs font-medium transition-all duration-300 border bg-card text-card-foreground ${t===r?"border-[#CC561E] shadow-[0_0_12px_rgba(204,86,30,0.35)]":"border-white/10 hover:border-white/20 hover:bg-card/90"}`,children:[g.jsx("span",{className:t===r?"text-card-foreground":"text-card-foreground/80",children:r}),t===r&&g.jsx("div",{className:"w-1.5 h-1.5 bg-[#CC561E] rounded-full animate-pulse mr-1"})]},r))]})]}),H5=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("defs",{children:g.jsxs("linearGradient",{id:"kb-grad-orange",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[g.jsx("stop",{offset:"0%",stopColor:"#CC561E"}),g.jsx("stop",{offset:"100%",stopColor:"#A44319"})]})}),g.jsx("rect",{x:"2",y:"2",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)",fillOpacity:"0.8"}),g.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)",fillOpacity:"0.4"}),g.jsx("rect",{x:"16",y:"2",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)",fillOpacity:"0.2"}),g.jsx("rect",{x:"2",y:"9",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)",fillOpacity:"0.4"}),g.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)"}),g.jsx("rect",{x:"16",y:"9",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)",fillOpacity:"0.4"}),g.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)",fillOpacity:"0.2"}),g.jsx("rect",{x:"9",y:"16",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)",fillOpacity:"0.4"}),g.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"2",fill:"url(#kb-grad-orange)",fillOpacity:"0.8"})]}),V5=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("path",{d:"M12 20H21",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"}),g.jsx("path",{d:"M16.5 3.5C17.3284 2.67157 18.6716 2.67157 19.5 3.5C20.3284 4.32843 20.3284 5.67157 19.5 6.5L7 19L3 20L4 16L16.5 3.5Z",stroke:"#CC561E",strokeWidth:"2",strokeLinejoin:"round"}),g.jsx("path",{d:"M15 5L19 9",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",strokeOpacity:"0.4"})]}),jv=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("rect",{x:"3",y:"6",width:"4",height:"12",rx:"0.5",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.1"}),g.jsx("path",{d:"M4 9H6",stroke:"#CC561E",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.4"}),g.jsx("rect",{x:"8",y:"4",width:"4",height:"14",rx:"0.5",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.3"}),g.jsx("path",{d:"M9 7H11",stroke:"#CC561E",strokeWidth:"1.5",strokeLinecap:"round"}),g.jsx("path",{d:"M9 15H11",stroke:"#CC561E",strokeWidth:"1.5",strokeLinecap:"round"}),g.jsx("rect",{x:"13",y:"7",width:"4",height:"11",rx:"0.5",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.1"}),g.jsx("rect",{x:"18",y:"5",width:"4",height:"13",rx:"0.5",transform:"rotate(12 18 5)",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.8"}),g.jsx("path",{d:"M2 19H22",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",strokeOpacity:"0.3"})]}),Yp=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("path",{d:"M4 4H14L20 10V20H4V4Z",stroke:"#CC561E",strokeWidth:"2",strokeLinejoin:"round"}),g.jsx("path",{d:"M14 4V10H20",stroke:"#CC561E",strokeWidth:"2",strokeLinejoin:"round"}),g.jsx("path",{d:"M8 14H16",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"}),g.jsx("path",{d:"M8 17H12",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"})]}),Zp=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("circle",{cx:"11",cy:"11",r:"9",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.05"}),g.jsx("ellipse",{cx:"11",cy:"11",rx:"3.5",ry:"9",stroke:"#CC561E",strokeWidth:"1.5",strokeOpacity:"0.6"}),g.jsx("path",{d:"M2 11H20",stroke:"#CC561E",strokeWidth:"1.5",strokeOpacity:"0.6"}),g.jsx("path",{d:"M11 2V20",stroke:"#CC561E",strokeWidth:"1.5",strokeOpacity:"0.6"}),g.jsx("path",{d:"M16 14L22 17L19 18L21 21L19 22L17 19L14 22V14Z",fill:"#CC561E",stroke:"#000",strokeWidth:"0.5"})]}),$5=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("rect",{x:"5",y:"5",width:"14",height:"15",rx:"1.5",stroke:"#CC561E",strokeWidth:"2",strokeOpacity:"0.3",fill:"#CC561E",fillOpacity:"0.1"}),g.jsx("path",{d:"M3 4C3 3.44772 3.44772 3 4 3H19C19.5523 3 20 3.44772 20 4V20C20 20.5523 19.5523 21 19 21H4C3.44772 21 3 20.5523 3 20V4Z",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.15"}),g.jsx("path",{d:"M5 1V5M9 1V5M13 1V5M17 1V5",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"}),g.jsx("path",{d:"M7 9H16",stroke:"#CC561E",strokeWidth:"1.5",strokeLinecap:"round",strokeOpacity:"0.6"}),g.jsx("path",{d:"M7 12H16",stroke:"#CC561E",strokeWidth:"1.5",strokeLinecap:"round",strokeOpacity:"0.6"}),g.jsx("path",{d:"M7 15H16",stroke:"#CC561E",strokeWidth:"1.5",strokeLinecap:"round",strokeOpacity:"0.6"}),g.jsx("path",{d:"M16 21L20 17",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"})]}),Hce=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("path",{d:"M6 20V14",stroke:"#CC561E",strokeWidth:"3",strokeLinecap:"round"}),g.jsx("path",{d:"M12 20V10",stroke:"#CC561E",strokeWidth:"3",strokeLinecap:"round"}),g.jsx("path",{d:"M18 20V5",stroke:"#CC561E",strokeWidth:"3",strokeLinecap:"round"}),g.jsx("path",{d:"M4 14L10 8L15 13L21 4",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),g.jsx("path",{d:"M21 4H16",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"}),g.jsx("path",{d:"M21 4V9",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"})]}),Vce=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("rect",{x:"5",y:"5",width:"6",height:"6",rx:"2",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.1"}),g.jsx("rect",{x:"13",y:"5",width:"6",height:"6",rx:"2",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.1"}),g.jsx("rect",{x:"5",y:"13",width:"6",height:"6",rx:"2",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.1"}),g.jsx("rect",{x:"16",y:"13",width:"6",height:"6",rx:"2",transform:"rotate(45 16 16)",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.1"})]}),$ce=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#CC561E",strokeWidth:"2",strokeOpacity:"0.8"}),g.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:"#CC561E",strokeWidth:"1.5",strokeOpacity:"0.5"}),g.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#CC561E",fillOpacity:"0.8"}),g.jsx("path",{d:"M19 5L13.5 10.5",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"}),g.jsx("path",{d:"M19 5L20 9",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"}),g.jsx("path",{d:"M19 5L15 4",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"})]}),Gce=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("path",{d:"M21 8V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V8",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"#CC561E",fillOpacity:"0.05"}),g.jsx("path",{d:"M23 3H1V8H23V3Z",stroke:"#CC561E",strokeWidth:"2",strokeLinejoin:"round",fill:"#CC561E",fillOpacity:"0.1"}),g.jsx("rect",{x:"10",y:"12",width:"4",height:"2",rx:"0.5",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"}),g.jsx("path",{d:"M7 16H17",stroke:"#CC561E",strokeWidth:"1.5",strokeLinecap:"round",strokeOpacity:"0.4"}),g.jsx("path",{d:"M7 19H17",stroke:"#CC561E",strokeWidth:"1.5",strokeLinecap:"round",strokeOpacity:"0.4"})]}),O0=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("circle",{cx:"11",cy:"11",r:"7",stroke:"#CC561E",strokeWidth:"2.5",fill:"#CC561E",fillOpacity:"0.05"}),g.jsx("path",{d:"M14.5 7.5C14.5 7.5 13.5 6.5 11 6.5",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeOpacity:"0.7"}),g.jsx("circle",{cx:"11",cy:"11",r:"4",stroke:"#CC561E",strokeWidth:"1",strokeOpacity:"0.3"}),g.jsx("path",{d:"M16 16L20 20",stroke:"#CC561E",strokeWidth:"3",strokeLinecap:"round"}),g.jsx("path",{d:"M17 17L19 19",stroke:"#fff",strokeWidth:"1",strokeLinecap:"round",strokeOpacity:"0.5"}),g.jsx("circle",{cx:"18",cy:"6",r:"1.5",fill:"#CC561E",fillOpacity:"0.8"}),g.jsx("circle",{cx:"21",cy:"9",r:"1",fill:"#CC561E",fillOpacity:"0.4"})]}),G5=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("rect",{x:"4",y:"6",width:"16",height:"15",rx:"4",stroke:"#CC561E",strokeWidth:"2",fill:"#CC561E",fillOpacity:"0.05"}),g.jsx("path",{d:"M12 6V3",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round"}),g.jsx("circle",{cx:"12",cy:"3",r:"2",stroke:"#CC561E",strokeWidth:"1.5"}),g.jsx("circle",{cx:"12",cy:"3",r:"0.5",fill:"#CC561E"}),g.jsx("rect",{x:"7",y:"11",width:"3",height:"3",rx:"1",fill:"#CC561E",fillOpacity:"0.8"}),g.jsx("rect",{x:"14",y:"11",width:"3",height:"3",rx:"1",fill:"#CC561E",fillOpacity:"0.8"}),g.jsx("path",{d:"M9 16C9 16 10 17 12 17C14 17 15 16 15 16",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:"0.6"}),g.jsx("path",{d:"M2 13H4",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",strokeOpacity:"0.4"}),g.jsx("path",{d:"M20 13H22",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",strokeOpacity:"0.4"})]}),Sz=({className:t,size:e=24})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[g.jsx("path",{d:"M2 6C6 6 6 10 10 10C14 10 14 6 18 6C20 6 21 7 22 8",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",fill:"#CC561E",fillOpacity:"0.05"}),g.jsx("path",{d:"M2 12C6 12 6 16 10 16C14 16 14 12 18 12C20 12 21 13 22 14",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",fill:"#CC561E",fillOpacity:"0.1"}),g.jsx("path",{d:"M2 18C6 18 6 22 10 22C14 22 14 18 18 18C20 18 21 19 22 20",stroke:"#CC561E",strokeWidth:"2",strokeLinecap:"round",fill:"#CC561E",fillOpacity:"0.2"}),g.jsx("path",{d:"M10 4V20",stroke:"#CC561E",strokeWidth:"1.5",strokeLinecap:"round",strokeDasharray:"2 4",strokeOpacity:"0.5"})]});function J1(t){const e=typeof t=="string"?t.trim().toLowerCase():"";return e==="insight"||e==="note"?"insight":"highlight"}function W5(t){return J1(t)==="insight"}const q5="PRIVATE";function Q1(t){const e=typeof t=="string"?t.trim().toUpperCase():"";return e==="DAILY"?"DAILY":e==="IDEAS"?"IDEAS":q5}function vn(t){return t.type==="PERSONAL_NOTE"}function Rr(t){return vn(t)?Q1(t.personalNoteCategory):q5}function K5(t){return vn(t)&&Rr(t)==="IDEAS"}function X5(t){return K5(t)?"INSIGHT":"PERSONAL_NOTE"}function Y5(t){return typeof t!="string"?void 0:t.trim().replace(/\s+/g," ")||void 0}function Z5(t){return typeof t!="string"?void 0:t.trim()||void 0}const Az=/<\/?[a-z][\s\S]*>/i,J5=t=>Az.test(t),sl=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),ol=t=>t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/__(.+?)__/g,"<u>$1</u>").replace(/_(.+?)_/g,"<em>$1</em>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,'<code class="px-1 py-0.5 rounded bg-slate-100 text-slate-700">$1</code>'),_z=t=>{if(typeof window>"u")return t;const n=new DOMParser().parseFromString(t,"text/html");return n.querySelectorAll("script,style,iframe,object,embed").forEach(r=>r.remove()),n.body.querySelectorAll("*").forEach(r=>{[...r.attributes].forEach(i=>{const a=i.name.toLowerCase(),s=i.value.toLowerCase();a.startsWith("on")&&r.removeAttribute(i.name),(a==="href"||a==="src")&&s.startsWith("javascript:")&&r.removeAttribute(i.name)})}),n.body.innerHTML},au=t=>{if(!t)return"";if(J5(t)){const e=t.replace(/<br\s*\/?>/gi,`
`).replace(/<\/(p|div|li|h1|h2|h3|h4|h5|h6|blockquote|pre|tr|td|th|ul|ol)>/gi,`
`);return typeof window<"u"?(new DOMParser().parseFromString(e,"text/html").body.textContent||"").replace(/\r\n/g,`
`).replace(/[ \t]+\n/g,`
`).replace(/\n{3,}/g,`

`).trim():e.replace(/<[^>]*>/g," ").replace(/\r\n/g,`
`).replace(/[ \t]+\n/g,`
`).replace(/\n{3,}/g,`

`).replace(/[ \t]{2,}/g," ").trim()}return t.replace(/^#{1,6}\s+/gm,"").replace(/^\s*-\s\[(?: |x|X)\]\s+/gm,"").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*\d+\.\s+/gm,"").replace(/^\s*>\s?/gm,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/_(.*?)_/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\s+\n/g,`
`).trim()},M0=t=>au(t).trim().length>0,Ob=t=>{if(!M0(t))return'<p class="text-slate-400 italic">No content added.</p>';if(J5(t))return _z(t);const e=t.split(`
`);let n="",r=null;const i=()=>{r&&(n+=`</${r}>`,r=null)};for(const a of e){if(!a.trim()){i(),n+='<div class="h-2"></div>';continue}const s=a.match(/^\s*#\s+(.+)/),o=a.match(/^\s*##\s+(.+)/),c=a.match(/^\s*-\s\[( |x|X)\]\s+(.+)/),d=a.match(/^\s*-\s+(.+)/),f=a.match(/^\s*\d+\.\s+(.+)/),p=a.match(/^\s*>\s+(.+)/);if(s){i(),n+=`<h1 class="text-xl font-bold mt-3 mb-1.5">${ol(sl(s[1]))}</h1>`;continue}if(o){i(),n+=`<h2 class="text-lg font-semibold mt-3 mb-1.5">${ol(sl(o[1]))}</h2>`;continue}if(p){i(),n+=`<blockquote class="border-l-2 border-[#CC561E]/40 pl-3 italic text-slate-600 my-1">${ol(sl(p[1]))}</blockquote>`;continue}if(c){r!=="ul"&&(i(),r="ul",n+='<ul class="space-y-1 my-1">');const m=c[1].toLowerCase()==="x";n+=`<li class="text-sm flex items-start gap-2"><span class="mt-0.5">${m?"&#9745;":"&#9744;"}</span><span>${ol(sl(c[2]))}</span></li>`;continue}if(d){r!=="ul"&&(i(),r="ul",n+='<ul class="list-disc pl-5 space-y-1 my-1">'),n+=`<li class="text-sm">${ol(sl(d[1]))}</li>`;continue}if(f){r!=="ol"&&(i(),r="ol",n+='<ol class="list-decimal pl-5 space-y-1 my-1">'),n+=`<li class="text-sm">${ol(sl(f[1]))}</li>`;continue}i(),n+=`<p class="text-sm leading-relaxed my-1">${ol(sl(a.trim()))}</p>`}return i(),n};var qx={exports:{}},Kx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K3;function Tz(){if(K3)return Kx;K3=1;var t=Pf();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(p,m){var y=m(),v=r({inst:{value:y,getSnapshot:m}}),C=v[0].inst,E=v[1];return a(function(){C.value=y,C.getSnapshot=m,c(C)&&E({inst:C})},[p,y,m]),i(function(){return c(C)&&E({inst:C}),p(function(){c(C)&&E({inst:C})})},[p]),s(y),y}function c(p){var m=p.getSnapshot;p=p.value;try{var y=m();return!n(p,y)}catch{return!0}}function d(p,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return Kx.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,Kx}var X3;function Q5(){return X3||(X3=1,qx.exports=Tz()),qx.exports}var e6=Q5();function Cr(t){this.content=t}Cr.prototype={constructor:Cr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),a=r.content.slice();return i==-1?a.push(n||t,e):(a[i+1]=e,n&&(a[i]=n)),new Cr(a)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Cr(n)},addToStart:function(t,e){return new Cr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Cr(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),a=r.find(t);return i.splice(a==-1?i.length:a,0,e,n),new Cr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Cr.from(t),t.size?new Cr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Cr.from(t),t.size?new Cr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Cr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Cr.from=function(t){if(t instanceof Cr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Cr(e)};function t6(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),a=e.child(r);if(i==a){n+=i.nodeSize;continue}if(!i.sameMarkup(a))return n;if(i.isText&&i.text!=a.text){for(let s=0;i.text[s]==a.text[s];s++)n++;return n}if(i.content.size||a.content.size){let s=t6(i.content,a.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function n6(t,e,n,r){for(let i=t.childCount,a=e.childCount;;){if(i==0||a==0)return i==a?null:{a:n,b:r};let s=t.child(--i),o=e.child(--a),c=s.nodeSize;if(s==o){n-=c,r-=c;continue}if(!s.sameMarkup(o))return{a:n,b:r};if(s.isText&&s.text!=o.text){let d=0,f=Math.min(s.text.length,o.text.length);for(;d<f&&s.text[s.text.length-d-1]==o.text[o.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(s.content.size||o.content.size){let d=n6(s.content,o.content,n-1,r-1);if(d)return d}n-=c,r-=c}}class we{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,a){for(let s=0,o=0;o<n;s++){let c=this.content[s],d=o+c.nodeSize;if(d>e&&r(c,i+o,a||null,s)!==!1&&c.content.size){let f=o+1;c.nodesBetween(Math.max(0,e-f),Math.min(c.content.size,n-f),r,i+f)}o=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let a="",s=!0;return this.nodesBetween(e,n,(o,c)=>{let d=o.isText?o.text.slice(Math.max(e,c)-c,n-c):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&d||o.isTextblock)&&r&&(s?s=!1:a+=r),a+=d},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),a=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),a=1);a<e.content.length;a++)i.push(e.content[a]);return new we(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let a=0,s=0;s<n;a++){let o=this.content[a],c=s+o.nodeSize;c>e&&((s<e||c>n)&&(o.isText?o=o.cut(Math.max(0,e-s),Math.min(o.text.length,n-s)):o=o.cut(Math.max(0,e-s-1),Math.min(o.content.size,n-s-1))),r.push(o),i+=o.nodeSize),s=c}return new we(r,i)}cutByIndex(e,n){return e==n?we.empty:e==0&&n==this.content.length?this:new we(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),a=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new we(i,a)}addToStart(e){return new we([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new we(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return t6(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return n6(this,e,n,r)}findIndex(e){if(e==0)return vp(0,e);if(e==this.size)return vp(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),a=r+i.nodeSize;if(a>=e)return a==e?vp(n+1,a):vp(n,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return we.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new we(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return we.empty;let n,r=0;for(let i=0;i<e.length;i++){let a=e[i];r+=a.nodeSize,i&&a.isText&&e[i-1].sameMarkup(a)?(n||(n=e.slice(0,i)),n[n.length-1]=a.withText(n[n.length-1].text+a.text)):n&&n.push(a)}return new we(n||e,r)}static from(e){if(!e)return we.empty;if(e instanceof we)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new we([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}we.empty=new we([],0);const Xx={index:0,offset:0};function vp(t,e){return Xx.index=t,Xx.offset=e,Xx}function D0(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!D0(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!D0(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Zt=class Pv{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let a=e[i];if(this.eq(a))return e;if(this.type.excludes(a.type))n||(n=e.slice(0,i));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(a)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&D0(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Pv.none;if(e instanceof Pv)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Zt.none=[];class R0 extends Error{}class Re{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=i6(this.content,e+this.openStart,n);return r&&new Re(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Re(r6(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Re.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Re(we.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let a=e.firstChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=e.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)i++;return new Re(e,r,i)}}Re.empty=new Re(we.empty,0,0);function r6(t,e,n){let{index:r,offset:i}=t.findIndex(e),a=t.maybeChild(r),{index:s,offset:o}=t.findIndex(n);if(i==e||a.isText){if(o!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,a.copy(r6(a.content,e-i-1,n-i-1)))}function i6(t,e,n,r){let{index:i,offset:a}=t.findIndex(e),s=t.maybeChild(i);if(a==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let o=i6(s.content,e-a-1,n,s);return o&&t.replaceChild(i,s.copy(o))}function Nz(t,e,n){if(n.openStart>t.depth)throw new R0("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new R0("Inconsistent open depths");return a6(t,e,n,0)}function a6(t,e,n,r){let i=t.index(r),a=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=a6(t,e,n,r+1);return a.copy(a.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,o=s.content;return kl(s,o.cut(0,t.parentOffset).append(n.content).append(o.cut(e.parentOffset)))}else{let{start:s,end:o}=kz(n,t);return kl(a,o6(t,s,o,e,r))}else return kl(a,I0(t,e,r))}function s6(t,e){if(!e.type.compatibleContent(t.type))throw new R0("Cannot join "+e.type.name+" onto "+t.type.name)}function Bv(t,e,n){let r=t.node(n);return s6(r,e.node(n)),r}function Nl(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function qd(t,e,n,r){let i=(e||t).node(n),a=0,s=e?e.index(n):i.childCount;t&&(a=t.index(n),t.depth>n?a++:t.textOffset&&(Nl(t.nodeAfter,r),a++));for(let o=a;o<s;o++)Nl(i.child(o),r);e&&e.depth==n&&e.textOffset&&Nl(e.nodeBefore,r)}function kl(t,e){return t.type.checkContent(e),t.copy(e)}function o6(t,e,n,r,i){let a=t.depth>i&&Bv(t,e,i+1),s=r.depth>i&&Bv(n,r,i+1),o=[];return qd(null,t,i,o),a&&s&&e.index(i)==n.index(i)?(s6(a,s),Nl(kl(a,o6(t,e,n,r,i+1)),o)):(a&&Nl(kl(a,I0(t,e,i+1)),o),qd(e,n,i,o),s&&Nl(kl(s,I0(n,r,i+1)),o)),qd(r,null,i,o),new we(o)}function I0(t,e,n){let r=[];if(qd(null,t,n,r),t.depth>n){let i=Bv(t,e,n+1);Nl(kl(i,I0(t,e,n+1)),r)}return qd(e,null,n,r),new we(r)}function kz(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let a=n-1;a>=0;a--)i=e.node(a).copy(we.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class xf{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let a=0;a<e;a++)i+=r.child(a).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Zt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let o=r;r=i,i=o}let a=r.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!i||!r[a].isInSet(i.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new L0(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,a=n;for(let s=e;;){let{index:o,offset:c}=s.content.findIndex(a),d=a-c;if(r.push(s,o,i+c),!d||(s=s.child(o),s.isText))break;a=d-1,i+=c+1}return new xf(n,r,a)}static resolveCached(e,n){let r=Y3.get(e);if(r)for(let a=0;a<r.elts.length;a++){let s=r.elts[a];if(s.pos==n)return s}else Y3.set(e,r=new Oz);let i=r.elts[r.i]=xf.resolve(e,n);return r.i=(r.i+1)%Mz,i}}class Oz{constructor(){this.elts=[],this.i=0}}const Mz=12,Y3=new WeakMap;class L0{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Dz=Object.create(null);class pa{constructor(e,n,r,i=Zt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||we.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&D0(this.attrs,n||e.defaultAttrs||Dz)&&Zt.sameSet(this.marks,r||Zt.none)}copy(e=null){return e==this.content?this:new pa(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new pa(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Re.empty;let i=this.resolve(e),a=this.resolve(n),s=r?0:i.sharedDepth(n),o=i.start(s),d=i.node(s).content.cut(i.pos-o,a.pos-o);return new Re(d,i.depth-s,a.depth-s)}replace(e,n,r){return Nz(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return xf.resolveCached(this,e)}resolveNoCache(e){return xf.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,a=>(r.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),l6(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=we.empty,i=0,a=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,a),o=s&&s.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let c=i;c<a;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(e).matchType(r),s=a&&a.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Zt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Zt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=we.fromJSON(e,n.content),a=e.nodeType(n.type).create(n.attrs,i,r);return a.type.checkAttrs(a.attrs),a}}pa.prototype.text=void 0;class j0 extends pa{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):l6(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new j0(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new j0(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function l6(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Pl{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Rz(e,n);if(r.next==null)return Pl.empty;let i=c6(r);r.next&&r.err("Unexpected trailing text");let a=zz(Fz(i));return Uz(a,r),a}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let a=n;i&&a<r;a++)i=i.matchType(e.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function a(s,o){let c=s.matchFragment(e,r);if(c&&(!n||c.validEnd))return we.from(o.map(d=>d.createAndFill()));for(let d=0;d<s.next.length;d++){let{type:f,next:p}=s.next[d];if(!(f.isText||f.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let m=a(p,o.concat(f));if(m)return m}}return null}return a(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),a=i.match;if(a.matchType(e)){let s=[];for(let o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:o,next:c}=a.next[s];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||c.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let a=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)a+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return a}).join(`
`)}}Pl.empty=new Pl(!0);class Rz{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function c6(t){let e=[];do e.push(Iz(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Iz(t){let e=[];do e.push(Lz(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Lz(t){let e=Bz(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=jz(t,e);else break;return e}function Z3(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function jz(t,e){let n=Z3(t),r=n;return t.eat(",")&&(t.next!="}"?r=Z3(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Pz(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let a in n){let s=n[a];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Bz(t){if(t.eat("(")){let e=c6(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Pz(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Fz(t){let e=[[]];return i(a(t,0),n()),e;function n(){return e.push([])-1}function r(s,o,c){let d={term:c,to:o};return e[s].push(d),d}function i(s,o){s.forEach(c=>c.to=o)}function a(s,o){if(s.type=="choice")return s.exprs.reduce((c,d)=>c.concat(a(d,o)),[]);if(s.type=="seq")for(let c=0;;c++){let d=a(s.exprs[c],o);if(c==s.exprs.length-1)return d;i(d,o=n())}else if(s.type=="star"){let c=n();return r(o,c),i(a(s.expr,c),c),[r(c)]}else if(s.type=="plus"){let c=n();return i(a(s.expr,o),c),i(a(s.expr,c),c),[r(c)]}else{if(s.type=="opt")return[r(o)].concat(a(s.expr,o));if(s.type=="range"){let c=o;for(let d=0;d<s.min;d++){let f=n();i(a(s.expr,c),f),c=f}if(s.max==-1)i(a(s.expr,c),c);else for(let d=s.min;d<s.max;d++){let f=n();r(c,f),i(a(s.expr,c),f),c=f}return[r(c)]}else{if(s.type=="name")return[r(o,void 0,s.value)];throw new Error("Unknown expr type")}}}}function u6(t,e){return e-t}function J3(t,e){let n=[];return r(e),n.sort(u6);function r(i){let a=t[i];if(a.length==1&&!a[0].term)return r(a[0].to);n.push(i);for(let s=0;s<a.length;s++){let{term:o,to:c}=a[s];!o&&n.indexOf(c)==-1&&r(c)}}}function zz(t){let e=Object.create(null);return n(J3(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:o,to:c})=>{if(!o)return;let d;for(let f=0;f<i.length;f++)i[f][0]==o&&(d=i[f][1]);J3(t,c).forEach(f=>{d||i.push([o,d=[]]),d.indexOf(f)==-1&&d.push(f)})})});let a=e[r.join(",")]=new Pl(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let o=i[s][1].sort(u6);a.next.push({type:i[s][0],next:e[o.join(",")]||n(o)})}return a}}function Uz(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],a=!i.validEnd,s=[];for(let o=0;o<i.next.length;o++){let{type:c,next:d}=i.next[o];s.push(c.name),a&&!(c.isText||c.hasRequiredAttrs())&&(a=!1),r.indexOf(d)==-1&&r.push(d)}a&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function d6(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function f6(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let a=t[r];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function h6(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let a=t[i];a.validate&&a.validate(e[i])}}function p6(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Vz(t,r,e[r]);return n}let Q3=class m6{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=p6(e,r.attrs),this.defaultAttrs=d6(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Pl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:f6(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pa(this,this.computeAttrs(e),we.from(n),Zt.setFrom(r))}createChecked(e=null,n,r){return n=we.from(n),this.checkContent(n),new pa(this,this.computeAttrs(e),n,Zt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=we.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),a=i&&i.fillBefore(we.empty,!0);return a?new pa(this,e,n.append(a),Zt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){h6(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Zt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((a,s)=>r[a]=new m6(a,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Hz(t,e,n){let r=n.split("|");return i=>{let a=i===null?"null":typeof i;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${a}`)}}class Vz{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Hz(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class em{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=p6(e,i.attrs),this.excluded=null;let a=d6(this.attrs);this.instance=a?new Zt(this,a):null}create(e=null){return!e&&this.instance?this.instance:new Zt(this,f6(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((a,s)=>r[a]=new em(a,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){h6(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class g6{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Cr.from(e.nodes),n.marks=Cr.from(e.marks||{}),this.nodes=Q3.compile(this.spec.nodes,this),this.marks=em.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],s=a.spec.content||"",o=a.spec.marks;if(a.contentMatch=r[s]||(r[s]=Pl.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=o=="_"?null:o?e_(this,o.split(" ")):o==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:e_(this,s.split(" "))}this.nodeFromJSON=i=>pa.fromJSON(this,i),this.markFromJSON=i=>Zt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Q3){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new j0(r,r.defaultAttrs,e,Zt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function e_(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t.marks[i],s=a;if(a)n.push(a);else for(let o in t.marks){let c=t.marks[o];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function $z(t){return t.tag!=null}function Gz(t){return t.style!=null}let Kd=class Fv{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if($z(i))this.tags.push(i);else if(Gz(i)){let a=/[^=]*/.exec(i.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=e.nodes[i.node];return a.contentMatch.matchType(a)})}parse(e,n={}){let r=new n_(this,n,!1);return r.addAll(e,Zt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new n_(this,n,!0);return r.addAll(e,Zt.none,n.from,n.to),Re.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(Kz(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||n.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(e);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(e,n,r,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let s=this.styles[a],o=s.style;if(!(o.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||o.length>e.length&&(o.charCodeAt(e.length)!=61||o.slice(e.length+1)!=n))){if(s.getAttrs){let c=s.getAttrs(n);if(c===!1)continue;s.attrs=c||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let a=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let o=n[s];if((o.priority==null?50:o.priority)<a)break}n.splice(s,0,i)}for(let i in e.marks){let a=e.marks[i].spec.parseDOM;a&&a.forEach(s=>{r(s=r_(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let a=e.nodes[i].spec.parseDOM;a&&a.forEach(s=>{r(s=r_(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Fv(e,Fv.schemaRules(e)))}};const x6={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Wz={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},y6={ol:!0,ul:!0},yf=1,zv=2,Xd=4;function t_(t,e,n){return e!=null?(e?yf:0)|(e==="full"?zv:0):t&&t.whitespace=="pre"?yf|zv:n&~Xd}class bp{constructor(e,n,r,i,a,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=Zt.none,this.match=a||(s&Xd?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(we.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&yf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let n=we.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(we.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!x6.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class n_{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,a,s=t_(null,n.preserveWhitespace,0)|(r?Xd:0);i?a=new bp(i.type,i.attrs,Zt.none,!0,n.topMatch||i.type.contentMatch,s):r?a=new bp(null,null,Zt.none,!0,null,s):a=new bp(e.schema.topNodeType,null,Zt.none,!0,null,s),this.nodes=[a],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,a=i.options&zv?"full":this.localPreserveWS||(i.options&yf)>0,{schema:s}=this.parser;if(a==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(a)if(a==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let o=r.split(/\r?\n|\r/);for(let c=0;c<o.length;c++)c&&this.insertNode(s.linebreakReplacement.create(),n,!0),o[c]&&this.insertNode(s.text(o[c]),n,!/\S/.test(o[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],c=e.previousSibling;(!o||c&&c.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),o;y6.hasOwnProperty(s)&&this.parser.normalizeLists&&qz(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));e:if(c?c.ignore:Wz.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let d,f=this.needsBlock;if(x6.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),d=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let p=c&&c.skip?n:this.readStyles(e,n);p&&this.addAll(e,p),d&&this.sync(a),this.needsBlock=f}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,c,d,c.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],s=r.getPropertyValue(a);if(s)for(let o=void 0;;){let c=this.parser.matchStyle(a,s,this,o);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(d=>!c.clearMark(d)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)o=c;else break}}return n}addElementByRule(e,n,r,i){let a,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(s,n.attrs||null,r,n.preserveWhitespace);c&&(a=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}a&&this.sync(o)&&this.open--}addAll(e,n,r,i){let a=r||0;for(let s=r?e.childNodes[r]:e.firstChild,o=i==null?null:e.childNodes[i];s!=o;s=s.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(s,n);this.findAtPoint(e,a)}findPlace(e,n,r){let i,a;for(let s=this.open,o=0;s>=0;s--){let c=this.nodes[s],d=c.findWrapping(e);if(d&&(!i||i.length>d.length+o)&&(i=d,a=c,!d.length))break;if(c.solid){if(r)break;o+=2}}if(!i)return null;this.sync(a);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(n=this.enterInner(a,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let s=Zt.none;for(let o of i.concat(e.marks))(a.type?a.type.allowsMarkType(o.type):i_(o.type,e.type))&&(s=o.addToSet(s));return a.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let a=this.findPlace(e.create(n),r,!1);return a&&(a=this.enterInner(e,n,r,!0,i)),a}enterInner(e,n,r,i=!1,a){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let o=t_(e,a,s.options);s.options&Xd&&s.content.length==0&&(o|=Xd);let c=Zt.none;return r=r.filter(d=>(s.type?s.type.allowsMarkType(d.type):i_(d.type,e))?(c=d.addToSet(c),!1):!0),this.nodes.push(new bp(e,n,c,i,null,o)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=yf)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(i?0:1),s=(o,c)=>{for(;o>=0;o--){let d=n[o];if(d==""){if(o==n.length-1||o==0)continue;for(;c>=a;c--)if(s(o-1,c))return!0;return!1}else{let f=c>0||c==0&&i?this.nodes[c].type:r&&c>=a?r.node(c-a).type:null;if(!f||f.name!=d&&!f.isInGroup(d))return!1;c--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function qz(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&y6.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Kz(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function r_(t){let e={};for(let n in t)e[n]=t[n];return e}function i_(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let a=[],s=o=>{a.push(o);for(let c=0;c<o.edgeCount;c++){let{type:d,next:f}=o.edge(c);if(d==e||a.indexOf(f)<0&&s(f))return!0}};if(s(i.contentMatch))return!0}}class Gl{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Yx(n).createDocumentFragment());let i=r,a=[];return e.forEach(s=>{if(a.length||s.marks.length){let o=0,c=0;for(;o<a.length&&c<s.marks.length;){let d=s.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(a[o][0])||d.type.spec.spanning===!1)break;o++,c++}for(;o<a.length;)i=a.pop()[1];for(;c<s.marks.length;){let d=s.marks[c++],f=this.serializeMark(d,s.isInline,n);f&&(a.push([d,i]),i.appendChild(f.dom),i=f.contentDOM||f.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Jp(Yx(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let a=this.serializeMark(e.marks[i],e.isInline,n);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Jp(Yx(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Jp(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Gl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=a_(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return a_(e.marks)}}function a_(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Yx(t){return t.document||window.document}const s_=new WeakMap;function Xz(t){let e=s_.get(t);return e===void 0&&s_.set(t,e=Yz(t)),e}function Yz(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Jp(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=Xz(r))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let o,c=n?t.createElementNS(n,i):t.createElement(i),d=e[1],f=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){f=2;for(let p in d)if(d[p]!=null){let m=p.indexOf(" ");m>0?c.setAttributeNS(p.slice(0,m),p.slice(m+1),d[p]):p=="style"&&c.style?c.style.cssText=d[p]:c.setAttribute(p,d[p])}}for(let p=f;p<e.length;p++){let m=e[p];if(m===0){if(p<e.length-1||p>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:y,contentDOM:v}=Jp(t,m,n,r);if(c.appendChild(y),v){if(o)throw new RangeError("Multiple content holes");o=v}}}return{dom:c,contentDOM:o}}const v6=65535,b6=Math.pow(2,16);function Zz(t,e){return t+e*b6}function o_(t){return t&v6}function Jz(t){return(t-(t&v6))/b6}const w6=1,C6=2,Qp=4,E6=8;class Uv{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&E6)>0}get deletedBefore(){return(this.delInfo&(w6|Qp))>0}get deletedAfter(){return(this.delInfo&(C6|Qp))>0}get deletedAcross(){return(this.delInfo&Qp)>0}}class _i{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&_i.empty)return _i.empty}recover(e){let n=0,r=o_(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Jz(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let c=this.ranges[o]-(this.inverted?i:0);if(c>e)break;let d=this.ranges[o+a],f=this.ranges[o+s],p=c+d;if(e<=p){let m=d?e==c?-1:e==p?1:n:n,y=c+i+(m<0?0:f);if(r)return y;let v=e==(n<0?c:p)?null:Zz(o/3,e-c),C=e==c?C6:e==p?w6:Qp;return(n<0?e!=c:e!=p)&&(C|=E6),new Uv(y,C,v)}i+=f-d}return r?e+i:new Uv(e+i,0,null)}touches(e,n){let r=0,i=o_(n),a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let c=this.ranges[o]-(this.inverted?r:0);if(c>e)break;let d=this.ranges[o+a],f=c+d;if(e<=f&&o==i*3)return!0;r+=this.ranges[o+s]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?a:0),c=s+(this.inverted?0:a),d=this.ranges[i+n],f=this.ranges[i+r];e(o,o+d,c,c+f),a+=f-d}}invert(){return new _i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?_i.empty:new _i(e<0?[0,-e,0]:[0,0,e])}}_i.empty=new _i([]);class vf{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new vf(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new vf;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let a=this.from;a<this.to;a++){let s=this._maps[a],o=s.mapResult(e,n);if(o.recover!=null){let c=this.getMirror(a);if(c!=null&&c>a&&c<this.to){a=c,e=this._maps[c].recover(o.recover);continue}}i|=o.delInfo,e=o.pos}return r?e:new Uv(e,i,null)}}const Zx=Object.create(null);class Br{getMap(){return _i.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Zx[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Zx)throw new RangeError("Duplicate use of step JSON ID "+e);return Zx[e]=n,n.prototype.jsonID=e,n}}class Vn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Vn(e,null)}static fail(e){return new Vn(null,e)}static fromReplace(e,n,r,i){try{return Vn.ok(e.replace(n,r,i))}catch(a){if(a instanceof R0)return Vn.fail(a.message);throw a}}}function Mb(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let a=t.child(i);a.content.size&&(a=a.copy(Mb(a.content,e,a))),a.isInline&&(a=e(a,n,i)),r.push(a)}return we.fromArray(r)}class yo extends Br{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),a=new Re(Mb(n.content,(s,o)=>!s.isAtom||!o.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Vn.fromReplace(e,this.from,this.to,a)}invert(){return new fa(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new yo(n.pos,r.pos,this.mark)}merge(e){return e instanceof yo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new yo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new yo(n.from,n.to,e.markFromJSON(n.mark))}}Br.jsonID("addMark",yo);class fa extends Br{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Re(Mb(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Vn.fromReplace(e,this.from,this.to,r)}invert(){return new yo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new fa(n.pos,r.pos,this.mark)}merge(e){return e instanceof fa&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new fa(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new fa(n.from,n.to,e.markFromJSON(n.mark))}}Br.jsonID("removeMark",fa);class vo extends Br{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Vn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Vn.fromReplace(e,this.pos,this.pos+1,new Re(we.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new vo(this.pos,n.marks[i]);return new vo(this.pos,this.mark)}}return new Bl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new vo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new vo(n.pos,e.markFromJSON(n.mark))}}Br.jsonID("addNodeMark",vo);class Bl extends Br{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Vn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Vn.fromReplace(e,this.pos,this.pos+1,new Re(we.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new vo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Bl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Bl(n.pos,e.markFromJSON(n.mark))}}Br.jsonID("removeNodeMark",Bl);class lr extends Br{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Hv(e,this.from,this.to)?Vn.fail("Structure replace would overwrite content"):Vn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new _i([this.from,this.to-this.from,this.slice.size])}invert(e){return new lr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new lr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof lr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Re.empty:new Re(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new lr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Re.empty:new Re(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new lr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new lr(n.from,n.to,Re.fromJSON(e,n.slice),!!n.structure)}}Br.jsonID("replace",lr);class fr extends Br{constructor(e,n,r,i,a,s,o=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=a,this.insert=s,this.structure=o}apply(e){if(this.structure&&(Hv(e,this.from,this.gapFrom)||Hv(e,this.gapTo,this.to)))return Vn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Vn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Vn.fromReplace(e,this.from,this.to,r):Vn.fail("Content does not fit in gap")}getMap(){return new _i([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new fr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||a>r.pos?null:new fr(n.pos,r.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fr(n.from,n.to,n.gapFrom,n.gapTo,Re.fromJSON(e,n.slice),n.insert,!!n.structure)}}Br.jsonID("replaceAround",fr);function Hv(t,e,n){let r=t.resolve(e),i=n-e,a=r.depth;for(;i>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,i--;if(i>0){let s=r.node(a).maybeChild(r.indexAfter(a));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Qz(t,e,n,r){let i=[],a=[],s,o;t.doc.nodesBetween(e,n,(c,d,f)=>{if(!c.isInline)return;let p=c.marks;if(!r.isInSet(p)&&f.type.allowsMarkType(r.type)){let m=Math.max(d,e),y=Math.min(d+c.nodeSize,n),v=r.addToSet(p);for(let C=0;C<p.length;C++)p[C].isInSet(v)||(s&&s.to==m&&s.mark.eq(p[C])?s.to=y:i.push(s=new fa(m,y,p[C])));o&&o.to==m?o.to=y:a.push(o=new yo(m,y,r))}}),i.forEach(c=>t.step(c)),a.forEach(c=>t.step(c))}function eU(t,e,n,r){let i=[],a=0;t.doc.nodesBetween(e,n,(s,o)=>{if(!s.isInline)return;a++;let c=null;if(r instanceof em){let d=s.marks,f;for(;f=r.isInSet(d);)(c||(c=[])).push(f),d=f.removeFromSet(d)}else r?r.isInSet(s.marks)&&(c=[r]):c=s.marks;if(c&&c.length){let d=Math.min(o+s.nodeSize,n);for(let f=0;f<c.length;f++){let p=c[f],m;for(let y=0;y<i.length;y++){let v=i[y];v.step==a-1&&p.eq(i[y].style)&&(m=v)}m?(m.to=d,m.step=a):i.push({style:p,from:Math.max(o,e),to:d,step:a})}}}),i.forEach(s=>t.step(new fa(s.from,s.to,s.style)))}function Db(t,e,n,r=n.contentMatch,i=!0){let a=t.doc.nodeAt(e),s=[],o=e+1;for(let c=0;c<a.childCount;c++){let d=a.child(c),f=o+d.nodeSize,p=r.matchType(d.type);if(!p)s.push(new lr(o,f,Re.empty));else{r=p;for(let m=0;m<d.marks.length;m++)n.allowsMarkType(d.marks[m].type)||t.step(new fa(o,f,d.marks[m]));if(i&&d.isText&&n.whitespace!="pre"){let m,y=/\r?\n|\r/g,v;for(;m=y.exec(d.text);)v||(v=new Re(we.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),s.push(new lr(o+m.index,o+m.index+m[0].length,v))}}o=f}if(!r.validEnd){let c=r.fillBefore(we.empty,!0);t.replace(o,o,new Re(c,0,0))}for(let c=s.length-1;c>=0;c--)t.step(s[c])}function tU(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Cu(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,a=0;;--r){let s=t.$from.node(r),o=t.$from.index(r)+i,c=t.$to.indexAfter(r)-a;if(r<t.depth&&s.canReplace(o,c,n))return r;if(r==0||s.type.spec.isolating||!tU(s,o,c))break;o&&(i=1),c<s.childCount&&(a=1)}return null}function nU(t,e,n){let{$from:r,$to:i,depth:a}=e,s=r.before(a+1),o=i.after(a+1),c=s,d=o,f=we.empty,p=0;for(let v=a,C=!1;v>n;v--)C||r.index(v)>0?(C=!0,f=we.from(r.node(v).copy(f)),p++):c--;let m=we.empty,y=0;for(let v=a,C=!1;v>n;v--)C||i.after(v+1)<i.end(v)?(C=!0,m=we.from(i.node(v).copy(m)),y++):d++;t.step(new fr(c,d,s,o,new Re(f.append(m),p,y),f.size-p,!0))}function Rb(t,e,n=null,r=t){let i=rU(t,e),a=i&&iU(r,e);return a?i.map(l_).concat({type:e,attrs:n}).concat(a.map(l_)):null}function l_(t){return{type:t,attrs:null}}function rU(t,e){let{parent:n,startIndex:r,endIndex:i}=t,a=n.contentMatchAt(r).findWrapping(e);if(!a)return null;let s=a.length?a[0]:e;return n.canReplaceWith(r,i,s)?a:null}function iU(t,e){let{parent:n,startIndex:r,endIndex:i}=t,a=n.child(r),s=e.contentMatch.findWrapping(a.type);if(!s)return null;let c=(s.length?s[s.length-1]:e).contentMatch;for(let d=r;c&&d<i;d++)c=c.matchType(n.child(d).type);return!c||!c.validEnd?null:s}function aU(t,e,n){let r=we.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let o=n[s].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=we.from(n[s].type.create(n[s].attrs,r))}let i=e.start,a=e.end;t.step(new fr(i,a,i,a,new Re(r,0,0),n.length,!0))}function sU(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,n,(s,o)=>{let c=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,c)&&oU(t.doc,t.mapping.slice(a).map(o),r)){let d=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!v?d=!1:!y&&v&&(d=!0)}d===!1&&A6(t,s,o,a),Db(t,t.mapping.slice(a).map(o,1),r,void 0,d===null);let f=t.mapping.slice(a),p=f.map(o,1),m=f.map(o+s.nodeSize,1);return t.step(new fr(p,m,p+1,m-1,new Re(we.from(r.create(c,null,s.marks)),0,0),1,!0)),d===!0&&S6(t,s,o,a),!1}})}function S6(t,e,n,r){e.forEach((i,a)=>{if(i.isText){let s,o=/\r?\n|\r/g;for(;s=o.exec(i.text);){let c=t.mapping.slice(r).map(n+1+a+s.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function A6(t,e,n,r){e.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+a);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function oU(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function lU(t,e,n,r,i){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");n||(n=a.type);let s=n.create(r,null,i||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,s);if(!n.validContent(a.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new fr(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new Re(we.from(s),0,0),1,!0))}function vs(t,e,n=1,r){let i=t.resolve(e),a=i.depth-n,s=r&&r[r.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,f=n-2;d>a;d--,f--){let p=i.node(d),m=i.index(d);if(p.type.spec.isolating)return!1;let y=p.content.cutByIndex(m,p.childCount),v=r&&r[f+1];v&&(y=y.replaceChild(0,v.type.create(v.attrs)));let C=r&&r[f]||p;if(!p.canReplace(m+1,p.childCount)||!C.type.validContent(y))return!1}let o=i.indexAfter(a),c=r&&r[0];return i.node(a).canReplaceWith(o,o,c?c.type:i.node(a+1).type)}function cU(t,e,n=1,r){let i=t.doc.resolve(e),a=we.empty,s=we.empty;for(let o=i.depth,c=i.depth-n,d=n-1;o>c;o--,d--){a=we.from(i.node(o).copy(a));let f=r&&r[d];s=we.from(f?f.type.create(f.attrs,s):i.node(o).copy(s))}t.step(new lr(e,e,new Re(a.append(s),n,n),!0))}function Lo(t,e){let n=t.resolve(e),r=n.index();return _6(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function uU(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let a=e.child(i),s=a.type==r?t.type.schema.nodes.text:a.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(a.marks))return!1}return n.validEnd}function _6(t,e){return!!(t&&e&&!t.isLeaf&&uU(t,e))}function tm(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let a,s,o=r.index(i);if(i==r.depth?(a=r.nodeBefore,s=r.nodeAfter):n>0?(a=r.node(i+1),o++,s=r.node(i).maybeChild(o)):(a=r.node(i).maybeChild(o-1),s=r.node(i+1)),a&&!a.isTextblock&&_6(a,s)&&r.node(i).canReplace(o,o+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function dU(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,a=t.doc.resolve(e-n),s=a.node().type;if(i&&s.inlineContent){let f=s.whitespace=="pre",p=!!s.contentMatch.matchType(i);f&&!p?r=!1:!f&&p&&(r=!0)}let o=t.steps.length;if(r===!1){let f=t.doc.resolve(e+n);A6(t,f.node(),f.before(),o)}s.inlineContent&&Db(t,e+n-1,s,a.node().contentMatchAt(a.index()),r==null);let c=t.mapping.slice(o),d=c.map(e-n);if(t.step(new lr(d,c.map(e+n,-1),Re.empty,!0)),r===!0){let f=t.doc.resolve(d);S6(t,f.node(),f.before(),t.steps.length)}return t}function fU(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let a=r.index(i);if(r.node(i).canReplaceWith(a,a,n))return r.before(i+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let a=r.indexAfter(i);if(r.node(i).canReplaceWith(a,a,n))return r.after(i+1);if(a<r.node(i).childCount)return null}return null}function T6(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let a=0;a<n.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(n.openStart==0&&n.size?2:1);a++)for(let s=r.depth;s>=0;s--){let o=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(o>0?1:0),d=r.node(s),f=!1;if(a==1)f=d.canReplace(c,c,i);else{let p=d.contentMatchAt(c).findWrapping(i.firstChild.type);f=p&&d.canReplaceWith(c,c,p[0])}if(f)return o==0?r.pos:o<0?r.before(s+1):r.after(s+1)}return null}function nm(t,e,n=e,r=Re.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),a=t.resolve(n);return N6(i,a,r)?new lr(e,n,r):new hU(i,a,r).fit()}function N6(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class hU{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=we.empty;for(let i=0;i<=e.depth;i++){let a=e.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=we.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let a=this.placed,s=r.depth,o=i.depth;for(;s&&o&&a.childCount==1;)a=a.firstChild.content,s--,o--;let c=new Re(a,s,o);return e>-1?new fr(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new lr(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let a=n.firstChild;if(n.childCount>1&&(i=0),a.type.spec.isolating&&i<=r){e=r;break}n=a.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,a=null;r?(a=Jx(this.unplaced.content,r-1).firstChild,i=a.content):i=this.unplaced.content;let s=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:c,match:d}=this.frontier[o],f,p=null;if(n==1&&(s?d.matchType(s.type)||(p=d.fillBefore(we.from(s),!1)):a&&c.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:o,parent:a,inject:p};if(n==2&&s&&(f=d.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:o,parent:a,wrap:f};if(a&&d.matchType(a.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Jx(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Re(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Jx(e,n);if(i.childCount<=1&&n>0){let a=e.size-n<=n+i.size;this.unplaced=new Re(Md(e,n-1,1),n-1,a?n-1:r)}else this.unplaced=new Re(Md(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:a}){for(;this.depth>n;)this.closeFrontierNode();if(a)for(let C=0;C<a.length;C++)this.openFrontierNode(a[C]);let s=this.unplaced,o=r?r.content:s.content,c=s.openStart-e,d=0,f=[],{match:p,type:m}=this.frontier[n];if(i){for(let C=0;C<i.childCount;C++)f.push(i.child(C));p=p.matchFragment(i)}let y=o.size+e-(s.content.size-s.openEnd);for(;d<o.childCount;){let C=o.child(d),E=p.matchType(C.type);if(!E)break;d++,(d>1||c==0||C.content.size)&&(p=E,f.push(k6(C.mark(m.allowedMarks(C.marks)),d==1?c:0,d==o.childCount?y:-1)))}let v=d==o.childCount;v||(y=-1),this.placed=Dd(this.placed,n,we.from(f)),this.frontier[n].match=p,v&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,E=o;C<y;C++){let S=E.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),E=S.content}this.unplaced=v?e==0?Re.empty:new Re(Md(s.content,e-1,1),e-1,y<0?s.openEnd:e-1):new Re(Md(s.content,e,d),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Qx(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],a=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Qx(e,n,i,r,a);if(s){for(let o=n-1;o>=0;o--){let{match:c,type:d}=this.frontier[o],f=Qx(e,o,d,c,!0);if(!f||f.childCount)continue e}return{depth:n,fit:s,move:a?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Dd(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),a=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,a)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Dd(this.placed,this.depth,we.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(we.empty,!0);n.childCount&&(this.placed=Dd(this.placed,this.frontier.length,n))}}function Md(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Md(t.firstChild.content,e-1,n)))}function Dd(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Dd(t.lastChild.content,e-1,n)))}function Jx(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function k6(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,k6(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(we.empty,!0)))),t.copy(r)}function Qx(t,e,n,r,i){let a=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==a.childCount&&!n.compatibleContent(a.type))return null;let o=r.fillBefore(a.content,!0,s);return o&&!pU(n,a.content,s)?o:null}function pU(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function mU(t){return t.spec.defining||t.spec.definingForContent}function gU(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),a=t.doc.resolve(n);if(N6(i,a,r))return t.step(new lr(e,n,r));let s=M6(i,a);s[s.length-1]==0&&s.pop();let o=-(i.depth+1);s.unshift(o);for(let m=i.depth,y=i.pos-1;m>0;m--,y--){let v=i.node(m).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;s.indexOf(m)>-1?o=m:i.before(m)==y&&s.splice(1,0,-m)}let c=s.indexOf(o),d=[],f=r.openStart;for(let m=r.content,y=0;;y++){let v=m.firstChild;if(d.push(v),y==r.openStart)break;m=v.content}for(let m=f-1;m>=0;m--){let y=d[m],v=mU(y.type);if(v&&!y.sameMarkup(i.node(Math.abs(o)-1)))f=m;else if(v||!y.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let y=(m+f+1)%(r.openStart+1),v=d[y];if(v)for(let C=0;C<s.length;C++){let E=s[(C+c)%s.length],S=!0;E<0&&(S=!1,E=-E);let _=i.node(E-1),N=i.index(E-1);if(_.canReplaceWith(N,N,v.type,v.marks))return t.replace(i.before(E),S?a.after(E):n,new Re(O6(r.content,0,r.openStart,y),y,r.openEnd))}}let p=t.steps.length;for(let m=s.length-1;m>=0&&(t.replace(e,n,r),!(t.steps.length>p));m--){let y=s[m];y<0||(e=i.before(y),n=a.after(y))}}function O6(t,e,n,r,i){if(e<n){let a=t.firstChild;t=t.replaceChild(0,a.copy(O6(a.content,e+1,n,r,a)))}if(e>r){let a=i.contentMatchAt(0),s=a.fillBefore(t).append(t);t=s.append(a.matchFragment(s).fillBefore(we.empty,!0))}return t}function xU(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=fU(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Re(we.from(r),0,0))}function yU(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),a=M6(r,i);for(let s=0;s<a.length;s++){let o=a[s],c=s==a.length-1;if(c&&o==0||r.node(o).type.contentMatch.validEnd)return t.delete(r.start(o),i.end(o));if(o>0&&(c||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return t.delete(r.before(o),i.after(o))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function M6(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let a=t.start(i);if(a<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(a==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==a-1)&&n.push(i)}return n}class qc extends Br{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Vn.fail("No node at attribute step's position");let r=Object.create(null);for(let a in n.attrs)r[a]=n.attrs[a];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Vn.fromReplace(e,this.pos,this.pos+1,new Re(we.from(i),0,n.isLeaf?0:1))}getMap(){return _i.empty}invert(e){return new qc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new qc(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new qc(n.pos,n.attr,n.value)}}Br.jsonID("attr",qc);class bf extends Br{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Vn.ok(r)}getMap(){return _i.empty}invert(e){return new bf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new bf(n.attr,n.value)}}Br.jsonID("docAttr",bf);let su=class extends Error{};su=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};su.prototype=Object.create(Error.prototype);su.prototype.constructor=su;su.prototype.name="TransformError";class Ib{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new vf}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new su(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((a,s,o,c)=>{e=Math.min(e,o),n=Math.max(n,c)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Re.empty){let i=nm(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Re(we.from(r),0,0))}delete(e,n){return this.replace(e,n,Re.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return gU(this,e,n,r),this}replaceRangeWith(e,n,r){return xU(this,e,n,r),this}deleteRange(e,n){return yU(this,e,n),this}lift(e,n){return nU(this,e,n),this}join(e,n=1){return dU(this,e,n),this}wrap(e,n){return aU(this,e,n),this}setBlockType(e,n=e,r,i=null){return sU(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return lU(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new qc(e,n,r)),this}setDocAttribute(e,n){return this.step(new bf(e,n)),this}addNodeMark(e,n){return this.step(new vo(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Zt)n.isInSet(r.marks)&&this.step(new Bl(e,n));else{let i=r.marks,a,s=[];for(;a=n.isInSet(i);)s.push(new Bl(e,a)),i=a.removeFromSet(i);for(let o=s.length-1;o>=0;o--)this.step(s[o])}return this}split(e,n=1,r){return cU(this,e,n,r),this}addMark(e,n,r){return Qz(this,e,n,r),this}removeMark(e,n,r){return eU(this,e,n,r),this}clearIncompatible(e,n,r){return Db(this,e,n,r),this}}const ey=Object.create(null);class Qe{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new D6(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Re.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let a=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:c,$to:d}=s[o],f=e.mapping.slice(a);e.replaceRange(f.map(c.pos),f.map(d.pos),o?Re.empty:n),o==0&&d_(e,a,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:s,$to:o}=i[a],c=e.mapping.slice(r),d=c.map(s.pos),f=c.map(o.pos);a?e.deleteRange(d,f):(e.replaceRangeWith(d,f,n),d_(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Xe(e):Mc(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let a=e.depth-1;a>=0;a--){let s=n<0?Mc(e.node(0),e.node(a),e.before(a+1),e.index(a),n,r):Mc(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ni(e.node(0))}static atStart(e){return Mc(e,e,0,0,1)||new Ni(e)}static atEnd(e){return Mc(e,e,e.content.size,e.childCount,-1)||new Ni(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ey[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ey)throw new RangeError("Duplicate use of selection JSON ID "+e);return ey[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Xe.between(this.$anchor,this.$head).getBookmark()}}Qe.prototype.visible=!0;class D6{constructor(e,n){this.$from=e,this.$to=n}}let c_=!1;function u_(t){!c_&&!t.parent.inlineContent&&(c_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Xe extends Qe{constructor(e,n=e){u_(e),u_(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Qe.near(r);let i=e.resolve(n.map(this.anchor));return new Xe(i.parent.inlineContent?i:r,r)}replace(e,n=Re.empty){if(super.replace(e,n),n==Re.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Xe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new rm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Xe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let a=Qe.findFrom(n,r,!0)||Qe.findFrom(n,-r,!0);if(a)n=a.$head;else return Qe.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Qe.findFrom(e,-r,!0)||Qe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Xe(e,n)}}Qe.jsonID("text",Xe);class rm{constructor(e,n){this.anchor=e,this.head=n}map(e){return new rm(e.map(this.anchor),e.map(this.head))}resolve(e){return Xe.between(e.resolve(this.anchor),e.resolve(this.head))}}class qe extends Qe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),a=e.resolve(i);return r?Qe.near(a):new qe(a)}content(){return new Re(we.from(this.node),0,0)}eq(e){return e instanceof qe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Lb(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new qe(e.resolve(n.anchor))}static create(e,n){return new qe(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}qe.prototype.visible=!1;Qe.jsonID("node",qe);class Lb{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new rm(r,r):new Lb(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&qe.isSelectable(r)?new qe(n):Qe.near(n)}}class Ni extends Qe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Re.empty){if(n==Re.empty){e.delete(0,e.doc.content.size);let r=Qe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ni(e)}map(e){return new Ni(e)}eq(e){return e instanceof Ni}getBookmark(){return vU}}Qe.jsonID("all",Ni);const vU={map(){return this},resolve(t){return new Ni(t)}};function Mc(t,e,n,r,i,a=!1){if(e.inlineContent)return Xe.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let o=e.child(s);if(o.isAtom){if(!a&&qe.isSelectable(o))return qe.create(t,n-(i<0?o.nodeSize:0))}else{let c=Mc(t,o,n+i,i<0?o.childCount:0,i,a);if(c)return c}n+=o.nodeSize*i}return null}function d_(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof lr||i instanceof fr))return;let a=t.mapping.maps[r],s;a.forEach((o,c,d,f)=>{s==null&&(s=f)}),t.setSelection(Qe.near(t.doc.resolve(s),n))}const f_=1,wp=2,h_=4;class bU extends Ib{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|f_)&~wp,this.storedMarks=null,this}get selectionSet(){return(this.updated&f_)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wp,this}ensureMarks(e){return Zt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wp)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~wp,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Zt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let a=this.storedMarks;if(!a){let s=this.doc.resolve(n);a=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,a)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Qe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=h_,this}get scrolledIntoView(){return(this.updated&h_)>0}}function p_(t,e){return!e||!t?t:t.bind(e)}class Rd{constructor(e,n,r){this.name=e,this.init=p_(n.init,r),this.apply=p_(n.apply,r)}}const wU=[new Rd("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Rd("selection",{init(t,e){return t.selection||Qe.atStart(e.doc)},apply(t){return t.selection}}),new Rd("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Rd("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ty{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=wU.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Rd(r.key,r.spec.state,r))})}}class Pc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let c=i?i[s].n:0,d=i?i[s].state:this,f=c<n.length&&o.spec.appendTransaction.call(o,c?n.slice(c):n,d,r);if(f&&r.filterTransaction(f,s)){if(f.setMeta("appendedTransaction",e),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<s?{state:r,n:n.length}:{state:this,n:0})}n.push(f),r=r.applyInner(f),a=!0}i&&(i[s]={state:r,n:n.length})}}if(!a)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Pc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let a=r[i];n[a.name]=a.apply(e,this[a.name],this,n)}return n}get tr(){return new bU(this)}static create(e){let n=new ty(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Pc(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new ty(this.schema,e.plugins),r=n.fields,i=new Pc(n);for(let a=0;a<r.length;a++){let s=r[a].name;i[s]=this.hasOwnProperty(s)?this[s]:r[a].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],a=i.spec.state;a&&a.toJSON&&(n[r]=a.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ty(e.schema,e.plugins),a=new Pc(i);return i.fields.forEach(s=>{if(s.name=="doc")a.doc=pa.fromJSON(e.schema,n.doc);else if(s.name=="selection")a.selection=Qe.fromJSON(a.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(a.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let o in r){let c=r[o],d=c.spec.state;if(c.key==s.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){a[s.name]=d.fromJSON.call(c,e,n[o],a);return}}a[s.name]=s.init(e,a)}}),a}}function R6(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=R6(i,e,{})),n[r]=i}return n}class fn{constructor(e){this.spec=e,this.props={},e.props&&R6(e.props,this,this.props),this.key=e.key?e.key.key:I6("plugin")}getState(e){return e[this.key]}}const ny=Object.create(null);function I6(t){return t in ny?t+"$"+ ++ny[t]:(ny[t]=0,t+"$")}class kn{constructor(e="key"){this.key=I6(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const jb=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function L6(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const j6=(t,e,n)=>{let r=L6(t,n);if(!r)return!1;let i=Pb(r);if(!i){let s=r.blockRange(),o=s&&Cu(s);return o==null?!1:(e&&e(t.tr.lift(s,o).scrollIntoView()),!0)}let a=i.nodeBefore;if(G6(t,i,e,-1))return!0;if(r.parent.content.size==0&&(ou(a,"end")||qe.isSelectable(a)))for(let s=r.depth;;s--){let o=nm(t.doc,r.before(s),r.after(s),Re.empty);if(o&&o.slice.size<o.to-o.from){if(e){let c=t.tr.step(o);c.setSelection(ou(a,"end")?Qe.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):qe.create(c.doc,i.pos-a.nodeSize)),e(c.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return a.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},CU=(t,e,n)=>{let r=L6(t,n);if(!r)return!1;let i=Pb(r);return i?P6(t,i,e):!1},EU=(t,e,n)=>{let r=F6(t,n);if(!r)return!1;let i=Bb(r);return i?P6(t,i,e):!1};function P6(t,e,n){let r=e.nodeBefore,i=r,a=e.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let f=i.lastChild;if(!f)return!1;i=f}let s=e.nodeAfter,o=s,c=e.pos+1;for(;!o.isTextblock;c++){if(o.type.spec.isolating)return!1;let f=o.firstChild;if(!f)return!1;o=f}let d=nm(t.doc,a,c,Re.empty);if(!d||d.from!=a||d instanceof lr&&d.slice.size>=c-a)return!1;if(n){let f=t.tr.step(d);f.setSelection(Xe.create(f.doc,a)),n(f.scrollIntoView())}return!0}function ou(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const B6=(t,e,n)=>{let{$head:r,empty:i}=t.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;a=Pb(r)}let s=a&&a.nodeBefore;return!s||!qe.isSelectable(s)?!1:(e&&e(t.tr.setSelection(qe.create(t.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function Pb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function F6(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const z6=(t,e,n)=>{let r=F6(t,n);if(!r)return!1;let i=Bb(r);if(!i)return!1;let a=i.nodeAfter;if(G6(t,i,e,1))return!0;if(r.parent.content.size==0&&(ou(a,"start")||qe.isSelectable(a))){let s=nm(t.doc,r.before(),r.after(),Re.empty);if(s&&s.slice.size<s.to-s.from){if(e){let o=t.tr.step(s);o.setSelection(ou(a,"start")?Qe.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):qe.create(o.doc,o.mapping.map(i.pos))),e(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},U6=(t,e,n)=>{let{$head:r,empty:i}=t.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;a=Bb(r)}let s=a&&a.nodeAfter;return!s||!qe.isSelectable(s)?!1:(e&&e(t.tr.setSelection(qe.create(t.doc,a.pos)).scrollIntoView()),!0)};function Bb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const SU=(t,e)=>{let n=t.selection,r=n instanceof qe,i;if(r){if(n.node.isTextblock||!Lo(t.doc,n.from))return!1;i=n.from}else if(i=tm(t.doc,n.from,-1),i==null)return!1;if(e){let a=t.tr.join(i);r&&a.setSelection(qe.create(a.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},AU=(t,e)=>{let n=t.selection,r;if(n instanceof qe){if(n.node.isTextblock||!Lo(t.doc,n.to))return!1;r=n.to}else if(r=tm(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},_U=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),a=i&&Cu(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)},H6=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Fb(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const TU=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),a=n.indexAfter(-1),s=Fb(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(e){let o=n.after(),c=t.tr.replaceWith(o,o,s.createAndFill());c.setSelection(Qe.near(c.doc.resolve(o),1)),e(c.scrollIntoView())}return!0},V6=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Ni||r.parent.inlineContent||i.parent.inlineContent)return!1;let a=Fb(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=t.tr.insert(s,a.createAndFill());o.setSelection(Xe.create(o.doc,s+1)),e(o.scrollIntoView())}return!0},$6=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let a=n.before();if(vs(t.doc,a))return e&&e(t.tr.split(a).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Cu(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function NU(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof qe&&e.selection.node.isBlock)return!r.parentOffset||!vs(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],s,o,c=!1,d=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){c=r.end(y)==r.pos+(r.depth-y),d=r.start(y)==r.pos-(r.depth-y),o=Fb(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),a.unshift(c&&o?{type:o}:null),s=y;break}else{if(y==1)return!1;a.unshift(null)}let f=e.tr;(e.selection instanceof Xe||e.selection instanceof Ni)&&f.deleteSelection();let p=f.mapping.map(r.pos),m=vs(f.doc,p,a.length,a);if(m||(a[0]=o?{type:o}:null,m=vs(f.doc,p,a.length,a)),!m)return!1;if(f.split(p,a.length,a),!c&&d&&r.node(s).type!=o){let y=f.mapping.map(r.before(s)),v=f.doc.resolve(y);o&&r.node(s-1).canReplaceWith(v.index(),v.index()+1,o)&&f.setNodeMarkup(f.mapping.map(r.before(s)),o)}return n&&n(f.scrollIntoView()),!0}}const kU=NU(),OU=(t,e)=>{let{$from:n,to:r}=t.selection,i,a=n.sharedDepth(r);return a==0?!1:(i=n.before(a),e&&e(t.tr.setSelection(qe.create(t.doc,i))),!0)};function MU(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,a=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(a-1,a)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(i.isTextblock||Lo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function G6(t,e,n,r){let i=e.nodeBefore,a=e.nodeAfter,s,o,c=i.type.spec.isolating||a.type.spec.isolating;if(!c&&MU(t,e,n))return!0;let d=!c&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(s[0]||a.type).validEnd){if(n){let y=e.pos+a.nodeSize,v=we.empty;for(let S=s.length-1;S>=0;S--)v=we.from(s[S].create(null,v));v=we.from(i.copy(v));let C=t.tr.step(new fr(e.pos-1,y,e.pos,y,new Re(v,1,0),s.length,!0)),E=C.doc.resolve(y+2*s.length);E.nodeAfter&&E.nodeAfter.type==i.type&&Lo(C.doc,E.pos)&&C.join(E.pos),n(C.scrollIntoView())}return!0}let f=a.type.spec.isolating||r>0&&c?null:Qe.findFrom(e,1),p=f&&f.$from.blockRange(f.$to),m=p&&Cu(p);if(m!=null&&m>=e.depth)return n&&n(t.tr.lift(p,m).scrollIntoView()),!0;if(d&&ou(a,"start",!0)&&ou(i,"end")){let y=i,v=[];for(;v.push(y),!y.isTextblock;)y=y.lastChild;let C=a,E=1;for(;!C.isTextblock;C=C.firstChild)E++;if(y.canReplace(y.childCount,y.childCount,C.content)){if(n){let S=we.empty;for(let N=v.length-1;N>=0;N--)S=we.from(v[N].copy(S));let _=t.tr.step(new fr(e.pos-v.length,e.pos+a.nodeSize,e.pos+E,e.pos+a.nodeSize-E,new Re(S,v.length,0),0,!0));n(_.scrollIntoView())}return!0}}return!1}function W6(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(n&&n(e.tr.setSelection(Xe.create(e.doc,t<0?i.start(a):i.end(a)))),!0):!1}}const DU=W6(-1),RU=W6(1);function IU(t,e=null){return function(n,r){let{$from:i,$to:a}=n.selection,s=i.blockRange(a),o=s&&Rb(s,t,e);return o?(r&&r(n.tr.wrap(s,o).scrollIntoView()),!0):!1}}function m_(t,e=null){return function(n,r){let i=!1;for(let a=0;a<n.selection.ranges.length&&!i;a++){let{$from:{pos:s},$to:{pos:o}}=n.selection.ranges[a];n.doc.nodesBetween(s,o,(c,d)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let f=n.doc.resolve(d),p=f.index();i=f.parent.canReplaceWith(p,p+1,t)}})}if(!i)return!1;if(r){let a=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:o},$to:{pos:c}}=n.selection.ranges[s];a.setBlockType(o,c,t,e)}r(a.scrollIntoView())}return!0}}function zb(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}zb(jb,j6,B6);zb(jb,z6,U6);zb(H6,V6,$6,kU);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function LU(t,e=null){return function(n,r){let{$from:i,$to:a}=n.selection,s=i.blockRange(a);if(!s)return!1;let o=r?n.tr:null;return jU(o,s,t,e)?(r&&r(o.scrollIntoView()),!0):!1}}function jU(t,e,n,r=null){let i=!1,a=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=s.resolve(e.start-2);a=new L0(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new L0(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let o=Rb(a,n,r,e);return o?(t&&PU(t,e,o,i,n),!0):!1}function PU(t,e,n,r,i){let a=we.empty;for(let f=n.length-1;f>=0;f--)a=we.from(n[f].type.create(n[f].attrs,a));t.step(new fr(e.start-(r?2:0),e.end,e.start,e.end,new Re(a,0,0),n.length,!0));let s=0;for(let f=0;f<n.length;f++)n[f].type==i&&(s=f+1);let o=n.length-s,c=e.start+n.length-(r?2:0),d=e.parent;for(let f=e.startIndex,p=e.endIndex,m=!0;f<p;f++,m=!1)!m&&vs(t.doc,c,o)&&(t.split(c,o),c+=2*o),c+=d.child(f).nodeSize;return t}function BU(t){return function(e,n){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return a?n?r.node(a.depth-1).type==t?FU(e,n,t,a):zU(e,n,a):!0:!1}}function FU(t,e,n,r){let i=t.tr,a=r.end,s=r.$to.end(r.depth);a<s&&(i.step(new fr(a-1,s,a,s,new Re(we.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new L0(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const o=Cu(r);if(o==null)return!1;i.lift(r,o);let c=i.doc.resolve(i.mapping.map(a,-1)-1);return Lo(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function zU(t,e,n){let r=t.tr,i=n.parent;for(let y=n.end,v=n.endIndex-1,C=n.startIndex;v>C;v--)y-=i.child(v).nodeSize,r.delete(y-1,y+1);let a=r.doc.resolve(n.start),s=a.nodeAfter;if(r.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,c=n.endIndex==i.childCount,d=a.node(-1),f=a.index(-1);if(!d.canReplace(f+(o?0:1),f+1,s.content.append(c?we.empty:we.from(i))))return!1;let p=a.pos,m=p+s.nodeSize;return r.step(new fr(p-(o?1:0),m+(c?1:0),p+1,m-1,new Re((o?we.empty:we.from(i.copy(we.empty))).append(c?we.empty:we.from(i.copy(we.empty))),o?0:1,c?0:1),o?0:1)),e(r.scrollIntoView()),!0}function UU(t){return function(e,n){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==t);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let o=a.parent,c=o.child(s-1);if(c.type!=t)return!1;if(n){let d=c.lastChild&&c.lastChild.type==o.type,f=we.from(d?t.create():null),p=new Re(we.from(t.create(null,we.from(o.type.create(null,f)))),d?3:1,0),m=a.start,y=a.end;n(e.tr.step(new fr(m-(d?3:1),y,m,y,p,1,!0)).scrollIntoView())}return!0}}const Sr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},lu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Vv=null;const hs=function(t,e,n){let r=Vv||(Vv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},HU=function(){Vv=null},Fl=function(t,e,n,r){return n&&(g_(t,e,n,r,-1)||g_(t,e,n,r,1))},VU=/^(img|br|input|textarea|hr)$/i;function g_(t,e,n,r,i){for(var a;;){if(t==n&&e==r)return!0;if(e==(i<0?0:qi(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Gf(t)||VU.test(t.nodeName)||t.contentEditable=="false")return!1;e=Sr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((a=s.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?qi(t):0}else return!1}}function qi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function $U(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=qi(t)}else if(t.parentNode&&!Gf(t))e=Sr(t),t=t.parentNode;else return null}}function GU(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Gf(t))e=Sr(t)+1,t=t.parentNode;else return null}}function WU(t,e,n){for(let r=e==0,i=e==qi(t);r||i;){if(t==n)return!0;let a=Sr(t);if(t=t.parentNode,!t)return!1;r=r&&a==0,i=i&&a==qi(t)}}function Gf(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const im=function(t){return t.focusNode&&Fl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function gl(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function qU(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function KU(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(qi(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(qi(r.startContainer),r.startOffset)}}}const ja=typeof navigator<"u"?navigator:null,x_=typeof document<"u"?document:null,jo=ja&&ja.userAgent||"",$v=/Edge\/(\d+)/.exec(jo),q6=/MSIE \d/.exec(jo),Gv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(jo),fi=!!(q6||Gv||$v),Eo=q6?document.documentMode:Gv?+Gv[1]:$v?+$v[1]:0,Yi=!fi&&/gecko\/(\d+)/i.test(jo);Yi&&+(/Firefox\/(\d+)/.exec(jo)||[0,0])[1];const Wv=!fi&&/Chrome\/(\d+)/.exec(jo),_r=!!Wv,K6=Wv?+Wv[1]:0,jr=!fi&&!!ja&&/Apple Computer/.test(ja.vendor),cu=jr&&(/Mobile\/\w+/.test(jo)||!!ja&&ja.maxTouchPoints>2),Wi=cu||(ja?/Mac/.test(ja.platform):!1),X6=ja?/Win/.test(ja.platform):!1,gs=/Android \d/.test(jo),Wf=!!x_&&"webkitFontSmoothing"in x_.documentElement.style,XU=Wf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function YU(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ls(t,e){return typeof t=="number"?t:t[e]}function ZU(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function y_(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,a=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=lu(s);continue}let o=s,c=o==a.body,d=c?YU(a):ZU(o),f=0,p=0;if(e.top<d.top+ls(r,"top")?p=-(d.top-e.top+ls(i,"top")):e.bottom>d.bottom-ls(r,"bottom")&&(p=e.bottom-e.top>d.bottom-d.top?e.top+ls(i,"top")-d.top:e.bottom-d.bottom+ls(i,"bottom")),e.left<d.left+ls(r,"left")?f=-(d.left-e.left+ls(i,"left")):e.right>d.right-ls(r,"right")&&(f=e.right-d.right+ls(i,"right")),f||p)if(c)a.defaultView.scrollBy(f,p);else{let y=o.scrollLeft,v=o.scrollTop;p&&(o.scrollTop+=p),f&&(o.scrollLeft+=f);let C=o.scrollLeft-y,E=o.scrollTop-v;e={left:e.left-C,top:e.top-E,right:e.right-C,bottom:e.bottom-E}}let m=c?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(m))break;s=m=="absolute"?s.offsetParent:lu(s)}}function JU(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let a=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let o=t.root.elementFromPoint(a,s);if(!o||o==t.dom||!t.dom.contains(o))continue;let c=o.getBoundingClientRect();if(c.top>=n-20){r=o,i=c.top;break}}return{refDOM:r,refTop:i,stack:Y6(t.dom)}}function Y6(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=lu(r));return e}function QU({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Z6(n,r==0?0:r-e)}function Z6(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:a}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=a&&(r.scrollLeft=a)}}let Nc=null;function eH(t){if(t.setActive)return t.setActive();if(Nc)return t.focus(Nc);let e=Y6(t);t.focus(Nc==null?{get preventScroll(){return Nc={preventScroll:!0},!0}}:void 0),Nc||(Nc=!1,Z6(e,0))}function J6(t,e){let n,r=2e8,i,a=0,s=e.top,o=e.top,c,d;for(let f=t.firstChild,p=0;f;f=f.nextSibling,p++){let m;if(f.nodeType==1)m=f.getClientRects();else if(f.nodeType==3)m=hs(f).getClientRects();else continue;for(let y=0;y<m.length;y++){let v=m[y];if(v.top<=s&&v.bottom>=o){s=Math.max(v.bottom,s),o=Math.min(v.top,o);let C=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(C<r){n=f,r=C,i=C&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,f.nodeType==1&&C&&(a=p+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!c&&v.left<=e.left&&v.right>=e.left&&(c=f,d={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(a=p+1)}}return!n&&c&&(n=c,i=d,r=0),n&&n.nodeType==3?tH(n,i):!n||r&&n.nodeType==1?{node:t,offset:a}:J6(n,i)}function tH(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let a=0;a<n;a++){r.setEnd(t,a+1),r.setStart(t,a);let s=no(r,1);if(s.top!=s.bottom&&Ub(e,s)){i={node:t,offset:a+(e.left>=(s.left+s.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Ub(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function nH(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function rH(t,e,n){let{node:r,offset:i}=J6(e,n),a=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,a)}function iH(t,e,n,r){let i=-1;for(let a=e,s=!1;a!=t.dom;){let o=t.docView.nearestDesc(a,!0),c;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((c=o.dom.getBoundingClientRect()).width||c.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!s&&c.left>r.left||c.top>r.top?i=o.posBefore:(!s&&c.right<r.left||c.bottom<r.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?o.posBefore:o.posAfter;a=o.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Q6(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),a=i;;){let s=t.childNodes[a];if(s.nodeType==1){let o=s.getClientRects();for(let c=0;c<o.length;c++){let d=o[c];if(Ub(e,d))return Q6(s,e,d)}}if((a=(a+1)%r)==i)break}return t}function aH(t,e){let n=t.dom.ownerDocument,r,i=0,a=KU(n,e.left,e.top);a&&({node:r,offset:i}=a);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),o;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let d=t.dom.getBoundingClientRect();if(!Ub(e,d)||(s=Q6(t.dom,e,d),!s))return null}if(jr)for(let d=s;r&&d;d=lu(d))d.draggable&&(r=void 0);if(s=nH(s,e),r){if(Yi&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let f=r.childNodes[i],p;f.nodeName=="IMG"&&(p=f.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&i++}let d;Wf&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=iH(t,r,i,e))}o==null&&(o=rH(t,s,e));let c=t.docView.nearestDesc(s,!0);return{pos:o,inside:c?c.posAtStart-c.border:-1}}function v_(t){return t.top<t.bottom||t.left<t.right}function no(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(v_(r))return r}return Array.prototype.find.call(n,v_)||t.getBoundingClientRect()}const sH=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function eO(t,e,n){let{node:r,offset:i,atom:a}=t.docView.domFromPos(e,n<0?-1:1),s=Wf||Yi;if(r.nodeType==3)if(s&&(sH.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=no(hs(r,i,i),n);if(Yi&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=no(hs(r,i-1,i-1),-1);if(d.top==c.top){let f=no(hs(r,i,i+1),-1);if(f.top!=c.top)return Ed(f,f.left<d.left)}}return c}else{let c=i,d=i,f=n<0?1:-1;return n<0&&!i?(d++,f=-1):n>=0&&i==r.nodeValue.length?(c--,f=1):n<0?c--:d++,Ed(no(hs(r,c,d),f),f<0)}if(!t.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&i&&(n<0||i==qi(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return ry(c.getBoundingClientRect(),!1)}if(a==null&&i<qi(r)){let c=r.childNodes[i];if(c.nodeType==1)return ry(c.getBoundingClientRect(),!0)}return ry(r.getBoundingClientRect(),n>=0)}if(a==null&&i&&(n<0||i==qi(r))){let c=r.childNodes[i-1],d=c.nodeType==3?hs(c,qi(c)-(s?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return Ed(no(d,1),!1)}if(a==null&&i<qi(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?hs(c,0,s?0:1):c.nodeType==1?c:null:null;if(d)return Ed(no(d,-1),!0)}return Ed(no(r.nodeType==3?hs(r):r,-n),n>=0)}function Ed(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ry(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function tO(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function oH(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return tO(t,e,()=>{let{node:a}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=t.docView.nearestDesc(a,!0);if(!o)break;if(o.node.isBlock){a=o.contentDOM||o.dom;break}a=o.dom.parentNode}let s=eO(t,i.pos,1);for(let o=a.firstChild;o;o=o.nextSibling){let c;if(o.nodeType==1)c=o.getClientRects();else if(o.nodeType==3)c=hs(o,0,o.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let f=c[d];if(f.bottom>f.top+1&&(n=="up"?s.top-f.top>(f.bottom-s.top)*2:f.bottom-s.bottom>(s.bottom-f.top)*2))return!1}}return!0})}const lH=/[\u0590-\u08ac]/;function cH(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,a=!i,s=i==r.parent.content.size,o=t.domSelection();return o?!lH.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?a:s:tO(t,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:f,anchorOffset:p}=t.domSelectionRange(),m=o.caretBidiLevel;o.modify("move",n,"character");let y=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:C}=t.domSelectionRange(),E=v&&!y.contains(v.nodeType==1?v:v.parentNode)||c==v&&d==C;try{o.collapse(f,p),c&&(c!=f||d!=p)&&o.extend&&o.extend(c,d)}catch{}return m!=null&&(o.caretBidiLevel=m),E}):r.pos==r.start()||r.pos==r.end()}let b_=null,w_=null,C_=!1;function uH(t,e,n){return b_==e&&w_==n?C_:(b_=e,w_=n,C_=n=="up"||n=="down"?oH(t,e,n):cH(t,e,n))}const Zi=0,E_=1,yl=2,Pa=3;class qf{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Zi,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let a,s;if(e==this.contentDOM)a=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(e==this.contentDOM)a=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Sr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let a=this.getDesc(i),s;if(a&&(!n||a.node))if(r&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return a}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],a=r+i.size;if(r==e&&a!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let o=i.children[s];if(o.size){i=o;break}}return i}if(e<a)return i.descAt(e-r-i.border);r=a}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let a=0;r<this.children.length;r++){let s=this.children[r],o=a+s.size;if(o>e||s instanceof rO){i=e-a;break}a=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof nO&&a.side>=0;r--);if(n<=0){let a,s=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,s=!1);return a&&n&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,n):{node:this.contentDOM,offset:a?Sr(a.dom)+1:0}}else{let a,s=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,n):{node:this.contentDOM,offset:a?Sr(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let s=r,o=0;;o++){let c=this.children[o],d=s+c.size;if(i==-1&&e<=d){let f=s+c.border;if(e>=f&&n<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,f);e=s;for(let p=o;p>0;p--){let m=this.children[p-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){i=Sr(m.dom)+1;break}e-=m.size}i==-1&&(i=0)}if(i>-1&&(d>n||o==this.children.length-1)){n=d;for(let f=o+1;f<this.children.length;f++){let p=this.children[f];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){a=Sr(p.dom);break}n+=p.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=d}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let a=Math.min(e,n),s=Math.max(e,n);for(let y=0,v=0;y<this.children.length;y++){let C=this.children[y],E=v+C.size;if(a>v&&s<E)return C.setSelection(e-v-C.border,n-v-C.border,r,i);v=E}let o=this.domFromPos(e,e?-1:1),c=n==e?o:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),f=r.domSelectionRange(),p=!1;if((Yi||jr)&&e==n){let{node:y,offset:v}=o;if(y.nodeType==3){if(p=!!(v&&y.nodeValue[v-1]==`
`),p&&v==y.nodeValue.length)for(let C=y,E;C;C=C.parentNode){if(E=C.nextSibling){E.nodeName=="BR"&&(o=c={node:E.parentNode,offset:Sr(E)+1});break}let S=C.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let C=y.childNodes[v-1];p=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(Yi&&f.focusNode&&f.focusNode!=c.node&&f.focusNode.nodeType==1){let y=f.focusNode.childNodes[f.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||p&&jr)&&Fl(o.node,o.offset,f.anchorNode,f.anchorOffset)&&Fl(c.node,c.offset,f.focusNode,f.focusOffset))return;let m=!1;if((d.extend||e==n)&&!(p&&Yi)){d.collapse(o.node,o.offset);try{e!=n&&d.extend(c.node,c.offset),m=!0}catch{}}if(!m){if(e>n){let v=o;o=c,c=v}let y=document.createRange();y.setEnd(c.node,c.offset),y.setStart(o.node,o.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let a=this.children[i],s=r+a.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let o=r+a.border,c=s-a.border;if(e>=o&&n<=c){this.dirty=e==r||n==s?yl:E_,e==o&&n==c&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Pa:a.markDirty(e-o,n-o);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?yl:Pa}r=s}this.dirty=yl}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?yl:E_;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class nO extends qf{constructor(e,n,r,i){let a,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!n.type.spec.raw){if(s.nodeType!=1){let o=document.createElement("span");o.appendChild(s),s=o}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,a=this}matchesWidget(e){return this.dirty==Zi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class dH extends qf{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class zl extends qf{constructor(e,n,r,i,a){super(e,[],r,i),this.mark=n,this.spec=a}static create(e,n,r,i){let a=i.nodeViews[n.type.name],s=a&&a(n,i,r);return(!s||!s.dom)&&(s=Gl.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new zl(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Pa||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Pa&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Zi){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Zi}}slice(e,n,r){let i=zl.create(this.parent,this.mark,!0,r),a=this.children,s=this.size;n<s&&(a=Kv(a,n,s,r)),e>0&&(a=Kv(a,0,e,r));for(let o=0;o<a.length;o++)a[o].parent=i;return i.children=a,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class So extends qf{constructor(e,n,r,i,a,s,o,c,d){super(e,[],a,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(e,n,r,i,a,s){let o=a.nodeViews[n.type.name],c,d=o&&o(n,a,()=>{if(!c)return s;if(c.parent)return c.parent.posBeforeChild(c)},r,i),f=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!f)f=document.createTextNode(n.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:p}=Gl.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),n.type.spec.draggable&&(f.draggable=!0));let m=f;return f=sO(f,r,n),d?c=new fH(e,n,r,i,f,p||null,m,d,a,s+1):n.isText?new am(e,n,r,i,f,m,a):new So(e,n,r,i,f,p||null,m,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>we.empty)}return e}matchesNode(e,n,r){return this.dirty==Zi&&e.eq(this.node)&&P0(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,a=e.composing?this.localCompositionInfo(e,n):null,s=a&&a.pos>-1?a:null,o=a&&a.pos<0,c=new pH(this,s&&s.node,e);xH(this.node,this.innerDeco,(d,f,p)=>{d.spec.marks?c.syncToMarks(d.spec.marks,r,e,f):d.type.side>=0&&!p&&c.syncToMarks(f==this.node.childCount?Zt.none:this.node.child(f).marks,r,e,f),c.placeWidget(d,e,i)},(d,f,p,m)=>{c.syncToMarks(d.marks,r,e,m);let y;c.findNodeMatch(d,f,p,m)||o&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(y=c.findIndexWithChild(a.node))>-1&&c.updateNodeAt(d,f,p,y,e)||c.updateNextNode(d,f,p,e,m,i)||c.addNode(d,f,p,e,i),i+=d.nodeSize}),c.syncToMarks([],r,e,0),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==yl)&&(s&&this.protectLocalComposition(e,s),iO(this.contentDOM,this.children,e),cu&&yH(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Xe)||r<n||i>n+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,o=vH(this.node.content,s,r-n,i-n);return o<0?null:{node:a,pos:o,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new dH(this,a,n,i);e.input.compositionNodes.push(s),this.children=Kv(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Pa||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Zi}updateOuterDeco(e){if(P0(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=aO(this.dom,this.nodeDOM,qv(this.outerDeco,this.node,n),qv(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function S_(t,e,n,r,i){sO(r,e,t);let a=new So(void 0,t,e,n,r,r,r,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class am extends So{constructor(e,n,r,i,a,s,o){super(e,n,r,i,a,null,s,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Pa||this.dirty!=Zi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Zi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Zi,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),a=document.createTextNode(i.text);return new am(this.parent,i,this.outerDeco,this.innerDeco,a,a,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Pa)}get domAtom(){return!1}isText(e){return this.node.text==e}}class rO extends qf{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Zi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class fH extends So{constructor(e,n,r,i,a,s,o,c,d,f){super(e,n,r,i,a,s,o,d,f),this.spec=c}update(e,n,r,i){if(this.dirty==Pa)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,n,r);return a&&this.updateInner(e,n,r,i),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function iO(t,e,n){let r=t.firstChild,i=!1;for(let a=0;a<e.length;a++){let s=e[a],o=s.dom;if(o.parentNode==t){for(;o!=r;)r=A_(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(o,r);if(s instanceof zl){let c=r?r.previousSibling:t.lastChild;iO(s.contentDOM,s.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=A_(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Yd=function(t){t&&(this.nodeName=t)};Yd.prototype=Object.create(null);const vl=[new Yd];function qv(t,e,n){if(t.length==0)return vl;let r=n?vl[0]:new Yd,i=[r];for(let a=0;a<t.length;a++){let s=t[a].type.attrs;if(s){s.nodeName&&i.push(r=new Yd(s.nodeName));for(let o in s){let c=s[o];c!=null&&(n&&i.length==1&&i.push(r=new Yd(e.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+c:o=="style"?r.style=(r.style?r.style+";":"")+c:o!="nodeName"&&(r[o]=c))}}}return i}function aO(t,e,n,r){if(n==vl&&r==vl)return e;let i=e;for(let a=0;a<r.length;a++){let s=r[a],o=n[a];if(a){let c;o&&o.nodeName==s.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(i),o=vl[0]),i=c}hH(i,o||vl[0],s)}return i}function hH(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)i.indexOf(r[a])==-1&&t.classList.remove(r[a]);for(let a=0;a<i.length;a++)r.indexOf(i[a])==-1&&t.classList.add(i[a]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function sO(t,e,n){return aO(t,t,vl,qv(e,n,t.nodeType!=1))}function P0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function A_(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class pH{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=mH(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let a=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;a<o&&(a==s-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<s;)this.destroyRest(),this.top.dirty=Zi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let c=-1,d=this.top.children.length;i<this.preMatch.index&&(d=Math.min(this.index+3,d));for(let f=this.index;f<d;f++){let p=this.top.children[f];if(p.matchesMark(e[s])&&!this.isLocked(p.dom)){c=f;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let f=zl.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let a=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))a=this.top.children.indexOf(s,this.index);else for(let o=this.index,c=Math.min(this.top.children.length,o+5);o<c;o++){let d=this.top.children[o];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){a=o;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,n,r,i,a){let s=this.top.children[i];return s.dirty==Pa&&s.dom==s.contentDOM&&(s.dirty=yl),s.update(e,n,r,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,a,s){for(let o=this.index;o<this.top.children.length;o++){let c=this.top.children[o];if(c instanceof So){let d=this.preMatch.matched.get(c);if(d!=null&&d!=a)return!1;let f=c.dom,p,m=this.isLocked(f)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Pa&&P0(n,c.outerDeco));if(!m&&c.update(e,n,r,i))return this.destroyBetween(this.index,o),c.dom!=f&&(this.changed=!0),this.index++,!0;if(!m&&(p=this.recreateWrapper(c,e,n,r,i,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=yl,p.updateChildren(i,s+1),p.dirty=Zi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,a,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!P0(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let o=So.create(this.top,n,r,i,a,s);if(o.contentDOM){o.children=e.children,e.children=[];for(let c of o.children)c.parent=o}return e.destroy(),o}addNode(e,n,r,i,a){let s=So.create(this.top,e,n,r,i,a);s.contentDOM&&s.updateChildren(i,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new nO(this.top,e,n,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof zl;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof am)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((jr||_r)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new rO(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function mH(t,e){let n=e,r=n.children.length,i=t.childCount,a=new Map,s=[];e:for(;i>0;){let o;for(;;)if(r){let d=n.children[r-1];if(d instanceof zl)n=d,r=d.children.length;else{o=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=o.node;if(c){if(c!=t.child(i-1))break;--i,a.set(o,i),s.push(o)}}return{index:i,matched:a,matches:s.reverse()}}function gH(t,e){return t.type.side-e.type.side}function xH(t,e,n,r){let i=e.locals(t),a=0;if(i.length==0){for(let d=0;d<t.childCount;d++){let f=t.child(d);r(f,i,e.forChild(a,f),d),a+=f.nodeSize}return}let s=0,o=[],c=null;for(let d=0;;){let f,p;for(;s<i.length&&i[s].to==a;){let E=i[s++];E.widget&&(f?(p||(p=[f])).push(E):f=E)}if(f)if(p){p.sort(gH);for(let E=0;E<p.length;E++)n(p[E],d,!!c)}else n(f,d,!!c);let m,y;if(c)y=-1,m=c,c=null;else if(d<t.childCount)y=d,m=t.child(d++);else break;for(let E=0;E<o.length;E++)o[E].to<=a&&o.splice(E--,1);for(;s<i.length&&i[s].from<=a&&i[s].to>a;)o.push(i[s++]);let v=a+m.nodeSize;if(m.isText){let E=v;s<i.length&&i[s].from<E&&(E=i[s].from);for(let S=0;S<o.length;S++)o[S].to<E&&(E=o[S].to);E<v&&(c=m.cut(E-a),m=m.cut(0,E-a),v=E,y=-1)}else for(;s<i.length&&i[s].to<v;)s++;let C=m.isInline&&!m.isLeaf?o.filter(E=>!E.inline):o.slice();r(m,C,e.forChild(a,m),y),a=v}}function yH(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function vH(t,e,n,r){for(let i=0,a=0;i<t.childCount&&a<=r;){let s=t.child(i++),o=a;if(a+=s.nodeSize,!s.isText)continue;let c=s.text;for(;i<t.childCount;){let d=t.child(i++);if(a+=d.nodeSize,!d.isText)break;c+=d.text}if(a>=n){if(a>=r&&c.slice(r-e.length-o,r-o)==e)return r-e.length;let d=o<r?c.lastIndexOf(e,r-o-1):-1;if(d>=0&&d+e.length+o>=n)return o+d;if(n==r&&c.length>=r+e.length-o&&c.slice(r-o,r-o+e.length)==e)return r}}return-1}function Kv(t,e,n,r,i){let a=[];for(let s=0,o=0;s<t.length;s++){let c=t[s],d=o,f=o+=c.size;d>=n||f<=e?a.push(c):(d<e&&a.push(c.slice(0,e-d,r)),i&&(a.push(i),i=void 0),f>n&&a.push(c.slice(n-d,c.size,r)))}return a}function Hb(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),a=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let o=r.resolve(s),c,d;if(im(n)){for(c=s;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&qe.isSelectable(p)&&i.parent&&!(p.isInline&&WU(n.focusNode,n.focusOffset,i.dom))){let m=i.posBefore;d=new qe(s==m?o:r.resolve(m))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=s,m=s;for(let y=0;y<n.rangeCount;y++){let v=n.getRangeAt(y);p=Math.min(p,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),m=Math.max(m,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(p<0)return null;[c,s]=m==t.state.selection.anchor?[m,p]:[p,m],o=r.resolve(s)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let f=r.resolve(c);if(!d){let p=e=="pointer"||t.state.selection.head<o.pos&&!a?1:-1;d=Vb(t,f,o,p)}return d}function oO(t){return t.editable?t.hasFocus():cO(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function bs(t,e=!1){let n=t.state.selection;if(lO(t,n),!!oO(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&_r){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Fl(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)wH(t);else{let{anchor:r,head:i}=n,a,s;__&&!(n instanceof Xe)&&(n.$from.parent.inlineContent||(a=T_(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=T_(t,n.to))),t.docView.setSelection(r,i,t,e),__&&(a&&N_(a),s&&N_(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&bH(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const __=jr||_r&&K6<63;function T_(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(jr&&i&&i.contentEditable=="false")return iy(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return iy(i);if(a)return iy(a)}}function iy(t){return t.contentEditable="true",jr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function N_(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function bH(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!oO(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function wH(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Sr(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&fi&&Eo<=11&&(n.disabled=!0,n.disabled=!1)}function lO(t,e){if(e instanceof qe){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(k_(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else k_(t)}function k_(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Vb(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Xe.between(e,n,r)}function O_(t){return t.editable&&!t.hasFocus()?!1:cO(t)}function cO(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function CH(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Fl(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Xv(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),a=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return a&&Qe.findFrom(a,e)}function so(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function M_(t,e,n){let r=t.state.selection;if(r instanceof Xe)if(n.indexOf("s")>-1){let{$head:i}=r,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+a.nodeSize*(e<0?-1:1));return so(t,new Xe(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Xv(t.state,e);return i&&i instanceof qe?so(t,i):!1}else if(!(Wi&&n.indexOf("m")>-1)){let i=r.$head,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!a||a.isText)return!1;let o=e<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(s=t.docView.descAt(o))&&!s.contentDOM?qe.isSelectable(a)?so(t,new qe(e<0?t.state.doc.resolve(i.pos-a.nodeSize):i)):Wf?so(t,new Xe(t.state.doc.resolve(e<0?o:o+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof qe&&r.node.isInline)return so(t,new Xe(e>0?r.$to:r.$from));{let i=Xv(t.state,e);return i?so(t,i):!1}}}function B0(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Zd(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function kc(t,e){return e<0?EH(t):SH(t)}function EH(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,a,s=!1;for(Yi&&n.nodeType==1&&r<B0(n)&&Zd(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(Zd(o,-1))i=n,a=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(uO(n))break;{let o=n.previousSibling;for(;o&&Zd(o,-1);)i=n.parentNode,a=Sr(o),o=o.previousSibling;if(o)n=o,r=B0(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Yv(t,n,r):i&&Yv(t,i,a)}function SH(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=B0(n),a,s;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if(Zd(o,1))a=n,s=++r;else break}else{if(uO(n))break;{let o=n.nextSibling;for(;o&&Zd(o,1);)a=o.parentNode,s=Sr(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=B0(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}a&&Yv(t,a,s)}function uO(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function AH(t,e){for(;t&&e==t.childNodes.length&&!Gf(t);)e=Sr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function _H(t,e){for(;t&&!e&&!Gf(t);)e=Sr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Yv(t,e,n){if(e.nodeType!=3){let a,s;(s=AH(e,n))?(e=s,n=0):(a=_H(e,n))&&(e=a,n=a.nodeValue.length)}let r=t.domSelection();if(!r)return;if(im(r)){let a=document.createRange();a.setEnd(e,n),a.setStart(e,n),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&bs(t)},50)}function D_(t,e){let n=t.state.doc.resolve(e);if(!(_r||X6)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let a=t.coordsAtPos(e-1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(e<n.end()){let a=t.coordsAtPos(e+1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function R_(t,e,n){let r=t.state.selection;if(r instanceof Xe&&!r.empty||n.indexOf("s")>-1||Wi&&n.indexOf("m")>-1)return!1;let{$from:i,$to:a}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Xv(t.state,e);if(s&&s instanceof qe)return so(t,s)}if(!i.parent.inlineContent){let s=e<0?i:a,o=r instanceof Ni?Qe.near(s,e):Qe.findFrom(s,e);return o?so(t,o):!1}return!1}function I_(t,e){if(!(t.state.selection instanceof Xe))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){let s=t.state.tr;return e<0?s.delete(n.pos-a.nodeSize,n.pos):s.delete(n.pos,n.pos+a.nodeSize),t.dispatch(s),!0}return!1}function L_(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function TH(t){if(!jr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;L_(t,r,"true"),setTimeout(()=>L_(t,r,"false"),20)}return!1}function NH(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function kH(t,e){let n=e.keyCode,r=NH(e);if(n==8||Wi&&n==72&&r=="c")return I_(t,-1)||kc(t,-1);if(n==46&&!e.shiftKey||Wi&&n==68&&r=="c")return I_(t,1)||kc(t,1);if(n==13||n==27)return!0;if(n==37||Wi&&n==66&&r=="c"){let i=n==37?D_(t,t.state.selection.from)=="ltr"?-1:1:-1;return M_(t,i,r)||kc(t,i)}else if(n==39||Wi&&n==70&&r=="c"){let i=n==39?D_(t,t.state.selection.from)=="ltr"?1:-1:1;return M_(t,i,r)||kc(t,i)}else{if(n==38||Wi&&n==80&&r=="c")return R_(t,-1,r)||kc(t,-1);if(n==40||Wi&&n==78&&r=="c")return TH(t)||R_(t,1,r)||kc(t,1);if(r==(Wi?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function $b(t,e){t.someProp("transformCopied",y=>{e=y(e,t)});let n=[],{content:r,openStart:i,openEnd:a}=e;for(;i>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,a--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let s=t.someProp("clipboardSerializer")||Gl.fromSchema(t.state.schema),o=gO(),c=o.createElement("div");c.appendChild(s.serializeFragment(r,{document:o}));let d=c.firstChild,f,p=0;for(;d&&d.nodeType==1&&(f=mO[d.nodeName.toLowerCase()]);){for(let y=f.length-1;y>=0;y--){let v=o.createElement(f[y]);for(;c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),p++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${a}${p?` -${p}`:""} ${JSON.stringify(n)}`);let m=t.someProp("clipboardTextSerializer",y=>y(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:m,slice:e}}function dO(t,e,n,r,i){let a=i.parent.type.spec.code,s,o;if(!n&&!e)return null;let c=!!e&&(r||a||!n);if(c){if(t.someProp("transformPastedText",m=>{e=m(e,a||r,t)}),a)return o=new Re(we.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",m=>{o=m(o,t,!0)}),o;let p=t.someProp("clipboardTextParser",m=>m(e,i,r,t));if(p)o=p;else{let m=i.marks(),{schema:y}=t.state,v=Gl.fromSchema(y);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(C=>{let E=s.appendChild(document.createElement("p"));C&&E.appendChild(v.serializeNode(y.text(C,m)))})}}else t.someProp("transformPastedHTML",p=>{n=p(n,t)}),s=RH(n),Wf&&IH(s);let d=s&&s.querySelector("[data-pm-slice]"),f=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let p=+f[3];p>0;p--){let m=s.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;s=m}if(o||(o=(t.someProp("clipboardParser")||t.someProp("domParser")||Kd.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(c||f),context:i,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!OH.test(m.parentNode.nodeName)?{ignore:!0}:null}})),f)o=LH(j_(o,+f[1],+f[2]),f[4]);else if(o=Re.maxOpen(MH(o.content,i),!0),o.openStart||o.openEnd){let p=0,m=0;for(let y=o.content.firstChild;p<o.openStart&&!y.type.spec.isolating;p++,y=y.firstChild);for(let y=o.content.lastChild;m<o.openEnd&&!y.type.spec.isolating;m++,y=y.lastChild);o=j_(o,p,m)}return t.someProp("transformPasted",p=>{o=p(o,t,c)}),o}const OH=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function MH(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),a,s=[];if(t.forEach(o=>{if(!s)return;let c=i.findWrapping(o.type),d;if(!c)return s=null;if(d=s.length&&a.length&&hO(c,a,o,s[s.length-1],0))s[s.length-1]=d;else{s.length&&(s[s.length-1]=pO(s[s.length-1],a.length));let f=fO(o,c);s.push(f),i=i.matchType(f.type),a=c}}),s)return we.from(s)}return t}function fO(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,we.from(t));return t}function hO(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let a=hO(t,e,n,r.lastChild,i+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(we.from(fO(n,t,i+1))))}}function pO(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,pO(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(we.empty,!0);return t.copy(n.append(r))}function Zv(t,e,n,r,i,a){let s=e<0?t.firstChild:t.lastChild,o=s.content;return t.childCount>1&&(a=0),i<r-1&&(o=Zv(o,e,n,r,i+1,a)),i>=n&&(o=e<0?s.contentMatchAt(0).fillBefore(o,a<=i).append(o):o.append(s.contentMatchAt(s.childCount).fillBefore(we.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(o))}function j_(t,e,n){return e<t.openStart&&(t=new Re(Zv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Re(Zv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const mO={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let P_=null;function gO(){return P_||(P_=document.implementation.createHTMLDocument("title"))}let ay=null;function DH(t){let e=window.trustedTypes;return e?(ay||(ay=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),ay.createHTML(t)):t}function RH(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=gO().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&mO[r[1].toLowerCase()])&&(t=i.map(a=>"<"+a+">").join("")+t+i.map(a=>"</"+a+">").reverse().join("")),n.innerHTML=DH(t),i)for(let a=0;a<i.length;a++)n=n.querySelector(i[a])||n;return n}function IH(t){let e=t.querySelectorAll(_r?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function LH(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:a,openEnd:s}=t;for(let o=r.length-2;o>=0;o-=2){let c=n.nodes[r[o]];if(!c||c.hasRequiredAttrs())break;i=we.from(c.create(r[o+1],i)),a++,s++}return new Re(i,a,s)}const Kr={},Xr={},jH={touchstart:!0,touchmove:!0};class PH{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function BH(t){for(let e in Kr){let n=Kr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{zH(t,r)&&!Gb(t,r)&&(t.editable||!(r.type in Xr))&&n(t,r)},jH[e]?{passive:!0}:void 0)}jr&&t.dom.addEventListener("input",()=>null),Jv(t)}function bo(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function FH(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Jv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Gb(t,r))})}function Gb(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function zH(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function UH(t,e){!Gb(t,e)&&Kr[e.type]&&(t.editable||!(e.type in Xr))&&Kr[e.type](t,e)}Xr.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!yO(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(gs&&_r&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),cu&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,gl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||kH(t,n)?n.preventDefault():bo(t,"key")};Xr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Xr.keypress=(t,e)=>{let n=e;if(yO(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Wi&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Xe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),a=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,a))&&t.dispatch(a()),n.preventDefault()}};function sm(t){return{left:t.clientX,top:t.clientY}}function HH(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Wb(t,e,n,r,i){if(r==-1)return!1;let a=t.state.doc.resolve(r);for(let s=a.depth+1;s>0;s--)if(t.someProp(e,o=>s>a.depth?o(t,n,a.nodeAfter,a.before(s),i,!0):o(t,n,a.node(s),a.before(s),i,!1)))return!0;return!1}function Kc(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function VH(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&qe.isSelectable(r)?(Kc(t,new qe(n)),!0):!1}function $H(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof qe&&(r=n.node);let a=t.state.doc.resolve(e);for(let s=a.depth+1;s>0;s--){let o=s>a.depth?a.nodeAfter:a.node(s);if(qe.isSelectable(o)){r&&n.$from.depth>0&&s>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?i=a.before(n.$from.depth):i=a.before(s);break}}return i!=null?(Kc(t,qe.create(t.state.doc,i)),!0):!1}function GH(t,e,n,r,i){return Wb(t,"handleClickOn",e,n,r)||t.someProp("handleClick",a=>a(t,e,r))||(i?$H(t,n):VH(t,n))}function WH(t,e,n,r){return Wb(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function qH(t,e,n,r){return Wb(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||KH(t,n,r)}function KH(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Kc(t,Xe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let a=i.depth+1;a>0;a--){let s=a>i.depth?i.nodeAfter:i.node(a),o=i.before(a);if(s.inlineContent)Kc(t,Xe.create(r,o+1,o+1+s.content.size));else if(qe.isSelectable(s))Kc(t,qe.create(r,o));else continue;return!0}}function qb(t){return F0(t)}const xO=Wi?"metaKey":"ctrlKey";Kr.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=qb(t),i=Date.now(),a="singleClick";i-t.input.lastClick.time<500&&HH(n,t.input.lastClick)&&!n[xO]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?a="doubleClick":t.input.lastClick.type=="doubleClick"&&(a="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:a,button:n.button};let s=t.posAtCoords(sm(n));s&&(a=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new XH(t,s,n,!!r)):(a=="doubleClick"?WH:qH)(t,s.pos,s.inside,n)?n.preventDefault():bo(t,"pointer"))};class XH{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[xO],this.allowDefault=r.shiftKey;let a,s;if(n.inside>-1)a=e.state.doc.nodeAt(n.inside),s=n.inside;else{let f=e.state.doc.resolve(n.pos);a=f.parent,s=f.depth?f.before():0}const o=i?null:r.target,c=o?e.docView.nearestDesc(o,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:d}=e.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||d instanceof qe&&d.from<=s&&d.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Yi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),bo(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>bs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(sm(e))),this.updateAllowDefault(e),this.allowDefault||!n?bo(this.view,"pointer"):GH(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||jr&&this.mightDrag&&!this.mightDrag.node.isAtom||_r&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Kc(this.view,Qe.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):bo(this.view,"pointer")}move(e){this.updateAllowDefault(e),bo(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Kr.touchstart=t=>{t.input.lastTouch=Date.now(),qb(t),bo(t,"pointer")};Kr.touchmove=t=>{t.input.lastTouch=Date.now(),bo(t,"pointer")};Kr.contextmenu=t=>qb(t);function yO(t,e){return t.composing?!0:jr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const YH=gs?5e3:-1;Xr.compositionstart=Xr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Xe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||_r&&X6&&ZH(t)))t.markCursor=t.state.storedMarks||n.marks(),F0(t,!0),t.markCursor=null;else if(F0(t,!e.selection.empty),Yi&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,a=r.focusOffset;i&&i.nodeType==1&&a!=0;){let s=a<0?i.lastChild:i.childNodes[a-1];if(!s)break;if(s.nodeType==3){let o=t.domSelection();o&&o.collapse(s,s.nodeValue.length);break}else i=s,a=-1}}t.input.composing=!0}vO(t,YH)};function ZH(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Xr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,vO(t,20))};function vO(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>F0(t),e))}function bO(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=QH());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function JH(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=$U(e.focusNode,e.focusOffset),r=GU(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,a=t.domObserver.lastChangedTextNode;if(n==a||r==a)return a;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function QH(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function F0(t,e=!1){if(!(gs&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),bO(t),e||t.docView&&t.docView.dirty){let n=Hb(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function eV(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const wf=fi&&Eo<15||cu&&XU<604;Kr.copy=Xr.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let a=wf?null:n.clipboardData,s=r.content(),{dom:o,text:c}=$b(t,s);a?(n.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",c)):eV(t,o),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function tV(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function nV(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Cf(t,r.value,null,i,e):Cf(t,r.textContent,r.innerHTML,i,e)},50)}function Cf(t,e,n,r,i){let a=dO(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,a||Re.empty)))return!0;if(!a)return!1;let s=tV(a),o=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(a);return t.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wO(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Xr.paste=(t,e)=>{let n=e;if(t.composing&&!gs)return;let r=wf?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Cf(t,wO(r),r.getData("text/html"),i,n)?n.preventDefault():nV(t,n)};class CO{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const rV=Wi?"altKey":"ctrlKey";function EO(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[rV]}Kr.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,a=i.empty?null:t.posAtCoords(sm(n)),s;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof qe?i.to-1:i.to))){if(r&&r.mightDrag)s=qe.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=t.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(s=qe.create(t.state.doc,p.posBefore))}}let o=(s||t.state.selection).content(),{dom:c,text:d,slice:f}=$b(t,o);(!n.dataTransfer.files.length||!_r||K6>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(wf?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",wf||n.dataTransfer.setData("text/plain",d),t.dragging=new CO(f,EO(t,n),s)};Kr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Xr.dragover=Xr.dragenter=(t,e)=>e.preventDefault();Xr.drop=(t,e)=>{try{iV(t,e,t.dragging)}finally{t.dragging=null}};function iV(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(sm(e));if(!r)return;let i=t.state.doc.resolve(r.pos),a=n&&n.slice;a?t.someProp("transformPasted",y=>{a=y(a,t,!1)}):a=dO(t,wO(e.dataTransfer),wf?null:e.dataTransfer.getData("text/html"),!1,i);let s=!!(n&&EO(t,e));if(t.someProp("handleDrop",y=>y(t,e,a||Re.empty,s))){e.preventDefault();return}if(!a)return;e.preventDefault();let o=a?T6(t.state.doc,i.pos,a):i.pos;o==null&&(o=i.pos);let c=t.state.tr;if(s){let{node:y}=n;y?y.replace(c):c.deleteSelection()}let d=c.mapping.map(o),f=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,p=c.doc;if(f?c.replaceRangeWith(d,d,a.content.firstChild):c.replaceRange(d,d,a),c.doc.eq(p))return;let m=c.doc.resolve(d);if(f&&qe.isSelectable(a.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new qe(m));else{let y=c.mapping.map(o);c.mapping.maps[c.mapping.maps.length-1].forEach((v,C,E,S)=>y=S),c.setSelection(Vb(t,m,c.doc.resolve(y)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}Kr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&bs(t)},20))};Kr.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Kr.beforeinput=(t,e)=>{if(_r&&gs&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",a=>a(t,gl(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Xr)Kr[t]=Xr[t];function Ef(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class z0{constructor(e,n){this.toDOM=e,this.spec=n||Ol,this.side=this.spec.side||0}map(e,n,r,i){let{pos:a,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new ur(a-r,a-r,this)}valid(){return!0}eq(e){return this==e||e instanceof z0&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ef(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ao{constructor(e,n){this.attrs=e,this.spec=n||Ol}map(e,n,r,i){let a=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return a>=s?null:new ur(a,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ao&&Ef(this.attrs,e.attrs)&&Ef(this.spec,e.spec)}static is(e){return e.type instanceof Ao}destroy(){}}class Kb{constructor(e,n){this.attrs=e,this.spec=n||Ol}map(e,n,r,i){let a=e.mapResult(n.from+i,1);if(a.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=a.pos?null:new ur(a.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),a;return i==n.from&&!(a=e.child(r)).isText&&i+a.nodeSize==n.to}eq(e){return this==e||e instanceof Kb&&Ef(this.attrs,e.attrs)&&Ef(this.spec,e.spec)}destroy(){}}class ur{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ur(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ur(e,e,new z0(n,r))}static inline(e,n,r,i){return new ur(e,n,new Ao(r,i))}static node(e,n,r,i){return new ur(e,n,new Kb(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ao}get widget(){return this.type instanceof z0}}const Dc=[],Ol={};class Jt{constructor(e,n){this.local=e.length?e:Dc,this.children=n.length?n:Dc}static create(e,n){return n.length?U0(n,e,0,Ol):Ir}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,a){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=n&&o.to>=e&&(!a||a(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let o=this.children[s]+1;this.children[s+2].findInner(e-o,n-o,r,i+o,a)}}map(e,n,r){return this==Ir||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ol)}mapInner(e,n,r,i,a){let s;for(let o=0;o<this.local.length;o++){let c=this.local[o].map(e,r,i);c&&c.type.valid(n,c)?(s||(s=[])).push(c):a.onRemove&&a.onRemove(this.local[o].spec)}return this.children.length?aV(this.children,s||[],e,n,r,i,a):s?new Jt(s.sort(Ml),Dc):Ir}add(e,n){return n.length?this==Ir?Jt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,a=0;e.forEach((o,c)=>{let d=c+r,f;if(f=AO(n,o,d)){for(i||(i=this.children.slice());a<i.length&&i[a]<c;)a+=3;i[a]==c?i[a+2]=i[a+2].addInner(o,f,d+1):i.splice(a,0,c,c+o.nodeSize,U0(f,o,d+1,Ol)),a+=3}});let s=SO(a?_O(n):n,-r);for(let o=0;o<s.length;o++)s[o].type.valid(e,s[o])||s.splice(o--,1);return new Jt(s.length?this.local.concat(s).sort(Ml):this.local,i||this.children)}remove(e){return e.length==0||this==Ir?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let a=0;a<r.length;a+=3){let s,o=r[a]+n,c=r[a+1]+n;for(let f=0,p;f<e.length;f++)(p=e[f])&&p.from>o&&p.to<c&&(e[f]=null,(s||(s=[])).push(p));if(!s)continue;r==this.children&&(r=this.children.slice());let d=r[a+2].removeInner(s,o+1);d!=Ir?r[a+2]=d:(r.splice(a,3),a-=3)}if(i.length){for(let a=0,s;a<e.length;a++)if(s=e[a])for(let o=0;o<i.length;o++)i[o].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Jt(i,r):Ir}forChild(e,n){if(this==Ir)return this;if(n.isLeaf)return Jt.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(r=this.children[o+2]);break}let a=e+1,s=a+n.content.size;for(let o=0;o<this.local.length;o++){let c=this.local[o];if(c.from<s&&c.to>a&&c.type instanceof Ao){let d=Math.max(a,c.from)-a,f=Math.min(s,c.to)-a;d<f&&(i||(i=[])).push(c.copy(d,f))}}if(i){let o=new Jt(i.sort(Ml),Dc);return r?new uo([o,r]):o}return r||Ir}eq(e){if(this==e)return!0;if(!(e instanceof Jt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Xb(this.localsInner(e))}localsInner(e){if(this==Ir)return Dc;if(e.inlineContent||!this.local.some(Ao.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ao||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Jt.empty=new Jt([],[]);Jt.removeOverlap=Xb;const Ir=Jt.empty;class uo{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ol));return uo.from(r)}forChild(e,n){if(n.isLeaf)return Jt.empty;let r=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(e,n);a!=Ir&&(a instanceof uo?r=r.concat(a.members):r.push(a))}return uo.from(r)}eq(e){if(!(e instanceof uo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(e);if(a.length)if(!n)n=a;else{r&&(n=n.slice(),r=!1);for(let s=0;s<a.length;s++)n.push(a[s])}}return n?Xb(r?n:n.sort(Ml)):Dc}static from(e){switch(e.length){case 0:return Ir;case 1:return e[0];default:return new uo(e.every(n=>n instanceof Jt)?e:e.reduce((n,r)=>n.concat(r instanceof Jt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function aV(t,e,n,r,i,a,s){let o=t.slice();for(let d=0,f=a;d<n.maps.length;d++){let p=0;n.maps[d].forEach((m,y,v,C)=>{let E=C-v-(y-m);for(let S=0;S<o.length;S+=3){let _=o[S+1];if(_<0||m>_+f-p)continue;let N=o[S]+f-p;y>=N?o[S+1]=m<=N?-2:-1:m>=f&&E&&(o[S]+=E,o[S+1]+=E)}p+=E}),f=n.maps[d].map(f,-1)}let c=!1;for(let d=0;d<o.length;d+=3)if(o[d+1]<0){if(o[d+1]==-2){c=!0,o[d+1]=-1;continue}let f=n.map(t[d]+a),p=f-i;if(p<0||p>=r.content.size){c=!0;continue}let m=n.map(t[d+1]+a,-1),y=m-i,{index:v,offset:C}=r.content.findIndex(p),E=r.maybeChild(v);if(E&&C==p&&C+E.nodeSize==y){let S=o[d+2].mapInner(n,E,f+1,t[d]+a+1,s);S!=Ir?(o[d]=p,o[d+1]=y,o[d+2]=S):(o[d+1]=-2,c=!0)}else c=!0}if(c){let d=sV(o,t,e,n,i,a,s),f=U0(d,r,0,s);e=f.local;for(let p=0;p<o.length;p+=3)o[p+1]<0&&(o.splice(p,3),p-=3);for(let p=0,m=0;p<f.children.length;p+=3){let y=f.children[p];for(;m<o.length&&o[m]<y;)m+=3;o.splice(m,0,f.children[p],f.children[p+1],f.children[p+2])}}return new Jt(e.sort(Ml),o)}function SO(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new ur(i.from+e,i.to+e,i.type))}return n}function sV(t,e,n,r,i,a,s){function o(c,d){for(let f=0;f<c.local.length;f++){let p=c.local[f].map(r,i,d);p?n.push(p):s.onRemove&&s.onRemove(c.local[f].spec)}for(let f=0;f<c.children.length;f+=3)o(c.children[f+2],c.children[f]+d+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&o(t[c+2],e[c]+a+1);return n}function AO(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let a=0,s;a<t.length;a++)(s=t[a])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[a]=null);return i}function _O(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function U0(t,e,n,r){let i=[],a=!1;e.forEach((o,c)=>{let d=AO(t,o,c+n);if(d){a=!0;let f=U0(d,o,n+c+1,r);f!=Ir&&i.push(c,c+o.nodeSize,f)}});let s=SO(a?_O(t):t,-n).sort(Ml);for(let o=0;o<s.length;o++)s[o].type.valid(e,s[o])||(r.onRemove&&r.onRemove(s[o].spec),s.splice(o--,1));return s.length||i.length?new Jt(s,i):Ir}function Ml(t,e){return t.from-e.from||t.to-e.to}function Xb(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let a=e[i];if(a.from==r.from){a.to!=r.to&&(e==t&&(e=t.slice()),e[i]=a.copy(a.from,r.to),B_(e,i+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,a.from),B_(e,i,r.copy(a.from,r.to)));break}}}return e}function B_(t,e,n){for(;e<t.length&&Ml(n,t[e])>0;)e++;t.splice(e,0,n)}function sy(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ir&&e.push(r)}),t.cursorWrapper&&e.push(Jt.create(t.state.doc,[t.cursorWrapper.deco])),uo.from(e)}const oV={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},lV=fi&&Eo<=11;class cV{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class uV{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new cV,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);fi&&Eo<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():jr&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),lV&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,oV)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(O_(this.view)){if(this.suppressingSelectionUpdates)return bs(this.view);if(fi&&Eo<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Fl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let a=e.focusNode;a;a=lu(a))n.add(a);for(let a=e.anchorNode;a;a=lu(a))if(n.has(a)){r=a;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&O_(e)&&!this.ignoreSelectionChange(r),a=-1,s=-1,o=!1,c=[];if(e.editable)for(let f=0;f<n.length;f++){let p=this.registerMutation(n[f],c);p&&(a=a<0?p.from:Math.min(p.from,a),s=s<0?p.to:Math.max(p.to,s),p.typeOver&&(o=!0))}if(c.some(f=>f.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let f of c)if(f.nodeName=="BR"&&f.parentNode){let p=f.nextSibling;p&&p.nodeType==1&&p.contentEditable=="false"&&f.parentNode.removeChild(f)}}else if(Yi&&c.length){let f=c.filter(p=>p.nodeName=="BR");if(f.length==2){let[p,m]=f;p.parentNode&&p.parentNode.parentNode==m.parentNode?m.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let m of f){let y=m.parentNode;y&&y.nodeName=="LI"&&(!p||hV(e,p)!=y)&&m.remove()}}}let d=null;a<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&im(r)&&(d=Hb(e))&&d.eq(Qe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,bs(e),this.currentSelection.set(r),e.scrollToSelection()):(a>-1||i)&&(a>-1&&(e.docView.markDirty(a,s),dV(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,pV(e,c)),this.handleDOMChange(a,s,o,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||bs(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let f=0;f<e.addedNodes.length;f++){let p=e.addedNodes[f];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,a=e.nextSibling;if(fi&&Eo<=11&&e.addedNodes.length)for(let f=0;f<e.addedNodes.length;f++){let{previousSibling:p,nextSibling:m}=e.addedNodes[f];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p),(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(a=m)}let s=i&&i.parentNode==e.target?Sr(i)+1:0,o=r.localPosFromDOM(e.target,s,-1),c=a&&a.parentNode==e.target?Sr(a):e.target.childNodes.length,d=r.localPosFromDOM(e.target,c,1);return{from:o,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let F_=new WeakMap,z_=!1;function dV(t){if(!F_.has(t)&&(F_.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Yi,z_)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),z_=!0}}function U_(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Fl(s.node,s.offset,i,a)&&([n,r,i,a]=[i,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}}function fV(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return U_(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?U_(t,n):null}function hV(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function pV(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let a of e)if(((n=a.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let s=a.nextSibling;for(;s&&s.nodeName!="TD"&&s.nodeName!="TH";)s=s.nextSibling;if(s){let o=s;for(;;){let c=o.firstChild;if(!c||c.nodeType!=1||c.contentEditable=="false"||/^(BR|IMG)$/.test(c.nodeName))break;o=c}o.insertBefore(a,o.firstChild),r==a&&t.domSelection().collapse(a,i)}else a.parentNode.removeChild(a)}}function mV(t,e,n){let{node:r,fromOffset:i,toOffset:a,from:s,to:o}=t.docView.parseRange(e,n),c=t.domSelectionRange(),d,f=c.anchorNode;if(f&&t.dom.contains(f.nodeType==1?f:f.parentNode)&&(d=[{node:f,offset:c.anchorOffset}],im(c)||d.push({node:c.focusNode,offset:c.focusOffset})),_r&&t.input.lastKeyCode===8)for(let E=a;E>i;E--){let S=r.childNodes[E-1],_=S.pmViewDesc;if(S.nodeName=="BR"&&!_){a=E;break}if(!_||_.size)break}let p=t.state.doc,m=t.someProp("domParser")||Kd.fromSchema(t.state.schema),y=p.resolve(s),v=null,C=m.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:a,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:gV,context:y});if(d&&d[0].pos!=null){let E=d[0].pos,S=d[1]&&d[1].pos;S==null&&(S=E),v={anchor:E+s,head:S+s}}return{doc:C,sel:v,from:s,to:o}}function gV(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(jr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||jr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const xV=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function yV(t,e,n,r,i){let a=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let M=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,L=Hb(t,M);if(L&&!t.state.selection.eq(L)){if(_r&&gs&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",le=>le(t,gl(13,"Enter"))))return;let B=t.state.tr.setSelection(L);M=="pointer"?B.setMeta("pointer",!0):M=="key"&&B.scrollIntoView(),a&&B.setMeta("composition",a),t.dispatch(B)}return}let s=t.state.doc.resolve(e),o=s.sharedDepth(n);e=s.before(o+1),n=t.state.doc.resolve(n).after(o+1);let c=t.state.selection,d=mV(t,e,n),f=t.state.doc,p=f.slice(d.from,d.to),m,y;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(m=t.state.selection.to,y="end"):(m=t.state.selection.from,y="start"),t.input.lastKeyCode=null;let v=wV(p.content,d.doc.content,d.from,m,y);if(v&&t.input.domChangeCount++,(cu&&t.input.lastIOSEnter>Date.now()-225||gs)&&i.some(M=>M.nodeType==1&&!xV.test(M.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",M=>M(t,gl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&c instanceof Xe&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))v={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let M=H_(t,t.state.doc,d.sel);if(M&&!M.eq(t.state.selection)){let L=t.state.tr.setSelection(M);a&&L.setMeta("composition",a),t.dispatch(L)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof Xe&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),fi&&Eo<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)==" "&&(v.start--,v.endA--,v.endB--);let C=d.doc.resolveNoCache(v.start-d.from),E=d.doc.resolveNoCache(v.endB-d.from),S=f.resolve(v.start),_=C.sameParent(E)&&C.parent.inlineContent&&S.end()>=v.endA;if((cu&&t.input.lastIOSEnter>Date.now()-225&&(!_||i.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!_&&C.pos<d.doc.content.size&&(!C.sameParent(E)||!C.parent.inlineContent)&&C.pos<E.pos&&!/\S/.test(d.doc.textBetween(C.pos,E.pos,"","")))&&t.someProp("handleKeyDown",M=>M(t,gl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&bV(f,v.start,v.endA,C,E)&&t.someProp("handleKeyDown",M=>M(t,gl(8,"Backspace")))){gs&&_r&&t.domObserver.suppressSelectionUpdates();return}_r&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),gs&&!_&&C.start()!=E.start()&&E.parentOffset==0&&C.depth==E.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==v.endA&&(v.endB-=2,E=d.doc.resolveNoCache(v.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(M){return M(t,gl(13,"Enter"))})},20));let N=v.start,k=v.endA,O=M=>{let L=M||t.state.tr.replace(N,k,d.doc.slice(v.start-d.from,v.endB-d.from));if(d.sel){let B=H_(t,L.doc,d.sel);B&&!(_r&&t.composing&&B.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(B.head==N||B.head==L.mapping.map(k)-1)||fi&&B.empty&&B.head==N)&&L.setSelection(B)}return a&&L.setMeta("composition",a),L.scrollIntoView()},I;if(_)if(C.pos==E.pos){fi&&Eo<=11&&C.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>bs(t),20));let M=O(t.state.tr.delete(N,k)),L=f.resolve(v.start).marksAcross(f.resolve(v.endA));L&&M.ensureMarks(L),t.dispatch(M)}else if(v.endA==v.endB&&(I=vV(C.parent.content.cut(C.parentOffset,E.parentOffset),S.parent.content.cut(S.parentOffset,v.endA-S.start())))){let M=O(t.state.tr);I.type=="add"?M.addMark(N,k,I.mark):M.removeMark(N,k,I.mark),t.dispatch(M)}else if(C.parent.child(C.index()).isText&&C.index()==E.index()-(E.textOffset?0:1)){let M=C.parent.textBetween(C.parentOffset,E.parentOffset),L=()=>O(t.state.tr.insertText(M,N,k));t.someProp("handleTextInput",B=>B(t,N,k,M,L))||t.dispatch(L())}else t.dispatch(O());else t.dispatch(O())}function H_(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Vb(t,e.resolve(n.anchor),e.resolve(n.head))}function vV(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,a=r,s,o,c;for(let f=0;f<r.length;f++)i=r[f].removeFromSet(i);for(let f=0;f<n.length;f++)a=n[f].removeFromSet(a);if(i.length==1&&a.length==0)o=i[0],s="add",c=f=>f.mark(o.addToSet(f.marks));else if(i.length==0&&a.length==1)o=a[0],s="remove",c=f=>f.mark(o.removeFromSet(f.marks));else return null;let d=[];for(let f=0;f<e.childCount;f++)d.push(c(e.child(f)));if(we.from(d).eq(t))return{mark:o,type:s}}function bV(t,e,n,r,i){if(n-e<=i.pos-r.pos||oy(r,!0,!1)<i.pos)return!1;let a=t.resolve(e);if(!r.parent.isTextblock){let o=a.nodeAfter;return o!=null&&n==e+o.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=t.resolve(oy(a,!0,!0));return!s.parent.isTextblock||s.pos>n||oy(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function oy(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let a=t.node(r).maybeChild(t.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function wV(t,e,n,r,i){let a=t.findDiffStart(e,n);if(a==null)return null;let{a:s,b:o}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let c=Math.max(0,a-Math.min(s,o));r-=s+c-a}if(s<a&&t.size<e.size){let c=r<=a&&r>=s?a-r:0;a-=c,a&&a<e.size&&V_(e.textBetween(a-1,a+1))&&(a+=c?1:-1),o=a+(o-s),s=a}else if(o<a){let c=r<=a&&r>=o?a-r:0;a-=c,a&&a<t.size&&V_(t.textBetween(a-1,a+1))&&(a+=c?1:-1),s=a+(s-o),o=a}return{start:a,endA:s,endB:o}}function V_(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class TO{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new PH,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(K_),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=W_(this),G_(this),this.nodeViews=q_(this),this.docView=S_(this.state.doc,$_(this),sy(this),this.dom,this),this.domObserver=new uV(this,(r,i,a,s)=>yV(this,r,i,a,s)),this.domObserver.start(),BH(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Jv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(K_),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,a=!1,s=!1;e.storedMarks&&this.composing&&(bO(this),s=!0),this.state=e;let o=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=q_(this);EV(y,this.nodeViews)&&(this.nodeViews=y,a=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&Jv(this),this.editable=W_(this),G_(this);let c=sy(this),d=$_(this),f=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=a||!this.docView.matchesNode(e.doc,d,c);(p||!e.selection.eq(i.selection))&&(s=!0);let m=f=="preserve"&&s&&this.dom.style.overflowAnchor==null&&JU(this);if(s){this.domObserver.stop();let y=p&&(fi||_r)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&CV(i.selection,e.selection);if(p){let v=_r?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=JH(this)),(a||!this.docView.update(e.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=S_(e.doc,d,c,this.dom,this)),v&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&CH(this))?bs(this,y):(lO(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():m&&QU(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof qe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&y_(this,n.getBoundingClientRect(),e)}else y_(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let a=r.from+(this.state.doc.content.size-n.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(i=a)}this.dragging=new CO(e.slice,e.move,i<0?void 0:qe.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s].props[e];if(o!=null&&(i=n?n(o):o))return i}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let o=a[s].props[e];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(fi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&eH(this.dom),bs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return aH(this,e)}coordsAtPos(e,n=1){return eO(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return uH(this,n||this.state,e)}pasteHTML(e,n){return Cf(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Cf(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return $b(this,e)}destroy(){this.docView&&(FH(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],sy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,HU())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return UH(this,e)}domSelectionRange(){let e=this.domSelection();return e?jr&&this.root.nodeType===11&&qU(this.dom.ownerDocument)==this.dom&&fV(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}TO.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function $_(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ur.node(0,t.state.doc.content.size,e)]}function G_(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ur.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function W_(t){return!t.someProp("editable",e=>e(t.state)===!1)}function CV(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function q_(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function EV(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function K_(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Oo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},H0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},SV=typeof navigator<"u"&&/Mac/.test(navigator.platform),AV=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ar=0;Ar<10;Ar++)Oo[48+Ar]=Oo[96+Ar]=String(Ar);for(var Ar=1;Ar<=24;Ar++)Oo[Ar+111]="F"+Ar;for(var Ar=65;Ar<=90;Ar++)Oo[Ar]=String.fromCharCode(Ar+32),H0[Ar]=String.fromCharCode(Ar);for(var ly in Oo)H0.hasOwnProperty(ly)||(H0[ly]=Oo[ly]);function _V(t){var e=SV&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||AV&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?H0:Oo)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const TV=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),NV=typeof navigator<"u"&&/Win/.test(navigator.platform);function kV(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,a,s;for(let o=0;o<e.length-1;o++){let c=e[o];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))TV?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function OV(t){let e=Object.create(null);for(let n in t)e[kV(n)]=t[n];return e}function cy(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function MV(t){return new fn({props:{handleKeyDown:Yb(t)}})}function Yb(t){let e=OV(t);return function(n,r){let i=_V(r),a,s=e[cy(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=e[cy(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(NV&&r.ctrlKey&&r.altKey)&&(a=Oo[r.keyCode])&&a!=i){let o=e[cy(a,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}var DV=Object.defineProperty,Zb=(t,e)=>{for(var n in e)DV(t,n,{get:e[n],enumerable:!0})};function om(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:a}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,a=n.storedMarks,n}}}var lm=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,a=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([s,o])=>[s,(...d)=>{const f=o(...d)(a);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:a}=r,s=[],o=!!t,c=t||i.tr,d=()=>(!o&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(c),s.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(n).map(([p,m])=>[p,(...v)=>{const C=this.buildProps(c,e),E=m(...v)(C);return s.push(E),f}])),run:d};return f}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,a=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([o,c])=>[o,(...d)=>c(...d)({...a,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:a}=r,s={tr:t,editor:r,view:a,state:om({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([o,c])=>[o,(...d)=>c(...d)(s)]))}};return s}},NO={};Zb(NO,{blur:()=>RV,clearContent:()=>IV,clearNodes:()=>LV,command:()=>jV,createParagraphNear:()=>PV,cut:()=>BV,deleteCurrentNode:()=>FV,deleteNode:()=>zV,deleteRange:()=>UV,deleteSelection:()=>HV,enter:()=>VV,exitCode:()=>$V,extendMarkRange:()=>GV,first:()=>WV,focus:()=>KV,forEach:()=>XV,insertContent:()=>YV,insertContentAt:()=>QV,joinBackward:()=>n$,joinDown:()=>t$,joinForward:()=>r$,joinItemBackward:()=>i$,joinItemForward:()=>a$,joinTextblockBackward:()=>s$,joinTextblockForward:()=>o$,joinUp:()=>e$,keyboardShortcut:()=>c$,lift:()=>u$,liftEmptyBlock:()=>d$,liftListItem:()=>f$,newlineInCode:()=>h$,resetAttributes:()=>p$,scrollIntoView:()=>m$,selectAll:()=>g$,selectNodeBackward:()=>x$,selectNodeForward:()=>y$,selectParentNode:()=>v$,selectTextblockEnd:()=>b$,selectTextblockStart:()=>w$,setContent:()=>C$,setMark:()=>U$,setMeta:()=>H$,setNode:()=>V$,setNodeSelection:()=>$$,setTextDirection:()=>G$,setTextSelection:()=>W$,sinkListItem:()=>q$,splitBlock:()=>K$,splitListItem:()=>X$,toggleList:()=>Y$,toggleMark:()=>Z$,toggleNode:()=>J$,toggleWrap:()=>Q$,undoInputRule:()=>eG,unsetAllMarks:()=>tG,unsetMark:()=>nG,unsetTextDirection:()=>rG,updateAttributes:()=>iG,wrapIn:()=>aG,wrapInList:()=>sG});var RV=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),IV=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),LV=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:a,$to:s})=>{t.doc.nodesBetween(a.pos,s.pos,(o,c)=>{if(o.type.isText)return;const{doc:d,mapping:f}=e,p=d.resolve(f.map(c)),m=d.resolve(f.map(c+o.nodeSize)),y=p.blockRange(m);if(!y)return;const v=Cu(y);if(o.type.isTextblock){const{defaultType:C}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(y.start,C)}(v||v===0)&&e.lift(y,v)})}),!0},jV=t=>e=>t(e),PV=()=>({state:t,dispatch:e})=>V6(t,e),BV=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,a=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,a.content),r.setSelection(new Xe(r.doc.resolve(Math.max(s-1,0)))),!0},FV=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===r.type){if(e){const o=i.before(a),c=i.after(a);t.delete(o,c).scrollIntoView()}return!0}return!1};function $n(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var zV=t=>({tr:e,state:n,dispatch:r})=>{const i=$n(t,n.schema),a=e.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(r){const c=a.before(s),d=a.after(s);e.delete(c,d).scrollIntoView()}return!0}return!1},UV=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},HV=()=>({state:t,dispatch:e})=>jb(t,e),VV=()=>({commands:t})=>t.keyboardShortcut("Enter"),$V=()=>({state:t,dispatch:e})=>TU(t,e);function Jb(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function V0(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Jb(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function kO(t,e,n={}){return t.find(r=>r.type===e&&V0(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function X_(t,e,n={}){return!!kO(t,e,n)}function Qb(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(f=>f.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(f=>f.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!kO([...i.node.marks],e,n)))return;let s=i.index,o=t.start()+i.offset,c=s+1,d=o+i.node.nodeSize;for(;s>0&&X_([...t.parent.child(s-1).marks],e,n);)s-=1,o-=t.parent.child(s).nodeSize;for(;c<t.parent.childCount&&X_([...t.parent.child(c).marks],e,n);)d+=t.parent.child(c).nodeSize,c+=1;return{from:o,to:d}}function Ns(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var GV=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const a=Ns(t,r.schema),{doc:s,selection:o}=n,{$from:c,from:d,to:f}=o;if(i){const p=Qb(c,a,e);if(p&&p.from<=d&&p.to>=f){const m=Xe.create(s,p.from,p.to);n.setSelection(m)}}return!0},WV=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function OO(t){return t instanceof Xe}function bl(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function MO(t,e=null){if(!e)return null;const n=Qe.atStart(t),r=Qe.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,a=r.to;return e==="all"?Xe.create(t,bl(0,i,a),bl(t.content.size,i,a)):Xe.create(t,bl(e,i,a),bl(e,i,a))}function Y_(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function $0(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function qV(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var KV=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:a})=>{e={scrollIntoView:!0,...e};const s=()=>{($0()||Y_())&&r.dom.focus(),qV()&&!$0()&&!Y_()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(a&&t===null&&!OO(n.state.selection))return s(),!0;const o=MO(i.doc,t)||n.state.selection,c=n.state.selection.eq(o);return a&&(c||i.setSelection(o),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},XV=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),YV=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),DO=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&DO(r)}return t};function Cp(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return DO(n)}function Sf(t,e,n){if(t instanceof pa||t instanceof we)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return we.fromArray(t.map(o=>e.nodeFromJSON(o)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(a){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),Sf("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,o="";const c=new g6({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(s=!0,o=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Kd.fromSchema(c).parseSlice(Cp(t),n.parseOptions):Kd.fromSchema(c).parse(Cp(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const a=Kd.fromSchema(e);return n.slice?a.parseSlice(Cp(t),n.parseOptions).content:a.parse(Cp(t),n.parseOptions)}return Sf("",e,n)}function ZV(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof lr||i instanceof fr))return;const a=t.mapping.maps[r];let s=0;a.forEach((o,c,d,f)=>{s===0&&(s=f)}),t.setSelection(Qe.near(t.doc.resolve(s),n))}var JV=t=>!("type"in t),QV=(t,e,n)=>({tr:r,dispatch:i,editor:a})=>{var s;if(i){n={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let o;const c=E=>{a.emit("contentError",{editor:a,error:E,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{Sf(e,a.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(E){c(E)}try{o=Sf(e,a.schema,{parseOptions:d,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(E){return c(E),!1}let{from:f,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,y=!0;if((JV(o)?o:[o]).forEach(E=>{E.check(),m=m?E.isText&&E.marks.length===0:!1,y=y?E.isBlock:!1}),f===p&&y){const{parent:E}=r.doc.resolve(f);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(f-=1,p+=1)}let C;if(m){if(Array.isArray(e))C=e.map(E=>E.text||"").join("");else if(e instanceof we){let E="";e.forEach(S=>{S.text&&(E+=S.text)}),C=E}else typeof e=="object"&&e&&e.text?C=e.text:C=e;r.insertText(C,f,p)}else{C=o;const E=r.doc.resolve(f),S=E.node(),_=E.parentOffset===0,N=S.isText||S.isTextblock,k=S.content.size>0;_&&N&&k&&(f=Math.max(0,f-1)),r.replaceWith(f,p,C)}n.updateSelection&&ZV(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:C}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:C})}return!0},e$=()=>({state:t,dispatch:e})=>SU(t,e),t$=()=>({state:t,dispatch:e})=>AU(t,e),n$=()=>({state:t,dispatch:e})=>j6(t,e),r$=()=>({state:t,dispatch:e})=>z6(t,e),i$=()=>({state:t,dispatch:e,tr:n})=>{try{const r=tm(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},a$=()=>({state:t,dispatch:e,tr:n})=>{try{const r=tm(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},s$=()=>({state:t,dispatch:e})=>CU(t,e),o$=()=>({state:t,dispatch:e})=>EU(t,e);function RO(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function l$(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,a,s;for(let o=0;o<e.length-1;o+=1){const c=e[o];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))$0()||RO()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}var c$=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const a=l$(t).split(/-(?!$)/),s=a.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),o=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,o))});return c==null||c.steps.forEach(d=>{const f=d.map(r.mapping);f&&i&&r.maybeStep(f)}),!0};function Mo(t,e,n={}){const{from:r,to:i,empty:a}=t.selection,s=e?$n(e,t.schema):null,o=[];t.doc.nodesBetween(r,i,(p,m)=>{if(p.isText)return;const y=Math.max(r,m),v=Math.min(i,m+p.nodeSize);o.push({node:p,from:y,to:v})});const c=i-r,d=o.filter(p=>s?s.name===p.node.type.name:!0).filter(p=>V0(p.node.attrs,n,{strict:!1}));return a?!!d.length:d.reduce((p,m)=>p+m.to-m.from,0)>=c}var u$=(t,e={})=>({state:n,dispatch:r})=>{const i=$n(t,n.schema);return Mo(n,i,e)?_U(n,r):!1},d$=()=>({state:t,dispatch:e})=>$6(t,e),f$=t=>({state:e,dispatch:n})=>{const r=$n(t,e.schema);return BU(r)(e,n)},h$=()=>({state:t,dispatch:e})=>H6(t,e);function cm(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Z_(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var p$=(t,e)=>({tr:n,state:r,dispatch:i})=>{let a=null,s=null;const o=cm(typeof t=="string"?t:t.name,r.schema);if(!o)return!1;o==="node"&&(a=$n(t,r.schema)),o==="mark"&&(s=Ns(t,r.schema));let c=!1;return n.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(f,p)=>{a&&a===f.type&&(c=!0,i&&n.setNodeMarkup(p,void 0,Z_(f.attrs,e))),s&&f.marks.length&&f.marks.forEach(m=>{s===m.type&&(c=!0,i&&n.addMark(p,p+f.nodeSize,s.create(Z_(m.attrs,e))))})})}),c},m$=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),g$=()=>({tr:t,dispatch:e})=>{if(e){const n=new Ni(t.doc);t.setSelection(n)}return!0},x$=()=>({state:t,dispatch:e})=>B6(t,e),y$=()=>({state:t,dispatch:e})=>U6(t,e),v$=()=>({state:t,dispatch:e})=>OU(t,e),b$=()=>({state:t,dispatch:e})=>RU(t,e),w$=()=>({state:t,dispatch:e})=>DU(t,e);function Qv(t,e,n={},r={}){return Sf(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var C$=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:a,dispatch:s,commands:o})=>{const{doc:c}=a;if(r.preserveWhitespace!=="full"){const d=Qv(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return s&&a.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!n),!0}return s&&a.setMeta("preventUpdate",!n),o.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function IO(t,e){const n=Ns(e,t.schema),{from:r,to:i,empty:a}=t.selection,s=[];a?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{s.push(...c.marks)});const o=s.find(c=>c.type.name===n.name);return o?{...o.attrs}:{}}function LO(t,e){const n=new Ib(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function E$(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function S$(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,a)=>{n(i)&&r.push({node:i,pos:a})}),r}function jO(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function um(t){return e=>jO(e.$from,t)}function Ge(t,e,n){return t.config[e]===void 0&&t.parent?Ge(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ge(t.parent,e,n):null}):t.config[e]}function ew(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Ge(e,"addExtensions",n);return r?[e,...ew(r())]:e}).flat(10)}function tw(t,e){const n=Gl.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function PO(t){return typeof t=="function"}function Rt(t,e=void 0,...n){return PO(t)?e?t.bind(e)(...n):t(...n):t}function A$(t={}){return Object.keys(t).length===0&&t.constructor===Object}function uu(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function BO(t){const e=[],{nodeExtensions:n,markExtensions:r}=uu(t),i=[...n,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage,extensions:i},c=Ge(s,"addGlobalAttributes",o);if(!c)return;c().forEach(f=>{f.types.forEach(p=>{Object.entries(f.attributes).forEach(([m,y])=>{e.push({type:p,name:m,attribute:{...a,...y}})})})})}),i.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},c=Ge(s,"addAttributes",o);if(!c)return;const d=c();Object.entries(d).forEach(([f,p])=>{const m={...a,...p};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,e.push({type:s.name,name:f,attribute:m})})}),e}function dn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,a])=>{if(!r[i]){r[i]=a;return}if(i==="class"){const o=a?String(a).split(" "):[],c=r[i]?r[i].split(" "):[],d=o.filter(f=>!c.includes(f));r[i]=[...c,...d].join(" ")}else if(i==="style"){const o=a?a.split(";").map(f=>f.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(f=>f.trim()).filter(Boolean):[],d=new Map;c.forEach(f=>{const[p,m]=f.split(":").map(y=>y.trim());d.set(p,m)}),o.forEach(f=>{const[p,m]=f.split(":").map(y=>y.trim());d.set(p,m)}),r[i]=Array.from(d.entries()).map(([f,p])=>`${f}: ${p}`).join("; ")}else r[i]=a}),r},{})}function Af(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>dn(n,r),{})}function _$(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function J_(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((a,s)=>{const o=s.attribute.parseHTML?s.attribute.parseHTML(n):_$(n.getAttribute(s.name));return o==null?a:{...a,[s.name]:o}},{});return{...r,...i}}}}function Q_(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&A$(n)?!1:n!=null))}function e4(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function T$(t,e){var n;const r=BO(t),{nodeExtensions:i,markExtensions:a}=uu(t),s=(n=i.find(d=>Ge(d,"topNode")))==null?void 0:n.name,o=Object.fromEntries(i.map(d=>{const f=r.filter(S=>S.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:e},m=t.reduce((S,_)=>{const N=Ge(_,"extendNodeSchema",p);return{...S,...N?N(d):{}}},{}),y=Q_({...m,content:Rt(Ge(d,"content",p)),marks:Rt(Ge(d,"marks",p)),group:Rt(Ge(d,"group",p)),inline:Rt(Ge(d,"inline",p)),atom:Rt(Ge(d,"atom",p)),selectable:Rt(Ge(d,"selectable",p)),draggable:Rt(Ge(d,"draggable",p)),code:Rt(Ge(d,"code",p)),whitespace:Rt(Ge(d,"whitespace",p)),linebreakReplacement:Rt(Ge(d,"linebreakReplacement",p)),defining:Rt(Ge(d,"defining",p)),isolating:Rt(Ge(d,"isolating",p)),attrs:Object.fromEntries(f.map(e4))}),v=Rt(Ge(d,"parseHTML",p));v&&(y.parseDOM=v.map(S=>J_(S,f)));const C=Ge(d,"renderHTML",p);C&&(y.toDOM=S=>C({node:S,HTMLAttributes:Af(S,f)}));const E=Ge(d,"renderText",p);return E&&(y.toText=E),[d.name,y]})),c=Object.fromEntries(a.map(d=>{const f=r.filter(E=>E.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:e},m=t.reduce((E,S)=>{const _=Ge(S,"extendMarkSchema",p);return{...E,..._?_(d):{}}},{}),y=Q_({...m,inclusive:Rt(Ge(d,"inclusive",p)),excludes:Rt(Ge(d,"excludes",p)),group:Rt(Ge(d,"group",p)),spanning:Rt(Ge(d,"spanning",p)),code:Rt(Ge(d,"code",p)),attrs:Object.fromEntries(f.map(e4))}),v=Rt(Ge(d,"parseHTML",p));v&&(y.parseDOM=v.map(E=>J_(E,f)));const C=Ge(d,"renderHTML",p);return C&&(y.toDOM=E=>C({mark:E,HTMLAttributes:Af(E,f)})),[d.name,y]}));return new g6({topNode:s,nodes:o,marks:c})}function N$(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function G0(t){return t.sort((n,r)=>{const i=Ge(n,"priority")||100,a=Ge(r,"priority")||100;return i>a?-1:i<a?1:0})}function FO(t){const e=G0(ew(t)),n=N$(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function zO(t,e,n){const{from:r,to:i}=e,{blockSeparator:a=`

`,textSerializers:s={}}=n||{};let o="";return t.nodesBetween(r,i,(c,d,f,p)=>{var m;c.isBlock&&d>r&&(o+=a);const y=s==null?void 0:s[c.type.name];if(y)return f&&(o+=y({node:c,pos:d,parent:f,index:p,range:e})),!1;c.isText&&(o+=(m=c==null?void 0:c.text)==null?void 0:m.slice(Math.max(r,d)-d,i-d))}),o}function k$(t,e){const n={from:0,to:t.content.size};return zO(t,n,e)}function UO(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function O$(t,e){const n=$n(e,t.schema),{from:r,to:i}=t.selection,a=[];t.doc.nodesBetween(r,i,o=>{a.push(o)});const s=a.reverse().find(o=>o.type.name===n.name);return s?{...s.attrs}:{}}function HO(t,e){const n=cm(typeof e=="string"?e:e.name,t.schema);return n==="node"?O$(t,e):n==="mark"?IO(t,e):{}}function M$(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function D$(t){const e=M$(t);return e.length===1?e:e.filter((n,r)=>!e.filter((a,s)=>s!==r).some(a=>n.oldRange.from>=a.oldRange.from&&n.oldRange.to<=a.oldRange.to&&n.newRange.from>=a.newRange.from&&n.newRange.to<=a.newRange.to))}function VO(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,a)=>{const s=[];if(i.ranges.length)i.forEach((o,c)=>{s.push({from:o,to:c})});else{const{from:o,to:c}=n[a];if(o===void 0||c===void 0)return;s.push({from:o,to:c})}s.forEach(({from:o,to:c})=>{const d=e.slice(a).map(o,-1),f=e.slice(a).map(c),p=e.invert().map(d,-1),m=e.invert().map(f);r.push({oldRange:{from:p,to:m},newRange:{from:d,to:f}})})}),D$(r)}function nw(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const a=n.resolve(t),s=Qb(a,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:a,to:a+i.nodeSize,mark:s})))}),r}var R$=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let a=r,s=null;for(;a>0&&s===null;){const o=i.node(a);(o==null?void 0:o.type.name)===e?s=o:a-=1}return[s,a]};function Ep(t,e){return e.nodes[t]||e.marks[t]||null}function e0(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(a=>a.type===e&&a.name===r);return i?i.attribute.keepOnSplit:!1}))}var I$=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,a,s,o)=>{var c,d;const f=((d=(c=i.type.spec).toText)==null?void 0:d.call(c,{node:i,pos:a,parent:s,index:o}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?f:f.slice(0,Math.max(0,r-a))}),n};function e2(t,e,n={}){const{empty:r,ranges:i}=t.selection,a=e?Ns(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>a?a.name===p.type.name:!0).find(p=>V0(p.attrs,n,{strict:!1}));let s=0;const o=[];if(i.forEach(({$from:p,$to:m})=>{const y=p.pos,v=m.pos;t.doc.nodesBetween(y,v,(C,E)=>{if(!C.isText&&!C.marks.length)return;const S=Math.max(y,E),_=Math.min(v,E+C.nodeSize),N=_-S;s+=N,o.push(...C.marks.map(k=>({mark:k,from:S,to:_})))})}),s===0)return!1;const c=o.filter(p=>a?a.name===p.mark.type.name:!0).filter(p=>V0(p.mark.attrs,n,{strict:!1})).reduce((p,m)=>p+m.to-m.from,0),d=o.filter(p=>a?p.mark.type!==a&&p.mark.type.excludes(a):!0).reduce((p,m)=>p+m.to-m.from,0);return(c>0?c+d:c)>=s}function L$(t,e,n={}){if(!e)return Mo(t,null,n)||e2(t,null,n);const r=cm(e,t.schema);return r==="node"?Mo(t,e,n):r==="mark"?e2(t,e,n):!1}var j$=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const a=um(o=>o.type.name===e)(t.selection);if(!a)return!1;const s=t.doc.resolve(a.pos+1);return i.pos+1===s.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},P$=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function t4(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function n4(t,e){const{nodeExtensions:n}=uu(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},a=Rt(Ge(r,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function dm(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(a=>{i!==!1&&(dm(a,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function $O(t){return t instanceof qe}var GO=class WO{constructor(e){this.position=e}static fromJSON(e){return new WO(e.position)}toJSON(){return{position:this.position}}};function B$(t,e){const n=e.mapping.mapResult(t.position);return{position:new GO(n.pos),mapResult:n}}function F$(t){return new GO(t)}function z$(t,e,n){var r;const{selection:i}=e;let a=null;if(OO(i)&&(a=i.$cursor),a){const o=(r=t.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(n)&&(!!n.isInSet(o)||!o.some(d=>d.type.excludes(n)))}const{ranges:s}=i;return s.some(({$from:o,$to:c})=>{let d=o.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(o.pos,c.pos,(f,p,m)=>{if(d)return!1;if(f.isInline){const y=!m||m.type.allowsMarkType(n),v=!!n.isInSet(f.marks)||!f.marks.some(C=>C.type.excludes(n));d=y&&v}return!d}),d})}var U$=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:a}=n,{empty:s,ranges:o}=a,c=Ns(t,r.schema);if(i)if(s){const d=IO(r,c);n.addStoredMark(c.create({...d,...e}))}else o.forEach(d=>{const f=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(f,p,(m,y)=>{const v=Math.max(y,f),C=Math.min(y+m.nodeSize,p);m.marks.find(S=>S.type===c)?m.marks.forEach(S=>{c===S.type&&n.addMark(v,C,c.create({...S.attrs,...e}))}):n.addMark(v,C,c.create(e))})});return z$(r,n,c)},H$=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),V$=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const a=$n(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:o})=>m_(a,{...s,...e})(n)?!0:o.clearNodes()).command(({state:o})=>m_(a,{...s,...e})(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},$$=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=bl(t,0,r.content.size),a=qe.create(r,i);e.setSelection(a)}return!0},G$=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:a}=r;let s,o;return typeof e=="number"?(s=e,o=e):e&&"from"in e&&"to"in e?(s=e.from,o=e.to):(s=a.from,o=a.to),i&&n.doc.nodesBetween(s,o,(c,d)=>{c.isText||n.setNodeMarkup(d,void 0,{...c.attrs,dir:t})}),!0},W$=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:a}=typeof t=="number"?{from:t,to:t}:t,s=Xe.atStart(r).from,o=Xe.atEnd(r).to,c=bl(i,s,o),d=bl(a,s,o),f=Xe.create(r,c,d);e.setSelection(f)}return!0},q$=t=>({state:e,dispatch:n})=>{const r=$n(t,e.schema);return UU(r)(e,n)};function r4(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var K$=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:a,doc:s}=e,{$from:o,$to:c}=a,d=i.extensionManager.attributes,f=e0(d,o.node().type.name,o.node().attrs);if(a instanceof qe&&a.node.isBlock)return!o.parentOffset||!vs(s,o.pos)?!1:(r&&(t&&r4(n,i.extensionManager.splittableMarks),e.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const p=c.parentOffset===c.parent.content.size,m=o.depth===0?void 0:E$(o.node(-1).contentMatchAt(o.indexAfter(-1)));let y=p&&m?[{type:m,attrs:f}]:void 0,v=vs(e.doc,e.mapping.map(o.pos),1,y);if(!y&&!v&&vs(e.doc,e.mapping.map(o.pos),1,m?[{type:m}]:void 0)&&(v=!0,y=m?[{type:m,attrs:f}]:void 0),r){if(v&&(a instanceof Xe&&e.deleteSelection(),e.split(e.mapping.map(o.pos),1,y),m&&!p&&!o.parentOffset&&o.parent.type!==m)){const C=e.mapping.map(o.before()),E=e.doc.resolve(C);o.node(-1).canReplaceWith(E.index(),E.index()+1,m)&&e.setNodeMarkup(e.mapping.map(o.before()),m)}t&&r4(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return v},X$=(t,e={})=>({tr:n,state:r,dispatch:i,editor:a})=>{var s;const o=$n(t,r.schema),{$from:c,$to:d}=r.selection,f=r.selection.node;if(f&&f.isBlock||c.depth<2||!c.sameParent(d))return!1;const p=c.node(-1);if(p.type!==o)return!1;const m=a.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==o||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let S=we.empty;const _=c.index(-1)?1:c.index(-2)?2:3;for(let L=c.depth-_;L>=c.depth-3;L-=1)S=we.from(c.node(L).copy(S));const N=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,k={...e0(m,c.node().type.name,c.node().attrs),...e},O=((s=o.contentMatch.defaultType)==null?void 0:s.createAndFill(k))||void 0;S=S.append(we.from(o.createAndFill(null,O)||void 0));const I=c.before(c.depth-(_-1));n.replace(I,c.after(-N),new Re(S,4-_,0));let M=-1;n.doc.nodesBetween(I,n.doc.content.size,(L,B)=>{if(M>-1)return!1;L.isTextblock&&L.content.size===0&&(M=B+1)}),M>-1&&n.setSelection(Xe.near(n.doc.resolve(M))),n.scrollIntoView()}return!0}const y=d.pos===c.end()?p.contentMatchAt(0).defaultType:null,v={...e0(m,p.type.name,p.attrs),...e},C={...e0(m,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,d.pos);const E=y?[{type:o,attrs:v},{type:y,attrs:C}]:[{type:o,attrs:v}];if(!vs(n.doc,c.pos,2))return!1;if(i){const{selection:S,storedMarks:_}=r,{splittableMarks:N}=a.extensionManager,k=_||S.$to.parentOffset&&S.$from.marks();if(n.split(c.pos,2,E).scrollIntoView(),!k||!i)return!0;const O=k.filter(I=>N.includes(I.type.name));n.ensureMarks(O)}return!0},uy=(t,e)=>{const n=um(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Lo(t.doc,n.pos)&&t.join(n.pos),!0},dy=(t,e)=>{const n=um(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Lo(t.doc,r)&&t.join(r),!0},Y$=(t,e,n,r={})=>({editor:i,tr:a,state:s,dispatch:o,chain:c,commands:d,can:f})=>{const{extensions:p,splittableMarks:m}=i.extensionManager,y=$n(t,s.schema),v=$n(e,s.schema),{selection:C,storedMarks:E}=s,{$from:S,$to:_}=C,N=S.blockRange(_),k=E||C.$to.parentOffset&&C.$from.marks();if(!N)return!1;const O=um(I=>n4(I.type.name,p))(C);if(N.depth>=1&&O&&N.depth-O.depth<=1){if(O.node.type===y)return d.liftListItem(v);if(n4(O.node.type.name,p)&&y.validContent(O.node.content)&&o)return c().command(()=>(a.setNodeMarkup(O.pos,y),!0)).command(()=>uy(a,y)).command(()=>dy(a,y)).run()}return!n||!k||!o?c().command(()=>f().wrapInList(y,r)?!0:d.clearNodes()).wrapInList(y,r).command(()=>uy(a,y)).command(()=>dy(a,y)).run():c().command(()=>{const I=f().wrapInList(y,r),M=k.filter(L=>m.includes(L.type.name));return a.ensureMarks(M),I?!0:d.clearNodes()}).wrapInList(y,r).command(()=>uy(a,y)).command(()=>dy(a,y)).run()},Z$=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:a=!1}=n,s=Ns(t,r.schema);return e2(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:a}):i.setMark(s,e)},J$=(t,e,n={})=>({state:r,commands:i})=>{const a=$n(t,r.schema),s=$n(e,r.schema),o=Mo(r,a,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),o?i.setNode(s,c):i.setNode(a,{...c,...n})},Q$=(t,e={})=>({state:n,commands:r})=>{const i=$n(t,n.schema);return Mo(n,i,e)?r.lift(i):r.wrapIn(i,e)},eG=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let a;if(i.spec.isInputRules&&(a=i.getState(t))){if(e){const s=t.tr,o=a.transform;for(let c=o.steps.length-1;c>=0;c-=1)s.step(o.steps[c].invert(o.docs[c]));if(a.text){const c=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,c))}else s.delete(a.from,a.to)}return!0}}return!1},tG=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},nG=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var a;const{extendEmptyMarkRange:s=!1}=e,{selection:o}=n,c=Ns(t,r.schema),{$from:d,empty:f,ranges:p}=o;if(!i)return!0;if(f&&s){let{from:m,to:y}=o;const v=(a=d.marks().find(E=>E.type===c))==null?void 0:a.attrs,C=Qb(d,c,v);C&&(m=C.from,y=C.to),n.removeMark(m,y,c)}else p.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,c)});return n.removeStoredMark(c),!0},rG=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let a,s;return typeof t=="number"?(a=t,s=t):t&&"from"in t&&"to"in t?(a=t.from,s=t.to):(a=i.from,s=i.to),r&&e.doc.nodesBetween(a,s,(o,c)=>{if(o.isText)return;const d={...o.attrs};delete d.dir,e.setNodeMarkup(c,void 0,d)}),!0},iG=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let a=null,s=null;const o=cm(typeof t=="string"?t:t.name,r.schema);if(!o)return!1;o==="node"&&(a=$n(t,r.schema)),o==="mark"&&(s=Ns(t,r.schema));let c=!1;return n.selection.ranges.forEach(d=>{const f=d.$from.pos,p=d.$to.pos;let m,y,v,C;n.selection.empty?r.doc.nodesBetween(f,p,(E,S)=>{a&&a===E.type&&(c=!0,v=Math.max(S,f),C=Math.min(S+E.nodeSize,p),m=S,y=E)}):r.doc.nodesBetween(f,p,(E,S)=>{S<f&&a&&a===E.type&&(c=!0,v=Math.max(S,f),C=Math.min(S+E.nodeSize,p),m=S,y=E),S>=f&&S<=p&&(a&&a===E.type&&(c=!0,i&&n.setNodeMarkup(S,void 0,{...E.attrs,...e})),s&&E.marks.length&&E.marks.forEach(_=>{if(s===_.type&&(c=!0,i)){const N=Math.max(S,f),k=Math.min(S+E.nodeSize,p);n.addMark(N,k,s.create({..._.attrs,...e}))}}))}),y&&(m!==void 0&&i&&n.setNodeMarkup(m,void 0,{...y.attrs,...e}),s&&y.marks.length&&y.marks.forEach(E=>{s===E.type&&i&&n.addMark(v,C,s.create({...E.attrs,...e}))}))}),c},aG=(t,e={})=>({state:n,dispatch:r})=>{const i=$n(t,n.schema);return IU(i,e)(n,r)},sG=(t,e={})=>({state:n,dispatch:r})=>{const i=$n(t,n.schema);return LU(i,e)(n,r)},oG=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},fm=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},lG=(t,e)=>{if(Jb(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Sp(t){var e;const{editor:n,from:r,to:i,text:a,rules:s,plugin:o}=t,{view:c}=n;if(c.composing)return!1;const d=c.state.doc.resolve(r);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(m=>m.type.spec.code))return!1;let f=!1;const p=I$(d)+a;return s.forEach(m=>{if(f)return;const y=lG(p,m.find);if(!y)return;const v=c.state.tr,C=om({state:c.state,transaction:v}),E={from:r-(y[0].length-a.length),to:i},{commands:S,chain:_,can:N}=new lm({editor:n,state:C});m.handler({state:C,range:E,match:y,commands:S,chain:_,can:N})===null||!v.steps.length||(m.undoable&&v.setMeta(o,{transform:v,from:r,to:i,text:a}),c.dispatch(v),f=!0)}),f}function cG(t){const{editor:e,rules:n}=t,r=new fn({state:{init(){return null},apply(i,a,s){const o=i.getMeta(r);if(o)return o;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:f}=c;typeof f=="string"?f=f:f=tw(we.from(f),s.schema);const{from:p}=c,m=p+f.length;Sp({editor:e,from:p,to:m,text:f,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,s,o){return Sp({editor:e,from:a,to:s,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&Sp({editor:e,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Sp({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function uG(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ap(t){return uG(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function qO(t,e){const n={...t};return Ap(t)&&Ap(e)&&Object.keys(e).forEach(r=>{Ap(e[r])&&Ap(t[r])?n[r]=qO(t[r],e[r]):n[r]=e[r]}),n}var rw=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Rt(Ge(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Rt(Ge(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>qO(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Po=class KO extends rw{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new KO(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(d=>(d==null?void 0:d.type.name)===n.name))return!1;const c=s.find(d=>(d==null?void 0:d.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function dG(t){return typeof t=="number"}var fG=class{constructor(t){this.find=t.find,this.handler=t.handler}},hG=(t,e,n)=>{if(Jb(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const a=[i.text];return a.index=i.index,a.input=t,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function pG(t){const{editor:e,state:n,from:r,to:i,rule:a,pasteEvent:s,dropEvent:o}=t,{commands:c,chain:d,can:f}=new lm({editor:e,state:n}),p=[];return n.doc.nodesBetween(r,i,(y,v)=>{var C,E,S,_,N;if((E=(C=y.type)==null?void 0:C.spec)!=null&&E.code||!(y.isText||y.isTextblock||y.isInline))return;const k=(N=(_=(S=y.content)==null?void 0:S.size)!=null?_:y.nodeSize)!=null?N:0,O=Math.max(r,v),I=Math.min(i,v+k);if(O>=I)return;const M=y.isText?y.text||"":y.textBetween(O-v,I-v,void 0,"");hG(M,a.find,s).forEach(B=>{if(B.index===void 0)return;const le=O+B.index+1,ae=le+B[0].length,fe={from:n.tr.mapping.map(le),to:n.tr.mapping.map(ae)},W=a.handler({state:n,range:fe,match:B,commands:c,chain:d,can:f,pasteEvent:s,dropEvent:o});p.push(W)})}),p.every(y=>y!==null)}var _p=null,mG=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function gG(t){const{editor:e,rules:n}=t;let r=null,i=!1,a=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const c=({state:f,from:p,to:m,rule:y,pasteEvt:v})=>{const C=f.tr,E=om({state:f,transaction:C});if(!(!pG({editor:e,state:E,from:Math.max(p-1,0),to:m.b-1,rule:y,pasteEvent:v,dropEvent:o})||!C.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return n.map(f=>new fn({view(p){const m=v=>{var C;r=(C=p.dom.parentElement)!=null&&C.contains(v.target)?p.dom.parentElement:null,r&&(_p=e)},y=()=>{_p&&(_p=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,m)=>{if(a=r===p.dom.parentElement,o=m,!a){const y=_p;y!=null&&y.isEditable&&setTimeout(()=>{const v=y.state.selection;v&&y.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(p,m)=>{var y;const v=(y=m.clipboardData)==null?void 0:y.getData("text/html");return s=m,i=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(p,m,y)=>{const v=p[0],C=v.getMeta("uiEvent")==="paste"&&!i,E=v.getMeta("uiEvent")==="drop"&&!a,S=v.getMeta("applyPasteRules"),_=!!S;if(!C&&!E&&!_)return;if(_){let{text:O}=S;typeof O=="string"?O=O:O=tw(we.from(O),y.schema);const{from:I}=S,M=I+O.length,L=mG(O);return c({rule:f,state:y,from:I,to:{b:M},pasteEvt:L})}const N=m.doc.content.findDiffStart(y.doc.content),k=m.doc.content.findDiffEnd(y.doc.content);if(!(!dG(N)||!k||N===k.b))return c({rule:f,state:y,from:N,to:k,pasteEvt:s})}}))}var hm=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=FO(t),this.schema=T$(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ep(e.name,this.schema)},r=Ge(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return G0([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Ep(r.name,this.schema)},a=[],s=Ge(r,"addKeyboardShortcuts",i);let o={};if(r.type==="mark"&&Ge(r,"exitable",i)&&(o.ArrowRight=()=>Po.handleExit({editor:t,mark:r})),s){const m=Object.fromEntries(Object.entries(s()).map(([y,v])=>[y,()=>v({editor:t})]));o={...o,...m}}const c=MV(o);a.push(c);const d=Ge(r,"addInputRules",i);if(t4(r,t.options.enableInputRules)&&d){const m=d();if(m&&m.length){const y=cG({editor:t,rules:m}),v=Array.isArray(y)?y:[y];a.push(...v)}}const f=Ge(r,"addPasteRules",i);if(t4(r,t.options.enablePasteRules)&&f){const m=f();if(m&&m.length){const y=gG({editor:t,rules:m});a.push(...y)}}const p=Ge(r,"addProseMirrorPlugins",i);if(p){const m=p();a.push(...m)}return a})}get attributes(){return BO(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=uu(this.extensions);return Object.fromEntries(e.filter(n=>!!Ge(n,"addNodeView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:$n(n.name,this.schema)},a=Ge(n,"addNodeView",i);if(!a)return[];const s=a();if(!s)return[];const o=(c,d,f,p,m)=>{const y=Af(c,r);return s({node:c,view:d,getPos:f,decorations:p,innerDecorations:m,editor:t,extension:n,HTMLAttributes:y})};return[n.name,o]}))}dispatchTransaction(t){const{editor:e}=this;return G0([...this.extensions].reverse()).reduceRight((r,i)=>{const a={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Ep(i.name,this.schema)},s=Ge(i,"dispatchTransaction",a);return s?o=>{s.call(a,{transaction:o,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=uu(this.extensions);return Object.fromEntries(e.filter(n=>!!Ge(n,"addMarkView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ns(n.name,this.schema)},a=Ge(n,"addMarkView",i);if(!a)return[];const s=(o,c,d)=>{const f=Af(o,r);return a()({mark:o,view:c,inline:d,editor:t,extension:n,HTMLAttributes:f,updateAttributes:p=>{OG(o,t,p)}})};return[n.name,s]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ep(e.name,this.schema)};e.type==="mark"&&((n=Rt(Ge(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Ge(e,"onBeforeCreate",r),a=Ge(e,"onCreate",r),s=Ge(e,"onUpdate",r),o=Ge(e,"onSelectionUpdate",r),c=Ge(e,"onTransaction",r),d=Ge(e,"onFocus",r),f=Ge(e,"onBlur",r),p=Ge(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),f&&this.editor.on("blur",f),p&&this.editor.on("destroy",p)})}};hm.resolve=FO;hm.sort=G0;hm.flatten=ew;var xG={};Zb(xG,{ClipboardTextSerializer:()=>YO,Commands:()=>ZO,Delete:()=>JO,Drop:()=>QO,Editable:()=>e8,FocusEvents:()=>n8,Keymap:()=>r8,Paste:()=>i8,Tabindex:()=>a8,TextDirection:()=>s8,focusEventsPluginKey:()=>t8});var Vt=class XO extends rw{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new XO(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},YO=Vt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new fn({key:new kn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:a}=i,s=Math.min(...a.map(f=>f.$from.pos)),o=Math.max(...a.map(f=>f.$to.pos)),c=UO(n);return zO(r,{from:s,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),ZO=Vt.create({name:"commands",addCommands(){return{...NO}}}),JO=Vt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const a=()=>{var s,o,c,d;if((d=(c=(o=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:o.filterTransaction)==null?void 0:c.call(o,t))!=null?d:t.getMeta("y-sync$"))return;const f=LO(t.before,[t,...e]);VO(f).forEach(y=>{f.mapping.mapResult(y.oldRange.from).deletedAfter&&f.mapping.mapResult(y.oldRange.to).deletedBefore&&f.before.nodesBetween(y.oldRange.from,y.oldRange.to,(v,C)=>{const E=C+v.nodeSize-2,S=y.oldRange.from<=C&&E<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:C,to:E,newFrom:f.mapping.map(C),newTo:f.mapping.map(E),deletedRange:y.oldRange,newRange:y.newRange,partial:!S,editor:this.editor,transaction:t,combinedTransform:f})})});const m=f.mapping;f.steps.forEach((y,v)=>{var C,E;if(y instanceof fa){const S=m.slice(v).map(y.from,-1),_=m.slice(v).map(y.to),N=m.invert().map(S,-1),k=m.invert().map(_),O=(C=f.doc.nodeAt(S-1))==null?void 0:C.marks.some(M=>M.eq(y.mark)),I=(E=f.doc.nodeAt(_))==null?void 0:E.marks.some(M=>M.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:N,to:k},newRange:{from:S,to:_},partial:!!(I||O),editor:this.editor,transaction:t,combinedTransform:f})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(a,0):a()}}),QO=Vt.create({name:"drop",addProseMirrorPlugins(){return[new fn({key:new kn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),e8=Vt.create({name:"editable",addProseMirrorPlugins(){return[new fn({key:new kn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),t8=new kn("focusEvents"),n8=Vt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new fn({key:t8,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),r8=Vt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:o})=>{const{selection:c,doc:d}=o,{empty:f,$anchor:p}=c,{pos:m,parent:y}=p,v=p.parent.isTextblock&&m>0?o.doc.resolve(m-1):p,C=v.parent.type.spec.isolating,E=p.pos-p.parentOffset,S=C&&v.parent.childCount===1?E===p.pos:Qe.atStart(d).from===m;return!f||!y.type.isTextblock||y.textContent.length||!S||S&&p.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},a={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return $0()||RO()?a:i},addProseMirrorPlugins(){return[new fn({key:new kn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(C=>C.getMeta("composition")))return;const r=t.some(C=>C.docChanged)&&!e.doc.eq(n.doc),i=t.some(C=>C.getMeta("preventClearDocument"));if(!r||i)return;const{empty:a,from:s,to:o}=e.selection,c=Qe.atStart(e.doc).from,d=Qe.atEnd(e.doc).to;if(a||!(s===c&&o===d)||!dm(n.doc))return;const m=n.tr,y=om({state:n,transaction:m}),{commands:v}=new lm({editor:this.editor,state:y});if(v.clearNodes(),!!m.steps.length)return m}})]}}),i8=Vt.create({name:"paste",addProseMirrorPlugins(){return[new fn({key:new kn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),a8=Vt.create({name:"tabindex",addProseMirrorPlugins(){return[new fn({key:new kn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),s8=Vt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=uu(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new fn({key:new kn("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),yG=class Id{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Id(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Id(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Id(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,a=n.isAtom&&!n.isText,s=n.isInline,o=this.pos+r+(a?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(o);if(!i&&!s&&c.depth<=this.depth)return;const d=new Id(c,this.editor,i,i||s?n:null);i&&(d.actualDepth=this.depth+1),e.push(d)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const a=i.node.attrs,s=Object.keys(n);for(let o=0;o<s.length;o+=1){const c=s[o];if(a[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&a.every(c=>n[c]===s.node.attrs[c])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},vG=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function bG(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var wG=class extends oG{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:B$,createMappablePosition:F$},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:a})=>this.options.onDrop(r,i,a)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=MO(e,this.options.autofocus);this.editorState=Pc.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=bG(vG,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=PO(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const a=typeof i=="string"?`${i}$`:i.key;n=n.filter(s=>!s.key.startsWith(a))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[e8,YO.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),ZO,n8,r8,a8,QO,i8,JO,s8.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new hm(r,this)}createCommandManager(){this.commandManager=new lm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Qv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Qv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new TO(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(d=>{var f;return(f=this.capturedTransaction)==null?void 0:f.step(d)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const s=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),o=s==null?void 0:s.getMeta("focus"),c=s==null?void 0:s.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:s}),c&&this.emit("blur",{editor:this,event:c.event,transaction:s}),!(t.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||a.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return HO(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return L$(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return tw(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return k$(this.state.doc,{blockSeparator:e,textSerializers:{...UO(this.schema),...n}})}get isEmpty(){return dm(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new yG(e,this)}get $doc(){return this.$pos(0)}};function du(t){return new fm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Rt(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:a}=e,s=r[r.length-1],o=r[0];if(s){const c=o.search(/\S/),d=n.from+o.indexOf(s),f=d+s.length;if(nw(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(C=>C===t.type&&C!==y.mark.type)).filter(y=>y.to>d).length)return null;f<n.to&&a.delete(f,n.to),d>n.from&&a.delete(n.from+c,d);const m=n.from+c+s.length;a.addMark(n.from+c,m,t.type.create(i||{})),a.removeStoredMark(t.type)}},undoable:t.undoable})}function CG(t){return new fm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Rt(t.getAttributes,void 0,r)||{},{tr:a}=e,s=n.from;let o=n.to;const c=t.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let f=s+d;f>o?f=o:o=f+r[1].length;const p=r[0][r[0].length-1];a.insertText(p,s+r[0].length-1),a.replaceWith(f,o,c)}else if(r[0]){const d=t.type.isInline?s:s-1;a.insert(d,t.type.create(i)).delete(a.mapping.map(s),a.mapping.map(o))}a.scrollIntoView()},undoable:t.undoable})}function t2(t){return new fm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),a=Rt(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,a)},undoable:t.undoable})}function fu(t){return new fm({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const a=Rt(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),c=s.doc.resolve(n.from).blockRange(),d=c&&Rb(c,t.type,a);if(!d)return null;if(s.wrap(c,d),t.keepMarks&&t.editor){const{selection:p,storedMarks:m}=e,{splittableMarks:y}=t.editor.extensionManager,v=m||p.$to.parentOffset&&p.$from.marks();if(v){const C=v.filter(E=>y.includes(E.type.name));s.ensureMarks(C)}}if(t.keepAttributes){const p=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,a).run()}const f=s.doc.resolve(n.from-1).nodeBefore;f&&f.type===t.type&&Lo(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,f))&&s.join(n.from-1)},undoable:t.undoable})}function EG(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof qe){const a=r.index();return r.parent.canReplaceWith(a,a+1,e)}let i=r.depth;for(;i>=0;){const a=r.index(i);if(r.node(i).contentMatchAt(a).matchType(e))return!0;i-=1}return!1}var SG={};Zb(SG,{createAtomBlockMarkdownSpec:()=>AG,createBlockMarkdownSpec:()=>_G,createInlineMarkdownSpec:()=>kG,parseAttributes:()=>iw,parseIndentedBlocks:()=>n2,renderNestedMarkdownContent:()=>sw,serializeAttributes:()=>aw});function iw(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,d=>(n.push(d),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const d=i.map(f=>f.trim().slice(1));e.class=d.join(" ")}const a=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(e.id=a[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(s)).forEach(([,d,f])=>{var p;const m=parseInt(((p=f.match(/__QUOTED_(\d+)__/))==null?void 0:p[1])||"0",10),y=n[m];y&&(e[d]=y.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(f=>{f.match(/^[a-zA-Z][\w-]*$/)&&(e[f]=!0)}),e}function aw(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function AG(t){const{nodeName:e,name:n,parseAttributes:r=iw,serializeAttributes:i=aw,defaultAttributes:a={},requiredAttributes:s=[],allowedAttributes:o}=t,c=n||e,d=f=>{if(!o)return f;const p={};return o.forEach(m=>{m in f&&(p[m]=f[m])}),p};return{parseMarkdown:(f,p)=>{const m={...a,...f.attributes};return p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"block",start(f){var p;const m=new RegExp(`^:::${c}(?:\\s|$)`,"m"),y=(p=f.match(m))==null?void 0:p.index;return y!==void 0?y:-1},tokenize(f,p,m){const y=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),v=f.match(y);if(!v)return;const C=v[1]||"",E=r(C);if(!s.find(_=>!(_ in E)))return{type:e,raw:v[0],attributes:E}}},renderMarkdown:f=>{const p=d(f.attrs||{}),m=i(p),y=m?` {${m}}`:"";return`:::${c}${y} :::`}}}function _G(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=iw,serializeAttributes:a=aw,defaultAttributes:s={},content:o="block",allowedAttributes:c}=t,d=n||e,f=p=>{if(!c)return p;const m={};return c.forEach(y=>{y in p&&(m[y]=p[y])}),m};return{parseMarkdown:(p,m)=>{let y;if(r){const C=r(p);y=typeof C=="string"?[{type:"text",text:C}]:C}else o==="block"?y=m.parseChildren(p.tokens||[]):y=m.parseInline(p.tokens||[]);const v={...s,...p.attributes};return m.createNode(e,v,y)},markdownTokenizer:{name:e,level:"block",start(p){var m;const y=new RegExp(`^:::${d}`,"m"),v=(m=p.match(y))==null?void 0:m.index;return v!==void 0?v:-1},tokenize(p,m,y){var v;const C=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=p.match(C);if(!E)return;const[S,_=""]=E,N=i(_);let k=1;const O=S.length;let I="";const M=/^:::([\w-]*)(\s.*)?/gm,L=p.slice(O);for(M.lastIndex=0;;){const B=M.exec(L);if(B===null)break;const le=B.index,ae=B[1];if(!((v=B[2])!=null&&v.endsWith(":::"))){if(ae)k+=1;else if(k-=1,k===0){const fe=L.slice(0,le);I=fe.trim();const W=p.slice(0,O+le+B[0].length);let de=[];if(I)if(o==="block")for(de=y.blockTokens(fe),de.forEach(xe=>{xe.text&&(!xe.tokens||xe.tokens.length===0)&&(xe.tokens=y.inlineTokens(xe.text))});de.length>0;){const xe=de[de.length-1];if(xe.type==="paragraph"&&(!xe.text||xe.text.trim()===""))de.pop();else break}else de=y.inlineTokens(I);return{type:e,raw:W,attributes:N,content:I,tokens:de}}}}}},renderMarkdown:(p,m)=>{const y=f(p.attrs||{}),v=a(y),C=v?` {${v}}`:"",E=m.renderChildren(p.content||[],`

`);return`:::${d}${C}

${E}

:::`}}}function TG(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,a,s]=r;e[i]=a||s,r=n.exec(t)}return e}function NG(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function kG(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=TG,serializeAttributes:a=NG,defaultAttributes:s={},selfClosing:o=!1,allowedAttributes:c}=t,d=n||e,f=m=>{if(!c)return m;const y={};return c.forEach(v=>{const C=typeof v=="string"?v:v.name,E=typeof v=="string"?void 0:v.skipIfDefault;if(C in m){const S=m[C];if(E!==void 0&&S===E)return;y[C]=S}}),y},p=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,y)=>{const v={...s,...m.attributes};if(o)return y.createNode(e,v);const C=r?r(m):m.content||"";return C?y.createNode(e,v,[y.createTextNode(C)]):y.createNode(e,v,[])},markdownTokenizer:{name:e,level:"inline",start(m){const y=o?new RegExp(`\\[${p}\\s*[^\\]]*\\]`):new RegExp(`\\[${p}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${p}\\]`),v=m.match(y),C=v==null?void 0:v.index;return C!==void 0?C:-1},tokenize(m,y,v){const C=o?new RegExp(`^\\[${p}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${p}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${p}\\]`),E=m.match(C);if(!E)return;let S="",_="";if(o){const[,k]=E;_=k}else{const[,k,O]=E;_=k,S=O||""}const N=i(_.trim());return{type:e,raw:E[0],content:S.trim(),attributes:N}}},renderMarkdown:m=>{let y="";r?y=r(m):m.content&&m.content.length>0&&(y=m.content.filter(S=>S.type==="text").map(S=>S.text).join(""));const v=f(m.attrs||{}),C=a(v),E=C?` ${C}`:"";return o?`[${d}${E}]`:`[${d}${E}]${y}[/${d}]`}}}function n2(t,e,n){var r,i,a,s;const o=t.split(`
`),c=[];let d="",f=0;const p=e.baseIndentSize||2;for(;f<o.length;){const m=o[f],y=m.match(e.itemPattern);if(!y){if(c.length>0)break;if(m.trim()===""){f+=1,d=`${d}${m}
`;continue}else return}const v=e.extractItemData(y),{indentLevel:C,mainContent:E}=v;d=`${d}${m}
`;const S=[E];for(f+=1;f<o.length;){const O=o[f];if(O.trim()===""){const M=o.slice(f+1).findIndex(le=>le.trim()!=="");if(M===-1)break;if((((i=(r=o[f+1+M].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>C){S.push(O),d=`${d}${O}
`,f+=1;continue}else break}if((((s=(a=O.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:s.length)||0)>C)S.push(O),d=`${d}${O}
`,f+=1;else break}let _;const N=S.slice(1);if(N.length>0){const O=N.map(I=>I.slice(C+p)).join(`
`);O.trim()&&(e.customNestedParser?_=e.customNestedParser(O):_=n.blockTokens(O))}const k=e.createToken(v,_);c.push(k)}if(c.length!==0)return{items:c,raw:d}}function sw(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[a,...s]=t.content,o=e.renderChildren([a]),c=[`${i}${o}`];return s&&s.length>0&&s.forEach(d=>{const f=e.renderChildren([d]);if(f){const p=f.split(`
`).map(m=>m?e.indent(m):"").join(`
`);c.push(p)}}),c.join(`
`)}function OG(t,e,n={}){const{state:r}=e,{doc:i,tr:a}=r,s=t;i.descendants((o,c)=>{const d=a.mapping.map(c),f=a.mapping.map(c)+o.nodeSize;let p=null;if(o.marks.forEach(y=>{if(y!==s)return!1;p=y}),!p)return;let m=!1;if(Object.keys(n).forEach(y=>{n[y]!==p.attrs[y]&&(m=!0)}),m){const y=t.type.create({...t.attrs,...n});a.removeMark(d,f,t.type),a.addMark(d,f,y)}}),a.docChanged&&e.view.dispatch(a)}var Nr=class o8 extends rw{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new o8(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Ul(t){return new fG({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const a=Rt(t.getAttributes,void 0,r,i);if(a===!1||a===null)return null;const{tr:s}=e,o=r[r.length-1],c=r[0];let d=n.to;if(o){const f=c.search(/\S/),p=n.from+c.indexOf(o),m=p+o.length;if(nw(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(E=>E===t.type&&E!==v.mark.type)).filter(v=>v.to>p).length)return null;m<n.to&&s.delete(m,n.to),p>n.from&&s.delete(n.from+f,p),d=n.from+f+o.length,s.addMark(n.from+f,d,t.type.create(a||{})),s.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:MG,getOwnPropertySymbols:DG}=Object,{hasOwnProperty:RG}=Object.prototype;function fy(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function Tp(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:a}=i,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);const c=t(n,r,i);return a.delete(n),a.delete(r),c}}function IG(t){return t!=null?t[Symbol.toStringTag]:void 0}function i4(t){return MG(t).concat(DG(t))}const LG=Object.hasOwn||((t,e)=>RG.call(t,e));function Wl(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const jG="__v",PG="__o",BG="_owner",{getOwnPropertyDescriptor:a4,keys:s4}=Object;function FG(t,e){return t.byteLength===e.byteLength&&W0(new Uint8Array(t),new Uint8Array(e))}function zG(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function UG(t,e){return t.byteLength===e.byteLength&&W0(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function HG(t,e){return Wl(t.getTime(),e.getTime())}function VG(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function $G(t,e){return t===e}function o4(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.entries();let s,o,c=0;for(;(s=a.next())&&!s.done;){const d=e.entries();let f=!1,p=0;for(;(o=d.next())&&!o.done;){if(i[p]){p++;continue}const m=s.value,y=o.value;if(n.equals(m[0],y[0],c,p,t,e,n)&&n.equals(m[1],y[1],m[0],y[0],t,e,n)){f=i[p]=!0;break}p++}if(!f)return!1;c++}return!0}const GG=Wl;function WG(t,e,n){const r=s4(t);let i=r.length;if(s4(e).length!==i)return!1;for(;i-- >0;)if(!l8(t,e,n,r[i]))return!1;return!0}function Sd(t,e,n){const r=i4(t);let i=r.length;if(i4(e).length!==i)return!1;let a,s,o;for(;i-- >0;)if(a=r[i],!l8(t,e,n,a)||(s=a4(t,a),o=a4(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function qG(t,e){return Wl(t.valueOf(),e.valueOf())}function KG(t,e){return t.source===e.source&&t.flags===e.flags}function l4(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.values();let s,o;for(;(s=a.next())&&!s.done;){const c=e.values();let d=!1,f=0;for(;(o=c.next())&&!o.done;){if(!i[f]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1}return!0}function W0(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function XG(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function l8(t,e,n,r){return(r===BG||r===PG||r===jG)&&(t.$$typeof||e.$$typeof)?!0:LG(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const YG="[object ArrayBuffer]",ZG="[object Arguments]",JG="[object Boolean]",QG="[object DataView]",eW="[object Date]",tW="[object Error]",nW="[object Map]",rW="[object Number]",iW="[object Object]",aW="[object RegExp]",sW="[object Set]",oW="[object String]",lW={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},cW="[object URL]",uW=Object.prototype.toString;function dW({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:f,areSetsEqual:p,areTypedArraysEqual:m,areUrlsEqual:y,unknownTagComparators:v}){return function(E,S,_){if(E===S)return!0;if(E==null||S==null)return!1;const N=typeof E;if(N!==typeof S)return!1;if(N!=="object")return N==="number"?o(E,S,_):N==="function"?a(E,S,_):!1;const k=E.constructor;if(k!==S.constructor)return!1;if(k===Object)return c(E,S,_);if(Array.isArray(E))return e(E,S,_);if(k===Date)return r(E,S,_);if(k===RegExp)return f(E,S,_);if(k===Map)return s(E,S,_);if(k===Set)return p(E,S,_);const O=uW.call(E);if(O===eW)return r(E,S,_);if(O===aW)return f(E,S,_);if(O===nW)return s(E,S,_);if(O===sW)return p(E,S,_);if(O===iW)return typeof E.then!="function"&&typeof S.then!="function"&&c(E,S,_);if(O===cW)return y(E,S,_);if(O===tW)return i(E,S,_);if(O===ZG)return c(E,S,_);if(lW[O])return m(E,S,_);if(O===YG)return t(E,S,_);if(O===QG)return n(E,S,_);if(O===JG||O===rW||O===oW)return d(E,S,_);if(v){let I=v[O];if(!I){const M=IG(E);M&&(I=v[M])}if(I)return I(E,S,_)}return!1}}function fW({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:FG,areArraysEqual:n?Sd:zG,areDataViewsEqual:UG,areDatesEqual:HG,areErrorsEqual:VG,areFunctionsEqual:$G,areMapsEqual:n?fy(o4,Sd):o4,areNumbersEqual:GG,areObjectsEqual:n?Sd:WG,arePrimitiveWrappersEqual:qG,areRegExpsEqual:KG,areSetsEqual:n?fy(l4,Sd):l4,areTypedArraysEqual:n?fy(W0,Sd):W0,areUrlsEqual:XG,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Tp(r.areArraysEqual),a=Tp(r.areMapsEqual),s=Tp(r.areObjectsEqual),o=Tp(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:o})}return r}function hW(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function pW({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(o,c){const{cache:d=t?new WeakMap:void 0,meta:f}=n();return e(o,c,{cache:d,equals:r,meta:f,strict:i})};if(t)return function(o,c){return e(o,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const a={cache:void 0,equals:r,meta:void 0,strict:i};return function(o,c){return e(o,c,a)}}const mW=Bo();Bo({strict:!0});Bo({circular:!0});Bo({circular:!0,strict:!0});Bo({createInternalComparator:()=>Wl});Bo({strict:!0,createInternalComparator:()=>Wl});Bo({circular:!0,createInternalComparator:()=>Wl});Bo({circular:!0,createInternalComparator:()=>Wl,strict:!0});function Bo(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,a=fW(t),s=dW(a),o=n?n(s):hW(s);return pW({circular:e,comparator:s,createState:r,equals:o,strict:i})}var hy={exports:{}},py={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c4;function gW(){if(c4)return py;c4=1;var t=Pf(),e=Q5();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return py.useSyncExternalStoreWithSelector=function(d,f,p,m,y){var v=a(null);if(v.current===null){var C={hasValue:!1,value:null};v.current=C}else C=v.current;v=o(function(){function S(I){if(!_){if(_=!0,N=I,I=m(I),y!==void 0&&C.hasValue){var M=C.value;if(y(M,I))return k=M}return k=I}if(M=k,r(N,I))return M;var L=m(I);return y!==void 0&&y(M,L)?(N=I,M):(N=I,k=L)}var _=!1,N,k,O=p===void 0?null:p;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,p,m,y]);var E=i(d,v[0],v[1]);return s(function(){C.hasValue=!0,C.value=E},[E]),c(E),E},py}var u4;function xW(){return u4||(u4=1,hy.exports=gW()),hy.exports}var yW=xW(),vW=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},bW=({contentComponent:t})=>{const e=e6.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return g.jsx(g.Fragment,{children:Object.values(e)})};function wW(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:ij.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var CW=class extends nt.Component{constructor(t){var e;super(t),this.editorContentRef=nt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=wW(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return g.jsxs(g.Fragment,{children:[g.jsx("div",{ref:vW(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&g.jsx(bW,{contentComponent:t.contentComponent})]})}},EW=A.forwardRef((t,e)=>{const n=nt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return nt.createElement(CW,{key:n,innerRef:e,...t})}),c8=nt.memo(EW),SW=typeof window<"u"?A.useLayoutEffect:A.useEffect,AW=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function _W(t){var e;const[n]=A.useState(()=>new AW(t.editor)),r=yW.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:mW);return SW(()=>n.watch(t.editor),[t.editor,n]),A.useDebugValue(r),r}var TW=!1,r2=typeof window>"u",NW=r2||!!(typeof window<"u"&&window.next),kW=class u8{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?r2||NW?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,a;return(a=(i=this.options.current).onBeforeCreate)==null?void 0:a.call(i,...r)},onBlur:(...r)=>{var i,a;return(a=(i=this.options.current).onBlur)==null?void 0:a.call(i,...r)},onCreate:(...r)=>{var i,a;return(a=(i=this.options.current).onCreate)==null?void 0:a.call(i,...r)},onDestroy:(...r)=>{var i,a;return(a=(i=this.options.current).onDestroy)==null?void 0:a.call(i,...r)},onFocus:(...r)=>{var i,a;return(a=(i=this.options.current).onFocus)==null?void 0:a.call(i,...r)},onSelectionUpdate:(...r)=>{var i,a;return(a=(i=this.options.current).onSelectionUpdate)==null?void 0:a.call(i,...r)},onTransaction:(...r)=>{var i,a;return(a=(i=this.options.current).onTransaction)==null?void 0:a.call(i,...r)},onUpdate:(...r)=>{var i,a;return(a=(i=this.options.current).onUpdate)==null?void 0:a.call(i,...r)},onContentError:(...r)=>{var i,a;return(a=(i=this.options.current).onContentError)==null?void 0:a.call(i,...r)},onDrop:(...r)=>{var i,a;return(a=(i=this.options.current).onDrop)==null?void 0:a.call(i,...r)},onPaste:(...r)=>{var i,a;return(a=(i=this.options.current).onPaste)==null?void 0:a.call(i,...r)},onDelete:(...r)=>{var i,a;return(a=(i=this.options.current).onDelete)==null?void 0:a.call(i,...r)}};return new wG(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,a)=>{var s;return i===((s=n.extensions)==null?void 0:s[a])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?u8.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function OW(t={},e=[]){const n=A.useRef(t);n.current=t;const[r]=A.useState(()=>new kW(n)),i=e6.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return A.useDebugValue(i),A.useEffect(r.onRender(e)),_W({editor:i,selector:({transactionNumber:a})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&a===0?0:a+1}),i}var d8=A.createContext({editor:null});d8.Consumer;var MW=A.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),DW=()=>A.useContext(MW);nt.forwardRef((t,e)=>{const{onDragStart:n}=DW(),r=t.as||"div";return g.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});nt.createContext({markViewContentRef:()=>{}});var ow=A.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});ow.displayName="TiptapContext";var RW=()=>A.useContext(ow);function f8({editor:t,instance:e,children:n}){const r=t??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=A.useMemo(()=>({editor:r}),[r]),a=A.useMemo(()=>({editor:r}),[r]);return g.jsx(d8.Provider,{value:a,children:g.jsx(ow.Provider,{value:i,children:n})})}f8.displayName="Tiptap";function h8({...t}){const{editor:e}=RW();return g.jsx(c8,{editor:e,...t})}h8.displayName="Tiptap.Content";Object.assign(f8,{Content:h8});var q0=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},IW=/^\s*>\s$/,LW=Nr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return q0("blockquote",{...dn(this.options.HTMLAttributes,t),children:q0("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const o=e.renderChildren([i]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);r.push(o.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[fu({find:IW,type:this.type})]}}),jW=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,PW=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,BW=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,FW=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,zW=Po.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return q0("strong",{...dn(this.options.HTMLAttributes,t),children:q0("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[du({find:jW,type:this.type}),du({find:BW,type:this.type})]},addPasteRules(){return[Ul({find:PW,type:this.type}),Ul({find:FW,type:this.type})]}}),UW=/(^|[^`])`([^`]+)`(?!`)$/,HW=/(^|[^`])`([^`]+)`(?!`)/g,VW=Po.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",dn(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[du({find:UW,type:this.type})]},addPasteRules(){return[Ul({find:HW,type:this.type})]}}),my=4,$W=/^```([a-z]+)?[\s\n]$/,GW=/^~~~([a-z]+)?[\s\n]$/,WW=Nr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:my,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const a=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",dn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:my,{state:r}=t,{selection:i}=r,{$from:a,empty:s}=i;if(a.parent.type!==this.type)return!1;const o=" ".repeat(n);return s?t.commands.insertContent(o):t.commands.command(({tr:c})=>{const{from:d,to:f}=i,y=r.doc.textBetween(d,f,`
`,`
`).split(`
`).map(v=>o+v).join(`
`);return c.replaceWith(d,f,r.schema.text(y)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:my,{state:r}=t,{selection:i}=r,{$from:a,empty:s}=i;return a.parent.type!==this.type?!1:s?t.commands.command(({tr:o})=>{var c;const{pos:d}=a,f=a.start(),p=a.end(),y=r.doc.textBetween(f,p,`
`,`
`).split(`
`);let v=0,C=0;const E=d-f;for(let I=0;I<y.length;I+=1){if(C+y[I].length>=E){v=I;break}C+=y[I].length+1}const _=((c=y[v].match(/^ */))==null?void 0:c[0])||"",N=Math.min(_.length,n);if(N===0)return!0;let k=f;for(let I=0;I<v;I+=1)k+=y[I].length+1;return o.delete(k,k+N),d-k<=N&&o.setSelection(Xe.create(o.doc,k)),!0}):t.commands.command(({tr:o})=>{const{from:c,to:d}=i,m=r.doc.textBetween(c,d,`
`,`
`).split(`
`).map(y=>{var v;const C=((v=y.match(/^ */))==null?void 0:v[0])||"",E=Math.min(C.length,n);return y.slice(E)}).join(`
`);return o.replaceWith(c,d,r.schema.text(m)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!a||!s?!1:t.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:a}=n;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:r.nodeAt(o)?t.commands.command(({tr:d})=>(d.setSelection(Qe.near(r.resolve(o))),!0)):t.commands.exitCode()}}},addInputRules(){return[t2({find:$W,type:this.type,getAttributes:t=>({language:t[1]})}),t2({find:GW,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new fn({key:new kn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,a=i==null?void 0:i.mode;if(!n||!a)return!1;const{tr:s,schema:o}=t.state,c=o.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:a},c)),s.selection.$from.parent.type!==this.type&&s.setSelection(Xe.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),qW=Nr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),KW=Nr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",dn(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:a}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=r.extensionManager,c=a||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:f})=>{if(f&&c&&s){const p=c.filter(m=>o.includes(m.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),XW=Nr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,dn(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>t2({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),YW=Nr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",dn(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!EG(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return $O(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:a,tr:s,dispatch:o})=>{if(o){const{$to:c}=s.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(Xe.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(qe.create(s.doc,c.pos)):s.setSelection(Xe.create(s.doc,c.pos));else{const f=a.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,p=f==null?void 0:f.create();p&&(s.insert(d,p),s.setSelection(Xe.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[CG({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),ZW=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,JW=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,QW=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,eq=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,tq=Po.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",dn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[du({find:ZW,type:this.type}),du({find:QW,type:this.type})]},addPasteRules(){return[Ul({find:JW,type:this.type}),Ul({find:eq,type:this.type})]}});const nq="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",rq="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",i2="numeric",a2="ascii",s2="alpha",Jd="asciinumeric",Ld="alphanumeric",o2="domain",p8="emoji",iq="scheme",aq="slashscheme",gy="whitespace";function sq(t,e){return t in e||(e[t]=[]),e[t]}function wl(t,e,n){e[i2]&&(e[Jd]=!0,e[Ld]=!0),e[a2]&&(e[Jd]=!0,e[s2]=!0),e[Jd]&&(e[Ld]=!0),e[s2]&&(e[Ld]=!0),e[Ld]&&(e[o2]=!0),e[p8]&&(e[o2]=!0);for(const r in e){const i=sq(r,n);i.indexOf(t)<0&&i.push(t)}}function oq(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ui(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ui.groups={};ui.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],a=e.jr[r][1];if(a&&i.test(t))return a}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||ui.groups;let i;return e&&e.j?i=e:(i=new ui(e),n&&r&&wl(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const a=t.length;if(!a)return i;for(let s=0;s<a-1;s++)i=i.tt(t[s]);return i.tt(t[a-1],e,n,r)},tt(t,e,n,r){r=r||ui.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const a=e;let s,o=i.go(t);if(o?(s=new ui,Object.assign(s.j,o.j),s.jr.push.apply(s.jr,o.jr),s.jd=o.jd,s.t=o.t):s=new ui,a){if(r)if(s.t&&typeof s.t=="string"){const c=Object.assign(oq(s.t,r),n);wl(a,c,r)}else n&&wl(a,n,r);s.t=a}return i.j[t]=s,s}};const lt=(t,e,n,r,i)=>t.ta(e,n,r,i),An=(t,e,n,r,i)=>t.tr(e,n,r,i),d4=(t,e,n,r,i)=>t.ts(e,n,r,i),Te=(t,e,n,r,i)=>t.tt(e,n,r,i),ds="WORD",l2="UWORD",m8="ASCIINUMERICAL",g8="ALPHANUMERICAL",_f="LOCALHOST",c2="TLD",u2="UTLD",t0="SCHEME",Rc="SLASH_SCHEME",lw="NUM",d2="WS",cw="NL",Qd="OPENBRACE",ef="CLOSEBRACE",K0="OPENBRACKET",X0="CLOSEBRACKET",Y0="OPENPAREN",Z0="CLOSEPAREN",J0="OPENANGLEBRACKET",Q0="CLOSEANGLEBRACKET",e1="FULLWIDTHLEFTPAREN",t1="FULLWIDTHRIGHTPAREN",n1="LEFTCORNERBRACKET",r1="RIGHTCORNERBRACKET",i1="LEFTWHITECORNERBRACKET",a1="RIGHTWHITECORNERBRACKET",s1="FULLWIDTHLESSTHAN",o1="FULLWIDTHGREATERTHAN",l1="AMPERSAND",c1="APOSTROPHE",u1="ASTERISK",oo="AT",d1="BACKSLASH",f1="BACKTICK",h1="CARET",fo="COLON",uw="COMMA",p1="DOLLAR",Ta="DOT",m1="EQUALS",dw="EXCLAMATION",Hi="HYPHEN",tf="PERCENT",g1="PIPE",x1="PLUS",y1="POUND",nf="QUERY",fw="QUOTE",x8="FULLWIDTHMIDDLEDOT",hw="SEMI",Na="SLASH",rf="TILDE",v1="UNDERSCORE",y8="EMOJI",b1="SYM";var v8=Object.freeze({__proto__:null,ALPHANUMERICAL:g8,AMPERSAND:l1,APOSTROPHE:c1,ASCIINUMERICAL:m8,ASTERISK:u1,AT:oo,BACKSLASH:d1,BACKTICK:f1,CARET:h1,CLOSEANGLEBRACKET:Q0,CLOSEBRACE:ef,CLOSEBRACKET:X0,CLOSEPAREN:Z0,COLON:fo,COMMA:uw,DOLLAR:p1,DOT:Ta,EMOJI:y8,EQUALS:m1,EXCLAMATION:dw,FULLWIDTHGREATERTHAN:o1,FULLWIDTHLEFTPAREN:e1,FULLWIDTHLESSTHAN:s1,FULLWIDTHMIDDLEDOT:x8,FULLWIDTHRIGHTPAREN:t1,HYPHEN:Hi,LEFTCORNERBRACKET:n1,LEFTWHITECORNERBRACKET:i1,LOCALHOST:_f,NL:cw,NUM:lw,OPENANGLEBRACKET:J0,OPENBRACE:Qd,OPENBRACKET:K0,OPENPAREN:Y0,PERCENT:tf,PIPE:g1,PLUS:x1,POUND:y1,QUERY:nf,QUOTE:fw,RIGHTCORNERBRACKET:r1,RIGHTWHITECORNERBRACKET:a1,SCHEME:t0,SEMI:hw,SLASH:Na,SLASH_SCHEME:Rc,SYM:b1,TILDE:rf,TLD:c2,UNDERSCORE:v1,UTLD:u2,UWORD:l2,WORD:ds,WS:d2});const cs=/[a-z]/,Ad=new RegExp("\\p{L}","u"),xy=new RegExp("\\p{Emoji}","u"),us=/\d/,yy=/\s/,f4="\r",vy=`
`,lq="",cq="",by="";let Np=null,kp=null;function uq(t=[]){const e={};ui.groups=e;const n=new ui;Np==null&&(Np=h4(nq)),kp==null&&(kp=h4(rq)),Te(n,"'",c1),Te(n,"{",Qd),Te(n,"}",ef),Te(n,"[",K0),Te(n,"]",X0),Te(n,"(",Y0),Te(n,")",Z0),Te(n,"<",J0),Te(n,">",Q0),Te(n,"",e1),Te(n,"",t1),Te(n,"",n1),Te(n,"",r1),Te(n,"",i1),Te(n,"",a1),Te(n,"",s1),Te(n,"",o1),Te(n,"&",l1),Te(n,"*",u1),Te(n,"@",oo),Te(n,"`",f1),Te(n,"^",h1),Te(n,":",fo),Te(n,",",uw),Te(n,"$",p1),Te(n,".",Ta),Te(n,"=",m1),Te(n,"!",dw),Te(n,"-",Hi),Te(n,"%",tf),Te(n,"|",g1),Te(n,"+",x1),Te(n,"#",y1),Te(n,"?",nf),Te(n,'"',fw),Te(n,"/",Na),Te(n,";",hw),Te(n,"~",rf),Te(n,"_",v1),Te(n,"\\",d1),Te(n,"",x8);const r=An(n,us,lw,{[i2]:!0});An(r,us,r);const i=An(r,cs,m8,{[Jd]:!0}),a=An(r,Ad,g8,{[Ld]:!0}),s=An(n,cs,ds,{[a2]:!0});An(s,us,i),An(s,cs,s),An(i,us,i),An(i,cs,i);const o=An(n,Ad,l2,{[s2]:!0});An(o,cs),An(o,us,a),An(o,Ad,o),An(a,us,a),An(a,cs),An(a,Ad,a);const c=Te(n,vy,cw,{[gy]:!0}),d=Te(n,f4,d2,{[gy]:!0}),f=An(n,yy,d2,{[gy]:!0});Te(n,by,f),Te(d,vy,c),Te(d,by,f),An(d,yy,f),Te(f,f4),Te(f,vy),An(f,yy,f),Te(f,by,f);const p=An(n,xy,y8,{[p8]:!0});Te(p,"#"),An(p,xy,p),Te(p,lq,p);const m=Te(p,cq);Te(m,"#"),An(m,xy,p);const y=[[cs,s],[us,i]],v=[[cs,null],[Ad,o],[us,a]];for(let C=0;C<Np.length;C++)Js(n,Np[C],c2,ds,y);for(let C=0;C<kp.length;C++)Js(n,kp[C],u2,l2,v);wl(c2,{tld:!0,ascii:!0},e),wl(u2,{utld:!0,alpha:!0},e),Js(n,"file",t0,ds,y),Js(n,"mailto",t0,ds,y),Js(n,"http",Rc,ds,y),Js(n,"https",Rc,ds,y),Js(n,"ftp",Rc,ds,y),Js(n,"ftps",Rc,ds,y),wl(t0,{scheme:!0,ascii:!0},e),wl(Rc,{slashscheme:!0,ascii:!0},e),t=t.sort((C,E)=>C[0]>E[0]?1:-1);for(let C=0;C<t.length;C++){const E=t[C][0],_=t[C][1]?{[iq]:!0}:{[aq]:!0};E.indexOf("-")>=0?_[o2]=!0:cs.test(E)?us.test(E)?_[Jd]=!0:_[a2]=!0:_[i2]=!0,d4(n,E,E,_)}return d4(n,"localhost",_f,{ascii:!0}),n.jd=new ui(b1),{start:n,tokens:Object.assign({groups:e},v8)}}function b8(t,e){const n=dq(e.replace(/[A-Z]/g,o=>o.toLowerCase())),r=n.length,i=[];let a=0,s=0;for(;s<r;){let o=t,c=null,d=0,f=null,p=-1,m=-1;for(;s<r&&(c=o.go(n[s]));)o=c,o.accepts()?(p=0,m=0,f=o):p>=0&&(p+=n[s].length,m++),d+=n[s].length,a+=n[s].length,s++;a-=p,s-=m,d-=p,i.push({t:f.t,v:e.slice(a-d,a),s:a-d,e:a})}return i}function dq(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),a,s=i<55296||i>56319||r+1===n||(a=t.charCodeAt(r+1))<56320||a>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function Js(t,e,n,r,i){let a;const s=e.length;for(let o=0;o<s-1;o++){const c=e[o];t.j[c]?a=t.j[c]:(a=new ui(r),a.jr=i.slice(),t.j[c]=a),t=a}return a=new ui(n),a.jr=i.slice(),t.j[e[s-1]]=a,a}function h4(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let a=0;for(;i.indexOf(t[r+a])>=0;)a++;if(a>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+a),10);s>0;s--)n.pop();r+=a}else n.push(t[r]),r++}return e}const Tf={defaultProtocol:"http",events:null,format:p4,formatHref:p4,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function pw(t,e=null){let n=Object.assign({},Tf);t&&(n=Object.assign(n,t instanceof pw?t.o:t));const r=n.ignoreTags,i=[];for(let a=0;a<r.length;a++)i.push(r[a].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}pw.prototype={o:Tf,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Tf[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function p4(t){return t}function w8(t,e){this.t="token",this.v=t,this.tk=e}w8.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Tf.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),a=this.toFormattedString(t),s={},o=t.get("className",n,e),c=t.get("target",n,e),d=t.get("rel",n,e),f=t.getObj("attributes",n,e),p=t.getObj("events",n,e);return s.href=r,o&&(s.class=o),c&&(s.target=c),d&&(s.rel=d),f&&Object.assign(s,f),{tagName:i,attributes:s,content:a,eventListeners:p}}};function pm(t,e){class n extends w8{constructor(i,a){super(i,a),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const m4=pm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),g4=pm("text"),fq=pm("nl"),Op=pm("url",{isLink:!0,toHref(t=Tf.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==_f&&t[1].t===fo}}),Ui=t=>new ui(t);function hq({groups:t}){const e=t.domain.concat([l1,u1,oo,d1,f1,h1,p1,m1,Hi,lw,tf,g1,x1,y1,Na,b1,rf,v1]),n=[c1,fo,uw,Ta,dw,tf,nf,fw,hw,J0,Q0,Qd,ef,X0,K0,Y0,Z0,e1,t1,n1,r1,i1,a1,s1,o1],r=[l1,c1,u1,d1,f1,h1,p1,m1,Hi,Qd,ef,tf,g1,x1,y1,nf,Na,b1,rf,v1],i=Ui(),a=Te(i,rf);lt(a,r,a),lt(a,t.domain,a);const s=Ui(),o=Ui(),c=Ui();lt(i,t.domain,s),lt(i,t.scheme,o),lt(i,t.slashscheme,c),lt(s,r,a),lt(s,t.domain,s);const d=Te(s,oo);Te(a,oo,d),Te(o,oo,d),Te(c,oo,d);const f=Te(a,Ta);lt(f,r,a),lt(f,t.domain,a);const p=Ui();lt(d,t.domain,p),lt(p,t.domain,p);const m=Te(p,Ta);lt(m,t.domain,p);const y=Ui(m4);lt(m,t.tld,y),lt(m,t.utld,y),Te(d,_f,y);const v=Te(p,Hi);Te(v,Hi,v),lt(v,t.domain,p),lt(y,t.domain,p),Te(y,Ta,m),Te(y,Hi,v);const C=Te(y,fo);lt(C,t.numeric,m4);const E=Te(s,Hi),S=Te(s,Ta);Te(E,Hi,E),lt(E,t.domain,s),lt(S,r,a),lt(S,t.domain,s);const _=Ui(Op);lt(S,t.tld,_),lt(S,t.utld,_),lt(_,t.domain,s),lt(_,r,a),Te(_,Ta,S),Te(_,Hi,E),Te(_,oo,d);const N=Te(_,fo),k=Ui(Op);lt(N,t.numeric,k);const O=Ui(Op),I=Ui();lt(O,e,O),lt(O,n,I),lt(I,e,O),lt(I,n,I),Te(_,Na,O),Te(k,Na,O);const M=Te(o,fo),L=Te(c,fo),B=Te(L,Na),le=Te(B,Na);lt(o,t.domain,s),Te(o,Ta,S),Te(o,Hi,E),lt(c,t.domain,s),Te(c,Ta,S),Te(c,Hi,E),lt(M,t.domain,O),Te(M,Na,O),Te(M,nf,O),lt(le,t.domain,O),lt(le,e,O),Te(le,Na,O);const ae=[[Qd,ef],[K0,X0],[Y0,Z0],[J0,Q0],[e1,t1],[n1,r1],[i1,a1],[s1,o1]];for(let fe=0;fe<ae.length;fe++){const[W,de]=ae[fe],xe=Te(O,W);Te(I,W,xe),Te(xe,de,O);const H=Ui(Op);lt(xe,e,H);const J=Ui();lt(xe,n),lt(H,e,H),lt(H,n,J),lt(J,e,H),lt(J,n,J),Te(H,de,O),Te(J,de,O)}return Te(i,_f,_),Te(i,cw,fq),{start:i,tokens:v8}}function pq(t,e,n){let r=n.length,i=0,a=[],s=[];for(;i<r;){let o=t,c=null,d=null,f=0,p=null,m=-1;for(;i<r&&!(c=o.go(n[i].t));)s.push(n[i++]);for(;i<r&&(d=c||o.go(n[i].t));)c=null,o=d,o.accepts()?(m=0,p=o):m>=0&&m++,i++,f++;if(m<0)i-=f,i<r&&(s.push(n[i]),i++);else{s.length>0&&(a.push(wy(g4,e,s)),s=[]),i-=m,f-=m;const y=p.t,v=n.slice(i-f,i);a.push(wy(y,e,v))}}return s.length>0&&a.push(wy(g4,e,s)),a}function wy(t,e,n){const r=n[0].s,i=n[n.length-1].e,a=e.slice(r,i);return new t(a,n)}const mq=typeof console<"u"&&console&&console.warn||(()=>{}),gq="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",cn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function xq(){return ui.groups={},cn.scanner=null,cn.parser=null,cn.tokenQueue=[],cn.pluginQueue=[],cn.customSchemes=[],cn.initialized=!1,cn}function x4(t,e=!1){if(cn.initialized&&mq(`linkifyjs: already initialized - will not register custom scheme "${t}" ${gq}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);cn.customSchemes.push([t,e])}function yq(){cn.scanner=uq(cn.customSchemes);for(let t=0;t<cn.tokenQueue.length;t++)cn.tokenQueue[t][1]({scanner:cn.scanner});cn.parser=hq(cn.scanner.tokens);for(let t=0;t<cn.pluginQueue.length;t++)cn.pluginQueue[t][1]({scanner:cn.scanner,parser:cn.parser});return cn.initialized=!0,cn}function mw(t){return cn.initialized||yq(),pq(cn.parser.start,t,b8(cn.scanner.start,t))}mw.scan=b8;function C8(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new pw(n),i=mw(t),a=[];for(let s=0;s<i.length;s++){const o=i[s];o.isLink&&(!e||o.t===e)&&r.check(o)&&a.push(o.toFormattedObject(r))}return a}var gw="[\0- -\u2029]",vq=new RegExp(gw),bq=new RegExp(`${gw}$`),wq=new RegExp(gw,"g");function Cq(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Eq(t){return new fn({key:new kn("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),a=e.some(d=>d.getMeta("preventAutolink"));if(!i||a)return;const{tr:s}=r,o=LO(n.doc,[...e]);if(VO(o).forEach(({newRange:d})=>{const f=S$(r.doc,d,y=>y.isTextblock);let p,m;if(f.length>1)p=f[0],m=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(f.length){const y=r.doc.textBetween(d.from,d.to," "," ");if(!bq.test(y))return;p=f[0],m=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&m){const y=m.split(vq).filter(Boolean);if(y.length<=0)return!1;const v=y[y.length-1],C=p.pos+m.lastIndexOf(v);if(!v)return!1;const E=mw(v).map(S=>S.toObject(t.defaultProtocol));if(!Cq(E))return!1;E.filter(S=>S.isLink).map(S=>({...S,from:C+S.start+1,to:C+S.end+1})).filter(S=>r.schema.marks.code?!r.doc.rangeHasMark(S.from,S.to,r.schema.marks.code):!0).filter(S=>t.validate(S.value)).filter(S=>t.shouldAutoLink(S.value)).forEach(S=>{nw(S.from,S.to,r.doc).some(_=>_.mark.type===t.type)||s.addMark(S.from,S.to,t.type.create({href:S.href}))})}}),!!s.steps.length)return s}})}function Sq(t){return new fn({key:new kn("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,a;if(r.button!==0||!e.editable)return!1;let s=null;if(r.target instanceof HTMLAnchorElement)s=r.target;else{const c=r.target;if(!c)return!1;const d=t.editor.view.dom;s=c.closest("a"),s&&!d.contains(s)&&(s=null)}if(!s)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const c=HO(e.state,t.type.name),d=(i=s.href)!=null?i:c.href,f=(a=s.target)!=null?a:c.target;d&&(window.open(d,f),o=!0)}return o}}})}function Aq(t){return new fn({key:new kn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:a}=e,{selection:s}=a,{empty:o}=s;if(o)return!1;let c="";r.content.forEach(f=>{c+=f.textContent});const d=C8(c,{defaultProtocol:t.defaultProtocol}).find(f=>f.isLink&&f.value===c);return!c||!d||i!==void 0&&!i(d.value)?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function ll(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(wq,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var _q=Po.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){x4(t);return}x4(t.scheme,t.optionalSlashes)})},onDestroy(){xq()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!ll(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!ll(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!ll(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",dn(this.options.HTMLAttributes,t),0]:["a",dn(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n,r,i,a;const s=(r=(n=t.attrs)==null?void 0:n.href)!=null?r:"",o=(a=(i=t.attrs)==null?void 0:i.title)!=null?a:"",c=e.renderChildren(t);return o?`[${c}](${s} "${o}")`:`[${c}](${s})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ll(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ll(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ul({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=C8(t).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:s=>!!ll(s,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(a=>{this.options.shouldAutoLink(a.value)&&e.push({text:a.value,data:{href:a.href},index:a.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Eq({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ll(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(Sq({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Aq({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),Tq=Object.defineProperty,Nq=(t,e)=>{for(var n in e)Tq(t,n,{get:e[n],enumerable:!0})},kq="listItem",y4="textStyle",v4=/^\s*([-+*])\s$/,E8=Nr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",dn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(kq,this.editor.getAttributes(y4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=fu({find:v4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=fu({find:v4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(y4),editor:this.editor})),[t]}}),S8=Nr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",dn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const s=t.tokens.slice(1),o=e.parseChildren(s);n.push(...o)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>sw(t,e,r=>{var i,a;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((a=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:a.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Oq={};Nq(Oq,{findListItemPos:()=>Kf,getNextListDepth:()=>xw,handleBackspace:()=>f2,handleDelete:()=>h2,hasListBefore:()=>A8,hasListItemAfter:()=>Mq,hasListItemBefore:()=>_8,listItemHasSubList:()=>T8,nextListIsDeeper:()=>N8,nextListIsHigher:()=>k8});var Kf=(t,e)=>{const{$from:n}=e.selection,r=$n(t,e.schema);let i=null,a=n.depth,s=n.pos,o=null;for(;a>0&&o===null;)i=n.node(a),i.type===r?o=a:(a-=1,s-=1);return o===null?null:{$pos:e.doc.resolve(s),depth:o}},xw=(t,e)=>{const n=Kf(t,e);if(!n)return!1;const[,r]=R$(e,t,n.$pos.pos+4);return r},A8=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),a=t.doc.resolve(i).node();return!(!a||!n.includes(a.type.name))},_8=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},T8=(t,e,n)=>{if(!n)return!1;const r=$n(t,e.schema);let i=!1;return n.descendants(a=>{a.type===r&&(i=!0)}),i},f2=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Mo(t.state,e)&&A8(t.state,e,n)){const{$anchor:o}=t.state.selection,c=t.state.doc.resolve(o.before()-1),d=[];c.node().descendants((m,y)=>{m.type.name===e&&d.push({node:m,pos:y})});const f=d.at(-1);if(!f)return!1;const p=t.state.doc.resolve(c.start()+f.pos+1);return t.chain().cut({from:o.start()-1,to:o.end()+1},p.end()).joinForward().run()}if(!Mo(t.state,e)||!P$(t.state))return!1;const r=Kf(e,t.state);if(!r)return!1;const a=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),s=T8(e,t.state,a);return _8(e,t.state)&&!s?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},N8=(t,e)=>{const n=xw(t,e),r=Kf(t,e);return!r||!n?!1:n>r.depth},k8=(t,e)=>{const n=xw(t,e),r=Kf(t,e);return!r||!n?!1:n<r.depth},h2=(t,e)=>{if(!Mo(t.state,e)||!j$(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:N8(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():k8(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Mq=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},O8=Vt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&h2(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&h2(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&f2(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&f2(t,n,r)&&(e=!0)}),e}}}}),b4=/^(\s*)(\d+)\.\s+(.*)$/,Dq=/^\s/;function Rq(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],a=i.match(b4);if(!a)break;const[,s,o,c]=a,d=s.length;let f=c,p=n+1;const m=[i];for(;p<t.length;){const y=t[p];if(y.match(b4))break;if(y.trim()==="")m.push(y),f+=`
`,p+=1;else if(y.match(Dq))m.push(y),f+=`
${y.slice(d+2)}`,p+=1;else break}e.push({indent:d,number:parseInt(o,10),content:f.trim(),raw:m.join(`
`)}),r=p,n=p}return[e,r]}function M8(t,e,n){var r;const i=[];let a=0;for(;a<t.length;){const s=t[a];if(s.indent===e){const o=s.content.split(`
`),c=((r=o[0])==null?void 0:r.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const f=o.slice(1).join(`
`).trim();if(f){const y=n.blockTokens(f);d.push(...y)}let p=a+1;const m=[];for(;p<t.length&&t[p].indent>e;)m.push(t[p]),p+=1;if(m.length>0){const y=Math.min(...m.map(C=>C.indent)),v=M8(m,y,n);d.push({type:"list",ordered:!0,start:m[0].number,items:v,raw:m.map(C=>C.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:d}),a=p}else a+=1}return i}function Iq(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const a=e.parseChildren([i]);r.push({type:"paragraph",content:a})}else{const a=e.parseChildren([i]);a.length>0&&r.push(...a)}}),{type:"listItem",content:r}})}var Lq="listItem",w4="textStyle",C4=/^(\d+)\.\s$/,D8=Nr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",dn(this.options.HTMLAttributes,n),0]:["ol",dn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?Iq(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[a,s]=Rq(i);if(a.length===0)return;const o=M8(a,0,n);return o.length===0?void 0:{type:"list",ordered:!0,start:((r=a[0])==null?void 0:r.number)||1,items:o,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Lq,this.editor.getAttributes(w4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=fu({find:C4,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=fu({find:C4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(w4)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),jq=/^\s*(\[([( |x])?\])\s$/,R8=Nr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",dn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return sw(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),a=document.createElement("label"),s=document.createElement("span"),o=document.createElement("input"),c=document.createElement("div"),d=p=>{var m,y;o.ariaLabel=((y=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:y.call(m,p,o.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};d(t),a.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",p=>p.preventDefault()),o.addEventListener("change",p=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:m}=p.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:y})=>{const v=n();if(typeof v!="number")return!1;const C=y.doc.nodeAt(v);return y.setNodeMarkup(v,void 0,{...C==null?void 0:C.attrs,checked:m}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,m)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,m])=>{i.setAttribute(p,m)}),i.dataset.checked=t.attrs.checked,o.checked=t.attrs.checked,a.append(o,s),i.append(a,c),Object.entries(e).forEach(([p,m])=>{i.setAttribute(p,m)});let f=new Set(Object.keys(e));return{dom:i,contentDOM:c,update:p=>{if(p.type!==this.type)return!1;i.dataset.checked=p.attrs.checked,o.checked=p.attrs.checked,d(p);const m=r.extensionManager.attributes,y=Af(p,m),v=new Set(Object.keys(y)),C=this.options.HTMLAttributes;return f.forEach(E=>{v.has(E)||(E in C?i.setAttribute(E,C[E]):i.removeAttribute(E))}),Object.entries(y).forEach(([E,S])=>{S==null?E in C?i.setAttribute(E,C[E]):i.removeAttribute(E):i.setAttribute(E,S)}),f=v,!0}}}},addInputRules(){return[fu({find:jq,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),I8=Nr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",dn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=a=>{const s=n2(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:r},n);return s?[{type:"taskList",raw:s.raw,items:s.items}]:n.blockTokens(a)},i=n2(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,s)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:s}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Vt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(E8.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(S8.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(O8.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(D8.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(R8.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(I8.configure(this.options.taskList)),t}});var E4="&nbsp;",Pq="",Bq=Nr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",dn(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===E4||r[0].text===Pq)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?E4:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Fq=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,zq=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Uq=Po.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",dn(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[du({find:Fq,type:this.type})]},addPasteRules(){return[Ul({find:zq,type:this.type})]}}),Hq=Nr.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),L8=Po.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",dn(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const a=i[2].trim();return{type:"underline",raw:i[0],text:a,tokens:n.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Vq=L8;function $q(t={}){return new fn({view(e){return new Gq(e,t)}})}class Gq{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=s=>{this[i](s)};return e.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,a=i.getBoundingClientRect(),s=a.width/i.offsetWidth,o=a.height/i.offsetHeight;if(n){let p=e.nodeBefore,m=e.nodeAfter;if(p||m){let y=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(y){let v=y.getBoundingClientRect(),C=p?v.bottom:v.top;p&&m&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*o;r={left:v.left,right:v.right,top:C-E,bottom:C+E}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*s;r={left:p.left-m,right:p.left+m,top:p.top,bottom:p.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,f;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,f=-pageYOffset;else{let p=c.getBoundingClientRect(),m=p.width/c.offsetWidth,y=p.height/c.offsetHeight;d=p.left-c.scrollLeft*m,f=p.top-c.scrollTop*y}this.element.style.left=(r.left-d)/s+"px",this.element.style.top=(r.top-f)/o+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!a){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=T6(this.editorView.state.doc,s,this.editorView.dragging.slice);o!=null&&(s=o)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Tn extends Qe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Tn.valid(r)?new Tn(r):Qe.near(r)}content(){return Re.empty}eq(e){return e instanceof Tn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Tn(e.resolve(n.pos))}getBookmark(){return new yw(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Wq(e)||!qq(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Tn.valid(e))return e;let i=e.pos,a=null;for(let s=e.depth;;s--){let o=e.node(s);if(n>0?e.indexAfter(s)<o.childCount:e.index(s)>0){a=o.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let c=e.doc.resolve(i);if(Tn.valid(c))return c}for(;;){let s=n>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!qe.isSelectable(a)){e=e.doc.resolve(i+a.nodeSize*n),r=!1;continue e}break}a=s,i+=n;let o=e.doc.resolve(i);if(Tn.valid(o))return o}return null}}}Tn.prototype.visible=!1;Tn.findFrom=Tn.findGapCursorFrom;Qe.jsonID("gapcursor",Tn);class yw{constructor(e){this.pos=e}map(e){return new yw(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Tn.valid(n)?new Tn(n):Qe.near(n)}}function j8(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Wq(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||j8(i.type))return!0;if(i.inlineContent)return!1}}return!0}function qq(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||j8(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Kq(){return new fn({props:{decorations:Jq,createSelectionBetween(t,e,n){return e.pos==n.pos&&Tn.valid(n)?new Tn(n):null},handleClick:Yq,handleKeyDown:Xq,handleDOMEvents:{beforeinput:Zq}}})}const Xq=Yb({ArrowLeft:Mp("horiz",-1),ArrowRight:Mp("horiz",1),ArrowUp:Mp("vert",-1),ArrowDown:Mp("vert",1)});function Mp(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,a){let s=r.selection,o=e>0?s.$to:s.$from,c=s.empty;if(s instanceof Xe){if(!a.endOfTextblock(n)||o.depth==0)return!1;c=!1,o=r.doc.resolve(e>0?o.after():o.before())}let d=Tn.findGapCursorFrom(o,e,c);return d?(i&&i(r.tr.setSelection(new Tn(d))),!0):!1}}function Yq(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Tn.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&qe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Tn(r))),!0)}function Zq(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Tn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=we.empty;for(let s=r.length-1;s>=0;s--)i=we.from(r[s].createAndFill(null,i));let a=t.state.tr.replace(n.pos,n.pos,new Re(i,0,0));return a.setSelection(Xe.near(a.doc.resolve(n.pos+1))),t.dispatch(a),!1}function Jq(t){if(!(t.selection instanceof Tn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Jt.create(t.doc,[ur.widget(t.selection.head,e,{key:"gapcursor"})])}var w1=200,hr=function(){};hr.prototype.append=function(e){return e.length?(e=hr.from(e),!this.length&&e||e.length<w1&&this.leafAppend(e)||this.length<w1&&e.leafPrepend(this)||this.appendInner(e)):this};hr.prototype.prepend=function(e){return e.length?hr.from(e).append(this):this};hr.prototype.appendInner=function(e){return new Qq(this,e)};hr.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?hr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};hr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};hr.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};hr.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(a,s){return i.push(e(a,s))},n,r),i};hr.from=function(e){return e instanceof hr?e:e&&e.length?new P8(e):hr.empty};var P8=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new e(this.values.slice(i,a))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,a,s,o){for(var c=a;c<s;c++)if(i(this.values[c],o+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,a,s,o){for(var c=a-1;c>=s;c--)if(i(this.values[c],o+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=w1)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=w1)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(hr);hr.empty=new P8([]);var Qq=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,a,s){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(a,o),s)===!1||a>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,a)-o,s+o)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,a,s){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(a,o)-o,s+o)===!1||a<o&&this.left.forEachInvertedInner(r,Math.min(i,o),a,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(r,i):r>=a?this.right.slice(r-a,i-a):this.left.slice(r,a).append(this.right.slice(0,i-a))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(hr);const eK=500;class ca{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,a;n&&(i=this.remapping(r,this.items.length),a=i.maps.length);let s=e.tr,o,c,d=[],f=[];return this.items.forEach((p,m)=>{if(!p.step){i||(i=this.remapping(r,m+1),a=i.maps.length),a--,f.push(p);return}if(i){f.push(new ka(p.map));let y=p.step.map(i.slice(a)),v;y&&s.maybeStep(y).doc&&(v=s.mapping.maps[s.mapping.maps.length-1],d.push(new ka(v,void 0,void 0,d.length+f.length))),a--,v&&i.appendMap(v,a)}else s.maybeStep(p.step);if(p.selection)return o=i?p.selection.map(i.slice(a)):p.selection,c=new ca(this.items.slice(0,r).append(f.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:s,selection:o}}addTransform(e,n,r,i){let a=[],s=this.eventCount,o=this.items,c=!i&&o.length?o.get(o.length-1):null;for(let f=0;f<e.steps.length;f++){let p=e.steps[f].invert(e.docs[f]),m=new ka(e.mapping.maps[f],p,n),y;(y=c&&c.merge(m))&&(m=y,f?a.pop():o=o.slice(0,o.length-1)),a.push(m),n&&(s++,n=void 0),i||(c=m)}let d=s-r.depth;return d>nK&&(o=tK(o,d),s-=d),new ca(o.append(a),s)}remapping(e,n){let r=new vf;return this.items.forEach((i,a)=>{let s=i.mirrorOffset!=null&&a-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new ca(this.items.append(e.map(n=>new ka(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),a=e.mapping,s=e.steps.length,o=this.eventCount;this.items.forEach(m=>{m.selection&&o--},i);let c=n;this.items.forEach(m=>{let y=a.getMirror(--c);if(y==null)return;s=Math.min(s,y);let v=a.maps[y];if(m.step){let C=e.steps[y].invert(e.docs[y]),E=m.selection&&m.selection.map(a.slice(c+1,y));E&&o++,r.push(new ka(v,C,E))}else r.push(new ka(v))},i);let d=[];for(let m=n;m<s;m++)d.push(new ka(a.maps[m]));let f=this.items.slice(0,i).append(d).append(r),p=new ca(f,o);return p.emptyItemCount()>eK&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],a=0;return this.items.forEach((s,o)=>{if(o>=e)i.push(s),s.selection&&a++;else if(s.step){let c=s.step.map(n.slice(r)),d=c&&c.getMap();if(r--,d&&n.appendMap(d,r),c){let f=s.selection&&s.selection.map(n.slice(r));f&&a++;let p=new ka(d.invert(),c,f),m,y=i.length-1;(m=i.length&&i[y].merge(p))?i[y]=m:i.push(p)}}else s.map&&r--},this.items.length,0),new ca(hr.from(i.reverse()),a)}}ca.empty=new ca(hr.empty,0);function tK(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class ka{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ka(n.getMap().invert(),n,this.selection)}}}class lo{constructor(e,n,r,i,a){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=a}}const nK=20;function rK(t,e,n,r){let i=n.getMeta(Dl),a;if(i)return i.historyState;n.getMeta(sK)&&(t=new lo(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Dl))return s.getMeta(Dl).redo?new lo(t.done.addTransform(n,void 0,r,n0(e)),t.undone,S4(n.mapping.maps),t.prevTime,t.prevComposition):new lo(t.done,t.undone.addTransform(n,void 0,r,n0(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),c=t.prevTime==0||!s&&t.prevComposition!=o&&(t.prevTime<(n.time||0)-r.newGroupDelay||!iK(n,t.prevRanges)),d=s?Cy(t.prevRanges,n.mapping):S4(n.mapping.maps);return new lo(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,n0(e)),ca.empty,d,n.time,o??t.prevComposition)}else return(a=n.getMeta("rebased"))?new lo(t.done.rebased(n,a),t.undone.rebased(n,a),Cy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new lo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Cy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function iK(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let a=0;a<e.length;a+=2)r<=e[a+1]&&i>=e[a]&&(n=!0)}),n}function S4(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,a,s)=>e.push(a,s));return e}function Cy(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),a=e.map(t[r+1],-1);i<=a&&n.push(i,a)}return n}function aK(t,e,n){let r=n0(e),i=Dl.get(e).spec.config,a=(n?t.undone:t.done).popEvent(e,r);if(!a)return null;let s=a.selection.resolve(a.transform.doc),o=(n?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),i,r),c=new lo(n?o:a.remaining,n?a.remaining:o,null,0,-1);return a.transform.setSelection(s).setMeta(Dl,{redo:n,historyState:c})}let Ey=!1,A4=null;function n0(t){let e=t.plugins;if(A4!=e){Ey=!1,A4=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ey=!0;break}}return Ey}const Dl=new kn("history"),sK=new kn("closeHistory");function oK(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new fn({key:Dl,state:{init(){return new lo(ca.empty,ca.empty,null,0,-1)},apply(e,n,r){return rK(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?F8:r=="historyRedo"?z8:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function B8(t,e){return(n,r)=>{let i=Dl.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let a=aK(i,n,t);a&&r(e?a.scrollIntoView():a)}return!0}}const F8=B8(!1,!0),z8=B8(!0,!0);Vt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new fn({key:new kn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const a=this.storage.characters({node:r.doc});if(a>i){const s=a-i,o=0,c=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(o,c);return t=!0,d}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),a=this.storage.characters({node:e.doc});if(a<=r||i>r&&a>r&&a<=i)return!0;if(i>r&&a>r&&a>i||!e.getMeta("paste"))return!1;const o=e.selection.$head.pos,c=a-r,d=o-c,f=o;return e.deleteRange(d,f),!(this.storage.characters({node:e.doc})>r)}})]}});var lK=Vt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[$q(this.options)]}});Vt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new fn({key:new kn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,a=[];if(!n||!r)return Jt.create(t,[]);let s=0;this.options.mode==="deepest"&&t.descendants((c,d)=>{if(c.isText)return;if(!(i>=d&&i<=d+c.nodeSize-1))return!1;s+=1});let o=0;return t.descendants((c,d)=>{if(c.isText||!(i>=d&&i<=d+c.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&s-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";a.push(ur.node(d,d+c.nodeSize,{class:this.options.className}))}),Jt.create(t,a)}}})]}});var cK=Vt.create({name:"gapCursor",addProseMirrorPlugins(){return[Kq()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Rt(Ge(t,"allowGapCursor",n)))!=null?e:null}}}),_4="placeholder";function uK(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var dK=Vt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:_4,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${uK(this.options.dataAttribute)}`:`data-${_4}`;return[new fn({key:new kn("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,a=[];if(!r)return null;const s=this.editor.isEmpty;return e.descendants((o,c)=>{const d=i>=c&&i<=c+o.nodeSize,f=!o.isLeaf&&dm(o);if((d||!this.options.showOnlyCurrent)&&f){const p=[this.options.emptyNodeClass];s&&p.push(this.options.emptyEditorClass);const m=ur.node(c,c+o.nodeSize,{class:p.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:c,hasAnchor:d}):this.options.placeholder});a.push(m)}return this.options.includeChildren}),Jt.create(e,a)}}})]}});Vt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new fn({key:new kn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||$O(n.selection)||t.view.dragging?null:Jt.create(n.doc,[ur.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function T4({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var fK=Vt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new kn(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new fn({key:e,appendTransaction:(i,a,s)=>{const{doc:o,tr:c,schema:d}=s,f=e.getState(s),p=o.content.size,m=d.nodes[n];if(f)return c.insert(p,m.create())},state:{init:(i,a)=>{const s=a.tr.doc.lastChild;return!T4({node:s,types:r})},apply:(i,a)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return a;const s=i.doc.lastChild;return!T4({node:s,types:r})}}})]}}),hK=Vt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>F8(t,e),redo:()=>({state:t,dispatch:e})=>z8(t,e)}},addProseMirrorPlugins(){return[oK(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),pK=Vt.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(zW.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(LW.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(E8.configure(this.options.bulletList)),this.options.code!==!1&&i.push(VW.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(WW.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(qW.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(lK.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(cK.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(KW.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(XW.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(hK.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(YW.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(tq.configure(this.options.italic)),this.options.listItem!==!1&&i.push(S8.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(O8.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(_q.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(D8.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Bq.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Uq.configure(this.options.strike)),this.options.text!==!1&&i.push(Hq.configure(this.options.text)),this.options.underline!==!1&&i.push(L8.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(fK.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),mK=pK,gK=I8,xK=R8,yK=dK,vK=20,U8=(t,e=0)=>{const n=[];return!t.children.length||e>vK||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...U8(r,e+1))}),n},bK=t=>{if(!t.children.length)return;const e=U8(t);e&&e.forEach(n=>{var r,i;const a=n.getAttribute("style"),s=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${s};${a}`)})},H8=Po.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&bK(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",dn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(a=>!!a))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),wK=Vt.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const a=r[i].split(":");if(a.length>=2){const s=a[0].trim().toLowerCase(),o=a.slice(1).join(":").trim();if(s==="background-color")return o.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),V8=Vt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const a=r[i].split(":");if(a.length>=2){const s=a[0].trim().toLowerCase(),o=a.slice(1).join(":").trim();if(s==="color")return o.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),CK=Vt.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),EK=Vt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),SK=Vt.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Vt.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(wK.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(V8.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(CK.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(EK.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(SK.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(H8.configure(this.options.textStyle)),t}});var AK=V8;let p2,m2;if(typeof WeakMap<"u"){let t=new WeakMap;p2=e=>t.get(e),m2=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;p2=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},m2=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Nn=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let a=r+1,s=i+1;for(let o=1;a<this.width&&this.map[e+o]==n;o++)a++;for(let o=1;s<this.height&&this.map[e+this.width*o]==n;o++)s++;return{left:r,top:i,right:a,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:a,bottom:s}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[a*this.width+(n<0?r-1:i)]:(n<0?a==0:s==this.height)?null:this.map[r+this.width*(n<0?a-1:s)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:a}=this.findCell(t),{left:s,right:o,top:c,bottom:d}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(i,c),right:Math.max(r,o),bottom:Math.max(a,d)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const a=r*this.width+i,s=this.map[a];n[s]||(n[s]=!0,!(i==t.left&&i&&this.map[a-1]==s||r==t.top&&r&&this.map[a-this.width]==s)&&e.push(s))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const a=i+n.child(r).nodeSize;if(r==t){let s=e+t*this.width;const o=(t+1)*this.width;for(;s<o&&this.map[s]<i;)s++;return s==o?a-1:this.map[s]}i=a}}static get(t){return p2(t)||m2(t,_K(t))}};function _K(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=TK(t),n=t.childCount,r=[];let i=0,a=null;const s=[];for(let d=0,f=e*n;d<f;d++)r[d]=0;for(let d=0,f=0;d<n;d++){const p=t.child(d);f++;for(let v=0;;v++){for(;i<r.length&&r[i]!=0;)i++;if(v==p.childCount)break;const C=p.child(v),{colspan:E,rowspan:S,colwidth:_}=C.attrs;for(let N=0;N<S;N++){if(N+d>=n){(a||(a=[])).push({type:"overlong_rowspan",pos:f,n:S-N});break}const k=i+N*e;for(let O=0;O<E;O++){r[k+O]==0?r[k+O]=f:(a||(a=[])).push({type:"collision",row:d,pos:f,n:E-O});const I=_&&_[O];if(I){const M=(k+O)%e*2,L=s[M];L==null||L!=I&&s[M+1]==1?(s[M]=I,s[M+1]=1):L==I&&s[M+1]++}}}i+=E,f+=C.nodeSize}const m=(d+1)*e;let y=0;for(;i<m;)r[i++]==0&&y++;y&&(a||(a=[])).push({type:"missing",row:d,n:y}),f++}(e===0||n===0)&&(a||(a=[])).push({type:"zero_sized"});const o=new Nn(e,n,r,a);let c=!1;for(let d=0;!c&&d<s.length;d+=2)s[d]!=null&&s[d+1]<n&&(c=!0);return c&&NK(o,s,t),o}function TK(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let a=0;if(n)for(let s=0;s<r;s++){const o=t.child(s);for(let c=0;c<o.childCount;c++){const d=o.child(c);s+d.attrs.rowspan>r&&(a+=d.attrs.colspan)}}for(let s=0;s<i.childCount;s++){const o=i.child(s);a+=o.attrs.colspan,o.attrs.rowspan>1&&(n=!0)}e==-1?e=a:e!=a&&(e=Math.max(e,a))}return e}function NK(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const a=t.map[i];if(r[a])continue;r[a]=!0;const s=n.nodeAt(a);if(!s)throw new RangeError(`No cell with offset ${a} found`);let o=null;const c=s.attrs;for(let d=0;d<c.colspan;d++){const f=e[(i+d)%t.width*2];f!=null&&(!c.colwidth||c.colwidth[d]!=f)&&((o||(o=kK(c)))[d]=f)}o&&t.problems.unshift({type:"colwidth mismatch",pos:a,colwidth:o})}}function kK(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Pr(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}const ho=new kn("selectingCells");function Hl(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function OK(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function va(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function mm(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Hl(e.$head)||MK(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function MK(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function g2(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function DK(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function vw(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function $8(t,e,n){const r=t.node(-1),i=Nn.get(r),a=t.start(-1),s=i.nextCell(t.pos-a,e,n);return s==null?null:t.node(0).resolve(a+s)}function Vl(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function G8(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function RK(t,e,n){const r=Pr(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var nn=class fs extends Qe{constructor(e,n=e){const r=e.node(-1),i=Nn.get(r),a=e.start(-1),s=i.rectBetween(e.pos-a,n.pos-a),o=e.node(0),c=i.cellsInRect(s).filter(f=>f!=n.pos-a);c.unshift(n.pos-a);const d=c.map(f=>{const p=r.nodeAt(f);if(!p)throw new RangeError(`No cell with offset ${f} found`);const m=a+f+1;return new D6(o.resolve(m),o.resolve(m+p.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(g2(r)&&g2(i)&&vw(r,i)){const a=this.$anchorCell.node(-1)!=r.node(-1);return a&&this.isRowSelection()?fs.rowSelection(r,i):a&&this.isColSelection()?fs.colSelection(r,i):new fs(r,i)}return Xe.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Nn.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),a={},s=[];for(let c=i.top;c<i.bottom;c++){const d=[];for(let f=c*n.width+i.left,p=i.left;p<i.right;p++,f++){const m=n.map[f];if(a[m])continue;a[m]=!0;const y=n.findCell(m);let v=e.nodeAt(m);if(!v)throw new RangeError(`No cell with offset ${m} found`);const C=i.left-y.left,E=y.right-i.right;if(C>0||E>0){let S=v.attrs;if(C>0&&(S=Vl(S,0,C)),E>0&&(S=Vl(S,S.colspan-E,E)),y.left<i.left){if(v=v.type.createAndFill(S),!v)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(S)}`)}else v=v.type.create(S,v.content)}if(y.top<i.top||y.bottom>i.bottom){const S={...v.attrs,rowspan:Math.min(y.bottom,i.bottom)-Math.max(y.top,i.top)};y.top<i.top?v=v.type.createAndFill(S):v=v.type.create(S,v.content)}d.push(v)}s.push(e.child(c).copy(we.from(d)))}const o=this.isColSelection()&&this.isRowSelection()?e:s;return new Re(we.from(o),1,1)}replace(e,n=Re.empty){const r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){const{$from:o,$to:c}=i[s],d=e.mapping.slice(r);e.replace(d.map(o.pos),d.map(c.pos),s?Re.empty:n)}const a=Qe.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);a&&e.setSelection(a)}replaceWith(e,n){this.replace(e,new Re(we.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Nn.get(n),i=this.$anchorCell.start(-1),a=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<a.length;s++)e(n.nodeAt(a[s]),i+a[s])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Nn.get(r),a=e.start(-1),s=i.findCell(e.pos-a),o=i.findCell(n.pos-a),c=e.node(0);return s.top<=o.top?(s.top>0&&(e=c.resolve(a+i.map[s.left])),o.bottom<i.height&&(n=c.resolve(a+i.map[i.width*(i.height-1)+o.right-1]))):(o.top>0&&(n=c.resolve(a+i.map[o.left])),s.bottom<i.height&&(e=c.resolve(a+i.map[i.width*(i.height-1)+s.right-1]))),new fs(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Nn.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),a=n.colCount(this.$headCell.pos-r);if(Math.min(i,a)>0)return!1;const s=i+this.$anchorCell.nodeAfter.attrs.colspan,o=a+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,o)==n.width}eq(e){return e instanceof fs&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Nn.get(r),a=e.start(-1),s=i.findCell(e.pos-a),o=i.findCell(n.pos-a),c=e.node(0);return s.left<=o.left?(s.left>0&&(e=c.resolve(a+i.map[s.top*i.width])),o.right<i.width&&(n=c.resolve(a+i.map[i.width*(o.top+1)-1]))):(o.left>0&&(n=c.resolve(a+i.map[o.top*i.width])),s.right<i.width&&(e=c.resolve(a+i.map[i.width*(s.top+1)-1]))),new fs(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new fs(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new fs(e.resolve(n),e.resolve(r))}getBookmark(){return new IK(this.$anchorCell.pos,this.$headCell.pos)}};nn.prototype.visible=!1;Qe.jsonID("cell",nn);var IK=class W8{constructor(e,n){this.anchor=e,this.head=n}map(e){return new W8(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&vw(n,r)?new nn(n,r):Qe.near(r,1)}};function LK(t){if(!(t.selection instanceof nn))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(ur.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Jt.create(t.doc,e)}function jK({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let a=e.depth;a>=0&&!(e.before(a+1)>e.start(a));a--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function PK({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const a=t.node(i);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){n=a;break}}for(let i=e.depth;i>0;i--){const a=e.node(i);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){r=a;break}}return n!==r&&e.parentOffset===0}function BK(t,e,n){const r=(e||t).selection,i=(e||t).doc;let a,s;if(r instanceof qe&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")a=nn.create(i,r.from);else if(s=="row"){const o=i.resolve(r.from+1);a=nn.rowSelection(o,o)}else if(!n){const o=Nn.get(r.node),c=r.from+1,d=c+o.map[o.width*o.height-1];a=nn.create(i,c+1,d)}}else r instanceof Xe&&jK(r)?a=Xe.create(i,r.from):r instanceof Xe&&PK(r)&&(a=Xe.create(i,r.$from.start(),r.$from.end()));return a&&(e||(e=t.tr)).setSelection(a),e}const FK=new kn("fix-tables");function q8(t,e,n,r){const i=t.childCount,a=e.childCount;e:for(let s=0,o=0;s<a;s++){const c=e.child(s);for(let d=o,f=Math.min(i,s+3);d<f;d++)if(t.child(d)==c){o=d+1,n+=c.nodeSize;continue e}r(c,n),o<i&&t.child(o).sameMarkup(c)?q8(t.child(o),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function K8(t,e){let n;const r=(i,a)=>{i.type.spec.tableRole=="table"&&(n=zK(t,i,a,n))};return e?e.doc!=t.doc&&q8(e.doc,t.doc,0,r):t.doc.descendants(r),n}function zK(t,e,n,r){const i=Nn.get(e);if(!i.problems)return r;r||(r=t.tr);const a=[];for(let c=0;c<i.height;c++)a.push(0);for(let c=0;c<i.problems.length;c++){const d=i.problems[c];if(d.type=="collision"){const f=e.nodeAt(d.pos);if(!f)continue;const p=f.attrs;for(let m=0;m<p.rowspan;m++)a[d.row+m]+=d.n;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,Vl(p,p.colspan-d.n,d.n))}else if(d.type=="missing")a[d.row]+=d.n;else if(d.type=="overlong_rowspan"){const f=e.nodeAt(d.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,{...f.attrs,rowspan:f.attrs.rowspan-d.n})}else if(d.type=="colwidth mismatch"){const f=e.nodeAt(d.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,{...f.attrs,colwidth:d.colwidth})}else if(d.type=="zero_sized"){const f=r.mapping.map(n);r.delete(f,f+e.nodeSize)}}let s,o;for(let c=0;c<a.length;c++)a[c]&&(s==null&&(s=c),o=c);for(let c=0,d=n+1;c<i.height;c++){const f=e.child(c),p=d+f.nodeSize,m=a[c];if(m>0){let y="cell";f.firstChild&&(y=f.firstChild.type.spec.tableRole);const v=[];for(let E=0;E<m;E++){const S=Pr(t.schema)[y].createAndFill();S&&v.push(S)}const C=(c==0||s==c-1)&&o==c?d+1:p-1;r.insert(r.mapping.map(C),v)}d=p}return r.setMeta(FK,{fixTables:!0})}function Ua(t){const e=t.selection,n=mm(t),r=n.node(-1),i=n.start(-1),a=Nn.get(r);return{...e instanceof nn?a.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):a.findCell(n.pos-i),tableStart:i,map:a,table:r}}function X8(t,{map:e,tableStart:n,table:r},i){let a=i>0?-1:0;RK(e,r,i+a)&&(a=i==0||i==e.width?null:0);for(let s=0;s<e.height;s++){const o=s*e.width+i;if(i>0&&i<e.width&&e.map[o-1]==e.map[o]){const c=e.map[o],d=r.nodeAt(c);t.setNodeMarkup(t.mapping.map(n+c),null,G8(d.attrs,i-e.colCount(c))),s+=d.attrs.rowspan-1}else{const c=a==null?Pr(r.type.schema).cell:r.nodeAt(e.map[o+a]).type,d=e.positionAt(s,i,r);t.insert(t.mapping.map(n+d),c.createAndFill())}}return t}function UK(t,e){if(!va(t))return!1;if(e){const n=Ua(t);e(X8(t.tr,n,n.left))}return!0}function HK(t,e){if(!va(t))return!1;if(e){const n=Ua(t);e(X8(t.tr,n,n.right))}return!0}function VK(t,{map:e,table:n,tableStart:r},i){const a=t.mapping.maps.length;for(let s=0;s<e.height;){const o=s*e.width+i,c=e.map[o],d=n.nodeAt(c),f=d.attrs;if(i>0&&e.map[o-1]==c||i<e.width-1&&e.map[o+1]==c)t.setNodeMarkup(t.mapping.slice(a).map(r+c),null,Vl(f,i-e.colCount(c)));else{const p=t.mapping.slice(a).map(r+c);t.delete(p,p+d.nodeSize)}s+=f.rowspan}}function $K(t,e){if(!va(t))return!1;if(e){const n=Ua(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;VK(r,n,i),i!=n.left;i--){const a=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!a)throw new RangeError("No table found");n.table=a,n.map=Nn.get(a)}e(r)}return!0}function GK(t,e,n){var r;const i=Pr(e.type.schema).header_cell;for(let a=0;a<t.width;a++)if(((r=e.nodeAt(t.map[a+n*t.width]))===null||r===void 0?void 0:r.type)!=i)return!1;return!0}function Y8(t,{map:e,tableStart:n,table:r},i){let a=n;for(let d=0;d<i;d++)a+=r.child(d).nodeSize;const s=[];let o=i>0?-1:0;GK(e,r,i+o)&&(o=i==0||i==e.height?null:0);for(let d=0,f=e.width*i;d<e.width;d++,f++)if(i>0&&i<e.height&&e.map[f]==e.map[f-e.width]){const p=e.map[f],m=r.nodeAt(p).attrs;t.setNodeMarkup(n+p,null,{...m,rowspan:m.rowspan+1}),d+=m.colspan-1}else{var c;const p=o==null?Pr(r.type.schema).cell:(c=r.nodeAt(e.map[f+o*e.width]))===null||c===void 0?void 0:c.type,m=p==null?void 0:p.createAndFill();m&&s.push(m)}return t.insert(a,Pr(r.type.schema).row.create(null,s)),t}function WK(t,e){if(!va(t))return!1;if(e){const n=Ua(t);e(Y8(t.tr,n,n.top))}return!0}function qK(t,e){if(!va(t))return!1;if(e){const n=Ua(t);e(Y8(t.tr,n,n.bottom))}return!0}function KK(t,{map:e,table:n,tableStart:r},i){let a=0;for(let d=0;d<i;d++)a+=n.child(d).nodeSize;const s=a+n.child(i).nodeSize,o=t.mapping.maps.length;t.delete(a+r,s+r);const c=new Set;for(let d=0,f=i*e.width;d<e.width;d++,f++){const p=e.map[f];if(!c.has(p)){if(c.add(p),i>0&&p==e.map[f-e.width]){const m=n.nodeAt(p).attrs;t.setNodeMarkup(t.mapping.slice(o).map(p+r),null,{...m,rowspan:m.rowspan-1}),d+=m.colspan-1}else if(i<e.height&&p==e.map[f+e.width]){const m=n.nodeAt(p),y=m.attrs,v=m.type.create({...y,rowspan:m.attrs.rowspan-1},m.content),C=e.positionAt(i+1,d,n);t.insert(t.mapping.slice(o).map(r+C),v),d+=y.colspan-1}}}}function XK(t,e){if(!va(t))return!1;if(e){const n=Ua(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;KK(r,n,i),i!=n.top;i--){const a=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!a)throw new RangeError("No table found");n.table=a,n.map=Nn.get(n.table)}e(r)}return!0}function N4(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function YK({width:t,height:e,map:n},r){let i=r.top*t+r.left,a=i,s=(r.bottom-1)*t+r.left,o=i+(r.right-r.left-1);for(let c=r.top;c<r.bottom;c++){if(r.left>0&&n[a]==n[a-1]||r.right<t&&n[o]==n[o+1])return!0;a+=t,o+=t}for(let c=r.left;c<r.right;c++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[s]==n[s+t])return!0;i++,s++}return!1}function k4(t,e){const n=t.selection;if(!(n instanceof nn)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Ua(t),{map:i}=r;if(YK(i,r))return!1;if(e){const a=t.tr,s={};let o=we.empty,c,d;for(let f=r.top;f<r.bottom;f++)for(let p=r.left;p<r.right;p++){const m=i.map[f*i.width+p],y=r.table.nodeAt(m);if(!(s[m]||!y))if(s[m]=!0,c==null)c=m,d=y;else{N4(y)||(o=o.append(y.content));const v=a.mapping.map(m+r.tableStart);a.delete(v,v+y.nodeSize)}}if(c==null||d==null)return!0;if(a.setNodeMarkup(c+r.tableStart,null,{...G8(d.attrs,d.attrs.colspan,r.right-r.left-d.attrs.colspan),rowspan:r.bottom-r.top}),o.size>0){const f=c+1+d.content.size,p=N4(d)?c+1:f;a.replaceWith(p+r.tableStart,f+r.tableStart,o)}a.setSelection(new nn(a.doc.resolve(c+r.tableStart))),e(a)}return!0}function O4(t,e){const n=Pr(t.schema);return ZK(({node:r})=>n[r.type.spec.tableRole])(t,e)}function ZK(t){return(e,n)=>{const r=e.selection;let i,a;if(r instanceof nn){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,a=r.$anchorCell.pos}else{var s;if(i=OK(r.$from),!i)return!1;a=(s=Hl(r.$from))===null||s===void 0?void 0:s.pos}if(i==null||a==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let o=i.attrs;const c=[],d=o.colwidth;o.rowspan>1&&(o={...o,rowspan:1}),o.colspan>1&&(o={...o,colspan:1});const f=Ua(e),p=e.tr;for(let y=0;y<f.right-f.left;y++)c.push(d?{...o,colwidth:d&&d[y]?[d[y]]:null}:o);let m;for(let y=f.top;y<f.bottom;y++){let v=f.map.positionAt(y,f.left,f.table);y==f.top&&(v+=i.nodeSize);for(let C=f.left,E=0;C<f.right;C++,E++)C==f.left&&y==f.top||p.insert(m=p.mapping.map(v+f.tableStart,1),t({node:i,row:y,col:C}).createAndFill(c[E]))}p.setNodeMarkup(a,t({node:i,row:f.top,col:f.left}),c[0]),r instanceof nn&&p.setSelection(new nn(p.doc.resolve(r.$anchorCell.pos),m?p.doc.resolve(m):void 0)),n(p)}return!0}}function JK(t,e){return function(n,r){if(!va(n))return!1;const i=mm(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const a=n.tr;n.selection instanceof nn?n.selection.forEachCell((s,o)=>{s.attrs[t]!==e&&a.setNodeMarkup(o,null,{...s.attrs,[t]:e})}):a.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(a)}return!0}}function QK(t){return function(e,n){if(!va(e))return!1;if(n){const r=Pr(e.schema),i=Ua(e),a=e.tr,s=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),o=s.map(c=>i.table.nodeAt(c));for(let c=0;c<s.length;c++)o[c].type==r.header_cell&&a.setNodeMarkup(i.tableStart+s[c],r.cell,o[c].attrs);if(a.steps.length===0)for(let c=0;c<s.length;c++)a.setNodeMarkup(i.tableStart+s[c],r.header_cell,o[c].attrs);n(a)}return!0}}function M4(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const a=e.table.nodeAt(r[i]);if(a&&a.type!==n.header_cell)return!1}return!0}function Nf(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?QK(t):function(n,r){if(!va(n))return!1;if(r){const i=Pr(n.schema),a=Ua(n),s=n.tr,o=M4("row",a,i),c=M4("column",a,i),d=(t==="column"?o:t==="row"&&c)?1:0,f=t=="column"?{left:0,top:d,right:1,bottom:a.map.height}:t=="row"?{left:d,top:0,right:a.map.width,bottom:1}:a,p=t=="column"?c?i.cell:i.header_cell:t=="row"?o?i.cell:i.header_cell:i.cell;a.map.cellsInRect(f).forEach(m=>{const y=m+a.tableStart,v=s.doc.nodeAt(y);v&&s.setNodeMarkup(y,p,v.attrs)}),r(s)}return!0}}Nf("row",{useDeprecatedLogic:!0});Nf("column",{useDeprecatedLogic:!0});const eX=Nf("cell",{useDeprecatedLogic:!0});function tX(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const a=t.node(-1).child(r),s=a.lastChild;if(s)return i-1-s.nodeSize;i-=a.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const a=n.child(r);if(a.childCount)return i+1;i+=a.nodeSize}}return null}function D4(t){return function(e,n){if(!va(e))return!1;const r=tX(mm(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(Xe.between(i,DK(i))).scrollIntoView())}return!0}}function nX(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Dp(t,e){const n=t.selection;if(!(n instanceof nn))return!1;if(e){const r=t.tr,i=Pr(t.schema).cell.createAndFill().content;n.forEachCell((a,s)=>{a.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+a.nodeSize-1),new Re(i,0,0))}),r.docChanged&&e(r)}return!0}function rX(t){if(t.size===0)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),a=i.type.spec.tableRole,s=i.type.schema,o=[];if(a=="row")for(let c=0;c<e.childCount;c++){let d=e.child(c).content;const f=c?0:Math.max(0,n-1),p=c<e.childCount-1?0:Math.max(0,r-1);(f||p)&&(d=x2(Pr(s).row,new Re(d,f,p)).content),o.push(d)}else if(a=="cell"||a=="header_cell")o.push(n||r?x2(Pr(s).row,new Re(e,n,r)).content:e);else return null;return iX(s,o)}function iX(t,e){const n=[];for(let i=0;i<e.length;i++){const a=e[i];for(let s=a.childCount-1;s>=0;s--){const{rowspan:o,colspan:c}=a.child(s).attrs;for(let d=i;d<i+o;d++)n[d]=(n[d]||0)+c}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(we.empty),n[i]<r){const a=Pr(t).cell.createAndFill(),s=[];for(let o=n[i];o<r;o++)s.push(a);e[i]=e[i].append(we.from(s))}return{height:e.length,width:r,rows:e}}function x2(t,e){const n=t.createAndFill();return new Ib(n).replace(0,n.content.size,e).doc}function aX({width:t,height:e,rows:n},r,i){if(t!=r){const a=[],s=[];for(let o=0;o<n.length;o++){const c=n[o],d=[];for(let f=a[o]||0,p=0;f<r;p++){let m=c.child(p%c.childCount);f+m.attrs.colspan>r&&(m=m.type.createChecked(Vl(m.attrs,m.attrs.colspan,f+m.attrs.colspan-r),m.content)),d.push(m),f+=m.attrs.colspan;for(let y=1;y<m.attrs.rowspan;y++)a[o+y]=(a[o+y]||0)+m.attrs.colspan}s.push(we.from(d))}n=s,t=r}if(e!=i){const a=[];for(let s=0,o=0;s<i;s++,o++){const c=[],d=n[o%e];for(let f=0;f<d.childCount;f++){let p=d.child(f);s+p.attrs.rowspan>i&&(p=p.type.create({...p.attrs,rowspan:Math.max(1,i-p.attrs.rowspan)},p.content)),c.push(p)}a.push(we.from(c))}n=a,e=i}return{width:t,height:e,rows:n}}function sX(t,e,n,r,i,a,s){const o=t.doc.type.schema,c=Pr(o);let d,f;if(i>e.width)for(let p=0,m=0;p<e.height;p++){const y=n.child(p);m+=y.nodeSize;const v=[];let C;y.lastChild==null||y.lastChild.type==c.cell?C=d||(d=c.cell.createAndFill()):C=f||(f=c.header_cell.createAndFill());for(let E=e.width;E<i;E++)v.push(C);t.insert(t.mapping.slice(s).map(m-1+r),v)}if(a>e.height){const p=[];for(let v=0,C=(e.height-1)*e.width;v<Math.max(e.width,i);v++){const E=v>=e.width?!1:n.nodeAt(e.map[C+v]).type==c.header_cell;p.push(E?f||(f=c.header_cell.createAndFill()):d||(d=c.cell.createAndFill()))}const m=c.row.create(null,we.from(p)),y=[];for(let v=e.height;v<a;v++)y.push(m);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),y)}return!!(d||f)}function R4(t,e,n,r,i,a,s,o){if(s==0||s==e.height)return!1;let c=!1;for(let d=i;d<a;d++){const f=s*e.width+d,p=e.map[f];if(e.map[f-e.width]==p){c=!0;const m=n.nodeAt(p),{top:y,left:v}=e.findCell(p);t.setNodeMarkup(t.mapping.slice(o).map(p+r),null,{...m.attrs,rowspan:s-y}),t.insert(t.mapping.slice(o).map(e.positionAt(s,v,n)),m.type.createAndFill({...m.attrs,rowspan:y+m.attrs.rowspan-s})),d+=m.attrs.colspan-1}}return c}function I4(t,e,n,r,i,a,s,o){if(s==0||s==e.width)return!1;let c=!1;for(let d=i;d<a;d++){const f=d*e.width+s,p=e.map[f];if(e.map[f-1]==p){c=!0;const m=n.nodeAt(p),y=e.colCount(p),v=t.mapping.slice(o).map(p+r);t.setNodeMarkup(v,null,Vl(m.attrs,s-y,m.attrs.colspan-(s-y))),t.insert(v+m.nodeSize,m.type.createAndFill(Vl(m.attrs,0,s-y))),d+=m.attrs.rowspan-1}}return c}function L4(t,e,n,r,i){let a=n?t.doc.nodeAt(n-1):t.doc;if(!a)throw new Error("No table found");let s=Nn.get(a);const{top:o,left:c}=r,d=c+i.width,f=o+i.height,p=t.tr;let m=0;function y(){if(a=n?p.doc.nodeAt(n-1):p.doc,!a)throw new Error("No table found");s=Nn.get(a),m=p.mapping.maps.length}sX(p,s,a,n,d,f,m)&&y(),R4(p,s,a,n,c,d,o,m)&&y(),R4(p,s,a,n,c,d,f,m)&&y(),I4(p,s,a,n,o,f,c,m)&&y(),I4(p,s,a,n,o,f,d,m)&&y();for(let v=o;v<f;v++){const C=s.positionAt(v,c,a),E=s.positionAt(v,d,a);p.replace(p.mapping.slice(m).map(C+n),p.mapping.slice(m).map(E+n),new Re(i.rows[v-o],0,0))}y(),p.setSelection(new nn(p.doc.resolve(n+s.positionAt(o,c,a)),p.doc.resolve(n+s.positionAt(f-1,d-1,a)))),e(p)}const oX=Yb({ArrowLeft:Rp("horiz",-1),ArrowRight:Rp("horiz",1),ArrowUp:Rp("vert",-1),ArrowDown:Rp("vert",1),"Shift-ArrowLeft":Ip("horiz",-1),"Shift-ArrowRight":Ip("horiz",1),"Shift-ArrowUp":Ip("vert",-1),"Shift-ArrowDown":Ip("vert",1),Backspace:Dp,"Mod-Backspace":Dp,Delete:Dp,"Mod-Delete":Dp});function r0(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Rp(t,e){return(n,r,i)=>{if(!i)return!1;const a=n.selection;if(a instanceof nn)return r0(n,r,Qe.near(a.$headCell,e));if(t!="horiz"&&!a.empty)return!1;const s=Z8(i,t,e);if(s==null)return!1;if(t=="horiz")return r0(n,r,Qe.near(n.doc.resolve(a.head+e),e));{const o=n.doc.resolve(s),c=$8(o,t,e);let d;return c?d=Qe.near(c,1):e<0?d=Qe.near(n.doc.resolve(o.before(-1)),-1):d=Qe.near(n.doc.resolve(o.after(-1)),1),r0(n,r,d)}}}function Ip(t,e){return(n,r,i)=>{if(!i)return!1;const a=n.selection;let s;if(a instanceof nn)s=a;else{const c=Z8(i,t,e);if(c==null)return!1;s=new nn(n.doc.resolve(c))}const o=$8(s.$headCell,t,e);return o?r0(n,r,new nn(s.$anchorCell,o)):!1}}function lX(t,e){const n=t.state.doc,r=Hl(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new nn(r))),!0):!1}function cX(t,e,n){if(!va(t.state))return!1;let r=rX(n);const i=t.state.selection;if(i instanceof nn){r||(r={width:1,height:1,rows:[we.from(x2(Pr(t.state.schema).cell,n))]});const a=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),o=Nn.get(a).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=aX(r,o.right-o.left,o.bottom-o.top),L4(t.state,t.dispatch,s,o,r),!0}else if(r){const a=mm(t.state),s=a.start(-1);return L4(t.state,t.dispatch,s,Nn.get(a.node(-1)).findCell(a.pos-s),r),!0}else return!1}function uX(t,e){var n;if(e.button!=0||e.ctrlKey||e.metaKey)return;const r=j4(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof nn)a(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Hl(t.state.selection.$anchor))!=null&&((n=Sy(t,e))===null||n===void 0?void 0:n.pos)!=i.pos)a(i,e),e.preventDefault();else if(!r)return;function a(c,d){let f=Sy(t,d);const p=ho.getState(t.state)==null;if(!f||!vw(c,f))if(p)f=c;else return;const m=new nn(c,f);if(p||!t.state.selection.eq(m)){const y=t.state.tr.setSelection(m);p&&y.setMeta(ho,c.pos),t.dispatch(y)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",o),ho.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(ho,-1))}function o(c){const d=c,f=ho.getState(t.state);let p;if(f!=null)p=t.state.doc.resolve(f);else if(j4(t,d.target)!=r&&(p=Sy(t,e),!p))return s();p&&a(p,d)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",o)}function Z8(t,e,n){if(!(t.state.selection instanceof Xe))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const a=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:a.childCount))return null;if(a.type.spec.tableRole=="cell"||a.type.spec.tableRole=="header_cell"){const s=r.before(i),o=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(o)?s:null}}return null}function j4(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Sy(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return null;let{inside:r,pos:i}=n;return r>=0&&Hl(t.state.doc.resolve(r))||Hl(t.state.doc.resolve(i))}var dX=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),y2(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,y2(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function y2(t,e,n,r,i,a){let s=0,o=!0,c=e.firstChild;const d=t.firstChild;if(d){for(let p=0,m=0;p<d.childCount;p++){const{colspan:y,colwidth:v}=d.child(p).attrs;for(let C=0;C<y;C++,m++){const E=i==m?a:v&&v[C],S=E?E+"px":"";if(s+=E||r,E||(o=!1),c)c.style.width!=S&&(c.style.width=S),c=c.nextSibling;else{const _=document.createElement("col");_.style.width=S,e.appendChild(_)}}}for(;c;){var f;const p=c.nextSibling;(f=c.parentNode)===null||f===void 0||f.removeChild(c),c=p}o?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}const Ti=new kn("tableColumnResizing");function fX({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=dX,lastColumnResizable:i=!0}={}){const a=new fn({key:Ti,state:{init(s,o){var c;const d=(c=a.spec)===null||c===void 0||(c=c.props)===null||c===void 0?void 0:c.nodeViews,f=Pr(o.schema).table.name;return r&&d&&(d[f]=(p,m)=>new r(p,n,m)),new hX(-1,!1)},apply(s,o){return o.apply(s)}},props:{attributes:s=>{const o=Ti.getState(s);return o&&o.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,o)=>{pX(s,o,t,i)},mouseleave:s=>{mX(s)},mousedown:(s,o)=>{gX(s,o,e,n)}},decorations:s=>{const o=Ti.getState(s);if(o&&o.activeHandle>-1)return wX(s,o.activeHandle)},nodeViews:{}}});return a}var hX=class i0{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Ti);if(r&&r.setHandle!=null)return new i0(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new i0(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return g2(e.doc.resolve(i))||(i=-1),new i0(i,n.dragging)}return n}};function pX(t,e,n,r){if(!t.editable)return;const i=Ti.getState(t.state);if(i&&!i.dragging){const a=yX(e.target);let s=-1;if(a){const{left:o,right:c}=a.getBoundingClientRect();e.clientX-o<=n?s=P4(t,e,"left",n):c-e.clientX<=n&&(s=P4(t,e,"right",n))}if(s!=i.activeHandle){if(!r&&s!==-1){const o=t.state.doc.resolve(s),c=o.node(-1),d=Nn.get(c),f=o.start(-1);if(d.colCount(o.pos-f)+o.nodeAfter.attrs.colspan-1==d.width-1)return}J8(t,s)}}}function mX(t){if(!t.editable)return;const e=Ti.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&J8(t,-1)}function gX(t,e,n,r){var i;if(!t.editable)return!1;const a=(i=t.dom.ownerDocument.defaultView)!==null&&i!==void 0?i:window,s=Ti.getState(t.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const o=t.state.doc.nodeAt(s.activeHandle),c=xX(t,s.activeHandle,o.attrs);t.dispatch(t.state.tr.setMeta(Ti,{setDragging:{startX:e.clientX,startWidth:c}}));function d(p){a.removeEventListener("mouseup",d),a.removeEventListener("mousemove",f);const m=Ti.getState(t.state);m!=null&&m.dragging&&(vX(t,m.activeHandle,B4(m.dragging,p,n)),t.dispatch(t.state.tr.setMeta(Ti,{setDragging:null})))}function f(p){if(!p.which)return d(p);const m=Ti.getState(t.state);if(m&&m.dragging){const y=B4(m.dragging,p,n);F4(t,m.activeHandle,y,r)}}return F4(t,s.activeHandle,c,r),a.addEventListener("mouseup",d),a.addEventListener("mousemove",f),e.preventDefault(),!0}function xX(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const a=t.domAtPos(e);let s=a.node.childNodes[a.offset].offsetWidth,o=n;if(r)for(let c=0;c<n;c++)r[c]&&(s-=r[c],o--);return s/o}function yX(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function P4(t,e,n,r){const i=n=="right"?-r:r,a=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!a)return-1;const{pos:s}=a,o=Hl(t.state.doc.resolve(s));if(!o)return-1;if(n=="right")return o.pos;const c=Nn.get(o.node(-1)),d=o.start(-1),f=c.map.indexOf(o.pos-d);return f%c.width==0?-1:d+c.map[f-1]}function B4(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function J8(t,e){t.dispatch(t.state.tr.setMeta(Ti,{setHandle:e}))}function vX(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),a=Nn.get(i),s=r.start(-1),o=a.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=t.state.tr;for(let d=0;d<a.height;d++){const f=d*a.width+o;if(d&&a.map[f]==a.map[f-a.width])continue;const p=a.map[f],m=i.nodeAt(p).attrs,y=m.colspan==1?0:o-a.colCount(p);if(m.colwidth&&m.colwidth[y]==n)continue;const v=m.colwidth?m.colwidth.slice():bX(m.colspan);v[y]=n,c.setNodeMarkup(s+p,null,{...m,colwidth:v})}c.docChanged&&t.dispatch(c)}function F4(t,e,n,r){const i=t.state.doc.resolve(e),a=i.node(-1),s=i.start(-1),o=Nn.get(a).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let c=t.domAtPos(i.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&y2(a,c.firstChild,c,r,o,n)}function bX(t){return Array(t).fill(0)}function wX(t,e){const n=[],r=t.doc.resolve(e),i=r.node(-1);if(!i)return Jt.empty;const a=Nn.get(i),s=r.start(-1),o=a.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1;for(let d=0;d<a.height;d++){const f=o+d*a.width;if((o==a.width-1||a.map[f]!=a.map[f+1])&&(d==0||a.map[f]!=a.map[f-a.width])){var c;const p=a.map[f],m=s+p+i.nodeAt(p).nodeSize-1,y=document.createElement("div");y.className="column-resize-handle",!((c=Ti.getState(t))===null||c===void 0)&&c.dragging&&n.push(ur.node(s+p,s+p+i.nodeAt(p).nodeSize,{class:"column-resize-dragging"})),n.push(ur.widget(m,y))}}return Jt.create(t.doc,n)}function CX({allowTableNodeSelection:t=!1}={}){return new fn({key:ho,state:{init(){return null},apply(e,n){const r=e.getMeta(ho);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:a}=e.mapping.mapResult(n);return i?null:a}},props:{decorations:LK,handleDOMEvents:{mousedown:uX},createSelectionBetween(e){return ho.getState(e.state)!=null?e.state.selection:null},handleTripleClick:lX,handleKeyDown:oX,handlePaste:cX},appendTransaction(e,n,r){return BK(r,K8(r,n),t)}})}var Q8=Nr.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),i=r?r.split(",").map(a=>parseInt(a,10)):null;if(!i){const a=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),s=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(s&&s>-1&&a&&a[s]){const o=a[s].getAttribute("width");return o?[parseInt(o,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",dn(this.options.HTMLAttributes,t),0]}}),eM=Nr.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",dn(this.options.HTMLAttributes,t),0]}}),tM=Nr.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",dn(this.options.HTMLAttributes,t),0]}});function v2(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function z4(t,e,n,r,i,a){var s;let o=0,c=!0,d=e.firstChild;const f=t.firstChild;if(f!==null)for(let m=0,y=0;m<f.childCount;m+=1){const{colspan:v,colwidth:C}=f.child(m).attrs;for(let E=0;E<v;E+=1,y+=1){const S=i===y?a:C&&C[E],_=S?`${S}px`:"";if(o+=S||r,S||(c=!1),d){if(d.style.width!==_){const[N,k]=v2(r,S);d.style.setProperty(N,k)}d=d.nextSibling}else{const N=document.createElement("col"),[k,O]=v2(r,S);N.style.setProperty(k,O),e.appendChild(N)}}}for(;d;){const m=d.nextSibling;(s=d.parentNode)==null||s.removeChild(d),d=m}const p=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);c&&!p?(n.style.width=`${o}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${o}px`)}var EX=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),z4(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,z4(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function SX(t,e,n,r){let i=0,a=!0;const s=[],o=t.firstChild;if(!o)return{};for(let p=0,m=0;p<o.childCount;p+=1){const{colspan:y,colwidth:v}=o.child(p).attrs;for(let C=0;C<y;C+=1,m+=1){const E=n===m?r:v&&v[C];i+=E||e,E||(a=!1);const[S,_]=v2(e,E);s.push(["col",{style:`${S}: ${_}`}])}}const c=a?`${i}px`:"",d=a?"":`${i}px`;return{colgroup:["colgroup",{},...s],tableWidth:c,tableMinWidth:d}}function U4(t,e){return t.createAndFill()}function AX(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function _X(t,e,n,r,i){const a=AX(t),s=[],o=[];for(let d=0;d<n;d+=1){const f=U4(a.cell);if(f&&o.push(f),r){const p=U4(a.header_cell);p&&s.push(p)}}const c=[];for(let d=0;d<e;d+=1)c.push(a.row.createChecked(null,r&&d===0?s:o));return a.table.createChecked(null,c)}function TX(t){return t instanceof nn}var Lp=({editor:t})=>{const{selection:e}=t.state;if(!TX(e))return!1;let n=0;const r=jO(e.ranges[0].$from,a=>a.type.name==="table");return r==null||r.node.descendants(a=>{if(a.type.name==="table")return!1;["tableCell","tableHeader"].includes(a.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},NX="";function kX(t){return(t||"").replace(/\s+/g," ").trim()}function OX(t,e,n={}){var r;const i=(r=n.cellLineSeparator)!=null?r:NX;if(!t||!t.content||t.content.length===0)return"";const a=[];t.content.forEach(v=>{const C=[];v.content&&v.content.forEach(E=>{let S="";E.content&&Array.isArray(E.content)&&E.content.length>1?S=E.content.map(O=>e.renderChildren(O)).join(i):S=E.content?e.renderChildren(E.content):"";const _=kX(S),N=E.type==="tableHeader";C.push({text:_,isHeader:N})}),a.push(C)});const s=a.reduce((v,C)=>Math.max(v,C.length),0);if(s===0)return"";const o=new Array(s).fill(0);a.forEach(v=>{var C;for(let E=0;E<s;E+=1){const _=(((C=v[E])==null?void 0:C.text)||"").length;_>o[E]&&(o[E]=_),o[E]<3&&(o[E]=3)}});const c=(v,C)=>v+" ".repeat(Math.max(0,C-v.length)),d=a[0],f=d.some(v=>v.isHeader);let p=`
`;const m=new Array(s).fill(0).map((v,C)=>f&&d[C]&&d[C].text||"");return p+=`| ${m.map((v,C)=>c(v,o[C])).join(" | ")} |
`,p+=`| ${o.map(v=>"-".repeat(Math.max(3,v))).join(" | ")} |
`,(f?a.slice(1):a).forEach(v=>{p+=`| ${new Array(s).fill(0).map((C,E)=>c(v[E]&&v[E].text||"",o[E])).join(" | ")} |
`}),p}var MX=OX,nM=Nr.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:EX,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=SX(t,this.options.cellMinWidth),a=e.style;function s(){return a||(r?`width: ${r}`:`min-width: ${i}`)}const o=["table",dn(this.options.HTMLAttributes,e,{style:s()}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},o]:o},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(i=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const i=[];r.forEach(a=>{i.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(a.tokens)}]))}),n.push(e.createNode("tableRow",{},i))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>MX(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:a})=>{const s=_X(a.schema,t,e,n);if(i){const o=r.selection.from+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(Xe.near(r.doc.resolve(o)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>UK(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>HK(t,e),deleteColumn:()=>({state:t,dispatch:e})=>$K(t,e),addRowBefore:()=>({state:t,dispatch:e})=>WK(t,e),addRowAfter:()=>({state:t,dispatch:e})=>qK(t,e),deleteRow:()=>({state:t,dispatch:e})=>XK(t,e),deleteTable:()=>({state:t,dispatch:e})=>nX(t,e),mergeCells:()=>({state:t,dispatch:e})=>k4(t,e),splitCell:()=>({state:t,dispatch:e})=>O4(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Nf("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Nf("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>eX(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>k4(t,e)?!0:O4(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>JK(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>D4(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>D4(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&K8(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=nn.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Lp,"Mod-Backspace":Lp,Delete:Lp,"Mod-Delete":Lp}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[fX({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],CX({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Rt(Ge(t,"tableRole",e))}}});Vt.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(nM.configure(this.options.table)),this.options.tableCell!==!1&&t.push(Q8.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(eM.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(tM.configure(this.options.tableRow)),t}});var DX=tM,RX=eM,IX=Q8;const LX=/<\/?[a-z][\s\S]*>/i,jX=t=>LX.test(t),H4=t=>t.trim()?jX(t)?t:Ob(t):"<p></p>",PX=[mK.configure({heading:{levels:[1,2]}}),Vq,H8,AK,nM.configure({resizable:!0}),DX,RX,IX,gK,xK.configure({nested:!0})],oi=({active:t=!1,onClick:e,title:n,children:r})=>g.jsx("button",{type:"button",onMouseDown:i=>i.preventDefault(),onClick:e,className:`p-1 md:p-1.5 rounded transition-colors ${t?"bg-[#CC561E]/15 text-[#CC561E]":"text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-800"}`,title:n,children:r}),rM=({value:t,onChange:e,autoFocus:n=!1,placeholder:r="Start writing... Use toolbar for lists, checklist, headings, and emphasis.",minHeight:i=220})=>{const[a,s]=A.useState("write"),[o,c]=A.useState("#0f172a"),d=A.useRef(!1),f={"--note-editor-min-height":`${i}px`},p=OW({extensions:A.useMemo(()=>[...PX,yK.configure({placeholder:r})],[r]),content:H4(t),autofocus:n?"end":!1,editorProps:{attributes:{class:"personal-note-prosemirror"}},onUpdate:({editor:y})=>{d.current||e(y.getHTML())}});A.useEffect(()=>{if(!p)return;const y=H4(t);p.getHTML()!==y&&(d.current=!0,p.commands.setContent(y,{emitUpdate:!1}),d.current=!1)},[p,t]);const m=A.useMemo(()=>Ob(t),[t]);return g.jsxs("div",{className:"rounded-xl border border-[#E6EAF2] dark:border-slate-700 bg-white dark:bg-slate-950 overflow-hidden",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:flex-wrap px-2 md:px-3 py-1.5 md:py-2 border-b border-[#E6EAF2] dark:border-slate-700 bg-[#F8FAFC] dark:bg-slate-900 gap-2 md:gap-3",children:[g.jsxs("div",{className:"flex items-center gap-0.5 md:gap-1 flex-wrap",children:[g.jsx(oi,{active:!!(p!=null&&p.isActive("heading",{level:1})),onClick:()=>p==null?void 0:p.chain().focus().toggleHeading({level:1}).run(),title:"Heading 1",children:g.jsx(uP,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!!(p!=null&&p.isActive("heading",{level:2})),onClick:()=>p==null?void 0:p.chain().focus().toggleHeading({level:2}).run(),title:"Heading 2",children:g.jsx(fP,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!!(p!=null&&p.isActive("bold")),onClick:()=>p==null?void 0:p.chain().focus().toggleBold().run(),title:"Bold",children:g.jsx(yj,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!!(p!=null&&p.isActive("italic")),onClick:()=>p==null?void 0:p.chain().focus().toggleItalic().run(),title:"Italic",children:g.jsx(xP,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!!(p!=null&&p.isActive("underline")),onClick:()=>p==null?void 0:p.chain().focus().toggleUnderline().run(),title:"Underline",children:g.jsx(RB,{size:12,className:"md:w-3.5 md:h-3.5"})})]}),g.jsx("div",{className:"flex items-center justify-end md:justify-start gap-1",children:g.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-md border border-[#E6EAF2] dark:border-slate-700",children:[g.jsxs("button",{type:"button",onClick:()=>s("write"),className:`p-1 md:px-2 md:py-1 text-xs rounded-l-md transition-colors ${a==="write"?"bg-[#CC561E] text-white":"text-slate-500"}`,title:"Write",children:[g.jsx("span",{className:"md:hidden",children:g.jsx(M3,{size:12})}),g.jsxs("span",{className:"hidden md:inline-flex items-center gap-1",children:[g.jsx(M3,{size:12})," Write"]})]}),g.jsxs("button",{type:"button",onClick:()=>s("preview"),className:`p-1 md:px-2 md:py-1 text-xs rounded-r-md transition-colors ${a==="preview"?"bg-[#CC561E] text-white":"text-slate-500"}`,title:"Preview",children:[g.jsx("span",{className:"md:hidden",children:g.jsx(A3,{size:12})}),g.jsxs("span",{className:"hidden md:inline-flex items-center gap-1",children:[g.jsx(A3,{size:12})," Preview"]})]})]})}),g.jsxs("div",{className:"flex items-center gap-0.5 md:gap-1 flex-wrap md:flex-nowrap",children:[g.jsxs("div",{className:"inline-flex items-center gap-0.5 px-1 py-0.5 rounded border border-[#E6EAF2] dark:border-slate-700 bg-white dark:bg-slate-900",children:[g.jsx(UP,{size:11,className:"text-slate-500 md:w-3 md:h-3"}),g.jsx("input",{type:"color",value:o,onChange:y=>{const v=y.target.value;c(v),p==null||p.chain().focus().setColor(v).run()},className:"w-4 h-4 md:w-5 md:h-5 p-0 border-0 bg-transparent cursor-pointer",title:"Text Color"}),g.jsx(oi,{active:!1,onClick:()=>p==null?void 0:p.chain().focus().unsetColor().run(),title:"Clear Text Color",children:g.jsx(Wj,{size:10,className:"md:w-3 md:h-3"})})]}),g.jsx(oi,{active:!!(p!=null&&p.isActive("bulletList")),onClick:()=>p==null?void 0:p.chain().focus().toggleBulletList().run(),title:"Bullet List",children:g.jsx(TP,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!!(p!=null&&p.isActive("orderedList")),onClick:()=>p==null?void 0:p.chain().focus().toggleOrderedList().run(),title:"Numbered List",children:g.jsx(AP,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!!(p!=null&&p.isActive("taskList")),onClick:()=>p==null?void 0:p.chain().focus().toggleTaskList().run(),title:"Checklist",children:g.jsx(mB,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!!(p!=null&&p.isActive("blockquote")),onClick:()=>p==null?void 0:p.chain().focus().toggleBlockquote().run(),title:"Quote",children:g.jsx(pf,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!!(p!=null&&p.isActive("table")),onClick:()=>p==null?void 0:p.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),title:"Insert Table",children:g.jsx(EB,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!1,onClick:()=>p==null?void 0:p.chain().focus().addRowAfter().run(),title:"Add Row",children:g.jsx(JP,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!1,onClick:()=>p==null?void 0:p.chain().focus().addColumnAfter().run(),title:"Add Column",children:g.jsx(Fj,{size:12,className:"md:w-3.5 md:h-3.5"})}),g.jsx(oi,{active:!1,onClick:()=>p==null?void 0:p.chain().focus().deleteTable().run(),title:"Delete Table",children:g.jsx(Tl,{size:12,className:"md:w-3.5 md:h-3.5"})})]})]}),a==="write"?g.jsx("div",{className:"bg-white dark:bg-slate-950 text-slate-900 dark:text-white",style:f,children:g.jsx(c8,{editor:p})}):g.jsx("div",{className:"personal-note-render p-3 md:p-4 max-w-none text-slate-800 dark:text-slate-200",style:{minHeight:i},dangerouslySetInnerHTML:{__html:m}})]})},BX=nt.lazy(()=>jl(()=>import("./KnowledgeDashboard-vK3hd1VN.js"),[]).then(t=>({default:t.KnowledgeDashboard}))),V4=t=>t.trim().toLowerCase(),cl=10,Ic=t=>t.toLocaleLowerCase("tr-TR").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"i").replace(/\s+/g," ").trim(),li=(t,e)=>e?Ic(t).includes(e):!0,$4=({id:t,children:e})=>{const{attributes:n,listeners:r,setNodeRef:i,transform:a,isDragging:s}=iz({id:t}),o={transform:iu.Transform.toString(a)};return g.jsx(g.Fragment,{children:e({setNodeRef:i,style:o,isDragging:s,attributes:n,listeners:r})})},Ay=({id:t,children:e})=>{const{setNodeRef:n,isOver:r}=lz({id:t});return g.jsx("div",{ref:n,children:e(r)})},FX=nt.memo(({books:t,personalNoteFolders:e=[],onAddBook:n,onAddPersonalNote:r,onQuickCreatePersonalNote:i,onCreatePersonalFolder:a,onRenamePersonalFolder:s,onDeletePersonalFolder:o,onMovePersonalNote:c,onMovePersonalFolder:d,onSelectBook:f,onSelectBookWithTab:p,activeTab:m,onMobileMenuClick:y,onDeleteBook:v,onDeleteMultiple:C,onToggleFavorite:E,onToggleHighlightFavorite:S,userId:_,categoryFilter:N,onCategoryFilterChange:k,onCategoryNavigate:O,onStatusNavigate:I,currentPage:M,onPageChange:L,searchQuery:B,onSearchChange:le,statusFilter:ae,onStatusFilterChange:fe,sortOption:W,onSortOptionChange:de,publisherFilter:xe,onPublisherFilterChange:H,onTabChange:J})=>{const[q,F]=A.useState(!1),z={"To Read":"bg-[#94A3B8]/15 text-[#94A3B8] border border-[#94A3B8]/40",Reading:"bg-[#38BDF8]/15 text-[#38BDF8] border border-[#38BDF8]/40",Finished:"bg-[#22C55E]/15 text-[#22C55E] border border-[#22C55E]/40"},R=m==="DASHBOARD",$=m==="NOTES",Z=m==="PERSONAL_NOTE",[pe,ge]=A.useState("ALL"),[Q,Ee]=A.useState("ALL"),[ie,K]=A.useState("NONE"),[oe,ke]=A.useState(null),[Oe,Ue]=A.useState(!1),[Ke,mt]=A.useState({PRIVATE:!0,DAILY:!0,IDEAS:!0}),[$t,je]=A.useState({PRIVATE:cl,DAILY:cl,IDEAS:cl}),[Je,Ie]=A.useState(!1),[Le,Ve]=A.useState(!1),[wn,Jr]=A.useState("DAILY"),[an,Ha]=A.useState(""),[pi,On]=A.useState(""),[Mn,Gt]=A.useState(null),[mi,pr]=A.useState(null),[ki,gi]=A.useState(null),[pn,mr]=A.useState(null);A.useEffect(()=>{Z||(ge("ALL"),Ee("ALL"),K("NONE"),ke(null),Ue(!1),mt({PRIVATE:!0,DAILY:!0,IDEAS:!0}),je({PRIVATE:cl,DAILY:cl,IDEAS:cl}),Jr("DAILY"),Ie(!1))},[Z]),A.useEffect(()=>{oe&&Ue(!0)},[oe]);const Ln=nF(R3(Nb,{activationConstraint:{distance:8}}),R3(j5,{activationConstraint:{delay:120,tolerance:8}})),Ho=ee=>{const P=Date.now();window.innerWidth<768&&(pn==null?void 0:pn.noteId)===ee.id&&P-pn.time<300?(mr(null),p?p(ee,"info"):f(ee)):(mr({noteId:ee.id,time:P}),f(ee))},Gn=A.useMemo(()=>{const ee=new Map;return e.forEach(P=>ee.set(P.id,P)),ee},[e]);A.useEffect(()=>{if(Q==="ALL"||Q==="__ROOT__")return;const ee=Gn.get(Q);ee&&(wn!==ee.category&&Jr(ee.category),mt(P=>({...P,[ee.category]:!1})))},[Q,Gn,wn]);const ta=A.useMemo(()=>{const ee=new Map;return e.forEach(P=>{ee.set(`${P.category}::${P.name.toLowerCase()}`,P.id)}),ee},[e]),Qr=ee=>{if(!vn(ee))return;if(ee.personalFolderId)return ee.personalFolderId;const P=(ee.folderPath||"").trim();if(P)return ta.get(`${Rr(ee)}::${P.toLowerCase()}`)},Oi=ee=>{var Me;const P=Qr(ee);return P?(Me=Gn.get(P))==null?void 0:Me.name:ee.folderPath||void 0},At=A.useMemo(()=>{switch(m){case"BOOK":return 24;case"ARTICLE":return 24;case"WEBSITE":return 24;case"PERSONAL_NOTE":return 30;case"NOTES":return 50;default:return 24}},[m]),[Bt,Cn]=A.useState(B);A.useEffect(()=>{if(Bt!==B){F(!0);const ee=setTimeout(()=>{le(Bt),L(1),F(!1)},300);return()=>clearTimeout(ee)}},[Bt,B,le,L]),A.useEffect(()=>{Cn(B)},[B]);const Wt=A.useMemo(()=>{if($||R)return[];const ee=Ic(B),P=Z&&ie==="RECENT"?new Set(t.filter(_e=>_e.type==="PERSONAL_NOTE"&&Rr(_e)!=="PRIVATE").sort((_e,ft)=>ft.addedAt-_e.addedAt).slice(0,20).map(_e=>_e.id)):null;return t.filter(_e=>{if(_e.type!==m)return!1;if(Z){const yi=Rr(_e);if(pe==="ALL"&&yi==="PRIVATE"||pe!=="ALL"&&yi!==pe)return!1;if(Q!=="ALL"){const Ca=Qr(_e);if(Q==="__ROOT__"){if(Ca)return!1}else if(Ca!==Q)return!1}if(ie==="FAVORITES"&&!_e.isFavorite||ie==="RECENT"&&!(P!=null&&P.has(_e.id))||oe&&!new Set((_e.tags||[]).map(Vo=>V4(Vo))).has(oe))return!1}if(N){const yi=Ic(N);if(!(_e.tags||[]).some(Vo=>Ic(Vo)===yi))return!1}let ft=!0;return ae!=="ALL"&&(ae==="HIGHLIGHTS"?ft=_e.highlights&&_e.highlights.length>0:ae==="FAVORITES"?ft=_e.isFavorite===!0:["To Read","Reading","Finished"].includes(ae)?ft=_e.readingStatus===ae:m==="BOOK"?ft=_e.status===ae:ft=!1),!ft||xe&&m!=="BOOK"&&!li(_e.publisher||"",Ic(xe))?!1:!ee||li(_e.title||"",ee)||li(_e.author||"",ee)?!0:m==="BOOK"?!!(li(_e.isbn||"",ee)||li(_e.code||"",ee)):!!((_e.tags||[]).some(yi=>li(yi,ee))||li(au(_e.generalNotes||""),ee)||vn(_e)&&(li(Rr(_e),ee)||li(Oi(_e)||"",ee)))}).sort((_e,ft)=>W==="title_asc"?_e.title.localeCompare(ft.title):W==="date_asc"?_e.addedAt-ft.addedAt:ft.addedAt-_e.addedAt)},[t,B,ae,xe,W,m,$,R,N,Z,pe,Q,ie,oe,Gn,ta]),_t=A.useMemo(()=>t.filter(ee=>ee.type==="PERSONAL_NOTE"),[t]),Tt=A.useMemo(()=>_t.filter(ee=>Rr(ee)!=="PRIVATE"),[_t]),nr=Tt.length,kr=A.useMemo(()=>Tt.filter(ee=>ee.isFavorite).length,[Tt]),zr=A.useMemo(()=>[...Tt].sort((ee,P)=>P.addedAt-ee.addedAt).slice(0,20).map(ee=>ee.id),[Tt]).length,rr=A.useMemo(()=>{const ee=new Map;return Tt.forEach(P=>{const Me=new Set;(P.tags||[]).forEach(_e=>{const ft=_e.trim();if(!ft)return;const qt=V4(ft);if(Me.has(qt))return;Me.add(qt);const xn=ee.get(qt);if(!xn){ee.set(qt,{label:ft,noteIds:new Set([P.id])});return}xn.noteIds.add(P.id)})}),[...ee.entries()].map(([P,Me])=>({key:P,label:Me.label||P,count:Me.noteIds.size})).sort((P,Me)=>Me.count-P.count||P.label.localeCompare(Me.label)).slice(0,10)},[Tt]),Or=A.useMemo(()=>{const ee={PRIVATE:0,DAILY:0,IDEAS:0};return _t.forEach(P=>{ee[Rr(P)]+=1}),ee},[_t]),jn=A.useMemo(()=>{const ee={PRIVATE:[],DAILY:[],IDEAS:[]};return e.forEach(P=>{ee[P.category].push({id:P.id,name:P.name,order:P.order,count:_t.filter(Me=>Qr(Me)===P.id).length})}),["PRIVATE","DAILY","IDEAS"].forEach(P=>{ee[P].sort((Me,_e)=>Me.order-_e.order||Me.name.localeCompare(_e.name))}),ee},[_t,e,ta]),xi=A.useMemo(()=>{const ee={PRIVATE:0,DAILY:0,IDEAS:0};return _t.forEach(P=>{const Me=Rr(P);Qr(P)||(ee[Me]+=1)}),ee},[_t,ta]);A.useEffect(()=>{if(Q==="ALL"||Q==="__ROOT__")return;const ee=["PRIVATE","DAILY","IDEAS"].find(Me=>jn[Me].some(_e=>_e.id===Q));if(!ee)return;const P=jn[ee].findIndex(Me=>Me.id===Q);P<0||je(Me=>{const _e=P+1;return Me[ee]>=_e?Me:{...Me,[ee]:_e}})},[Q,jn]);const V=A.useMemo(()=>{if(!$)return[];const ee=Ic(B);return t.flatMap(P=>P.highlights.map(Me=>({...Me,source:P}))).filter(P=>ae==="FAVORITES"&&!P.isFavorite?!1:ee?li(P.text||"",ee)||li(P.comment||"",ee)||li(P.source.title||"",ee)||li(P.source.author||"",ee)||!!(P.tags&&P.tags.some(Me=>li(Me,ee))):!0).sort((P,Me)=>Me.createdAt-P.createdAt)},[t,$,B,ae]),X=A.useMemo(()=>$?{total:V.length,reading:0,toRead:0}:{total:Wt.length,reading:Wt.filter(ee=>ee.readingStatus==="Reading").length,toRead:Wt.filter(ee=>ee.readingStatus==="To Read").length},[$,V.length,Wt]),Ce=ee=>{switch(ee){case"BOOK":return"Books";case"ARTICLE":return"Articles";case"WEBSITE":return"Websites";case"PERSONAL_NOTE":return"Personal Notes";case"NOTES":return"All Notes";case"DASHBOARD":return"Dashboard"}},Se=()=>$?"Search quotes...":m==="PERSONAL_NOTE"?"Search notes...":m==="ARTICLE"?"Search title, author...":m==="WEBSITE"?"Search site, URL...":"Search title, author, ISBN...",ue=ee=>{switch(ee){case"PRIVATE":return"Private";case"DAILY":return"Daily";case"IDEAS":return"Ideas";default:return ee}},ve=async ee=>{const P=window.prompt(`${ue(ee)} klasor adi:`),Me=P==null?void 0:P.trim();if(!Me)return;const _e=await(a==null?void 0:a(ee,Me));_e&&(K("NONE"),ke(null),ge(ee),Ee(_e.id),L(1))},Ae=async(ee,P)=>{const Me=window.prompt("Yeni klasor adi:",P),_e=Me==null?void 0:Me.trim();!_e||_e===P||await(s==null?void 0:s(ee,_e))},et=async ee=>{!window.confirm("Bu klasor silinsin mi? Icindeki notlar kategori kokune tasinacak.")||!await(o==null?void 0:o(ee))||Q===ee&&(K("NONE"),ke(null),Ee("__ROOT__"))},Fe=(ee,P,Me)=>{ki&&window.clearTimeout(ki.timeoutId);const _e=window.setTimeout(()=>{gi(null)},5e3);gi({noteId:ee,category:P,folderId:Me,timeoutId:_e})},st=async(ee,P,Me,_e=!0)=>{const ft=_t.find(yn=>yn.id===ee);if(!ft)return;const qt=Rr(ft),xn=Qr(ft);await(c==null?void 0:c(ee,P,Me))&&_e&&Fe(ee,qt,xn)},rt=ee=>{var P;if(ee.startsWith("cat-root:"))return ee.replace("cat-root:","");if(ee.startsWith("cat-group:"))return ee.replace("cat-group:","");if(ee.startsWith("folder:")){const Me=ee.replace("folder:","");return(P=Gn.get(Me))==null?void 0:P.category}},gn=async(ee,P)=>{const Me=Gn.get(ee);if(!Me||Me.category===P)return;await(d==null?void 0:d(ee,P))&&Q===ee&&(ge(P),L(1))},yt=ee=>{const P=String(ee.active.id);if(P.startsWith("note:")){Gt(P.replace("note:","")),pr(null);return}P.startsWith("folder-item:")&&(pr(P.replace("folder-item:","")),Gt(null))},Mt=()=>{Gt(null),pr(null)},ei=async ee=>{var _e;Gt(null),pr(null);const P=String(ee.active.id||""),Me=String(((_e=ee.over)==null?void 0:_e.id)||"");if(Me){if(P.startsWith("note:")){const ft=P.replace("note:",""),qt=rt(Me);if(!qt)return;const xn=Me.startsWith("folder:")?Me.replace("folder:",""):void 0;await st(ft,qt,xn,!0);return}if(P.startsWith("folder-item:")){const ft=P.replace("folder-item:",""),qt=rt(Me);if(!qt)return;await gn(ft,qt)}}},Mi=()=>{var qt,xn;const ee=pi;if(!M0(ee))return;const P=Q==="ALL"||Q==="__ROOT__"?void 0:Q,_e=(P?(qt=Gn.get(P))==null?void 0:qt.category:void 0)||wn,ft=P?(xn=Gn.get(P))==null?void 0:xn.name:void 0;i==null||i({title:an.trim()||"Quick Note",content:ee,category:_e,folderId:P,folderPath:ft}),Ha(""),On("")},Pn=$?V.length:Wt.length,Ur=Math.ceil(Pn/At),lh=m==="ARTICLE"||m==="WEBSITE"?"dark:bg-slate-800":"dark:bg-slate-900",Di=A.useMemo(()=>{const ee=(M-1)*At;return Wt.slice(ee,ee+At)},[Wt,M,At]),Va=A.useMemo(()=>{const ee=(M-1)*At;return V.slice(ee,ee+At)},[V,M,At]),ku=A.useMemo(()=>Mn&&_t.find(ee=>ee.id===Mn)||null,[_t,Mn]),Ou=A.useMemo(()=>mi&&Gn.get(mi)||null,[Gn,mi]),Mu=()=>{if(Ur<=1)return null;const ee=()=>{const P=[];if(Ur<=5)for(let _e=1;_e<=Ur;_e++)P.push(_e);else M<=3?P.push(1,2,3,4,"...",Ur):M>=Ur-2?P.push(1,"...",Ur-3,Ur-2,Ur-1,Ur):P.push(1,"...",M-1,M,M+1,"...",Ur);return P};return g.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4 md:mt-12 select-none",children:[g.jsx("button",{onClick:()=>L(Math.max(M-1,1)),disabled:M===1,className:"p-2 rounded-lg border border-[#E6EAF2] dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-[#F3F5FA] dark:hover:bg-slate-800 hover:text-[#262D40] dark:hover:text-[#262D40]/82 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g.jsx(Co,{size:20})}),g.jsx("div",{className:"flex items-center gap-1",children:ee().map((P,Me)=>g.jsx(nt.Fragment,{children:P==="..."?g.jsx("span",{className:"px-2 text-slate-400",children:"..."}):g.jsx("button",{onClick:()=>L(P),className:`w-8 h-8 md:w-10 md:h-10 rounded-lg text-sm font-medium transition-colors ${M===P?"bg-[#262D40]/40 text-white shadow-md shadow-[#262D40]/12 dark:shadow-none":"text-slate-600 dark:text-slate-400 hover:bg-[#F3F5FA] dark:hover:bg-slate-800 hover:text-[#262D40] dark:hover:text-[#262D40]/82"}`,children:P})},Me))}),g.jsx("button",{onClick:()=>L(Math.min(M+1,Ur)),disabled:M===Ur,className:"p-2 rounded-lg border border-[#E6EAF2] dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-[#F3F5FA] dark:hover:bg-slate-800 hover:text-[#262D40] dark:hover:text-[#262D40]/82 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g.jsx(m5,{size:20})})]})},Nm=()=>{var ee;return R?g.jsx(nt.Suspense,{fallback:g.jsx("div",{className:"flex justify-center items-center py-20",children:g.jsx(In,{size:32,className:"animate-spin text-[#262D40]/90"})}),children:g.jsx(BX,{items:t,userId:_,onCategorySelect:P=>O==null?void 0:O(P),onStatusSelect:P=>I==null?void 0:I(P),onNavigateToTab:P=>J==null?void 0:J(P),onMobileMenuClick:y})}):q?g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400 animate-in fade-in duration-200",children:[g.jsx(In,{size:32,className:"animate-spin text-[#262D40]/90 mb-4"}),g.jsx("p",{children:"Searching library..."})]}):$?Va.length===0?g.jsxs("div",{className:"text-center py-12 md:py-20 bg-white dark:bg-slate-900 rounded-2xl border border-dashed border-slate-300 dark:border-slate-700",children:[g.jsx("div",{className:"bg-[#F3F5FA] dark:bg-slate-800 w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:g.jsx(ru,{size:24,className:"text-slate-300 dark:text-slate-600 md:w-8 md:h-8"})}),g.jsx("h3",{className:"text-base md:text-lg font-medium text-slate-900 dark:text-white",children:"No highlights found"}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs md:text-sm max-w-xs mx-auto mt-2",children:B?"Try a different search term.":"Highlights added to books appear here."})]}):g.jsxs("div",{className:"pb-10 md:pb-20",children:[g.jsx("div",{className:"columns-2 lg:columns-3 gap-2 md:gap-6 space-y-2 md:space-y-6",children:Va.map((P,Me)=>{var ft,qt;const _e=W5(P.type);return g.jsxs("div",{onClick:()=>{p?p(P.source,"highlights",P.id):f(P.source)},className:"break-inside-avoid p-2.5 md:p-6 rounded-xl border hover:shadow-md transition-all group cursor-pointer relative flex flex-col bg-white dark:bg-slate-800 border-[#E6EAF2] dark:border-slate-700 hover:border-[#262D40]/12 dark:hover:border-[#262D40]/30",children:[g.jsx("button",{onClick:xn=>{xn.stopPropagation(),S&&S(P.source.id,P.id)},className:`absolute top-2 right-2 p-1.5 rounded-full transition-all shadow-sm z-10 ${P.isFavorite?"bg-orange-100 dark:bg-orange-900/30 text-orange-500 dark:text-orange-400 opacity-100":"bg-white/80 dark:bg-slate-800/80 text-slate-400 dark:text-slate-500 hover:text-orange-500 dark:hover:text-orange-400 opacity-0 group-hover:opacity-100 focus:opacity-100"}`,title:P.isFavorite?"Remove from Favorites":"Add to Favorites",children:g.jsx(Tc,{size:14,fill:P.isFavorite?"currentColor":"none"})}),g.jsx("div",{className:"mb-2 md:mb-3",children:_e?g.jsx(ru,{className:"text-[#CC561E] fill-[#CC561E]/10 w-4 h-4 md:w-6 md:h-6"}):((ft=P.source)==null?void 0:ft.type)==="ARTICLE"?g.jsx(Yp,{size:18,className:"text-[#262D40]/85 md:w-6 md:h-6"}):((qt=P.source)==null?void 0:qt.type)==="WEBSITE"?g.jsx(Zp,{size:18,className:"text-[#262D40]/85 md:w-6 md:h-6"}):g.jsx(pf,{className:"text-[#262D40]/82 fill-[#262D40]/85 w-4 h-4 md:w-6 md:h-6"})}),g.jsx("p",{className:`text-xs md:text-base leading-relaxed mb-2 md:mb-4 whitespace-pre-wrap line-clamp-[8] md:line-clamp-none font-lora ${_e?"text-slate-700 dark:text-slate-300":"text-slate-900 dark:text-slate-200"}`,children:P.text}),P.tags&&P.tags.length>0&&g.jsx("div",{className:"flex flex-wrap gap-1 mb-2 md:mb-3",children:P.tags.map((xn,wa)=>g.jsxs("span",{className:"px-1.5 md:px-2 py-0.5 md:py-1 bg-[#F3F5FA] dark:bg-slate-700/50 border border-[#E6EAF2] dark:border-white/10 rounded text-[10px] md:text-xs text-slate-500 dark:text-slate-400 flex items-center gap-0.5",children:[g.jsx(v0,{size:10,className:"md:w-3 md:h-3"})," ",xn]},wa))}),g.jsx("div",{className:`pt-2 md:pt-4 mt-auto flex items-center justify-between border-t ${_e?"border-[#E6EAF2]":"border-[#262D40]/50"}`,children:g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h4",{className:"text-xs md:text-sm font-bold text-slate-900 dark:text-white truncate",children:P.source.title}),g.jsx("div",{className:"flex items-center gap-1 md:gap-2 text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:g.jsx("span",{className:"truncate max-w-[50%]",children:P.source.author})})]})})]},`${P.id}-${Me}`)})}),Mu()]}):Di.length===0&&!Z?g.jsxs("div",{className:"text-center py-12 md:py-20 bg-white dark:bg-slate-900 rounded-2xl border border-dashed border-slate-300 dark:border-slate-700",children:[g.jsx("div",{className:"bg-[#F3F5FA] dark:bg-slate-800 w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:m==="BOOK"?g.jsx(yb,{size:24,className:"text-slate-300 dark:text-slate-600 md:w-8 md:h-8"}):m==="ARTICLE"?g.jsx(zf,{size:24,className:"text-slate-300 dark:text-slate-600 md:w-8 md:h-8"}):m==="PERSONAL_NOTE"?g.jsx(b0,{size:24,className:"text-slate-300 dark:text-slate-600 md:w-8 md:h-8"}):g.jsx(W1,{size:24,className:"text-slate-300 dark:text-slate-600 md:w-8 md:h-8"})}),g.jsxs("h3",{className:"text-base md:text-lg font-medium text-slate-900 dark:text-white",children:["No ",Ce(m).toLowerCase()," found"]}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs md:text-sm max-w-xs mx-auto mt-2",children:B?"Try a different search term.":"Adjust filters or add a new item."})]}):g.jsxs("div",{className:"pb-10 md:pb-20",children:[Z?g.jsxs(tz,{sensors:Ln,collisionDetection:lF,modifiers:[W3],onDragStart:yt,onDragCancel:Mt,onDragEnd:ei,children:[g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[260px_minmax(0,1fr)] gap-4 md:gap-6",children:[g.jsxs("aside",{className:`bg-white dark:bg-slate-900 border border-[#E6EAF2] dark:border-slate-800 rounded-xl p-3 md:p-4 h-fit ${Je?"block":"hidden lg:block"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("h3",{className:"text-xs font-bold uppercase tracking-[0.16em] text-slate-500 flex items-center gap-2",children:[g.jsx(O3,{size:14}),"Note Space"]}),g.jsx("button",{onClick:()=>Ie(!1),className:"lg:hidden text-slate-400 hover:text-slate-700",children:g.jsx(xa,{size:16})})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("button",{onClick:()=>{K("NONE"),ke(null),ge("ALL"),Ee("ALL"),L(1)},className:`w-full text-left px-2.5 py-2 rounded-lg text-sm transition-colors ${pe==="ALL"&&Q==="ALL"&&ie==="NONE"&&!oe?"bg-[#262D40]/20 text-[#262D40] dark:text-white font-semibold":"hover:bg-[#F3F5FA] dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300"}`,children:["All Notes (",nr,")"]}),g.jsxs("div",{className:"rounded-lg border border-[#E6EAF2] dark:border-slate-800 p-2",children:[g.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500 mb-1",children:"Smart Folders"}),g.jsxs("button",{onClick:()=>{K("FAVORITES"),ke(null),ge("ALL"),Ee("ALL"),L(1)},className:`w-full text-left px-2 py-1.5 rounded-md text-xs md:text-sm transition-colors flex items-center justify-between ${ie==="FAVORITES"?"bg-[#CC561E]/10 text-[#CC561E] font-semibold":"text-slate-500 hover:bg-[#F3F5FA] dark:hover:bg-slate-800"}`,children:[g.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[g.jsx(Tc,{size:12}),"Favorites"]}),g.jsx("span",{className:"text-[10px] opacity-70",children:kr})]}),g.jsxs("button",{onClick:()=>{K("RECENT"),ke(null),ge("ALL"),Ee("ALL"),L(1)},className:`mt-1 w-full text-left px-2 py-1.5 rounded-md text-xs md:text-sm transition-colors flex items-center justify-between ${ie==="RECENT"?"bg-[#CC561E]/10 text-[#CC561E] font-semibold":"text-slate-500 hover:bg-[#F3F5FA] dark:hover:bg-slate-800"}`,children:[g.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[g.jsx(Lj,{size:12}),"Recent Notes"]}),g.jsx("span",{className:"text-[10px] opacity-70",children:zr})]}),g.jsxs("div",{className:"mt-2 border-t border-[#E6EAF2] dark:border-slate-800 pt-2",children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsxs("button",{onClick:()=>Ue(P=>!P),className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500 inline-flex items-center gap-1 hover:text-slate-700 dark:hover:text-slate-300",children:[g.jsx(xl,{size:11,className:`transition-transform ${Oe?"rotate-180":""}`}),"Top Tags"]}),oe&&g.jsx("button",{onClick:()=>{ke(null),L(1)},className:"text-[10px] text-[#CC561E] hover:underline",children:"Clear tag filter"})]}),Oe&&(rr.length===0?g.jsx("p",{className:"text-[11px] text-slate-400 px-1 py-1",children:"No tags yet"}):g.jsx("div",{className:"space-y-1",children:rr.map(P=>g.jsxs("button",{onClick:()=>{ke(P.key),L(1)},className:`w-full text-left px-2 py-1.5 rounded-md text-xs md:text-sm transition-colors flex items-center justify-between ${oe===P.key?"bg-[#CC561E]/10 text-[#CC561E] font-semibold":"text-slate-500 hover:bg-[#F3F5FA] dark:hover:bg-slate-800"}`,children:[g.jsxs("span",{className:"truncate",children:["#",P.label]}),g.jsx("span",{className:"text-[10px] opacity-70",children:P.count})]},P.key))}))]})]}),["PRIVATE","DAILY","IDEAS"].map(P=>g.jsx(Ay,{id:`cat-group:${P}`,children:Me=>g.jsxs("div",{className:`rounded-lg border p-2 ${Me?"border-[#CC561E]/40 bg-[#CC561E]/5":"border-[#E6EAF2] dark:border-slate-800"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsxs("button",{onClick:()=>{K("NONE"),ke(null),ge(P),Ee("ALL"),L(1)},className:`text-xs font-semibold uppercase tracking-wide ${pe===P&&Q==="ALL"&&ie==="NONE"&&!oe?"text-[#CC561E]":"text-slate-600 dark:text-slate-300"}`,children:[ue(P)," (",Or[P],")"]}),g.jsxs("button",{onClick:()=>ve(P),className:"text-[11px] text-[#CC561E] hover:underline inline-flex items-center gap-1",children:[g.jsx(eP,{size:11}),"Folder"]})]}),g.jsx(Ay,{id:`cat-root:${P}`,children:_e=>g.jsxs("button",{onClick:()=>{K("NONE"),ke(null),ge(P),Ee("__ROOT__"),L(1)},className:`w-full text-left px-2 py-1.5 rounded-md text-xs md:text-sm transition-colors ${_e?"bg-[#CC561E]/15 border border-[#CC561E]/30":"border border-transparent"} ${pe===P&&Q==="__ROOT__"&&ie==="NONE"&&!oe?"bg-[#CC561E]/10 text-[#CC561E] font-semibold":"text-slate-500 hover:bg-[#F3F5FA] dark:hover:bg-slate-800"}`,children:["Unfiled (",xi[P],")"]})}),g.jsxs("div",{className:"mt-1",children:[g.jsxs("button",{onClick:()=>mt(_e=>({..._e,[P]:!_e[P]})),className:"w-full text-left px-2 py-1 text-[11px] font-semibold uppercase tracking-wide text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 inline-flex items-center gap-1",children:[g.jsx(xl,{size:11,className:`transition-transform ${Ke[P]?"":"rotate-180"}`}),"Folders (",jn[P].length,")"]}),!Ke[P]&&g.jsxs("div",{className:"mt-1 space-y-1",children:[jn[P].length===0?g.jsx("p",{className:"text-[11px] text-slate-400 px-1 py-1",children:"No folders yet"}):jn[P].slice(0,$t[P]).map(_e=>g.jsx(Ay,{id:`folder:${_e.id}`,children:ft=>g.jsx($4,{id:`folder-item:${_e.id}`,children:({setNodeRef:qt,style:xn,isDragging:wa,attributes:yn,listeners:yi})=>g.jsxs("div",{ref:qt,style:wa?void 0:xn,className:`w-full text-left px-2 py-1.5 rounded-md text-xs md:text-sm flex items-center gap-2 ${ft?"bg-[#CC561E]/15 border border-[#CC561E]/30":"border border-transparent"} ${pe===P&&Q===_e.id&&ie==="NONE"&&!oe?"bg-[#CC561E]/10 text-[#CC561E] font-semibold":"text-slate-500 hover:bg-[#F3F5FA] dark:hover:bg-slate-800"} ${wa?"opacity-60 ring-2 ring-[#CC561E]/40":""}`,children:[g.jsx("button",{...yn,...yi,onClick:Ca=>Ca.stopPropagation(),className:"p-1 rounded text-slate-400 hover:text-slate-700 cursor-grab active:cursor-grabbing",title:"Move folder",children:g.jsx(T3,{size:12})}),g.jsxs("button",{onClick:()=>{K("NONE"),ke(null),ge(P),Ee(_e.id),L(1)},className:"flex items-center gap-2 flex-1 min-w-0",children:[g.jsx(_3,{size:12}),g.jsx("span",{className:"truncate",children:_e.name})]}),g.jsx("span",{className:"text-[10px] opacity-70",children:_e.count}),g.jsx("button",{onClick:()=>Ae(_e.id,_e.name),className:"text-slate-400 hover:text-slate-700",title:"Rename folder",children:g.jsx(WP,{size:12})}),g.jsx("button",{onClick:()=>et(_e.id),className:"text-slate-400 hover:text-red-500",title:"Delete folder",children:g.jsx(Tl,{size:12})})]})})},_e.id)),jn[P].length>$t[P]&&g.jsxs("button",{onClick:()=>je(_e=>({..._e,[P]:_e[P]+cl})),className:"w-full text-left px-2 py-1.5 rounded-md text-[11px] font-semibold text-[#CC561E] hover:bg-[#CC561E]/10",children:["Load more (",jn[P].length-$t[P]," left)"]})]})]})]})},P))]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"lg:hidden flex gap-2",children:[g.jsxs("button",{onClick:()=>Ie(P=>!P),className:"flex-1 px-3 py-2.5 bg-white dark:bg-slate-900 border border-[#E6EAF2] dark:border-slate-800 rounded-xl flex items-center justify-center gap-2 text-[11px] font-bold uppercase tracking-wider text-slate-600 dark:text-slate-400 shadow-sm active:scale-95 transition-all",children:[g.jsx(O3,{size:14}),"Navigator"]}),g.jsxs("button",{onClick:()=>Ve(!Le),className:`flex-1 px-3 py-2.5 border rounded-xl flex items-center justify-center gap-2 text-[11px] font-bold uppercase tracking-wider transition-all shadow-sm active:scale-95 ${Le?"bg-[#CC561E]/10 border-[#CC561E]/30 text-[#CC561E]":"bg-white dark:bg-slate-900 border-[#E6EAF2] dark:border-slate-800 text-slate-600 dark:text-slate-400"}`,children:[g.jsx(xl,{size:14,className:`transition-transform duration-200 ${Le?"rotate-180":""}`}),"Capture"]})]}),g.jsxs("div",{className:`bg-white dark:bg-slate-900 border border-[#E6EAF2] dark:border-slate-800 rounded-2xl overflow-hidden ${Le?"block":"hidden lg:block"}`,children:[g.jsxs("div",{className:`w-full flex items-center justify-between p-4 md:p-5 transition-colors ${Le?"":"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50"}`,onClick:()=>!Le&&Ve(!0),children:[g.jsxs("h4",{className:"hidden lg:flex text-sm md:text-base font-semibold uppercase tracking-[0.12em] text-slate-500 items-center gap-2 cursor-pointer",onClick:P=>{P.stopPropagation(),Ve(!Le)},children:[g.jsx(xl,{size:16,className:`transition-transform duration-200 ${Le?"rotate-180":""}`}),"Quick Capture"]}),(Le||window.innerWidth>=1024)&&g.jsxs("div",{className:`flex items-center gap-2 flex-1 lg:flex-none justify-between lg:justify-end ${Le?"flex":"hidden lg:flex"}`,onClick:P=>P.stopPropagation(),children:[g.jsx("span",{className:"lg:hidden text-[11px] font-bold text-slate-500 uppercase tracking-wider",children:"Quick Capture"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:wn,onChange:P=>Jr(P.target.value),className:"text-[11px] border border-[#E6EAF2] dark:border-slate-700 rounded-md px-2 py-1 bg-white dark:bg-slate-950 text-slate-500 outline-none",children:[g.jsx("option",{value:"DAILY",children:"Daily"}),g.jsx("option",{value:"PRIVATE",children:"Private"}),g.jsx("option",{value:"IDEAS",children:"Ideas"})]}),ie==="NONE"&&Q!=="ALL"&&Q!=="__ROOT__"&&g.jsxs("span",{className:"hidden sm:inline text-[11px] text-slate-400",children:["/ ",((ee=Gn.get(Q))==null?void 0:ee.name)||Q]})]})]})]}),Le&&g.jsxs("div",{className:"px-4 pb-4 md:px-5 md:pb-5 pt-0 animate-in slide-in-from-top-2 duration-200",children:[g.jsx("input",{value:an,onChange:P=>Ha(P.target.value),placeholder:"Note title (optional)",className:"w-full mb-3 border border-[#E6EAF2] dark:border-slate-700 rounded-xl px-4 py-3 text-sm md:text-base bg-white dark:bg-slate-950 block"}),g.jsx("div",{className:"w-full",children:g.jsx(rM,{value:pi,onChange:On,autoFocus:Z,placeholder:"Start writing immediately...",minHeight:242},"quick-capture-editor")}),g.jsx("div",{className:"mt-3 flex justify-end w-full",children:g.jsx("button",{onClick:Mi,disabled:!M0(pi),className:"px-4 py-2 rounded-lg bg-[#262D40] text-white text-sm md:text-base disabled:opacity-40",children:"Save Quick Note"})})]})]}),Di.length===0?g.jsxs("div",{className:"text-center py-10 bg-white dark:bg-slate-900 rounded-2xl border border-dashed border-slate-300 dark:border-slate-700",children:[g.jsx(b0,{size:26,className:"mx-auto mb-2 text-slate-300"}),g.jsx("h3",{className:"text-base font-medium text-slate-900 dark:text-white",children:"No notes matched this filter"}),g.jsx("p",{className:"text-xs md:text-sm text-slate-500 mt-1",children:"Change category/folder filter or create a new note."})]}):g.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-2 md:gap-4",children:Di.map(P=>{const Me=au(P.generalNotes||"");return g.jsx($4,{id:`note:${P.id}`,children:({setNodeRef:_e,style:ft,isDragging:qt,attributes:xn,listeners:wa})=>g.jsxs("div",{ref:_e,style:qt?void 0:ft,onClick:()=>Ho(P),className:`bg-white dark:bg-slate-800 p-2.5 md:p-5 rounded-xl border border-[#E6EAF2] dark:border-slate-800 hover:border-[#262D40]/20 dark:hover:border-[#262D40]/30 hover:shadow-md transition-all cursor-pointer flex flex-col group relative ${qt||Mn===P.id?"opacity-60 ring-2 ring-[#CC561E]/40":""}`,children:[g.jsx("div",{className:"absolute top-2 left-2 z-10",children:g.jsx("button",{...xn,...wa,onClick:yn=>yn.stopPropagation(),className:"p-1.5 rounded-full bg-white/85 dark:bg-slate-800/85 text-slate-400 hover:text-slate-700 shadow-sm",title:"Drag note",children:g.jsx(T3,{size:13})})}),g.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:[g.jsx("button",{onClick:yn=>{yn.stopPropagation(),E(P.id)},className:`p-1.5 rounded-full transition-all shadow-sm ${P.isFavorite?"bg-orange-100 dark:bg-orange-900/30 text-orange-500 dark:text-orange-400 opacity-100":"bg-white/80 dark:bg-slate-800/80 text-slate-400 dark:text-slate-500 hover:text-orange-500 dark:hover:text-orange-400 opacity-0 group-hover:opacity-100 focus:opacity-100"}`,title:P.isFavorite?"Remove from Favorites":"Add to Favorites",children:g.jsx(Tc,{size:14,fill:P.isFavorite?"currentColor":"none"})}),g.jsx("button",{onClick:yn=>{yn.stopPropagation(),v(P.id)},className:"p-1.5 bg-white/80 dark:bg-slate-800/80 hover:bg-[#F3F5FA] dark:hover:bg-slate-700 text-slate-400 dark:text-slate-500 hover:text-slate-900 dark:hover:text-white rounded-full transition-all opacity-0 group-hover:opacity-100 focus:opacity-100 shadow-sm",title:"Delete Note",children:g.jsx(Tl,{size:14})})]}),g.jsx("h3",{className:"font-bold text-sm md:text-base text-slate-900 dark:text-white mb-2 leading-tight pl-8 pr-8",children:P.title}),g.jsxs("div",{className:"text-slate-600 dark:text-slate-300 text-xs md:text-sm whitespace-pre-wrap leading-relaxed max-h-[180px] overflow-hidden relative font-lora mb-3",children:[Me||g.jsx("span",{className:"italic text-slate-400 dark:text-slate-500",children:"Empty"}),Me.length>140&&g.jsx("div",{className:"absolute bottom-0 inset-x-0 h-8 bg-gradient-to-t from-white dark:from-slate-900 to-transparent"})]}),g.jsxs("div",{className:"mt-auto pt-2 flex flex-wrap gap-1.5 border-t border-slate-100 dark:border-slate-800 items-center",children:[g.jsx("span",{className:"px-2 py-0.5 bg-[#CC561E]/10 text-[#CC561E] text-[10px] md:text-xs rounded border border-[#CC561E]/20 font-semibold",children:Rr(P)}),Oi(P)&&g.jsx("span",{className:"px-2 py-0.5 bg-[#F3F5FA] dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-[10px] md:text-xs rounded border border-[#E6EAF2] dark:border-slate-700 truncate max-w-[150px]",children:Oi(P)}),g.jsxs("span",{className:"ml-auto text-[10px] md:text-xs text-slate-400 flex items-center gap-1",children:[g.jsx(eu,{size:10,className:"md:w-3 md:h-3"}),new Date(P.addedAt).toLocaleDateString()]})]})]})},P.id)})})]})]}),g.jsx(wz,{modifiers:[W3],children:ku?g.jsxs("div",{className:"w-[320px] max-w-[80vw] bg-white dark:bg-slate-800 p-3 rounded-xl border border-[#CC561E]/35 shadow-xl cursor-grabbing",children:[g.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:ku.title}),g.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-300 truncate",children:ue(Rr(ku))})]}):Ou?g.jsxs("div",{className:"w-[220px] max-w-[70vw] bg-white dark:bg-slate-900 px-3 py-2 rounded-lg border border-[#CC561E]/35 shadow-xl cursor-grabbing flex items-center gap-2",children:[g.jsx(_3,{size:13,className:"text-slate-500"}),g.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100 truncate",children:Ou.name})]}):null})]}):g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 md:gap-6",children:Di.map(P=>g.jsxs("div",{onClick:()=>f(P),className:`bg-white ${lh} rounded-xl border border-[#E6EAF2] dark:border-slate-800 overflow-hidden hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer group flex flex-col h-full relative`,children:[g.jsxs("div",{className:"h-[122px] md:h-40 bg-[#F3F5FA] dark:bg-slate-800 relative flex items-end justify-between overflow-hidden group-hover:opacity-95 transition-opacity",children:[g.jsxs("div",{className:"absolute top-2 right-2 z-40 flex gap-1",children:[g.jsx("button",{onClick:Me=>{Me.stopPropagation(),E(P.id)},className:`p-1.5 rounded-full shadow-sm backdrop-blur-sm border border-[#E6EAF2] dark:border-slate-800 transition-all ${P.isFavorite?"bg-amber-100/90 dark:bg-amber-900/80 text-amber-500 dark:text-amber-400 opacity-100":"bg-white/90 dark:bg-slate-900/90 text-slate-400 dark:text-slate-500 hover:text-amber-500 dark:hover:text-amber-400 opacity-0 group-hover:opacity-100 focus:opacity-100"}`,title:P.isFavorite?"Remove from Favorites":"Add to Favorites",children:g.jsx(Tc,{size:14,className:"md:w-4 md:h-4",fill:P.isFavorite?"currentColor":"none"})}),g.jsx("button",{onClick:Me=>{Me.stopPropagation(),v(P.id)},className:"p-1.5 bg-white/90 dark:bg-slate-900/90 hover:bg-[#F3F5FA] dark:hover:bg-slate-800 text-slate-400 dark:text-slate-500 hover:text-slate-900 dark:hover:text-white rounded-full shadow-sm backdrop-blur-sm border border-[#E6EAF2] dark:border-slate-800 transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",title:"Delete Item",children:g.jsx(Tl,{size:14,className:"md:w-4 md:h-4"})}),P.isIngested&&g.jsx("div",{className:"p-1.5 bg-[#262D40]/90 dark:bg-[#262D40]/90 text-white rounded-full shadow-sm backdrop-blur-sm border border-[#262D40]/50 dark:border-[#262D40]/50 transition-all z-40",title:"Added to AI Library",children:g.jsx(hf,{size:14,className:"md:w-4 md:h-4",fill:"currentColor"})})]}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#F3F5FA] dark:bg-slate-800 transition-colors group-hover:bg-[#EDF1F8] dark:group-hover:bg-slate-700",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-0 bg-[#262D40]/20 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),g.jsx("div",{className:"relative p-4 rounded-full",children:P.type==="BOOK"?g.jsx(jv,{size:48,className:"text-[#262D40] dark:text-white/80 drop-shadow-[0_0_8px_rgba(38,45,64,0.35)]"}):P.type==="ARTICLE"?g.jsx(Yp,{size:48,className:"text-[#262D40] dark:text-white/80 drop-shadow-[0_0_8px_rgba(38,45,64,0.35)]"}):g.jsx(Zp,{size:48,className:"text-[#262D40] dark:text-white/80 drop-shadow-[0_0_8px_rgba(38,45,64,0.35)]"})})]})}),P.type==="BOOK"&&P.coverUrl&&g.jsxs(g.Fragment,{children:[g.jsx("img",{src:P.coverUrl,alt:P.title,loading:"lazy",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105 z-10",onError:Me=>{Me.currentTarget.style.display="none";const _e=Me.currentTarget.nextElementSibling;_e&&_e.classList.add("hidden")}}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/80 via-slate-900/20 to-transparent z-20 pointer-events-none"})]}),P.type!=="BOOK"&&g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 via-transparent to-transparent z-20 pointer-events-none"}),g.jsxs("div",{className:"relative z-30 p-1.5 md:p-4 w-full flex justify-between items-end",children:[g.jsx("div",{className:`text-[8px] md:text-xs font-bold px-1 md:px-2 py-0.5 md:py-1 rounded shadow-sm backdrop-blur-md ${P.type==="BOOK"&&P.coverUrl||P.type!=="BOOK"?"bg-white/90 dark:bg-slate-900/90 text-slate-900 dark:text-white border border-white/50 dark:border-slate-700":z[P.readingStatus]}`,children:P.readingStatus}),g.jsxs("div",{className:"flex gap-0.5 md:gap-1",children:[P.type==="BOOK"&&P.status==="Lent Out"&&g.jsx("div",{className:"w-4 h-4 md:w-6 md:h-6 rounded-full bg-[#F59E0B] text-white flex items-center justify-center shadow-sm border border-white/20",title:"Lent Out",children:g.jsx(xo,{size:10,className:"md:w-3 md:h-3"})}),P.type==="BOOK"&&P.status==="Lost"&&g.jsx("div",{className:"w-4 h-4 md:w-6 md:h-6 rounded-full bg-[#F43F5E] text-white flex items-center justify-center shadow-sm border border-white/20",title:"Lost",children:g.jsx(xo,{size:10,className:"md:w-3 md:h-3"})})]})]})]}),g.jsxs("div",{className:"p-2.5 md:p-5 flex-1 flex flex-col",children:[g.jsx("h3",{className:"font-bold text-sm md:text-lg text-slate-900 dark:text-white leading-tight mb-0.5 md:mb-1 line-clamp-2 group-hover:text-[#262D40] dark:group-hover:text-[#262D40] transition-colors",children:P.title}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs md:text-sm mb-2 md:mb-4 line-clamp-1",children:P.author}),g.jsxs("div",{className:"mt-auto pt-2 md:pt-4 border-t border-slate-50 dark:border-slate-800 flex justify-between items-center text-[10px] md:text-xs text-slate-400 dark:text-slate-500",children:[g.jsx("span",{className:"truncate max-w-[70%]",children:P.type==="BOOK"?P.publisher||"":P.type==="ARTICLE"?P.publisher||"Journal":(()=>{try{return P.url?new URL(P.url).hostname:"Web"}catch{return"Web"}})()}),P.type==="ARTICLE"&&P.publicationYear&&g.jsx("span",{className:"bg-[#F3F5FA] dark:bg-slate-800 px-1.5 py-0.5 rounded text-slate-500 dark:text-slate-400 font-mono",children:P.publicationYear}),P.type==="WEBSITE"&&P.url&&g.jsx("a",{href:P.url,target:"_blank",rel:"noreferrer",className:"text-[#262D40]/70 hover:text-[#262D40]",onClick:Me=>Me.stopPropagation(),children:g.jsx(G1,{size:12,className:"md:w-3.5 md:h-3.5"})})]})]})]},P.id))}),Mu()]})},ql=(ee=>{switch(ee){case"DASHBOARD":return H5;case"NOTES":return V5;case"BOOK":return jv;case"ARTICLE":return Yp;case"WEBSITE":return Zp;case"PERSONAL_NOTE":return $5;default:return bb}})(m);return g.jsxs("div",{className:"max-w-6xl w-full mx-auto p-3 md:p-8 lg:p-10 animate-in fade-in duration-500",children:[!R&&g.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-8 gap-2",children:[g.jsxs("div",{className:"flex items-center gap-2 md:gap-4 overflow-hidden flex-1",children:[g.jsx("button",{onClick:y,className:"lg:hidden p-1 -ml-1 text-slate-600 dark:text-slate-400 hover:bg-[#F3F5FA] dark:hover:bg-slate-800 rounded-lg transition-colors shrink-0",children:g.jsx(IP,{size:18,className:"md:w-6 md:h-6"})}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"hidden md:flex p-2 bg-[#262D40] rounded-xl border border-[#262D40]/80 shadow-sm",children:g.jsx(ql,{size:24,className:"text-white"})}),g.jsxs("div",{className:"min-w-0 flex flex-col justify-center",children:[g.jsx("h1",{className:"text-lg md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight leading-none truncate",children:Ce(m)}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-sm md:mt-1 font-medium truncate",children:$?`${X.total} Highlights`:Z?`${X.total} Notes`:`${X.total} Items  ${X.reading} Reading`})]})]})]}),g.jsx("div",{className:"flex gap-2",children:g.jsxs("button",{onClick:()=>{var ee;if(Z&&r){const P=pe==="ALL"?"DAILY":pe,Me=Q==="ALL"||Q==="__ROOT__"?void 0:Q;r({category:P,folderId:Me,folderPath:Me?(ee=Gn.get(Me))==null?void 0:ee.name:void 0});return}n()},className:"bg-[#262D40] text-white px-2 py-1.5 md:px-5 md:py-2.5 rounded-lg hover:bg-[#1d2333] transition-all flex items-center gap-1 shadow-md shadow-[#262D40]/20 dark:shadow-none font-medium shrink-0 active:scale-95",children:[g.jsx(Dv,{size:14,className:"md:w-5 md:h-5"}),g.jsxs("span",{className:"text-[10px] md:text-base",children:["Add ",m==="ARTICLE"?"Article":m==="WEBSITE"?"Web":m==="PERSONAL_NOTE"?"Note":"Book"]})]})})]}),!R&&g.jsxs("div",{className:"bg-white dark:bg-slate-900 p-1.5 md:p-4 rounded-xl shadow-sm border border-[#E6EAF2] dark:border-slate-800 mb-2 md:mb-8 flex flex-col md:flex-row gap-2 md:gap-4 w-full",children:[g.jsxs("div",{className:"flex-1 relative",children:[g.jsx(ms,{className:"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-3.5 h-3.5 md:w-5 md:h-5"}),g.jsx("input",{type:"text",placeholder:Se(),value:Bt,onChange:ee=>Cn(ee.target.value),className:`w-full pl-7 md:pl-10 ${$||Z?"pr-10":"pr-4"} md:pr-4 py-1 border border-[#E6EAF2] dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-[#CC561E] focus:border-transparent outline-none transition-all text-[11px] md:text-base bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500`}),q&&g.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:g.jsx(In,{size:16,className:"animate-spin text-[#CC561E]"})}),($||Z)&&g.jsx("button",{onClick:()=>fe(ae==="FAVORITES"?"ALL":"FAVORITES"),className:`md:hidden absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded-lg border transition-all flex items-center justify-center shrink-0 ${ae==="FAVORITES"?"bg-orange-100 dark:bg-orange-900/30 border-orange-200 dark:border-orange-800 text-orange-600 dark:text-orange-400":"bg-white dark:bg-slate-800 border-[#E6EAF2] dark:border-slate-700 text-slate-400 dark:text-slate-500"}`,title:ae==="FAVORITES"?"Show All":"Show Favorites Only",children:g.jsx(Tc,{size:14,fill:ae==="FAVORITES"?"currentColor":"none"})})]}),($||Z)&&g.jsx("button",{onClick:()=>fe(ae==="FAVORITES"?"ALL":"FAVORITES"),className:`hidden md:flex p-2 rounded-lg border transition-all items-center justify-center shrink-0 ${ae==="FAVORITES"?"bg-orange-100 dark:bg-orange-900/30 border-orange-200 dark:border-orange-800 text-orange-600 dark:text-orange-400":"bg-white dark:bg-slate-800 border-[#E6EAF2] dark:border-slate-700 text-slate-400 dark:text-slate-500 hover:bg-[#F3F5FA] dark:hover:bg-slate-700"}`,title:ae==="FAVORITES"?"Show All":"Show Favorites Only",children:g.jsx(Tc,{size:20,className:"md:w-5 md:h-5",fill:ae==="FAVORITES"?"currentColor":"none"})}),!$&&!Z&&g.jsxs("div",{className:"grid grid-cols-2 md:flex gap-2 items-center",children:[g.jsxs("div",{className:"relative min-w-[100px] md:min-w-[160px]",children:[g.jsx(rP,{className:"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-3.5 h-3.5 md:w-4 md:h-4"}),g.jsxs("select",{value:ae,onChange:ee=>{fe(ee.target.value),L(1)},className:"w-full pl-7 md:pl-9 pr-6 md:pr-8 py-1.5 md:py-2 border border-[#E6EAF2] dark:border-slate-700 rounded-lg appearance-none bg-white dark:bg-slate-800 focus:ring-2 focus:ring-[#CC561E] text-xs md:text-sm font-medium text-slate-700 dark:text-slate-200 cursor-pointer hover:border-slate-300 dark:hover:border-slate-600",children:[g.jsx("option",{value:"ALL",children:"All"}),g.jsx("option",{value:"FAVORITES",children:"Favorites"}),g.jsx("option",{value:"HIGHLIGHTS",children:"Highlight"}),g.jsxs("optgroup",{label:"Status",children:[g.jsx("option",{value:"To Read",children:"To Read"}),g.jsx("option",{value:"Reading",children:"Reading"}),g.jsx("option",{value:"Finished",children:"Finished"})]}),m==="BOOK"&&g.jsxs("optgroup",{label:"Inventory",children:[g.jsx("option",{value:"On Shelf",children:"On Shelf"}),g.jsx("option",{value:"Lent Out",children:"Lent Out"}),g.jsx("option",{value:"Lost",children:"Lost"})]})]})]}),g.jsxs("div",{className:"relative min-w-[100px] md:min-w-[160px]",children:[g.jsx(gj,{className:"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-3.5 h-3.5 md:w-4 md:h-4"}),g.jsxs("select",{value:W,onChange:ee=>{de(ee.target.value),L(1)},className:"w-full pl-7 md:pl-9 pr-6 md:pr-8 py-1.5 md:py-2 border border-[#E6EAF2] dark:border-slate-700 rounded-lg appearance-none bg-white dark:bg-slate-800 focus:ring-2 focus:ring-[#CC561E] text-xs md:text-sm font-medium text-slate-700 dark:text-slate-200 cursor-pointer hover:border-slate-300 dark:hover:border-slate-600",children:[g.jsx("option",{value:"date_desc",children:"Newest"}),g.jsx("option",{value:"date_asc",children:"Oldest"}),g.jsx("option",{value:"title_asc",children:"A-Z"})]})]}),m==="BOOK"&&g.jsxs("div",{className:"relative min-w-[140px] md:min-w-[180px]",children:[g.jsx(v0,{className:"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-3.5 h-3.5 md:w-4 md:h-4"}),g.jsxs("select",{value:N||"",onChange:ee=>k==null?void 0:k(ee.target.value||null),className:"w-full pl-7 md:pl-9 pr-6 md:pr-8 py-1.5 md:py-2 border border-[#E6EAF2] dark:border-slate-700 rounded-lg appearance-none bg-white dark:bg-slate-800 focus:ring-2 focus:ring-[#CC561E] text-xs md:text-sm font-medium text-slate-700 dark:text-slate-200 cursor-pointer hover:border-slate-300 dark:hover:border-slate-600",children:[g.jsx("option",{value:"",children:"All categories"}),k0.map(ee=>g.jsx("option",{value:ee,children:ee},ee))]})]}),m==="ARTICLE"&&g.jsx("input",{type:"text",placeholder:"Journal...",value:xe,onChange:ee=>{H(ee.target.value),L(1)},className:"hidden md:block px-4 py-2 border border-[#E6EAF2] dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-[#CC561E] text-sm min-w-[140px] bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500"})]})]}),m==="BOOK"&&!R&&N&&g.jsxs("div",{className:"flex items-center gap-2 mb-4 md:mb-6",children:[g.jsx("span",{className:"text-xs md:text-sm text-slate-500",children:"Category:"}),g.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-[rgba(204,86,30,0.1)] text-[#CC561E] rounded-full text-xs md:text-sm border border-[#CC561E]/20 shadow-sm",onClick:()=>k==null?void 0:k(null),children:[g.jsx("span",{className:"font-semibold",children:N}),g.jsx(xa,{size:14})]})]}),Nm(),Z&&ki&&g.jsxs("div",{className:"fixed bottom-5 right-5 z-50 bg-[#262D40] text-white px-4 py-3 rounded-xl shadow-xl border border-white/10 flex items-center gap-3",children:[g.jsx("span",{className:"text-sm",children:"Note moved."}),g.jsx("button",{onClick:()=>{window.clearTimeout(ki.timeoutId);const ee=ki;gi(null),st(ee.noteId,ee.category,ee.folderId,!1)},className:"text-sm font-semibold text-[#FFB58D] hover:text-white",children:"Undo"})]})]})});function zX(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function UX(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var HX=(function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),VX=(function(t){HX(e,t);function e(n,r){var i=this.constructor,a=t.call(this,n,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),zX(a,i.prototype),UX(a),a}return e})(Error),$X=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hi=(function(t){$X(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e})(VX),GX=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),oa=(function(t){GX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(hi),WX=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ye=(function(t){WX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(hi),qX=(function(){function t(e){if(this.binarizer=e,e===null)throw new Ye("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var a=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),KX=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),cr=(function(t){KX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(hi),XX=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),Qt=(function(){function t(){}return t.arraycopy=function(e,n,r,i,a){for(;a--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t})(),YX=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),bw=(function(t){YX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(hi),ZX=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),G4=(function(t){ZX(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(bw),JX=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qn=(function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var a=n;a<r;a++)e[a]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new Ye("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new G4(n);if(r>e)throw new G4(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var a=JX(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=31*i+o}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,a=new Int32Array(i);return Qt.arraycopy(e,n,a,0,i),a},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,o=r(n,e[s]);if(o>0)i=s+1;else if(o<0)a=s-1;else return s}return-i-1},t.numberComparator=function(e,n){return e-n},t})(),ut=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),dr=(function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);Qt.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return n;a=r[i]}var o=i*32+ut.numberOfTrailingZeros(a);return o>n?n:o},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return n;a=~r[i]}var o=i*32+ut.numberOfTrailingZeros(a);return o>n?n:o},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new Ye;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),a=this.bits,s=r;s<=i;s++){var o=s>r?0:e&31,c=s<i?31:n&31,d=(2<<c)-(1<<o);a[s]|=d}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new Ye;if(n===e)return!0;n--;for(var i=Math.floor(e/32),a=Math.floor(n/32),s=this.bits,o=i;o<=a;o++){var c=o>i?0:e&31,d=o<a?31:n&31,f=(2<<d)-(1<<c)&4294967295;if((s[o]&f)!==(r?f:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new Ye("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Ye("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var a=0;a<i;a++){for(var s=0,o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;n[r+a]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[n-a]=s}if(this.size!==r*32){for(var o=r*32-this.size,c=e[0]>>>o,a=1;a<r;a++){var d=e[a];c|=d<<32-o,e[a-1]=c,c=d>>>o}e[r-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&Qn.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+Qn.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t})(),b2;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(b2||(b2={}));const en=b2;var QX=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),De=(function(t){QX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(hi),eY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jt;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(jt||(jt={}));var Jn=(function(){function t(e,n,r){for(var i,a,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var c=this.values,d=0,f=c.length;d!==f;d++){var p=c[d];t.VALUES_TO_ECI.set(p,this)}try{for(var m=eY(s),y=m.next();!y.done;y=m.next()){var v=y.value;t.NAME_TO_ECI.set(v,this)}}catch(C){i={error:C}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new De("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new De("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new De("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(jt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(jt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(jt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(jt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(jt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(jt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(jt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(jt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(jt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(jt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(jt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(jt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(jt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(jt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(jt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(jt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(jt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(jt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(jt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(jt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(jt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(jt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(jt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(jt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(jt.Big5,28,"Big5"),t.GB18030=new t(jt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(jt.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),tY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),a0=(function(t){tY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(hi),Ji=(function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Jn?e:Jn.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var o=e[a].toString(16);o.length<2&&(o="0"+o),i+="%"+o}return decodeURIComponent(i)}if(r.equals(Jn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new a0("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Jn.UTF8)||e.equals(Jn.ISO8859_1)||e.equals(Jn.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},t})(),bt=(function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return Ji.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(en.CHARACTER_SET)!==void 0)return n.get(en.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,o=0,c=0,d=0,f=0,p=0,m=0,y=0,v=0,C=0,E=0,S=0,_=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,N=0;N<r&&(i||a||s);N++){var k=e[N]&255;s&&(o>0?(k&128)===0?s=!1:o--:(k&128)!==0&&((k&64)===0?s=!1:(o++,(k&32)===0?c++:(o++,(k&16)===0?d++:(o++,(k&8)===0?f++:s=!1))))),i&&(k>127&&k<160?i=!1:k>159&&(k<192||k===215||k===247)&&S++),a&&(p>0?k<64||k===127||k>252?a=!1:p--:k===128||k===160||k>239?a=!1:k>160&&k<224?(m++,v=0,y++,y>C&&(C=y)):k>127?(p++,y=0,v++,v>E&&(E=v)):(y=0,v=0))}return s&&o>0&&(s=!1),a&&p>0&&(a=!1),s&&(_||c+d+f>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||C>=3||E>=3)?t.SHIFT_JIS:i&&a?C===2&&m===2||S*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function a(o,c,d,f,p,m){if(o==="%%")return"%";if(n[++i]!==void 0){o=f?parseInt(f.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,v;switch(m){case"s":v=n[i];break;case"c":v=n[i][0];break;case"f":v=parseFloat(n[i]).toFixed(o);break;case"p":v=parseFloat(n[i]).toPrecision(o);break;case"e":v=parseFloat(n[i]).toExponential(o);break;case"x":v=parseInt(n[i]).toString(y||16);break;case"d":v=parseFloat(parseInt(n[i],y||10).toPrecision(o)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(y);for(var C=parseInt(d),E=d&&d[0]+""=="0"?"0":" ";v.length<C;)v=c!==void 0?v+E:E+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.getBytes=function(e,n){return Ji.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Jn.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Jn.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Jn.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),ct=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=bt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t})(),Ba=(function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new Ye("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),a=0;a<n;a++)for(var s=e[a],o=0;o<r;o++)s[o]&&i.set(o,a);return i},t.parseFromString=function(e,n,r){if(e===null)throw new Ye("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,o=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new Ye("row lengths do not match");s=a,c++}d++}else if(e.substring(d,d+n.length)===n)d+=n.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new Ye("illegal character encountered: "+e.substring(d));if(a>s){if(o===-1)o=a-s;else if(a-s!==o)throw new Ye("row lengths do not match");c++}for(var f=new t(o,c),p=0;p<a;p++)i[p]&&f.set(Math.floor(p%o),Math.floor(p/o));return f},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ye("input matrix dimensions do not match");for(var n=new dr(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var o=a*r,c=e.getRow(a,n).getBitArray(),d=0;d<r;d++)i[o+d]^=c[d]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new Ye("Left and top must be nonnegative");if(i<1||r<1)throw new Ye("Height and width must be at least 1");var a=e+r,s=n+i;if(s>this.height||a>this.width)throw new Ye("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,d=n;d<s;d++)for(var f=d*o,p=e;p<a;p++)c[f+Math.floor(p/32)]|=1<<(p&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new dr(this.width):n.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)n.setBulk(s*32,i[a+s]);return n},t.prototype.setRow=function(e,n){Qt.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new dr(e),i=new dr(e),a=0,s=Math.floor((n+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(n-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(n-1-a,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,a=e,s=n,o=-1,c=-1,d=0;d<n;d++)for(var f=0;f<r;f++){var p=i[d*r+f];if(p!==0){if(d<s&&(s=d),d>c&&(c=d),f*32<a){for(var m=0;(p<<31-m&4294967295)===0;)m++;f*32+m<a&&(a=f*32+m)}if(f*32+31>o){for(var m=31;!(p>>>m);)m--;f*32+m>o&&(o=f*32+m)}}}return o<a||c<s?null:Int32Array.from([a,s,o-a+1,c-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,a=r%e*32,s=n[r],o=0;(s<<31-o&4294967295)===0;)o++;return a+=o,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=n[r],o=31;!(s>>>o);)o--;return a+=o,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&Qn.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Qn.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new ct,a=0,s=this.height;a<s;a++){for(var o=0,c=this.width;o<c;o++)i.append(this.get(o,a)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),nY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),he=(function(t){nY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(hi),rY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),iY=(function(t){rY(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new dr(a):r.clear(),this.initArrays(a);for(var s=i.getRow(n,this.luminances),o=this.buckets,c=0;c<a;c++)o[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(o);if(a<3)for(var c=0;c<a;c++)(s[c]&255)<d&&r.set(c);else for(var f=s[0]&255,p=s[1]&255,c=1;c<a-1;c++){var m=s[c+1]&255;(p*4-f-m)/2<d&&r.set(c),f=p,p=m}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),a=new Ba(r,i);this.initArrays(r);for(var s=this.buckets,o=1;o<5;o++)for(var c=Math.floor(i*o/5),d=n.getRow(c,this.luminances),f=Math.floor(r*4/5),p=Math.floor(r/5);p<f;p++){var m=d[p]&255;s[m>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(s),v=n.getMatrix(),o=0;o<i;o++)for(var C=o*r,p=0;p<r;p++){var m=v[C+p]&255;m<y&&a.set(p,o)}return a},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,a=0,s=0,o=0;o<r;o++)n[o]>s&&(a=o,s=n[o]),n[o]>i&&(i=n[o]);for(var c=0,d=0,o=0;o<r;o++){var f=o-a,p=n[o]*f*f;p>d&&(c=o,d=p)}if(a>c){var m=a;a=c,c=m}if(c-a<=r/16)throw new he;for(var y=c-1,v=-1,o=c-1;o>a;o--){var C=o-a,p=C*C*(c-o)*(i-n[o]);p>v&&(y=o,v=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(XX),aY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),sY=(function(t){aY(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=n.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var o=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&o++;var c=e.calculateBlackPoints(a,s,o,r,i),d=new Ba(r,i);e.calculateThresholdForBlock(a,s,o,r,i,c,d),this.matrix=d}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,a,s,o,c){for(var d=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,p=0;p<i;p++){var m=p<<e.BLOCK_SIZE_POWER;m>d&&(m=d);for(var y=e.cap(p,2,i-3),v=0;v<r;v++){var C=v<<e.BLOCK_SIZE_POWER;C>f&&(C=f);for(var E=e.cap(v,2,r-3),S=0,_=-2;_<=2;_++){var N=o[y+_];S+=N[E-2]+N[E-1]+N[E]+N[E+1]+N[E+2]}var k=S/25;e.thresholdBlock(n,C,m,k,a,c)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,a,s,o){for(var c=0,d=i*s+r;c<e.BLOCK_SIZE;c++,d+=s)for(var f=0;f<e.BLOCK_SIZE;f++)(n[d+f]&255)<=a&&o.set(r+f,i+c)},e.calculateBlackPoints=function(n,r,i,a,s){for(var o=s-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,d=new Array(i),f=0;f<i;f++){d[f]=new Int32Array(r);var p=f<<e.BLOCK_SIZE_POWER;p>o&&(p=o);for(var m=0;m<r;m++){var y=m<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var v=0,C=255,E=0,S=0,_=p*a+y;S<e.BLOCK_SIZE;S++,_+=a){for(var N=0;N<e.BLOCK_SIZE;N++){var k=n[_+N]&255;v+=k,k<C&&(C=k),k>E&&(E=k)}if(E-C>e.MIN_DYNAMIC_RANGE)for(S++,_+=a;S<e.BLOCK_SIZE;S++,_+=a)for(var N=0;N<e.BLOCK_SIZE;N++)v+=n[_+N]&255}var O=v>>e.BLOCK_SIZE_POWER*2;if(E-C<=e.MIN_DYNAMIC_RANGE&&(O=C/2,f>0&&m>0)){var I=(d[f-1][m]+2*d[f][m-1]+d[f-1][m-1])/4;C<I&&(O=I)}d[f][m]=O}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(iY),gm=(function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new a0("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new a0("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new a0("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new ct,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,o=void 0;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",n.append(o)}n.append(`
`)}return n.toString()},t})(),oY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),ww=(function(t){oY(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(n[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,a){return new e(this.delegate.crop(n,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(gm),lY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),cY=(function(t){lY(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var o=0,c=0,d=n.length;o<d;o+=4,c++){var f=void 0,p=n[o+3];if(p===0)f=255;else{var m=n[o],y=n[o+1],v=n[o+2];f=306*m+601*y+117*v+512>>10}s[c]=f}else for(var o=0,c=0,C=n.length;o<C;o+=4,c++){var f=void 0,p=n[o+3];if(p===0)f=255;else{var m=n[o],y=n[o+1],v=n[o+2];f=306*m+601*y+117*v+512>>10}s[c]=255-f}return s},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new Ye("Requested row is outside the image: "+n);var i=this.getWidth(),a=n*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return t.prototype.crop.call(this,n,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=n*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);return r.width=c,r.height=d,i.translate(c/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new ww(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(gm),uY=(function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),Vr=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(f){try{d(r.next(f))}catch(p){s(p)}}function c(f){try{d(r.throw(f))}catch(p){s(p)}}function d(f){f.done?a(f.value):i(f.value).then(o,c)}d((r=r.apply(t,e||[])).next())})},$r=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(f){d=[6,f],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},dY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eu=(function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Vr(this,void 0,void 0,function(){var e,n,r,i,a,s,o,c,d,f,p,m;return $r(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),n=[];try{for(r=dY(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(o=a.deviceId||a.id,c=a.label||"Video device "+(n.length+1),d=a.groupId,f={deviceId:o,label:c,kind:s,groupId:d},n.push(f))}catch(v){p={error:v}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(p)throw p.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return Vr(this,void 0,void 0,function(){var e;return $r(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new uY(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return Vr(this,void 0,void 0,function(){var n;return $r(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return Vr(this,void 0,void 0,function(){return $r(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Vr(this,void 0,void 0,function(){var r,i;return $r(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Vr(this,void 0,void 0,function(){var r;return $r(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Vr(this,void 0,void 0,function(){var r,i;return $r(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return Vr(this,void 0,void 0,function(){return $r(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Vr(this,void 0,void 0,function(){var i,a;return $r(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Vr(this,void 0,void 0,function(){var i;return $r(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return Vr(this,void 0,void 0,function(){var i;return $r(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return Vr(this,void 0,void 0,function(){var r;return $r(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Vr(this,void 0,void 0,function(){return $r(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new oa("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new oa("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new oa("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new oa("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new oa("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new oa("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new oa("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new oa("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new oa("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new oa("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Vr(this,void 0,void 0,function(){return $r(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return Vr(this,void 0,void 0,function(){return $r(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,o){if(i._stopAsyncDecode){o(new he("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(m){var d=n&&m instanceof he,f=m instanceof cr||m instanceof De,p=f&&r;if(d||p)return setTimeout(a,i._timeBetweenDecodingAttempts,s,o);o(m)}};return new Promise(function(s,o){return a(s,o)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);n(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){n(null,c);var s=c instanceof cr||c instanceof De,o=c instanceof he;(s||o)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new cY(r,n),a=new sY(i);return new qX(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),Fr=(function(){function t(e,n,r,i,a,s){r===void 0&&(r=n==null?0:8*n.length),s===void 0&&(s=Qt.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=Qt.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);Qt.arraycopy(n,0,r,0,n.length),Qt.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),w2;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(w2||(w2={}));const $e=w2;var C2;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(C2||(C2={}));const Tr=C2;var xm=(function(){function t(e,n,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),jd=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Ye;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t})(),_o=(function(){function t(e,n){if(n.length===0)throw new Ye;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Qt.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,a=n.length;i!==a;i++){var s=n[i];r=jd.addOrSubtract(r,s)}return r}r=n[0];for(var o=n.length,c=this.field,i=1;i<o;i++)r=jd.addOrSubtract(c.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ye("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var a=new Int32Array(r.length),s=r.length-n.length;Qt.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=jd.addOrSubtract(n[o-s],r[o]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ye("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=this.field,c=0;c<r;c++)for(var d=n[c],f=0;f<a;f++)s[c+f]=jd.addOrSubtract(s[c+f],o.multiply(d,i[f]));return new t(o,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),a=this.coefficients,s=0;s<n;s++)i[s]=r.multiply(a[s],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new Ye;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,o=0;o<i;o++)a[o]=s.multiply(r[o],n);return new t(s,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ye("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ye("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=n.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var o=i.getDegree()-e.getDegree(),c=n.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(o,c),f=n.buildMonomial(o,c);r=r.addOrSubtract(f),i=i.addOrSubtract(d)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t})(),fY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),iM=(function(t){fY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(hi),hY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),di=(function(t){hY(e,t);function e(n,r,i){var a=t.call(this)||this;a.primitive=n,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),o=1,c=0;c<r;c++)s[c]=o,o*=2,o>=r&&(o^=n,o&=r-1);a.expTable=s;for(var d=new Int32Array(r),c=0;c<r-1;c++)d[s[c]]=c;return a.logTable=d,a.zero=new _o(a,Int32Array.from([0])),a.one=new _o(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new Ye;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new _o(this,i)},e.prototype.inverse=function(n){if(n===0)throw new iM;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ut.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(jd),pY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),jp=(function(t){pY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(hi),mY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Xf=(function(t){mY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(hi),ym=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new _o(r,e),a=new Int32Array(n),s=!0,o=0;o<n;o++){var c=i.evaluateAt(r.exp(o+r.getGeneratorBase()));a[a.length-1-o]=c,c!==0&&(s=!1)}if(!s)for(var d=new _o(r,a),f=this.runEuclideanAlgorithm(r.buildMonomial(n,1),d,n),p=f[0],m=f[1],y=this.findErrorLocations(p),v=this.findErrorMagnitudes(m,y),o=0;o<y.length;o++){var C=e.length-1-r.log(y[o]);if(C<0)throw new jp("Bad error location");e[C]=di.addOrSubtract(e[C],v[o])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var a=this.field,s=e,o=n,c=a.getZero(),d=a.getOne();o.getDegree()>=(r/2|0);){var f=s,p=c;if(s=o,c=d,s.isZero())throw new jp("r_{i-1} was zero");o=f;for(var m=a.getZero(),y=s.getCoefficient(s.getDegree()),v=a.inverse(y);o.getDegree()>=s.getDegree()&&!o.isZero();){var C=o.getDegree()-s.getDegree(),E=a.multiply(o.getCoefficient(o.getDegree()),v);m=m.addOrSubtract(a.buildMonomial(C,E)),o=o.addOrSubtract(s.multiplyByMonomial(C,E))}if(d=m.multiply(c).addOrSubtract(p),o.getDegree()>=s.getDegree())throw new Xf("Division algorithm failed to reduce polynomial?")}var S=d.getCoefficient(0);if(S===0)throw new jp("sigmaTilde(0) was zero");var _=a.inverse(S),N=d.multiplyScalar(_),k=o.multiplyScalar(_);return[N,k]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,a=this.field,s=1;s<a.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==n)throw new jp("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var o=a.inverse(n[s]),c=1,d=0;d<r;d++)if(s!==d){var f=a.multiply(n[d],o),p=(f&1)===0?f|1:f&-2;c=a.multiply(c,p)}i[s]=a.multiply(e.evaluateAt(o),a.inverse(c)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],o))}return i},t})(),br;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(br||(br={}));var W4=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),a=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),o=new xm(a,s,null,null);return o.setNumBits(i.length),o},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=br.UPPER,i=br.UPPER,a="",s=0;s<n;)if(i===br.BINARY){if(n-s<5)break;var o=t.readCode(e,s,5);if(s+=5,o===0){if(n-s<11)break;o=t.readCode(e,s,11)+31,s+=11}for(var c=0;c<o;c++){if(n-s<8){s=n;break}var d=t.readCode(e,s,8);a+=bt.castAsNonUtf8Char(d),s+=8}i=r}else{var f=i===br.DIGIT?4:5;if(n-s<f)break;var d=t.readCode(e,s,f);s+=f;var p=t.getCharacter(i,d);p.startsWith("CTRL_")?(r=i,i=t.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a},t.getTable=function(e){switch(e){case"L":return br.LOWER;case"P":return br.PUNCT;case"M":return br.MIXED;case"D":return br.DIGIT;case"B":return br.BINARY;case"U":default:return br.UPPER}},t.getCharacter=function(e,n){switch(e){case br.UPPER:return t.UPPER_TABLE[n];case br.LOWER:return t.LOWER_TABLE[n];case br.MIXED:return t.MIXED_TABLE[n];case br.PUNCT:return t.PUNCT_TABLE[n];case br.DIGIT:return t.DIGIT_TABLE[n];default:throw new Xf("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=di.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=di.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=di.AZTEC_DATA_10):(r=12,n=di.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new De;for(var s=e.length%r,o=new Int32Array(a),c=0;c<a;c++,s+=r)o[c]=t.readCode(e,s,r);try{var d=new ym(n);d.decode(o,a-i)}catch(E){throw new De(E)}for(var f=(1<<r)-1,p=0,c=0;c<i;c++){var m=o[c];if(m===0||m===f)throw new De;(m===1||m===f-1)&&p++}for(var y=new Array(i*r-p),v=0,c=0;c<i;c++){var m=o[c];if(m===1||m===f-1)y.fill(m>1,v,v+r-1),v+=r-1;else for(var C=r-1;C>=0;--C)y[v++]=(m&1<<C)!==0}return y},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(var o=0;o<a.length;o++)a[o]=o;else for(var c=i+1+2*ut.truncDivision(ut.truncDivision(i,2)-1,15),d=i/2,f=ut.truncDivision(c,2),o=0;o<d;o++){var p=o+ut.truncDivision(o,15);a[d-o-1]=f-p-1,a[d+o]=f+p+1}for(var o=0,m=0;o<r;o++){for(var y=(r-o)*4+(n?9:12),v=o*2,C=i-1-v,E=0;E<y;E++)for(var S=E*2,_=0;_<2;_++)s[m+S+_]=e.get(a[v+_],a[v+E]),s[m+2*y+S+_]=e.get(a[v+E],a[C-_]),s[m+4*y+S+_]=e.get(a[C-_],a[C-E]),s[m+6*y+S+_]=e.get(a[C-E],a[v+_]);m+=y*8}return s},t.readCode=function(e,n,r){for(var i=0,a=n;a<n+r;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),St=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var a=e-r,s=n-i;return Math.sqrt(a*a+s*s)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var a=e[r];n+=a}return n},t})(),E2=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),ze=(function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*E2.floatToIntBits(this.x)+E2.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,o;if(r>=n&&r>=i?(s=e[0],a=e[1],o=e[2]):i>=r&&i>=n?(s=e[1],a=e[0],o=e[2]):(s=e[2],a=e[0],o=e[1]),this.crossProductZ(a,s,o)<0){var c=a;a=o,o=c}e[0]=a,e[1]=s,e[2]=o},t.distance=function(e,n){return St.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,a=n.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},t})(),Cw=(function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),gY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),xY=(function(t){gY(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r)||this;return o.compact=i,o.nbDatablocks=a,o.nbLayers=s,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Cw),S2=(function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=n/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new he}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,o=!1,c=!1,d=!1,f=!1,p=!1,m=this.width,y=this.height;s;){s=!1;for(var v=!0;(v||!c)&&n<m;)v=this.containsBlackPoint(r,i,n,!1),v?(n++,s=!0,c=!0):c||n++;if(n>=m){a=!0;break}for(var C=!0;(C||!d)&&i<y;)C=this.containsBlackPoint(e,n,i,!0),C?(i++,s=!0,d=!0):d||i++;if(i>=y){a=!0;break}for(var E=!0;(E||!f)&&e>=0;)E=this.containsBlackPoint(r,i,e,!1),E?(e--,s=!0,f=!0):f||e--;if(e<0){a=!0;break}for(var S=!0;(S||!p)&&r>=0;)S=this.containsBlackPoint(e,n,r,!0),S?(r--,s=!0,p=!0):p||r--;if(r<0){a=!0;break}s&&(o=!0)}if(!a&&o){for(var _=n-e,N=null,k=1;N===null&&k<_;k++)N=this.getBlackPointOnSegment(e,i-k,e+k,i);if(N==null)throw new he;for(var O=null,k=1;O===null&&k<_;k++)O=this.getBlackPointOnSegment(e,r+k,e+k,r);if(O==null)throw new he;for(var I=null,k=1;I===null&&k<_;k++)I=this.getBlackPointOnSegment(n,r+k,n-k,r);if(I==null)throw new he;for(var M=null,k=1;M===null&&k<_;k++)M=this.getBlackPointOnSegment(n,i-k,n-k,i);if(M==null)throw new he;return this.centerEdges(M,N,I,O)}else throw new he},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var a=St.round(St.distance(e,n,r,i)),s=(r-e)/a,o=(i-n)/a,c=this.image,d=0;d<a;d++){var f=St.round(e+d*s),p=St.round(n+d*o);if(c.get(f,p))return new ze(f,p)}return null},t.prototype.centerEdges=function(e,n,r,i){var a=e.getX(),s=e.getY(),o=n.getX(),c=n.getY(),d=r.getX(),f=r.getY(),p=i.getX(),m=i.getY(),y=t.CORR;return a<this.width/2?[new ze(p-y,m+y),new ze(o+y,c+y),new ze(d-y,f-y),new ze(a+y,s-y)]:[new ze(p+y,m+y),new ze(o+y,c-y),new ze(d-y,f+y),new ze(a-y,s-y)]},t.prototype.containsBlackPoint=function(e,n,r,i){var a=this.image;if(i){for(var s=e;s<=n;s++)if(a.get(s,r))return!0}else for(var o=e;o<=n;o++)if(a.get(r,o))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),q4=(function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<n.length&&a;s+=2){var o=Math.floor(n[s]),c=Math.floor(n[s+1]);if(o<-1||o>r||c<-1||c>i)throw new he;a=!1,o===-1?(n[s]=0,a=!0):o===r&&(n[s]=r-1,a=!0),c===-1?(n[s+1]=0,a=!0):c===i&&(n[s+1]=i-1,a=!0)}a=!0;for(var s=n.length-2;s>=0&&a;s-=2){var o=Math.floor(n[s]),c=Math.floor(n[s+1]);if(o<-1||o>r||c<-1||c>i)throw new he;a=!1,o===-1?(n[s]=0,a=!0):o===r&&(n[s]=r-1,a=!0),c===-1?(n[s+1]=0,a=!0):c===i&&(n[s+1]=i-1,a=!0)}},t})(),aM=(function(){function t(e,n,r,i,a,s,o,c,d){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=o,this.a23=c,this.a33=d}return t.quadrilateralToQuadrilateral=function(e,n,r,i,a,s,o,c,d,f,p,m,y,v,C,E){var S=t.quadrilateralToSquare(e,n,r,i,a,s,o,c),_=t.squareToQuadrilateral(d,f,p,m,y,v,C,E);return _.times(S)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,m=0;m<n;m+=2){var y=e[m],v=e[m+1],C=a*y+c*v+p;e[m]=(r*y+s*v+d)/C,e[m+1]=(i*y+o*v+f)/C}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,o=this.a22,c=this.a23,d=this.a31,f=this.a32,p=this.a33,m=e.length,y=0;y<m;y++){var v=e[y],C=n[y],E=a*v+c*C+p;e[y]=(r*v+s*C+d)/E,n[y]=(i*v+o*C+f)/E}},t.squareToQuadrilateral=function(e,n,r,i,a,s,o,c){var d=e-r+a-o,f=n-i+s-c;if(d===0&&f===0)return new t(r-e,a-r,e,i-n,s-i,n,0,0,1);var p=r-a,m=o-a,y=i-s,v=c-s,C=p*v-m*y,E=(d*v-m*f)/C,S=(p*f-d*y)/C;return new t(r-e+E*r,o-e+S*o,e,i-n+E*i,c-n+S*c,n,E,S,1)},t.quadrilateralToSquare=function(e,n,r,i,a,s,o,c){return t.squareToQuadrilateral(e,n,r,i,a,s,o,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),yY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),vY=(function(t){yY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,a,s,o,c,d,f,p,m,y,v,C,E,S,_,N,k){var O=aM.quadrilateralToQuadrilateral(a,s,o,c,d,f,p,m,y,v,C,E,S,_,N,k);return this.sampleGridWithTransform(n,r,i,O)},e.prototype.sampleGridWithTransform=function(n,r,i,a){if(r<=0||i<=0)throw new he;for(var s=new Ba(r,i),o=new Float32Array(2*r),c=0;c<i;c++){for(var d=o.length,f=c+.5,p=0;p<d;p+=2)o[p]=p/2+.5,o[p+1]=f;a.transformPoints(o),q4.checkAndNudgePoints(n,o);try{for(var p=0;p<d;p+=2)n.get(Math.floor(o[p]),Math.floor(o[p+1]))&&s.set(p/2,c)}catch{throw new he}}return s},e})(q4),Ew=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new vY,t})(),ci=(function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new ze(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),bY=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new xY(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new he;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var o=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(a,s,o){var c=(a>>n-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(ut.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new he},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),o=r-1;o>=0;--o)s[o]=e&15,e>>=4;try{var c=new ym(di.AZTEC_PARAM);c.decode(s,a)}catch{throw new he}for(var d=0,o=0;o<i;o++)d=(d<<4)+s[o];return d},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(n,s,1,-1),c=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),f=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(f,o)*this.nbCenterLayers/(this.distancePoint(a,n)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(o,c,d,f))break}n=o,r=c,i=d,a=f,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new he;this.compact=this.nbCenterLayers===5;var m=new ze(n.getX()+.5,n.getY()-.5),y=new ze(r.getX()+.5,r.getY()+.5),v=new ze(i.getX()-.5,i.getY()+.5),C=new ze(a.getX()-.5,a.getY()-.5);return this.expandSquare([m,y,v,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var a=new S2(this.image).detect();e=a[0],n=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new ci(s+7,o-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new ci(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ci(s-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ci(s-7,o-7),!1,-1,-1).toResultPoint()}var c=St.round((e.getX()+i.getX()+n.getX()+r.getX())/4),d=St.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var a=new S2(this.image,15,c,d).detect();e=a[0],n=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new ci(c+7,d-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new ci(c+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ci(c-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ci(c-7,d-7),!1,-1,-1).toResultPoint()}return c=St.round((e.getX()+i.getX()+n.getX()+r.getX())/4),d=St.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new ci(c,d)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,a){var s=Ew.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,d=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,c,c,d,c,d,d,c,d,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,a=this.distanceResultPoint(e,n),s=a/r,o=e.getX(),c=e.getY(),d=s*(n.getX()-e.getX())/a,f=s*(n.getY()-e.getY())/a,p=0;p<r;p++)this.image.get(St.round(o+p*d),St.round(c+p*f))&&(i|=1<<r-p-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var a=3;e=new ci(e.getX()-a,e.getY()+a),n=new ci(n.getX()-a,n.getY()-a),r=new ci(r.getX()+a,r.getY()-a),i=new ci(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var o=this.getColor(e,n);return o!==s||(o=this.getColor(n,r),o!==s)?!1:(o=this.getColor(r,i),o===s)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,a=(n.getY()-e.getY())/r,s=0,o=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),f=Math.ceil(r),p=0;p<f;p++)o+=i,c+=a,this.image.get(St.round(o),St.round(c))!==d&&s++;var m=s/r;return m>.1&&m<.9?0:m<=.1===d?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===n;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===n;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===n;)s+=i;return s-=i,new ci(a,s)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new ze(o+i*a,c+i*s),f=new ze(o-i*a,c-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new ze(o+i*a,c+i*s),m=new ze(o-i*a,c-i*s),y=[d,p,f,m];return y},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=St.round(e.getX()),r=St.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return St.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return St.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ut.truncDivision(this.nbLayers-4,8)+1)+15},t})(),A2=(function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new bY(e.getBlackMatrix()),a=null,s=null;try{var o=i.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(n,a),s=new W4().decode(o)}catch(p){r=p}if(s==null)try{var o=i.detectMirror(!0);a=o.getPoints(),this.reportFoundResultPoints(n,a),s=new W4().decode(o)}catch(p){throw r??p}var c=new Fr(s.getText(),s.getRawBytes(),s.getNumBits(),a,$e.AZTEC,Qt.currentTimeMillis()),d=s.getByteSegments();d!=null&&c.putMetadata(Tr.BYTE_SEGMENTS,d);var f=s.getECLevel();return f!=null&&c.putMetadata(Tr.ERROR_CORRECTION_LEVEL,f),c},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(en.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t})(),wY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){wY(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new A2,n)||this}return e})(Eu);var er=(function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(en.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,n),s=a.getResultMetadata(),o=270;s!==null&&s.get(Tr.ORIENTATION)===!0&&(o=o+s.get(Tr.ORIENTATION)%360),a.putMetadata(Tr.ORIENTATION,o);var c=a.getResultPoints();if(c!==null)for(var d=i.getHeight(),f=0;f<c.length;f++)c[f]=new ze(d-c[f].getY()-1,c[f].getX());return a}else throw new he}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),a=new dr(r),s=n&&n.get(en.TRY_HARDER)===!0,o=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var d=Math.trunc(i/2),f=0;f<c;f++){var p=Math.trunc((f+1)/2),m=(f&1)===0,y=d+o*(m?p:-p);if(y<0||y>=i)break;try{a=e.getBlackRow(y,a)}catch{continue}for(var v=function(_){if(_===1&&(a.reverse(),n&&n.get(en.NEED_RESULT_POINT_CALLBACK)===!0)){var N=new Map;n.forEach(function(I,M){return N.set(M,I)}),N.delete(en.NEED_RESULT_POINT_CALLBACK),n=N}try{var k=C.decodeRow(y,a,n);if(_===1){k.putMetadata(Tr.ORIENTATION,180);var O=k.getResultPoints();O!==null&&(O[0]=new ze(r-O[0].getX()-1,O[0].getY()),O[1]=new ze(r-O[1].getX()-1,O[1].getY()))}return{value:k}}catch{}},C=this,E=0;E<2;E++){var S=v(E);if(typeof S=="object")return S.value}}throw new he},t.recordPattern=function(e,n,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(n>=s)throw new he;for(var o=!e.get(n),c=0,d=n;d<s;){if(e.get(d)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}d++}if(!(c===i||c===i-1&&d===s))throw new he},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,a=e.get(n);n>0&&i>=0;)e.get(--n)!==a&&(i--,a=!a);if(i>=0)throw new he;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=n[o];if(a<s)return Number.POSITIVE_INFINITY;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],m=n[f]*c,y=p>m?p-m:m-p;if(y>r)return Number.POSITIVE_INFINITY;d+=y}return d/a},t})(),CY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),K4=(function(t){CY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),o=i,c=!1,d=6,f=i;f<r;f++)if(n.get(f)!==c)s[a]++;else{if(a===d-1){for(var p=e.MAX_AVG_VARIANCE,m=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var v=er.patternMatchVariance(s,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);v<p&&(p=v,m=y)}if(m>=0&&n.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,m]);o+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new he},e.decodeCode=function(n,r,i){er.recordPattern(n,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],d=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=o)}if(s>=0)return s;throw new he},e.prototype.decodeRow=function(n,r,i){var a=i&&i.get(en.ASSUME_GS1)===!0,s=e.findStartPattern(r),o=s[2],c=0,d=new Uint8Array(20);d[c++]=o;var f;switch(o){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new De}for(var p=!1,m=!1,y="",v=s[0],C=s[1],E=Int32Array.from([0,0,0,0,0,0]),S=0,_=0,N=o,k=0,O=!0,I=!1,M=!1;!p;){var L=m;switch(m=!1,S=_,_=e.decodeCode(r,E,C),d[c++]=_,_!==e.CODE_STOP&&(O=!0),_!==e.CODE_STOP&&(k++,N+=k*_),v=C,C+=E.reduce(function(J,q){return J+q},0),_){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new De}switch(f){case e.CODE_CODE_A:if(_<64)M===I?y+=String.fromCharCode(32+_):y+=String.fromCharCode(32+_+128),M=!1;else if(_<96)M===I?y+=String.fromCharCode(_-64):y+=String.fromCharCode(_+64),M=!1;else switch(_!==e.CODE_STOP&&(O=!1),_){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&M?(I=!0,M=!1):I&&M?(I=!1,M=!1):M=!0;break;case e.CODE_SHIFT:m=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(_<96)M===I?y+=String.fromCharCode(32+_):y+=String.fromCharCode(32+_+128),M=!1;else switch(_!==e.CODE_STOP&&(O=!1),_){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&M?(I=!0,M=!1):I&&M?(I=!1,M=!1):M=!0;break;case e.CODE_SHIFT:m=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(_<100)_<10&&(y+="0"),y+=_;else switch(_!==e.CODE_STOP&&(O=!1),_){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}L&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var B=C-v;if(C=r.getNextUnset(C),!r.isRange(C,Math.min(r.getSize(),C+(C-v)/2),!1))throw new he;if(N-=k*S,N%103!==S)throw new cr;var le=y.length;if(le===0)throw new he;le>0&&O&&(f===e.CODE_CODE_C?y=y.substring(0,le-2):y=y.substring(0,le-1));for(var ae=(s[1]+s[0])/2,fe=v+B/2,W=d.length,de=new Uint8Array(W),xe=0;xe<W;xe++)de[xe]=d[xe];var H=[new ze(ae,n),new ze(fe,n)];return new Fr(y,de,0,H,$e.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(er),EY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),_y=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X4=(function(t){EY(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.counters;d.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(r,d),p=r.getNextSet(f[1]),m=r.getSize(),y,v;do{e.recordPattern(r,p,d);var C=e.toNarrowWidePattern(d);if(C<0)throw new he;y=e.patternToChar(C),this.decodeRowResult+=y,v=p;try{for(var E=(a=void 0,_y(d)),S=E.next();!S.done;S=E.next()){var _=S.value;p+=_}}catch(W){a={error:W}}finally{try{S&&!S.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var N=0;try{for(var k=_y(d),O=k.next();!O.done;O=k.next()){var _=O.value;N+=_}}catch(W){o={error:W}}finally{try{O&&!O.done&&(c=k.return)&&c.call(k)}finally{if(o)throw o.error}}var I=p-v-N;if(p!==m&&I*2<N)throw new he;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,L=0,B=0;B<M;B++)L+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(B));if(this.decodeRowResult.charAt(M)!==e.ALPHABET_STRING.charAt(L%43))throw new cr;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new he;var le;this.extendedMode?le=e.decodeExtended(this.decodeRowResult):le=this.decodeRowResult;var ae=(f[1]+f[0])/2,fe=v+N/2;return new Fr(le,null,0,[new ze(ae,n),new ze(fe,n)],$e.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),a=n.getNextSet(0),s=0,o=a,c=!1,d=r.length,f=a;f<i;f++)if(n.get(f)!==c)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new he},e.toNarrowWidePattern=function(n){var r,i,a=n.length,s=0,o;do{var c=2147483647;try{for(var d=(r=void 0,_y(n)),f=d.next();!f.done;f=d.next()){var p=f.value;p<c&&p>s&&(c=p)}}catch(C){r={error:C}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=c,o=0;for(var m=0,y=0,v=0;v<a;v++){var p=n[v];p>s&&(y|=1<<a-1-v,o++,m+=p)}if(o===3){for(var v=0;v<a&&o>0;v++){var p=n[v];if(p>s&&(o--,p*2>=m))return-1}return y}}while(o>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new he},e.decodeExtended=function(n){for(var r=n.length,i="",a=0;a<r;a++){var s=n.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var o=n.charAt(a+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new De;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new De;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new De;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new De;break}i+=c,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(er),SY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ty=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y4=(function(t){SY(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.findAsteriskPattern(r),f=r.getNextSet(d[1]),p=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var y,v;do{e.recordPattern(r,f,m);var C=this.toPattern(m);if(C<0)throw new he;y=this.patternToChar(C),this.decodeRowResult+=y,v=f;try{for(var E=(a=void 0,Ty(m)),S=E.next();!S.done;S=E.next()){var _=S.value;f+=_}}catch(B){a={error:B}}finally{try{S&&!S.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}f=r.getNextSet(f)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var N=0;try{for(var k=Ty(m),O=k.next();!O.done;O=k.next()){var _=O.value;N+=_}}catch(B){o={error:B}}finally{try{O&&!O.done&&(c=k.return)&&c.call(k)}finally{if(o)throw o.error}}if(f===p||!r.get(f))throw new he;if(this.decodeRowResult.length<2)throw new he;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),M=(d[1]+d[0])/2,L=v+N/2;return new Fr(I,null,0,[new ze(M,n),new ze(L,n)],$e.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,o=!1,c=a.length,d=0,f=i;f<r;f++)if(n.get(f)!==o)a[d]++;else{if(d===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,f]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,o=!o}throw new he},e.prototype.toPattern=function(n){var r,i,a=0;try{for(var s=Ty(n),o=s.next();!o.done;o=s.next()){var c=o.value;a+=c}}catch(v){r={error:v}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,f=n.length,p=0;p<f;p++){var m=Math.round(n[p]*9/a);if(m<1||m>4)return-1;if((p&1)===0)for(var y=0;y<m;y++)d=d<<1|1;else d<<=m}return d},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new he},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",a=0;a<r;a++){var s=n.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new De;var o=n.charAt(a+1),c="\0";switch(s){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new De;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new De;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new De;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new De;break}i+=c,a++}else i+=s}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var a=1,s=0,o=r-1;o>=0;o--)s+=a*e.ALPHABET_STRING.indexOf(n.charAt(o)),++a>i&&(a=1);if(n.charAt(r)!==e.ALPHABET_STRING[s%47])throw new cr},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(er),AY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),_Y=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z4=(function(t){AY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var a,s,o=this.decodeStart(r),c=this.decodeEnd(r),d=new ct;e.decodeMiddle(r,o[1],c[0],d);var f=d.toString(),p=null;i!=null&&(p=i.get(en.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var m=f.length,y=!1,v=0;try{for(var C=_Y(p),E=C.next();!E.done;E=C.next()){var S=E.value;if(m===S){y=!0;break}S>v&&(v=S)}}catch(k){a={error:k}}finally{try{E&&!E.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}if(!y&&m>v&&(y=!0),!y)throw new De;var _=[new ze(o[1],n),new ze(c[0],n)],N=new Fr(f,null,0,_,$e.ITF,new Date().getTime());return N},e.decodeMiddle=function(n,r,i,a){var s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);r<i;){er.recordPattern(n,r,s);for(var d=0;d<5;d++){var f=2*d;o[d]=s[f],c[d]=s[f+1]}var p=e.decodeDigit(o);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),s.forEach(function(m){r+=m})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!n.get(a);a--)i--;if(i!==0)throw new he},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new he;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof he&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var a=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-a,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var a=i.length,s=new Int32Array(a),o=n.getSize(),c=!1,d=0,f=r;s.fill(0);for(var p=r;p<o;p++)if(n.get(p)!==c)s[d]++;else{if(d===a-1){if(er.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,p];f+=s[0]+s[1],Qt.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,c=!c}throw new he},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var o=e.PATTERNS[s],c=er.patternMatchVariance(n,o,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new he},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(er),TY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hu=(function(t){TY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,a,!1,this.START_END_PATTERN,s);var o=i[0];a=i[1];var c=o-(a-o);c>=0&&(r=n.isRange(c,o,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,a=r-1;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new De;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new De;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,a){return this.findGuardPattern(n,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(n,r,i,a,s){var o=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var c=0,d=r,f=a.length,p=i,m=r;m<o;m++)if(n.get(m)!==p)s[c]++;else{if(c===f-1){if(er.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,m]);d+=s[0]+s[1];for(var y=s.slice(2,s.length),v=0;v<c-1;v++)s[v]=y[v];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,p=!p}throw new he},e.decodeDigit=function(n,r,i,a){this.recordPattern(n,i,r);for(var s=this.MAX_AVG_VARIANCE,o=-1,c=a.length,d=0;d<c;d++){var f=a[d],p=er.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);p<s&&(s=p,o=d)}if(o>=0)return o;throw new he},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(er),NY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kY=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,i),s=i.toString(),o=t.parseExtensionString(s),c=[new ze((r[0]+r[1])/2,e),new ze(a,e)],d=new Fr(s,null,0,c,$e.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},t.prototype.decodeMiddle=function(e,n,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=n[1],d=0,f=0;f<5&&c<o;f++){var p=hu.decodeDigit(e,s,c,hu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var m=(i=void 0,NY(s)),y=m.next();!y.done;y=m.next()){var v=y.value;c+=v}}catch(E){i={error:E}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}p>=10&&(d|=1<<4-f),f!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new he;var C=this.determineCheckDigit(d);if(t.extensionChecksum(r.toString())!==C)throw new he;return c},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new he},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[Tr.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return n+i+"."+s},t})(),OY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MY=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,i),s=i.toString(),o=t.parseExtensionString(s),c=[new ze((r[0]+r[1])/2,e),new ze(a,e)],d=new Fr(s,null,0,c,$e.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&d.putAllMetadata(o),d},t.prototype.decodeMiddle=function(e,n,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var o=e.getSize(),c=n[1],d=0,f=0;f<2&&c<o;f++){var p=hu.decodeDigit(e,s,c,hu.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);try{for(var m=(i=void 0,OY(s)),y=m.next();!y.done;y=m.next()){var v=y.value;c+=v}}catch(C){i={error:C}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}p>=10&&(d|=1<<1-f),f!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new he;if(parseInt(r.toString())%4!==d)throw new he;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Tr.ISSUE_NUMBER,parseInt(e)]])},t})(),DY=(function(){function t(){}return t.decodeRow=function(e,n,r){var i=hu.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new kY;return a.decodeRow(e,n,i)}catch{var s=new MY;return s.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),RY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Yn=(function(t){RY(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return n}return e.prototype.decodeRow=function(n,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(en.NEED_RESULT_POINT_CALLBACK);if(s!=null){var o=new ze((a[0]+a[1])/2,n);s.foundPossibleResultPoint(o)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=c.rowOffset,f=c.resultString;if(s!=null){var p=new ze(d,n);s.foundPossibleResultPoint(p)}var m=e.decodeEnd(r,d);if(s!=null){var y=new ze((m[0]+m[1])/2,n);s.foundPossibleResultPoint(y)}var v=m[1],C=v+(v-m[0]);if(C>=r.getSize()||!r.isRange(v,C,!1))throw new he;var E=f.toString();if(E.length<8)throw new De;if(!e.checkChecksum(E))throw new cr;var S=(a[1]+a[0])/2,_=(m[1]+m[0])/2,N=this.getBarcodeFormat(),k=[new ze(S,n),new ze(_,n)],O=new Fr(E,null,0,k,N,new Date().getTime()),I=0;try{var M=DY.decodeRow(n,r,m[1]);O.putMetadata(Tr.UPC_EAN_EXTENSION,M.getText()),O.putAllMetadata(M.getResultMetadata()),O.addResultPoints(M.getResultPoints()),I=M.getText().length}catch{}var L=i==null?null:i.get(en.ALLOWED_EAN_EXTENSIONS);if(L!=null){var B=!1;for(var le in L)if(I.toString()===le){B=!0;break}if(!B)throw new he}return N===$e.EAN_13||$e.UPC_A,O},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,a=r-1;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new De;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=n.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new De;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(hu),IY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),J4=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_2=(function(t){IY(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=n.getSize(),p=r[1],m=0,y=0;y<6&&p<f;y++){var v=Yn.decodeDigit(n,d,p,Yn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var C=(a=void 0,J4(d)),E=C.next();!E.done;E=C.next()){var S=E.value;p+=S}}catch(O){a={error:O}}finally{try{E&&!E.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}v>=10&&(m|=1<<5-y)}i=e.determineFirstDigit(i,m);var _=Yn.findGuardPattern(n,p,!0,Yn.MIDDLE_PATTERN,new Int32Array(Yn.MIDDLE_PATTERN.length).fill(0));p=_[1];for(var y=0;y<6&&p<f;y++){var v=Yn.decodeDigit(n,d,p,Yn.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var N=(o=void 0,J4(d)),k=N.next();!k.done;k=N.next()){var S=k.value;p+=S}}catch(M){o={error:M}}finally{try{k&&!k.done&&(c=N.return)&&c.call(N)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return $e.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n,n;throw new he},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Yn),LY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Q4=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eT=(function(t){LY(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=n.getSize(),p=r[1],m=0;m<4&&p<f;m++){var y=Yn.decodeDigit(n,d,p,Yn.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var v=(a=void 0,Q4(d)),C=v.next();!C.done;C=v.next()){var E=C.value;p+=E}}catch(k){a={error:k}}finally{try{C&&!C.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}}var S=Yn.findGuardPattern(n,p,!0,Yn.MIDDLE_PATTERN,new Int32Array(Yn.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var m=0;m<4&&p<f;m++){var y=Yn.decodeDigit(n,d,p,Yn.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var _=(o=void 0,Q4(d)),N=_.next();!N.done;N=_.next()){var E=N.value;p+=E}}catch(I){o={error:I}}finally{try{N&&!N.done&&(c=_.return)&&c.call(_)}finally{if(o)throw o.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return $e.EAN_8},e})(Yn),jY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),tT=(function(t){jY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new _2,n}return e.prototype.getBarcodeFormat=function(){return $e.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new Fr(r.substring(1),null,null,n.getResultPoints(),$e.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new he},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Yn),PY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),BY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nT=(function(t){PY(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var a,s,o=this.decodeMiddleCounters.map(function(E){return E});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=n.getSize(),d=r[1],f=0,p=0;p<6&&d<c;p++){var m=e.decodeDigit(n,o,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var y=(a=void 0,BY(o)),v=y.next();!v.done;v=y.next()){var C=v.value;d+=C}}catch(E){a={error:E}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}m>=10&&(f|=1<<5-p)}return e.determineNumSysAndCheckDigit(new ct(i),f),d},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return Yn.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){n.insert(0,"0"+i),n.append("0"+a);return}throw he.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return $e.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new ct;i.append(n.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Yn),FY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),rT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ny=(function(t){FY(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(en.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf($e.EAN_13)>-1&&a.push(new _2),i.indexOf($e.UPC_A)>-1&&a.push(new tT),i.indexOf($e.EAN_8)>-1&&a.push(new eT),i.indexOf($e.UPC_E)>-1&&a.push(new nT)),a.length===0&&(a.push(new _2),a.push(new tT),a.push(new eT),a.push(new nT)),r.readers=a,r}return e.prototype.decodeRow=function(n,r,i){var a,s;try{for(var o=rT(this.readers),c=o.next();!c.done;c=o.next()){var d=c.value;try{var f=d.decodeRow(n,r,i),p=f.getBarcodeFormat()===$e.EAN_13&&f.getText().charAt(0)==="0",m=i==null?null:i.get(en.POSSIBLE_FORMATS),y=m==null||m.includes($e.UPC_A);if(p&&y){var v=f.getRawBytes(),C=new Fr(f.getText().substring(1),v,v?v.length:null,f.getResultPoints(),$e.UPC_A);return C.putAllMetadata(f.getResultMetadata()),C}return f}catch{}}}catch(E){a={error:E}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}throw new he},e.prototype.reset=function(){var n,r;try{for(var i=rT(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e})(er),zY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),UY=(function(t){zY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var a=this.getValidRowData(r);if(!a)throw new he;var s=this.codaBarDecodeRow(a.row);if(!s)throw new he;return new Fr(s,null,0,[new ze(a.left,n),new ze(a.right,n)],$e.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],o=r[0],c=1,d=1;d<r.length;d++)r[d]===o?c++:(o=r[d],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(c,d){return(c+d)/2},0));n.length>0;){var a=n.splice(0,8).splice(0,7),s=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var o=r.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e})(er),HY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),VY=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hl=(function(t){HY(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(er.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new he},e.count=function(n){return St.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,a=r[0],s=1;s<n.length;s++)r[s]>a&&(a=r[s],i=s);n[i]++},e.decrement=function(n,r){for(var i=0,a=r[0],s=1;s<n.length;s++)r[s]<a&&(a=r[s],i=s);n[i]--},e.isFinderPattern=function(n){var r,i,a=n[0]+n[1],s=a+n[2]+n[3],o=a/s;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var f=VY(n),p=f.next();!p.done;p=f.next()){var m=p.value;m>d&&(d=m),m<c&&(c=m)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(er),C1=(function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),sM=(function(){function t(e,n,r,i,a){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new ze(r,a)),this.resultPoints.push(new ze(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t})(),$Y=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bc=(function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,a,s=0;try{for(var o=$Y(e),c=o.next();!c.done;c=o.next()){var d=c.value;s+=d}}catch(_){i={error:_}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}for(var f=0,p=0,m=e.length,y=0;y<m-1;y++){var v=void 0;for(v=1,p|=1<<y;v<e[y];v++,p&=~(1<<y)){var C=t.combins(s-v-1,m-y-2);if(r&&p===0&&s-v-(m-y-1)>=m-y-1&&(C-=t.combins(s-v-(m-y),m-y-2)),m-y-1>1){for(var E=0,S=s-v-(m-y-2);S>n;S--)E+=t.combins(s-v-S-1,m-y-3);C-=E*(m-1-y)}else s-v>n&&C--;f+=C}s-=v}return f},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var a=1,s=1,o=e;o>r;o--)a*=o,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},t})(),GY=(function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new dr(r),a=0,s=e[0],o=s.getRightChar().getValue(),c=11;c>=0;--c)(o&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var d=e[c],f=d.getLeftChar().getValue(),p=11;p>=0;--p)(f&1<<p)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var m=d.getRightChar().getValue(),p=11;p>=0;--p)(m&1<<p)!==0&&i.set(a),a++}return i},t})(),ul=(function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),Sw=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),WY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),aa=(function(t){WY(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Sw),qY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),dl=(function(t){qY(e,t);function e(n,r,i){var a=t.call(this,n)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Sw),KY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Oc=(function(t){KY(e,t);function e(n,r,i){var a=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new De;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Sw),Pp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XY=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,a,s,o,c,d;if(!e)return null;if(e.length<2)throw new he;var f=e.substring(0,2);try{for(var p=Pp(t.TWO_DIGIT_DATA_LENGTH),m=p.next();!m.done;m=p.next()){var y=m.value;if(y[0]===f)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,y[2],e):t.processFixedAI(2,y[1],e)}}catch(I){n={error:I}}finally{try{m&&!m.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}if(e.length<3)throw new he;var v=e.substring(0,3);try{for(var C=Pp(t.THREE_DIGIT_DATA_LENGTH),E=C.next();!E.done;E=C.next()){var y=E.value;if(y[0]===v)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,y[2],e):t.processFixedAI(3,y[1],e)}}catch(I){i={error:I}}finally{try{E&&!E.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}try{for(var S=Pp(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),_=S.next();!_.done;_=S.next()){var y=_.value;if(y[0]===v)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,y[2],e):t.processFixedAI(4,y[1],e)}}catch(I){s={error:I}}finally{try{_&&!_.done&&(o=S.return)&&o.call(S)}finally{if(s)throw s.error}}if(e.length<4)throw new he;var N=e.substring(0,4);try{for(var k=Pp(t.FOUR_DIGIT_DATA_LENGTH),O=k.next();!O.done;O=k.next()){var y=O.value;if(y[0]===N)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,y[2],e):t.processFixedAI(4,y[1],e)}}catch(I){c={error:I}}finally{try{O&&!O.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}throw new he},t.processFixedAI=function(e,n,r){if(r.length<e)throw new he;var i=r.substring(0,e);if(r.length<e+n)throw new he;var a=r.substring(e,e+n),s=r.substring(e+n),o="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(s);return c==null?o:o+c},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),a;r.length<e+n?a=r.length:a=e+n;var s=r.substring(e,a),o=r.substring(a),c="("+i+")"+s,d=t.parseFieldsInGeneralPurpose(o);return d==null?c:c+d},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),s0=(function(){function t(e){this.buffer=new ct,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=XY.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new Oc(this.information.getSize(),Oc.FNC1,Oc.FNC1):new Oc(this.information.getSize(),n-1,Oc.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Oc(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,a=0;a<r;++a)e.get(n+a)&&(i|=1<<r-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new dl(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new dl(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new dl(this.current.getPosition(),this.buffer.toString()):n=new dl(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ul(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new dl(this.current.getPosition(),this.buffer.toString());return new ul(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ul(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new dl(this.current.getPosition(),this.buffer.toString());return new ul(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ul(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new dl(this.current.getPosition(),this.buffer.toString());return new ul(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ul(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new aa(e+5,aa.FNC1);if(n>=5&&n<15)return new aa(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new aa(e+7,""+(r+1));if(r>=90&&r<116)return new aa(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new De}return new aa(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new aa(e+5,aa.FNC1);if(n>=5&&n<15)return new aa(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new aa(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Xf("Decoding invalid alphanumeric value: "+r)}return new aa(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t})(),oM=(function(){function t(e){this.information=e,this.generalDecoder=new s0(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),YY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),ua=(function(t){YY(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&n.append("0"),s/10===0&&n.append("0"),n.append(s)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,a=0;a<13;a++){var s=n.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e})(oM),ZY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),JY=(function(t){ZY(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new ct;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ua),QY=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),eZ=(function(t){QY(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new ct;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(oM),tZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),o0=(function(t){tZ(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,a);for(var s=this.checkWeight(a),o=1e5,c=0;c<5;++c)s/o===0&&n.append("0"),o/=10;n.append(s)},e})(ua),nZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),lM=(function(t){nZ(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+o0.GTIN_SIZE+e.WEIGHT_SIZE)throw new he;var n=new ct;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+o0.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(o0),rZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),iZ=(function(t){rZ(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e})(lM),aZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),sZ=(function(t){aZ(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e})(lM),oZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),lZ=(function(t){oZ(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ua.GTIN_SIZE)throw new he;var n=new ct;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ua.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ua.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ua),cZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),uZ=(function(t){cZ(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ua.GTIN_SIZE)throw new he;var n=new ct;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ua.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ua.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ua.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(a.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ua),dZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Qs=(function(t){dZ(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new he;var n=new ct;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var o=i;o/10===0&&n.append("0"),n.append(o),s/10===0&&n.append("0"),n.append(s),a/10===0&&n.append("0"),n.append(a)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(o0);function fZ(t){try{if(t.get(1))return new JY(t);if(!t.get(2))return new eZ(t);var e=s0.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new iZ(t);case 5:return new sZ(t)}var n=s0.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new lZ(t);case 13:return new uZ(t)}var r=s0.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new Qs(t,"310","11");case 57:return new Qs(t,"320","11");case 58:return new Qs(t,"310","13");case 59:return new Qs(t,"320","13");case 60:return new Qs(t,"310","15");case 61:return new Qs(t,"320","15");case 62:return new Qs(t,"310","17");case 63:return new Qs(t,"320","17")}}catch(i){throw console.log(i),new Xf("unknown decoder: "+t)}}var iT=(function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),hZ=(function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,a){n.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},t})(),pZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),eo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mZ=(function(t){pZ(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(o){if(o instanceof he){if(!this.pairs.length)throw new he;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(n,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new he},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,a,s=r;s<this.rows.length;s++){var o=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,eo(n)),d=c.next();!d.done;d=c.next()){var f=d.value;this.pairs.push(f.getPairs())}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(n);p.push(o);try{return this.checkRows(p,s+1)}catch(m){console.log(m)}}}throw new he},e.isValidSequence=function(n){var r,i;try{for(var a=eo(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var o=s.value;if(!(n.length>o.length)){for(var c=!0,d=0;d<n.length;d++)if(n[d].getFinderPattern().getValue()!==o[d]){c=!1;break}if(c)return!0}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var o=this.rows[i];if(o.getRowNumber()>n){s=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new hZ(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,a,s,o,c,d;try{for(var f=eo(r),p=f.next();!p.done;p=f.next()){var m=p.value;if(m.getPairs().length!==n.length){var y=!0;try{for(var v=(s=void 0,eo(m.getPairs())),C=v.next();!C.done;C=v.next()){var E=C.value,S=!1;try{for(var _=(c=void 0,eo(n)),N=_.next();!N.done;N=_.next()){var k=N.value;if(iT.equals(E,k)){S=!0;break}}}catch(O){c={error:O}}finally{try{N&&!N.done&&(d=_.return)&&d.call(_)}finally{if(c)throw c.error}}S||(y=!1)}}catch(O){s={error:O}}finally{try{C&&!C.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}}}}catch(O){i={error:O}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,a,s,o,c,d;try{for(var f=eo(r),p=f.next();!p.done;p=f.next()){var m=p.value,y=!0;try{for(var v=(s=void 0,eo(n)),C=v.next();!C.done;C=v.next()){var E=C.value,S=!1;try{for(var _=(c=void 0,eo(m.getPairs())),N=_.next();!N.done;N=_.next()){var k=N.value;if(E.equals(k)){S=!0;break}}}catch(O){c={error:O}}finally{try{N&&!N.done&&(d=_.return)&&d.call(_)}finally{if(c)throw c.error}}if(!S){y=!1;break}}}catch(O){s={error:O}}finally{try{C&&!C.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}if(y)return!0}}catch(O){i={error:O}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=GY.buildBitArray(n),i=fZ(r),a=i.parseInformation(),s=n[0].getFinderPattern().getResultPoints(),o=n[n.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new Fr(a,null,null,c,$e.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);a+=c.getLeftChar().getChecksumPortion(),s++;var d=c.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var f=211*(s-4)+a;return f===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,o=!0,c=-1;do this.findNextPair(n,r,c),s=this.parseFoundFinderPattern(n,i,a),s===null?c=e.getNextSecondBar(n,this.startEnd[0]):o=!1;while(o);var d=this.decodeDataCharacter(n,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new he;var f;try{f=this.decodeDataCharacter(n,s,a,!1)}catch(p){f=null,console.log(p)}return new iT(d,f,s,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=n.getSize(),o;if(i>=0)o=i;else if(this.isEmptyPair(r))o=0;else{var c=r[r.length-1];o=c.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var f=!1;o<s&&(f=!n.get(o),!!f);)o++;for(var p=0,m=o,y=o;y<s;y++)if(n.get(y)!==f)a[p]++;else{if(p===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=m,this.startEnd[1]=y;return}d&&e.reverseCounters(a),m+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,f=!f}throw new he},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var a=n[i];n[i]=n[r-i-1],n[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(n,r,i){var a,s,o;if(i){for(var c=this.startEnd[0]-1;c>=0&&!n.get(c);)c--;c++,a=this.startEnd[0]-c,s=c,o=this.startEnd[1]}else s=this.startEnd[0],o=n.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];var d=this.getDecodeFinderCounters();Qt.arraycopy(d,0,d,1,d.length-1),d[0]=a;var f;try{f=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new sM(f,[s,o],s,o,r)},e.prototype.decodeDataCharacter=function(n,r,i,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)e.recordPatternInReverse(n,r.getStartEnd()[0],s);else{e.recordPattern(n,r.getStartEnd()[1],s);for(var c=0,d=s.length-1;c<d;c++,d--){var f=s[c];s[c]=s[d],s[d]=f}}var p=17,m=St.sum(new Int32Array(s))/p,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new he;for(var v=this.getOddCounts(),C=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var _=1*s[c]/m,N=_+.5;if(N<1){if(_<.3)throw new he;N=1}else if(N>8){if(_>8.7)throw new he;N=8}var k=c/2;(c&1)===0?(v[k]=N,E[k]=_-N):(C[k]=N,S[k]=_-N)}this.adjustOddEvenCounts(p);for(var O=4*r.getValue()+(i?0:2)+(a?0:1)-1,I=0,M=0,c=v.length-1;c>=0;c--){if(e.isNotA1left(r,i,a)){var L=e.WEIGHTS[O][2*c];M+=v[c]*L}I+=v[c]}for(var B=0,c=C.length-1;c>=0;c--)if(e.isNotA1left(r,i,a)){var L=e.WEIGHTS[O][2*c+1];B+=C[c]*L}var le=M+B;if((I&1)!==0||I>13||I<4)throw new he;var ae=(13-I)/2,fe=e.SYMBOL_WIDEST[ae],W=9-fe,de=Bc.getRSSvalue(v,fe,!0),xe=Bc.getRSSvalue(C,W,!1),H=e.EVEN_TOTAL_SUBSET[ae],J=e.GSUM[ae],q=de*H+xe+J;return new C1(q,le)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=St.sum(new Int32Array(this.getOddCounts())),i=St.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var o=!1,c=!1;i>13?c=!0:i<4&&(o=!0);var d=r+i-n,f=(r&1)===1,p=(i&1)===0;if(d===1)if(f){if(p)throw new he;s=!0}else{if(!p)throw new he;c=!0}else if(d===-1)if(f){if(p)throw new he;a=!0}else{if(!p)throw new he;o=!0}else if(d===0){if(f){if(!p)throw new he;r<i?(a=!0,c=!0):(s=!0,o=!0)}else if(p)throw new he}else throw new he;if(a){if(s)throw new he;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new he;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(hl),gZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),xZ=(function(t){gZ(e,t);function e(n,r,i){var a=t.call(this,n,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(C1),yZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),ky=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aT=(function(t){yZ(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var a,s,o,c,d=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var f=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var p=ky(this.possibleLeftPairs),m=p.next();!m.done;m=p.next()){var y=m.value;if(y.getCount()>1)try{for(var v=(o=void 0,ky(this.possibleRightPairs)),C=v.next();!C.done;C=v.next()){var E=C.value;if(E.getCount()>1&&e.checkChecksum(y,E))return e.constructResult(y,E)}}catch(S){o={error:S}}finally{try{C&&!C.done&&(c=v.return)&&c.call(v)}finally{if(o)throw o.error}}}}catch(S){a={error:S}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}throw new he},e.addOrTally=function(n,r){var i,a;if(r!=null){var s=!1;try{for(var o=ky(n),c=o.next();!c.done;c=o.next()){var d=c.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}s||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),a=new String(i).toString(),s=new ct,o=13-a.length;o>0;o--)s.append("0");s.append(a);for(var c=0,o=0;o<13;o++){var d=s.charAt(o).charCodeAt(0)-48;c+=(o&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c.toString());var f=n.getFinderPattern().getResultPoints(),p=r.getFinderPattern().getResultPoints();return new Fr(s.toString(),null,0,[f[0],f[1],p[0],p[1]],$e.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(n,r,i,a){try{var s=this.findFinderPattern(n,r),o=this.parseFoundFinderPattern(n,i,r,s),c=a==null?null:a.get(en.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(s[0]+s[1])/2;r&&(d=n.getSize()-1-d),c.foundPossibleResultPoint(new ze(d,i))}var f=this.decodeDataCharacter(n,o,!0),p=this.decodeDataCharacter(n,o,!1);return new xZ(1597*f.getValue()+p.getValue(),f.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)er.recordPatternInReverse(n,r.getStartEnd()[0],a);else{er.recordPattern(n,r.getStartEnd()[1]+1,a);for(var o=0,c=a.length-1;o<c;o++,c--){var d=a[o];a[o]=a[c],a[c]=d}}for(var f=i?16:15,p=St.sum(new Int32Array(a))/f,m=this.getOddCounts(),y=this.getEvenCounts(),v=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),o=0;o<a.length;o++){var E=a[o]/p,S=Math.floor(E+.5);S<1?S=1:S>8&&(S=8);var _=Math.floor(o/2);(o&1)===0?(m[_]=S,v[_]=E-S):(y[_]=S,C[_]=E-S)}this.adjustOddEvenCounts(i,f);for(var N=0,k=0,o=m.length-1;o>=0;o--)k*=9,k+=m[o],N+=m[o];for(var O=0,I=0,o=y.length-1;o>=0;o--)O*=9,O+=y[o],I+=y[o];var M=k+3*O;if(i){if((N&1)!==0||N>12||N<4)throw new he;var L=(12-N)/2,B=e.OUTSIDE_ODD_WIDEST[L],le=9-B,ae=Bc.getRSSvalue(m,B,!1),fe=Bc.getRSSvalue(y,le,!0),W=e.OUTSIDE_EVEN_TOTAL_SUBSET[L],de=e.OUTSIDE_GSUM[L];return new C1(ae*W+fe+de,M)}else{if((I&1)!==0||I>10||I<4)throw new he;var L=(10-I)/2,B=e.INSIDE_ODD_WIDEST[L],le=9-B,ae=Bc.getRSSvalue(m,B,!0),fe=Bc.getRSSvalue(y,le,!1),xe=e.INSIDE_ODD_TOTAL_SUBSET[L],de=e.INSIDE_GSUM[L];return new C1(fe*xe+ae+de,M)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=n.getSize(),s=!1,o=0;o<a&&(s=!n.get(o),r!==s);)o++;for(var c=0,d=o,f=o;f<a;f++)if(n.get(f)!==s)i[c]++;else{if(c===3){if(hl.isFinderPattern(i))return[d,f];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new he},e.prototype.parseFoundFinderPattern=function(n,r,i,a){for(var s=n.get(a[0]),o=a[0]-1;o>=0&&s!==n.get(o);)o--;o++;var c=a[0]-o,d=this.getDecodeFinderCounters(),f=new Int32Array(d.length);Qt.arraycopy(d,0,f,1,d.length-1),f[0]=c;var p=this.parseFinderValue(f,e.FINDER_PATTERNS),m=o,y=a[1];return i&&(m=n.getSize()-1-m,y=n.getSize()-1-y),new sM(p,[o,a[1]],m,y,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=St.sum(new Int32Array(this.getOddCounts())),a=St.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,d=!1;n?(i>12?o=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(c=!0)):(i>11?o=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(c=!0));var f=i+a-r,p=(i&1)===(n?1:0),m=(a&1)===1;if(f===1)if(p){if(m)throw new he;o=!0}else{if(!m)throw new he;d=!0}else if(f===-1)if(p){if(m)throw new he;s=!0}else{if(!m)throw new he;c=!0}else if(f===0){if(p){if(!m)throw new he;i<a?(s=!0,d=!0):(o=!0,c=!0)}else if(m)throw new he}else throw new he;if(s){if(o)throw new he;hl.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&hl.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new he;hl.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&hl.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(hl),vZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Pd=(function(t){vZ(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(en.POSSIBLE_FORMATS):null,a=n&&n.get(en.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=n&&n.get(en.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes($e.EAN_13)||i.includes($e.UPC_A)||i.includes($e.EAN_8)||i.includes($e.UPC_E))&&r.readers.push(new Ny(n)),i.includes($e.CODE_39)&&r.readers.push(new X4(a,s)),i.includes($e.CODE_93)&&r.readers.push(new Y4),i.includes($e.CODE_128)&&r.readers.push(new K4),i.includes($e.ITF)&&r.readers.push(new Z4),i.includes($e.CODABAR)&&r.readers.push(new UY),i.includes($e.RSS_14)&&r.readers.push(new aT),i.includes($e.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new mZ))),r.readers.length===0&&(r.readers.push(new Ny(n)),r.readers.push(new X4),r.readers.push(new Y4),r.readers.push(new Ny(n)),r.readers.push(new K4),r.readers.push(new Z4),r.readers.push(new aT)),r}return e.prototype.decodeRow=function(n,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(n,r,i)}catch{}throw new he},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e})(er),bZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){bZ(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new Pd(r),n,r)||this}return e})(Eu);var sT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dt=(function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),kt=(function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),wZ=(function(){function t(e,n,r,i,a,s){var o,c;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,f=s.getECCodewords(),p=s.getECBlocks();try{for(var m=sT(p),y=m.next();!y.done;y=m.next()){var v=y.value;d+=v.getCount()*(v.getDataCodewords()+f)}}catch(C){o={error:C}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(o)throw o.error}}this.totalCodewords=d}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if((e&1)!==0||(n&1)!==0)throw new De;try{for(var a=sT(t.VERSIONS),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===n)return o}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new De},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Dt(5,new kt(1,3))),new t(2,12,12,10,10,new Dt(7,new kt(1,5))),new t(3,14,14,12,12,new Dt(10,new kt(1,8))),new t(4,16,16,14,14,new Dt(12,new kt(1,12))),new t(5,18,18,16,16,new Dt(14,new kt(1,18))),new t(6,20,20,18,18,new Dt(18,new kt(1,22))),new t(7,22,22,20,20,new Dt(20,new kt(1,30))),new t(8,24,24,22,22,new Dt(24,new kt(1,36))),new t(9,26,26,24,24,new Dt(28,new kt(1,44))),new t(10,32,32,14,14,new Dt(36,new kt(1,62))),new t(11,36,36,16,16,new Dt(42,new kt(1,86))),new t(12,40,40,18,18,new Dt(48,new kt(1,114))),new t(13,44,44,20,20,new Dt(56,new kt(1,144))),new t(14,48,48,22,22,new Dt(68,new kt(1,174))),new t(15,52,52,24,24,new Dt(42,new kt(2,102))),new t(16,64,64,14,14,new Dt(56,new kt(2,140))),new t(17,72,72,16,16,new Dt(36,new kt(4,92))),new t(18,80,80,18,18,new Dt(48,new kt(4,114))),new t(19,88,88,20,20,new Dt(56,new kt(4,144))),new t(20,96,96,22,22,new Dt(68,new kt(4,174))),new t(21,104,104,24,24,new Dt(56,new kt(6,136))),new t(22,120,120,18,18,new Dt(68,new kt(6,175))),new t(23,132,132,20,20,new Dt(62,new kt(8,163))),new t(24,144,144,22,22,new Dt(62,new kt(8,156),new kt(2,155))),new t(25,8,18,6,16,new Dt(7,new kt(1,5))),new t(26,8,32,6,14,new Dt(11,new kt(1,10))),new t(27,12,26,10,24,new Dt(14,new kt(1,16))),new t(28,12,36,10,16,new Dt(18,new kt(1,22))),new t(29,16,36,14,16,new Dt(24,new kt(1,32))),new t(30,16,48,14,22,new Dt(28,new kt(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),CZ=(function(){function t(e){var n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new De;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ba(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return wZ.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,c=!1,d=!1,f=!1;do if(r===a&&i===0&&!o)e[n++]=this.readCorner1(a,s)&255,r-=2,i+=2,o=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!c)e[n++]=this.readCorner2(a,s)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[n++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!f)e[n++]=this.readCorner4(a,s)&255,r-=2,i+=2,f=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(n!==this.version.getTotalCodewords())throw new De;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var a=0;return this.readModule(e-2,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n,r,i)&&(a|=1),a<<=1,this.readModule(e,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e,n,r,i)&&(a|=1),a},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new Ye("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=n/i|0,o=r/a|0,c=s*i,d=o*a,f=new Ba(d,c),p=0;p<s;++p)for(var m=p*i,y=0;y<o;++y)for(var v=y*a,C=0;C<i;++C)for(var E=p*(i+2)+1+C,S=m+C,_=0;_<a;++_){var N=y*(a+2)+1+_;if(e.get(N,E)){var k=v+_;f.set(k,S)}}return f},t})(),oT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EZ=(function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,a,s,o=n.getECBlocks(),c=0,d=o.getECBlocks();try{for(var f=oT(d),p=f.next();!p.done;p=f.next()){var m=p.value;c+=m.getCount()}}catch(de){r={error:de}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var y=new Array(c),v=0;try{for(var C=oT(d),E=C.next();!E.done;E=C.next())for(var m=E.value,S=0;S<m.getCount();S++){var _=m.getDataCodewords(),N=o.getECCodewords()+_;y[v++]=new t(_,new Uint8Array(N))}}catch(de){a={error:de}}finally{try{E&&!E.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}for(var k=y[0].codewords.length,O=k-o.getECCodewords(),I=O-1,M=0,S=0;S<I;S++)for(var L=0;L<v;L++)y[L].codewords[S]=e[M++];for(var B=n.getVersionNumber()===24,le=B?8:v,L=0;L<le;L++)y[L].codewords[O-1]=e[M++];for(var ae=y[0].codewords.length,S=O;S<ae;S++)for(var L=0;L<v;L++){var fe=B?(L+8)%v:L,W=B&&fe>7?S-1:S;y[fe].codewords[W]=e[M++]}if(M!==e.length)throw new Ye;return y},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),cM=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ye(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,o=e<s?e:s,c=s-o,d=255>>8-o<<c;n=(a[i]&d)>>c,e-=o,r+=o,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;n=n<<e|(a[i]&d)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),qn;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(qn||(qn={}));var SZ=(function(){function t(){}return t.decode=function(e){var n=new cM(e),r=new ct,i=new ct,a=new Array,s=qn.ASCII_ENCODE;do if(s===qn.ASCII_ENCODE)s=this.decodeAsciiSegment(n,r,i);else{switch(s){case qn.C40_ENCODE:this.decodeC40Segment(n,r);break;case qn.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case qn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case qn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case qn.BASE256_ENCODE:this.decodeBase256Segment(n,r,a);break;default:throw new De}s=qn.ASCII_ENCODE}while(s!==qn.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new xm(e,r.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new De;if(a<=128)return i&&(a+=128),n.append(String.fromCharCode(a-1)),qn.ASCII_ENCODE;if(a===129)return qn.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&n.append("0"),n.append(""+s)}else switch(a){case 230:return qn.C40_ENCODE;case 231:return qn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return qn.ANSIX12_ENCODE;case 239:return qn.TEXT_ENCODE;case 240:return qn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new De;break}}while(e.available()>0);return qn.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else throw new De;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new De}a=0;break;case 3:r?(n.append(String.fromCharCode(c+224)),r=!1):n.append(String.fromCharCode(c+96)),a=0;break;default:throw new De}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var o=0;o<3;o++){var c=i[o];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else throw new De;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new De}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];r?(n.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):n.append(d),a=0}else throw new De;break;default:throw new De}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(s<14)n.append(String.fromCharCode(s+44));else if(s<40)n.append(String.fromCharCode(s+51));else throw new De;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new De;for(var o=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new De;o[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(o);try{n.append(Ji.decode(o,bt.ISO88591))}catch(d){throw new Xf("Platform does not support required encoding: "+d.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),AZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_Z=(function(){function t(){this.rsDecoder=new ym(di.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new CZ(e),a=i.getVersion(),s=i.readCodewords(),o=EZ.getDataBlocks(s,a),c=0;try{for(var d=AZ(o),f=d.next();!f.done;f=d.next()){var p=f.value;c+=p.getNumDataCodewords()}}catch(N){n={error:N}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}for(var m=new Uint8Array(c),y=o.length,v=0;v<y;v++){var C=o[v],E=C.getCodewords(),S=C.getNumDataCodewords();this.correctErrors(E,S);for(var _=0;_<S;_++)m[_*y+v]=E[_]}return SZ.decode(m)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new cr}for(var i=0;i<n;i++)e[i]=r[i]},t})(),TZ=(function(){function t(e){this.image=e,this.rectangleDetector=new S2(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new he;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],a=n[2],s=n[3],o=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(a,s)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var d=t.sampleGrid(this.image,r,i,a,s,o,c);return new Cw(d,[r,i,a,s])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),a=(n.getY()-e.getY())/(r+1);return new ze(e.getX()+i,e.getY()+a)},t.moveAway=function(e,n,r){var i=e.getX(),a=e.getY();return i<n?i-=1:i+=1,a<r?a-=1:a+=1,new ze(i,a)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(n,r),o=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),d=this.transitionsBetween(a,n),f=s,p=[a,n,r,i];return f>o&&(f=o,p[0]=n,p[1]=r,p[2]=i,p[3]=a),f>c&&(f=c,p[0]=r,p[1]=i,p[2]=a,p[3]=n),f>d&&(p[0]=i,p[1]=a,p[2]=n,p[3]=r),p},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a),o=t.shiftPoint(r,i,(s+1)*4),c=t.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(o,n),f=this.transitionsBetween(c,a);return d<f?(e[0]=n,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a),o=this.transitionsBetween(r,a),c=t.shiftPoint(n,r,(o+1)*4),d=t.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,a),o=this.transitionsBetween(d,a);var f=new ze(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),p=new ze(a.getX()+(n.getX()-r.getX())/(o+1),a.getY()+(n.getY()-r.getY())/(o+1));if(!this.isValid(f))return this.isValid(p)?p:null;if(!this.isValid(p))return f;var m=this.transitionsBetween(c,f)+this.transitionsBetween(d,f),y=this.transitionsBetween(c,p)+this.transitionsBetween(d,p);return m>y?f:p},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(n,a)+1,o=this.transitionsBetween(i,a)+1,c=t.shiftPoint(n,r,o*4),d=t.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,a)+1,o=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);var f=(n.getX()+r.getX()+i.getX()+a.getX())/4,p=(n.getY()+r.getY()+i.getY()+a.getY())/4;n=t.moveAway(n,f,p),r=t.moveAway(r,f,p),i=t.moveAway(i,f,p),a=t.moveAway(a,f,p);var m,y;return c=t.shiftPoint(n,r,o*4),c=t.shiftPoint(c,a,s*4),m=t.shiftPoint(r,n,o*4),m=t.shiftPoint(m,i,s*4),d=t.shiftPoint(i,a,o*4),d=t.shiftPoint(d,r,s*4),y=t.shiftPoint(a,i,o*4),y=t.shiftPoint(y,n,s*4),[c,m,d,y]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,a,s,o){var c=Ew.getInstance();return c.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(n.getX()),s=Math.trunc(n.getY()),o=Math.abs(s-i)>Math.abs(a-r);if(o){var c=r;r=i,i=c,c=a,a=s,s=c}for(var d=Math.abs(a-r),f=Math.abs(s-i),p=-d/2,m=i<s?1:-1,y=r<a?1:-1,v=0,C=this.image.get(o?i:r,o?r:i),E=r,S=i;E!==a;E+=y){var _=this.image.get(o?S:E,o?E:S);if(_!==C&&(v++,C=_),p+=f,p>0){if(S===s)break;S+=m,p-=d}}return v},t})(),T2=(function(){function t(){this.decoder=new _Z}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(en.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=t.NO_POINTS}else{var s=new TZ(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var o=r.getRawBytes(),c=new Fr(r.getText(),o,8*o.length,i,$e.DATA_MATRIX,Qt.currentTimeMillis()),d=r.getByteSegments();d!=null&&c.putMetadata(Tr.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!=null&&c.putMetadata(Tr.ERROR_CORRECTION_LEVEL,f),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new he;var i=this.moduleSize(n,e),a=n[1],s=r[1],o=n[0],c=r[0],d=(c-o+1)/i,f=(s-a+1)/i;if(d<=0||f<=0)throw new he;var p=i/2;a+=p,o+=p;for(var m=new Ba(d,f),y=0;y<f;y++)for(var v=a+y*i,C=0;C<d;C++)e.get(o+C*i,v)&&m.set(C,y);return m},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],a=e[1];i<r&&n.get(i,a);)i++;if(i===r)throw new he;var s=i-e[0];if(s===0)throw new he;return s},t.NO_POINTS=[],t})(),NZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){NZ(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new T2,n)||this}return e})(Eu);var Fc;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Fc||(Fc={}));var kZ=(function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new oa(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Ye;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Fc.L,"L",1),t.M=new t(Fc.M,"M",0),t.Q=new t(Fc.Q,"Q",3),t.H=new t(Fc.H,"H",2),t})(),OZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uM=(function(){function t(e){this.errorCorrectionLevel=kZ.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return ut.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var o=OZ(t.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var d=c.value,f=d[0];if(f===e||f===n)return new t(d[1]);var p=t.numBitsDiffering(e,f);p<a&&(s=d[1],a=p),e!==n&&(p=t.numBitsDiffering(n,f),p<a&&(s=d[1],a=p))}}catch(m){r={error:m}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),MZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},te=(function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var a=MZ(i),s=a.next();!s.done;s=a.next()){var o=s.value;r+=o.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),j=(function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),DZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rl=(function(){function t(e,n){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=a;var o=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var f=DZ(d),p=f.next();!p.done;p=f.next()){var m=p.value;o+=m.getCount()*(m.getDataCodewords()+c)}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this.totalCodewords=o}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new De;try{return this.getVersionForNumber((e-17)/4)}catch{throw new De}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Ye;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var s=uM.numBitsDiffering(e,a);s<n&&(r=i+7,n=s)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new Ba(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||n.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new te(7,new j(1,19)),new te(10,new j(1,16)),new te(13,new j(1,13)),new te(17,new j(1,9))),new t(2,Int32Array.from([6,18]),new te(10,new j(1,34)),new te(16,new j(1,28)),new te(22,new j(1,22)),new te(28,new j(1,16))),new t(3,Int32Array.from([6,22]),new te(15,new j(1,55)),new te(26,new j(1,44)),new te(18,new j(2,17)),new te(22,new j(2,13))),new t(4,Int32Array.from([6,26]),new te(20,new j(1,80)),new te(18,new j(2,32)),new te(26,new j(2,24)),new te(16,new j(4,9))),new t(5,Int32Array.from([6,30]),new te(26,new j(1,108)),new te(24,new j(2,43)),new te(18,new j(2,15),new j(2,16)),new te(22,new j(2,11),new j(2,12))),new t(6,Int32Array.from([6,34]),new te(18,new j(2,68)),new te(16,new j(4,27)),new te(24,new j(4,19)),new te(28,new j(4,15))),new t(7,Int32Array.from([6,22,38]),new te(20,new j(2,78)),new te(18,new j(4,31)),new te(18,new j(2,14),new j(4,15)),new te(26,new j(4,13),new j(1,14))),new t(8,Int32Array.from([6,24,42]),new te(24,new j(2,97)),new te(22,new j(2,38),new j(2,39)),new te(22,new j(4,18),new j(2,19)),new te(26,new j(4,14),new j(2,15))),new t(9,Int32Array.from([6,26,46]),new te(30,new j(2,116)),new te(22,new j(3,36),new j(2,37)),new te(20,new j(4,16),new j(4,17)),new te(24,new j(4,12),new j(4,13))),new t(10,Int32Array.from([6,28,50]),new te(18,new j(2,68),new j(2,69)),new te(26,new j(4,43),new j(1,44)),new te(24,new j(6,19),new j(2,20)),new te(28,new j(6,15),new j(2,16))),new t(11,Int32Array.from([6,30,54]),new te(20,new j(4,81)),new te(30,new j(1,50),new j(4,51)),new te(28,new j(4,22),new j(4,23)),new te(24,new j(3,12),new j(8,13))),new t(12,Int32Array.from([6,32,58]),new te(24,new j(2,92),new j(2,93)),new te(22,new j(6,36),new j(2,37)),new te(26,new j(4,20),new j(6,21)),new te(28,new j(7,14),new j(4,15))),new t(13,Int32Array.from([6,34,62]),new te(26,new j(4,107)),new te(22,new j(8,37),new j(1,38)),new te(24,new j(8,20),new j(4,21)),new te(22,new j(12,11),new j(4,12))),new t(14,Int32Array.from([6,26,46,66]),new te(30,new j(3,115),new j(1,116)),new te(24,new j(4,40),new j(5,41)),new te(20,new j(11,16),new j(5,17)),new te(24,new j(11,12),new j(5,13))),new t(15,Int32Array.from([6,26,48,70]),new te(22,new j(5,87),new j(1,88)),new te(24,new j(5,41),new j(5,42)),new te(30,new j(5,24),new j(7,25)),new te(24,new j(11,12),new j(7,13))),new t(16,Int32Array.from([6,26,50,74]),new te(24,new j(5,98),new j(1,99)),new te(28,new j(7,45),new j(3,46)),new te(24,new j(15,19),new j(2,20)),new te(30,new j(3,15),new j(13,16))),new t(17,Int32Array.from([6,30,54,78]),new te(28,new j(1,107),new j(5,108)),new te(28,new j(10,46),new j(1,47)),new te(28,new j(1,22),new j(15,23)),new te(28,new j(2,14),new j(17,15))),new t(18,Int32Array.from([6,30,56,82]),new te(30,new j(5,120),new j(1,121)),new te(26,new j(9,43),new j(4,44)),new te(28,new j(17,22),new j(1,23)),new te(28,new j(2,14),new j(19,15))),new t(19,Int32Array.from([6,30,58,86]),new te(28,new j(3,113),new j(4,114)),new te(26,new j(3,44),new j(11,45)),new te(26,new j(17,21),new j(4,22)),new te(26,new j(9,13),new j(16,14))),new t(20,Int32Array.from([6,34,62,90]),new te(28,new j(3,107),new j(5,108)),new te(26,new j(3,41),new j(13,42)),new te(30,new j(15,24),new j(5,25)),new te(28,new j(15,15),new j(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new te(28,new j(4,116),new j(4,117)),new te(26,new j(17,42)),new te(28,new j(17,22),new j(6,23)),new te(30,new j(19,16),new j(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new te(28,new j(2,111),new j(7,112)),new te(28,new j(17,46)),new te(30,new j(7,24),new j(16,25)),new te(24,new j(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new te(30,new j(4,121),new j(5,122)),new te(28,new j(4,47),new j(14,48)),new te(30,new j(11,24),new j(14,25)),new te(30,new j(16,15),new j(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new te(30,new j(6,117),new j(4,118)),new te(28,new j(6,45),new j(14,46)),new te(30,new j(11,24),new j(16,25)),new te(30,new j(30,16),new j(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new te(26,new j(8,106),new j(4,107)),new te(28,new j(8,47),new j(13,48)),new te(30,new j(7,24),new j(22,25)),new te(30,new j(22,15),new j(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new te(28,new j(10,114),new j(2,115)),new te(28,new j(19,46),new j(4,47)),new te(28,new j(28,22),new j(6,23)),new te(30,new j(33,16),new j(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new te(30,new j(8,122),new j(4,123)),new te(28,new j(22,45),new j(3,46)),new te(30,new j(8,23),new j(26,24)),new te(30,new j(12,15),new j(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new te(30,new j(3,117),new j(10,118)),new te(28,new j(3,45),new j(23,46)),new te(30,new j(4,24),new j(31,25)),new te(30,new j(11,15),new j(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new te(30,new j(7,116),new j(7,117)),new te(28,new j(21,45),new j(7,46)),new te(30,new j(1,23),new j(37,24)),new te(30,new j(19,15),new j(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new te(30,new j(5,115),new j(10,116)),new te(28,new j(19,47),new j(10,48)),new te(30,new j(15,24),new j(25,25)),new te(30,new j(23,15),new j(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new te(30,new j(13,115),new j(3,116)),new te(28,new j(2,46),new j(29,47)),new te(30,new j(42,24),new j(1,25)),new te(30,new j(23,15),new j(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new te(30,new j(17,115)),new te(28,new j(10,46),new j(23,47)),new te(30,new j(10,24),new j(35,25)),new te(30,new j(19,15),new j(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new te(30,new j(17,115),new j(1,116)),new te(28,new j(14,46),new j(21,47)),new te(30,new j(29,24),new j(19,25)),new te(30,new j(11,15),new j(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new te(30,new j(13,115),new j(6,116)),new te(28,new j(14,46),new j(23,47)),new te(30,new j(44,24),new j(7,25)),new te(30,new j(59,16),new j(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new te(30,new j(12,121),new j(7,122)),new te(28,new j(12,47),new j(26,48)),new te(30,new j(39,24),new j(14,25)),new te(30,new j(22,15),new j(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new te(30,new j(6,121),new j(14,122)),new te(28,new j(6,47),new j(34,48)),new te(30,new j(46,24),new j(10,25)),new te(30,new j(2,15),new j(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new te(30,new j(17,122),new j(4,123)),new te(28,new j(29,46),new j(14,47)),new te(30,new j(49,24),new j(10,25)),new te(30,new j(24,15),new j(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new te(30,new j(4,122),new j(18,123)),new te(28,new j(13,46),new j(32,47)),new te(30,new j(48,24),new j(14,25)),new te(30,new j(42,15),new j(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new te(30,new j(20,117),new j(4,118)),new te(28,new j(40,47),new j(7,48)),new te(30,new j(43,24),new j(22,25)),new te(30,new j(10,15),new j(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new te(30,new j(19,118),new j(6,119)),new te(28,new j(18,47),new j(31,48)),new te(30,new j(34,24),new j(34,25)),new te(30,new j(20,15),new j(61,16)))],t})(),ar;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(ar||(ar={}));var lT=(function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[ar.DATA_MASK_000,new t(ar.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[ar.DATA_MASK_001,new t(ar.DATA_MASK_001,function(e,n){return(e&1)===0})],[ar.DATA_MASK_010,new t(ar.DATA_MASK_010,function(e,n){return n%3===0})],[ar.DATA_MASK_011,new t(ar.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[ar.DATA_MASK_100,new t(ar.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[ar.DATA_MASK_101,new t(ar.DATA_MASK_101,function(e,n){return e*n%6===0})],[ar.DATA_MASK_110,new t(ar.DATA_MASK_110,function(e,n){return e*n%6<3})],[ar.DATA_MASK_111,new t(ar.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t})(),RZ=(function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new De;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var n=i-8;n<i;n++)a=this.copyBit(n,8,a);if(this.parsedFormatInfo=uM.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new De},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Rl.getVersionForNumber(n);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var o=Rl.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(o=Rl.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new De},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=lT.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=n.buildFunctionPattern(),s=!0,o=new Uint8Array(n.getTotalCodewords()),c=0,d=0,f=0,p=i-1;p>0;p-=2){p===6&&p--;for(var m=0;m<i;m++)for(var y=s?i-1-m:m,v=0;v<2;v++)a.get(p-v,y)||(f++,d<<=1,this.bitMatrix.get(p-v,y)&&(d|=1),f===8&&(o[c++]=d,f=0,d=0));s=!s}if(c!==n.getTotalCodewords())throw new De;return o},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=lT.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,a=e.getHeight();i<a;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t})(),cT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IZ=(function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,a,s,o;if(e.length!==n.getTotalCodewords())throw new Ye;var c=n.getECBlocksForLevel(r),d=0,f=c.getECBlocks();try{for(var p=cT(f),m=p.next();!m.done;m=p.next()){var y=m.value;d+=y.getCount()}}catch(W){i={error:W}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var v=new Array(d),C=0;try{for(var E=cT(f),S=E.next();!S.done;S=E.next())for(var y=S.value,_=0;_<y.getCount();_++){var N=y.getDataCodewords(),k=c.getECCodewordsPerBlock()+N;v[C++]=new t(N,new Uint8Array(k))}}catch(W){s={error:W}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(s)throw s.error}}for(var O=v[0].codewords.length,I=v.length-1;I>=0;){var M=v[I].codewords.length;if(M===O)break;I--}I++;for(var L=O-c.getECCodewordsPerBlock(),B=0,_=0;_<L;_++)for(var le=0;le<C;le++)v[le].codewords[_]=e[B++];for(var le=I;le<C;le++)v[le].codewords[L]=e[B++];for(var ae=v[0].codewords.length,_=L;_<ae;_++)for(var le=0;le<C;le++){var fe=le<I?_:_+1;v[le].codewords[fe]=e[B++]}return v},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),Vi;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Vi||(Vi={}));var un=(function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new Ye;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Vi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Vi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Vi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Vi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Vi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Vi.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Vi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Vi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Vi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Vi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),LZ=(function(){function t(){}return t.decode=function(e,n,r,i){var a=new cM(e),s=new ct,o=new Array,c=-1,d=-1;try{var f=null,p=!1,m=void 0;do{if(a.available()<4)m=un.TERMINATOR;else{var y=a.readBits(4);m=un.forBits(y)}switch(m){case un.TERMINATOR:break;case un.FNC1_FIRST_POSITION:case un.FNC1_SECOND_POSITION:p=!0;break;case un.STRUCTURED_APPEND:if(a.available()<16)throw new De;c=a.readBits(8),d=a.readBits(8);break;case un.ECI:var v=t.parseECIValue(a);if(f=Jn.getCharacterSetECIByValue(v),f===null)throw new De;break;case un.HANZI:var C=a.readBits(4),E=a.readBits(m.getCharacterCountBits(n));C===t.GB2312_SUBSET&&t.decodeHanziSegment(a,s,E);break;default:var S=a.readBits(m.getCharacterCountBits(n));switch(m){case un.NUMERIC:t.decodeNumericSegment(a,s,S);break;case un.ALPHANUMERIC:t.decodeAlphanumericSegment(a,s,S,p);break;case un.BYTE:t.decodeByteSegment(a,s,S,f,o,i);break;case un.KANJI:t.decodeKanjiSegment(a,s,S);break;default:throw new De}break}}while(m!==un.TERMINATOR)}catch{throw new De}return new xm(e,s.toString(),o.length===0?null:o,r===null?null:r.toString(),c,d)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new De;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,i[a]=o>>8&255,i[a+1]=o&255,a+=2,r--}try{n.append(Ji.decode(i,bt.GB2312))}catch(c){throw new De(c)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new De;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,i[a]=o>>8,i[a+1]=o,a+=2,r--}try{n.append(Ji.decode(i,bt.SHIFT_JIS))}catch(c){throw new De(c)}},t.decodeByteSegment=function(e,n,r,i,a,s){if(8*r>e.available())throw new De;for(var o=new Uint8Array(r),c=0;c<r;c++)o[c]=e.readBits(8);var d;i===null?d=bt.guessEncoding(o,s):d=i.getName();try{n.append(Ji.decode(o,d))}catch(f){throw new De(f)}a.push(o)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new De;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var a=n.length();r>1;){if(e.available()<11)throw new De;var s=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(s/45))),n.append(t.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new De;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var o=a;o<n.length();o++)n.charAt(o)==="%"&&(o<n.length()-1&&n.charAt(o+1)==="%"?n.deleteCharAt(o+1):n.setCharAt(o,""))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new De;var i=e.readBits(10);if(i>=1e3)throw new De;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new De;var a=e.readBits(7);if(a>=100)throw new De;n.append(t.toAlphaNumericChar(Math.floor(a/10))),n.append(t.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new De;var s=e.readBits(4);if(s>=10)throw new De;n.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new De},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),dM=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t})(),uT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jZ=(function(){function t(){this.rsDecoder=new ym(di.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(Ba.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new RZ(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,n);return a.setOther(new dM(!0)),a}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,a,s,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),f=IZ.getDataBlocks(d,o,c),p=0;try{for(var m=uT(f),y=m.next();!y.done;y=m.next()){var v=y.value;p+=v.getNumDataCodewords()}}catch(I){r={error:I}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var C=new Uint8Array(p),E=0;try{for(var S=uT(f),_=S.next();!_.done;_=S.next()){var v=_.value,N=v.getCodewords(),k=v.getNumDataCodewords();this.correctErrors(N,k);for(var O=0;O<k;O++)C[E++]=N[O]}}catch(I){a={error:I}}finally{try{_&&!_.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}return LZ.decode(C,o,c,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new cr}for(var i=0;i<n;i++)e[i]=r[i]},t})(),PZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),BZ=(function(t){PZ(e,t);function e(n,r,i){var a=t.call(this,n,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var a=(this.getX()+r)/2,s=(this.getY()+n)/2,o=(this.estimatedModuleSize+i)/2;return new e(a,s,o)},e})(ze),FZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zZ=(function(){function t(e,n,r,i,a,s,o){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,a=this.startY+n/2,s=new Int32Array(3),o=this.image,c=0;c<n;c++){var d=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var f=e;f<i&&!o.get(f,d);)f++;for(var p=0;f<i;){if(o.get(f,d))if(p===1)s[1]++;else if(p===2){if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,d,f);if(m!==null)return m}s[0]=s[2],s[1]=1,s[2]=0,p=1}else s[++p]++;else p===1&&p++,s[p]++;f++}if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,d,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new he},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var a=this.image,s=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&a.get(n,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&!a.get(n,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(n,c)&&o[1]<=r;)o[1]++,c++;if(c===s||o[1]>r)return NaN;for(;c<s&&!a.get(n,c)&&o[2]<=r;)o[2]++,c++;if(o[2]>r)return NaN;var d=o[0]+o[1]+o[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,a,s=e[0]+e[1]+e[2],o=t.centerFromEnd(e,r),c=this.crossCheckVertical(n,o,2*e[1],s);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var f=FZ(this.possibleCenters),p=f.next();!p.done;p=f.next()){var m=p.value;if(m.aboutEquals(d,c,o))return m.combineEstimate(c,o,d)}}catch(v){i={error:v}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var y=new BZ(o,c,d);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},t})(),UZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),HZ=(function(t){UZ(e,t);function e(n,r,i,a){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+n)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(s,o,c,a)},e})(ze),VZ=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),_d=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$Z=(function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(en.TRY_HARDER)!==void 0,r=e!=null&&e.get(en.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),o=Math.floor(3*a/(4*t.MAX_MODULES));(o<t.MIN_SKIP||n)&&(o=t.MIN_SKIP);for(var c=!1,d=new Int32Array(5),f=o-1;f<a&&!c;f+=o){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,m=0;m<s;m++)if(i.get(m,f))(p&1)===1&&p++,d[p]++;else if((p&1)===0)if(p===4)if(t.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,m,r);if(y===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>d[2]&&(f+=v-d[2]-o,m=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;else d[p]++;if(t.foundPatternCross(d)){var y=this.handlePossibleCenter(d,f,s,r);y===!0&&(o=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var C=this.selectBestPatterns();return ze.orderBestPatterns(C),new VZ(C)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var a=n/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var a=this.getCrossCheckStateCount(),s=0,o=this.image;e>=s&&n>=s&&o.get(n-s,e-s);)a[2]++,s++;if(e<s||n<s)return!1;for(;e>=s&&n>=s&&!o.get(n-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||n<s||a[1]>r)return!1;for(;e>=s&&n>=s&&o.get(n-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var c=o.getHeight(),d=o.getWidth();for(s=1;e+s<c&&n+s<d&&o.get(n+s,e+s);)a[2]++,s++;if(e+s>=c||n+s>=d)return!1;for(;e+s<c&&n+s<d&&!o.get(n+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=c||n+s>=d||a[3]>=r)return!1;for(;e+s<c&&n+s<d&&o.get(n+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var f=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(f-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var a=this.image,s=a.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(n,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(n,c)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(n,c)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(n,c);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(n,c)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(n,c)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=2*i?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var a=this.image,s=a.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,n);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,n)&&o[1]<=r;)o[1]++,c--;if(c<0||o[1]>r)return NaN;for(;c>=0&&a.get(c,n)&&o[0]<=r;)o[0]++,c--;if(o[0]>r)return NaN;for(c=e+1;c<s&&a.get(c,n);)o[2]++,c++;if(c===s)return NaN;for(;c<s&&!a.get(c,n)&&o[3]<r;)o[3]++,c++;if(c===s||o[3]>=r)return NaN;for(;c<s&&a.get(c,n)&&o[4]<r;)o[4]++,c++;if(o[4]>=r)return NaN;var d=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(d-i)>=i?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,r),o=this.crossCheckVertical(n,Math.floor(s),e[2],a);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],a)))){for(var c=a/7,d=!1,f=this.possibleCenters,p=0,m=f.length;p<m;p++){var y=f[p];if(y.aboutEquals(c,o,s)){f[p]=y.combineEstimate(o,s,c),d=!0;break}}if(!d){var v=new HZ(s,o,c);f.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=_d(this.possibleCenters),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.getCount()>=t.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,a=0,s=0,o=this.possibleCenters.length;try{for(var c=_d(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;f.getCount()>=t.CENTER_QUORUM&&(a++,s+=f.getEstimatedModuleSize())}}catch(C){e={error:C}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=s/o,m=0;try{for(var y=_d(this.possibleCenters),v=y.next();!v.done;v=y.next()){var f=v.value;m+=Math.abs(f.getEstimatedModuleSize()-p)}}catch(C){r={error:C}}finally{try{v&&!v.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return m<=.05*s},t.prototype.selectBestPatterns=function(){var e,n,r,i,a=this.possibleCenters.length;if(a<3)throw new he;var s=this.possibleCenters,o;if(a>3){var c=0,d=0;try{for(var f=_d(this.possibleCenters),p=f.next();!p.done;p=f.next()){var m=p.value,y=m.getEstimatedModuleSize();c+=y,d+=y*y}}catch(O){e={error:O}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}o=c/a;var v=Math.sqrt(d/a-o*o);s.sort(function(O,I){var M=Math.abs(I.getEstimatedModuleSize()-o),L=Math.abs(O.getEstimatedModuleSize()-o);return M<L?-1:M>L?1:0});for(var C=Math.max(.2*o,v),E=0;E<s.length&&s.length>3;E++){var S=s[E];Math.abs(S.getEstimatedModuleSize()-o)>C&&(s.splice(E,1),E--)}}if(s.length>3){var c=0;try{for(var _=_d(s),N=_.next();!N.done;N=_.next()){var k=N.value;c+=k.getEstimatedModuleSize()}}catch(I){r={error:I}}finally{try{N&&!N.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}o=c/s.length,s.sort(function(I,M){if(M.getCount()===I.getCount()){var L=Math.abs(M.getEstimatedModuleSize()-o),B=Math.abs(I.getEstimatedModuleSize()-o);return L<B?1:L>B?-1:0}else return M.getCount()-I.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),GZ=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(en.NEED_RESULT_POINT_CALLBACK);var n=new $Z(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(n,r,i);if(a<1)throw new he("No pattern found in proccess finder.");var s=t.computeDimension(n,r,i,a),o=Rl.getProvisionalVersionForDimension(s),c=o.getDimensionForVersion()-7,d=null;if(o.getAlignmentPatternCenters().length>0)for(var f=r.getX()-n.getX()+i.getX(),p=r.getY()-n.getY()+i.getY(),m=1-3/c,y=Math.floor(n.getX()+m*(f-n.getX())),v=Math.floor(n.getY()+m*(p-n.getY())),C=4;C<=16;C<<=1)try{d=this.findAlignmentInRegion(a,y,v,C);break}catch(N){if(!(N instanceof he))throw N}var E=t.createTransform(n,r,i,d,s),S=t.sampleGrid(this.image,E,s),_;return d===null?_=[i,n,r]:_=[i,n,r,d],new Cw(S,_)},t.createTransform=function(e,n,r,i,a){var s=a-3.5,o,c,d,f;return i!==null?(o=i.getX(),c=i.getY(),d=s-3,f=d):(o=n.getX()-e.getX()+r.getX(),c=n.getY()-e.getY()+r.getY(),d=s,f=s),aM.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,f,3.5,s,e.getX(),e.getY(),n.getX(),n.getY(),o,c,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=Ew.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var a=St.round(ze.distance(e,n)/i),s=St.round(ze.distance(e,r)/i),o=Math.floor((a+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new he("Dimensions could be not found.")}return o},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,n,r,i),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(n-(i-n)*s);return s=1,c<0?(s=n/(n-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-n)/(c-n),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,n,o,c),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var a=Math.abs(i-n)>Math.abs(r-e);if(a){var s=e;e=n,n=s,s=r,r=i,i=s}for(var o=Math.abs(r-e),c=Math.abs(i-n),d=-o/2,f=e<r?1:-1,p=n<i?1:-1,m=0,y=r+f,v=e,C=n;v!==y;v+=f){var E=a?C:v,S=a?v:C;if(m===1===this.image.get(E,S)){if(m===2)return St.distance(v,C,e,n);m++}if(d+=c,d>0){if(C===i)break;C+=p,d-=o}}return m===2?St.distance(r+f,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var a=Math.floor(i*e),s=Math.max(0,n-a),o=Math.min(this.image.getWidth()-1,n+a);if(o-s<e*3)throw new he("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-c<e*3)throw new he("Alignment bottom exceeds estimated module size.");var f=new zZ(this.image,s,c,o-s,d-c,e,this.resultPointCallback);return f.find()},t})(),N2=(function(){function t(){this.decoder=new jZ}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(en.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,n),i=t.NO_POINTS}else{var s=new GZ(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(s.getBits(),n),i=s.getPoints()}r.getOther()instanceof dM&&r.getOther().applyMirroredCorrection(i);var o=new Fr(r.getText(),r.getRawBytes(),void 0,i,$e.QR_CODE,void 0),c=r.getByteSegments();c!==null&&o.putMetadata(Tr.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!==null&&o.putMetadata(Tr.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(o.putMetadata(Tr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(Tr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new he;var i=this.moduleSize(n,e),a=n[1],s=r[1],o=n[0],c=r[0];if(o>=c||a>=s)throw new he;if(s-a!==c-o&&(c=o+(s-a),c>=e.getWidth()))throw new he;var d=Math.round((c-o+1)/i),f=Math.round((s-a+1)/i);if(d<=0||f<=0)throw new he;if(f!==d)throw new he;var p=Math.floor(i/2);a+=p,o+=p;var m=o+Math.floor((d-1)*i)-c;if(m>0){if(m>p)throw new he;o-=m}var y=a+Math.floor((f-1)*i)-s;if(y>0){if(y>p)throw new he;a-=y}for(var v=new Ba(d,f),C=0;C<f;C++)for(var E=a+Math.floor(C*i),S=0;S<d;S++)e.get(o+Math.floor(S*i),E)&&v.set(S,C);return v},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),a=e[0],s=e[1],o=!0,c=0;a<i&&s<r;){if(o!==n.get(a,s)){if(++c===5)break;o=!o}a++,s++}if(a===i||s===r)throw new he;return(a-e[0])/7},t.NO_POINTS=new Array,t})(),WZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wt=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return St.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=WZ(e),o=s.next();!o.done;o=s.next()){var c=o.value;i[a++]=c}}catch(d){n={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=Qn.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),qZ=(function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),KZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XZ=(function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),a=t.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(r,i)),new qZ(i,a)},t.detect=function(e,n){for(var r,i,a=new Array,s=0,o=0,c=!1;s<n.getHeight();){var d=t.findVertices(n,s,o);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,o=0;try{for(var f=(r=void 0,KZ(a)),p=f.next();!p.done;p=f.next()){var m=p.value;m[1]!=null&&(s=Math.trunc(Math.max(s,m[1].getY()))),m[3]!=null&&(s=Math.max(s,Math.trunc(m[3].getY())))}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s+=t.ROW_STEP;continue}if(c=!0,a.push(d),!e)break;d[2]!=null?(o=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},t.findVertices=function(e,n,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,a,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,a,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,a,s){for(var o=new Array(4),c=!1,d=new Int32Array(s.length);i<n;i+=t.ROW_STEP){var f=t.findGuardPattern(e,a,i,r,!1,s,d);if(f!=null){for(;i>0;){var p=t.findGuardPattern(e,a,--i,r,!1,s,d);if(p!=null)f=p;else{i++;break}}o[0]=new ze(f[0],i),o[1]=new ze(f[1],i),c=!0;break}}var m=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);m<n;m++){var f=t.findGuardPattern(e,p[0],m,r,!1,s,d);if(f!=null&&Math.abs(p[0]-f[0])<t.MAX_PATTERN_DRIFT&&Math.abs(p[1]-f[1])<t.MAX_PATTERN_DRIFT)p=f,y=0;else{if(y>t.SKIPPED_ROW_COUNT_MAX)break;y++}}m-=y+1,o[2]=new ze(p[0],m),o[3]=new ze(p[1],m)}return m-i<t.BARCODE_MIN_HEIGHT&&Qn.fill(o,null),o},t.findGuardPattern=function(e,n,r,i,a,s,o){Qn.fillWithin(o,0,o.length,0);for(var c=n,d=0;e.get(c,r)&&c>0&&d++<t.MAX_PIXEL_DRIFT;)c--;for(var f=c,p=0,m=s.length,y=a;f<i;f++){var v=e.get(f,r);if(v!==y)o[p]++;else{if(p===m-1){if(t.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,f]);c+=o[0]+o[1],Qt.arraycopy(o,2,o,0,p-1),o[p-1]=0,o[p]=0,p--}else p++;o[p]=1,y=!y}}return p===m-1&&t.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,f-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,a=0,s=0,o=0;o<i;o++)a+=e[o],s+=n[o];if(a<s)return 1/0;var c=a/s;r*=c;for(var d=0,f=0;f<i;f++){var p=e[f],m=n[f]*c,y=p>m?p-m:m-p;if(y>r)return 1/0;d+=y}return d/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),YZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cl=(function(){function t(e,n){if(n.length===0)throw new Ye;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Qt.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=YZ(this.coefficients),s=a.next();!s.done;s=a.next()){var o=s.value;i=this.field.add(i,o)}}catch(p){n={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}for(var c=this.coefficients[0],d=this.coefficients.length,f=1;f<d;f++)c=this.field.add(this.field.multiply(e,c),this.coefficients[f]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ye("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var a=new Int32Array(r.length),s=r.length-n.length;Qt.arraycopy(r,0,a,0,s);for(var o=s;o<r.length;o++)a[o]=this.field.add(n[o-s],r[o]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ye("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ye("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),o=0;o<r;o++)for(var c=n[o],d=0;d<a;d++)s[o+d]=this.field.add(s[o+d],this.field.multiply(c,i[d]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new Ye;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new ct,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t})(),ZZ=(function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Ye;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new iM;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),JZ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),QZ=(function(t){JZ(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var a=1,s=0;s<n;s++)i.expTable[s]=a,a=a*r%n;for(var s=0;s<n-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Cl(i,new Int32Array([0])),i.one=new Cl(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new Ye;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new Cl(this,i)},e.PDF417_GF=new e(wt.NUMBER_OF_CODEWORDS,3),e})(ZZ),eJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tJ=(function(){function t(){this.field=QZ.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,a,s=new Cl(this.field,e),o=new Int32Array(n),c=!1,d=n;d>0;d--){var f=s.evaluateAt(this.field.exp(d));o[n-d]=f,f!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(r!=null)try{for(var m=eJ(r),y=m.next();!y.done;y=m.next()){var v=y.value,C=this.field.exp(e.length-1-v),E=new Cl(this.field,new Int32Array([this.field.subtract(0,C),1]));p=p.multiply(E)}}catch(L){i={error:L}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}for(var S=new Cl(this.field,o),_=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),S,n),N=_[0],k=_[1],O=this.findErrorLocations(N),I=this.findErrorMagnitudes(k,N,O),d=0;d<O.length;d++){var M=e.length-1-this.field.log(O[d]);if(M<0)throw cr.getChecksumInstance();e[M]=this.field.subtract(e[M],I[d])}return O.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var a=e,s=n,o=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,f=o;if(a=s,o=c,a.isZero())throw cr.getChecksumInstance();s=d;for(var p=this.field.getZero(),m=a.getCoefficient(a.getDegree()),y=this.field.inverse(m);s.getDegree()>=a.getDegree()&&!s.isZero();){var v=s.getDegree()-a.getDegree(),C=this.field.multiply(s.getCoefficient(s.getDegree()),y);p=p.add(this.field.buildMonomial(v,C)),s=s.subtract(a.multiplyByMonomial(v,C))}c=p.multiply(o).subtract(f).negative()}var E=c.getCoefficient(0);if(E===0)throw cr.getChecksumInstance();var S=this.field.inverse(E),_=c.multiply(S),N=s.multiply(S);return[_,N]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,a=1;a<this.field.getSize()&&i<n;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==n)throw cr.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,n.getCoefficient(s));for(var o=new Cl(this.field,a),c=r.length,d=new Int32Array(c),s=0;s<c;s++){var f=this.field.inverse(r[s]),p=this.field.subtract(0,e.evaluateAt(f)),m=this.field.inverse(o.evaluateAt(f));d[s]=this.field.multiply(p,m)}return d},t})(),k2=(function(){function t(e,n,r,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,a)}return t.prototype.constructor_1=function(e,n,r,i,a){var s=n==null||r==null,o=i==null||a==null;if(s&&o)throw new he;s?(n=new ze(0,i.getY()),r=new ze(0,a.getY())):o&&(i=new ze(e.getWidth()-1,n.getY()),a=new ze(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var f=new ze(c.getX(),d);r?i=f:s=f}if(n>0){var p=r?this.bottomLeft:this.bottomRight,m=Math.trunc(p.getY()+n);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var y=new ze(p.getX(),m);r?a=y:o=y}return new t(this.image,i,a,s,o)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),nJ=(function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),Aw=(function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(s,o,c,d,f,p){if(s==="%%")return"%";if(n[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var m=f?parseInt(f.substr(1)):void 0,y;switch(p){case"s":y=n[r];break;case"c":y=n[r][0];break;case"f":y=parseFloat(n[r]).toFixed(s);break;case"p":y=parseFloat(n[r]).toPrecision(s);break;case"e":y=parseFloat(n[r]).toExponential(s);break;case"x":y=parseInt(n[r]).toString(m||16);break;case"d":y=parseFloat(parseInt(n[r],m||10).toPrecision(s)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(m);for(var v=parseInt(c),C=c&&c[0]+""=="0"?"0":" ";y.length<v;)y=o!==void 0?y+C:C+y;return y}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t})(),rJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fM=(function(){function t(e){this.boundingBox=new k2(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new Aw,i=0;try{for(var a=rJ(this.codewords),s=a.next();!s.done;s=a.next()){var o=s.value;if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),iJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a},Bd=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,a=function(p,m){var y={getKey:function(){return p},getValue:function(){return m}};y.getValue()>r?(r=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===r&&i.push(y.getKey())};try{for(var s=iJ(this.values.entries()),o=s.next();!o.done;o=s.next()){var c=aJ(o.value,2),d=c[0],f=c[1];a(d,f)}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return wt.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),sJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Oy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dT=(function(t){sJ(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=Oy(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,f=1,p=0,m=o;m<c;m++)if(r[m]!=null){var y=r[m],v=y.getRowNumber()-d;if(v===0)p++;else if(v===1)f=Math.max(f,p),p=1,d=y.getRowNumber();else if(v<0||y.getRowNumber()>=n.getRowCount()||v>m)r[m]=null;else{var C=void 0;f>2?C=(f-2)*v:C=v;for(var E=C>=m,S=1;S<=C&&!E;S++)E=r[m-S]!=null;E?r[m]=null:(d=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Oy(this.getCodewords()),o=s.next();!o.done;o=s.next()){var c=o.value;if(c!=null){var d=c.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),d=-1,f=s;f<o;f++)if(c[f]!=null){var p=c[f];p.setRowNumberAsRowIndicatorColumn();var m=p.getRowNumber()-d;m===0||(m===1?d=p.getRowNumber():p.getRowNumber()>=n.getRowCount()?c[f]=null:d=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),a=new Bd,s=new Bd,o=new Bd,c=new Bd;try{for(var d=Oy(i),f=d.next();!f.done;f=d.next()){var p=f.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var m=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:s.setValue(m*3+1);break;case 1:c.setValue(m/3),o.setValue(m%3);break;case 2:a.setValue(m+1);break}}}}catch(C){n={error:C}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}if(a.getValue().length===0||s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<wt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>wt.MAX_ROWS_IN_BARCODE)return null;var v=new nJ(a.getValue()[0],s.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var a=n[i];if(n[i]!=null){var s=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:s+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})(fM),oJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lJ=(function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=wt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=t.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(a=t.adjustRowNumberIfValid(i,a,o),o.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[n],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=o[n],d[3]=c[n],n>0&&(d[0]=r[n-1],d[4]=o[n-1],d[5]=c[n-1]),n>1&&(d[8]=r[n-2],d[10]=o[n-2],d[11]=c[n-2]),n<r.length-1&&(d[1]=r[n+1],d[6]=o[n+1],d[7]=c[n+1]),n<r.length-2&&(d[9]=r[n+2],d[12]=o[n+2],d[13]=c[n+2]);try{for(var f=oJ(d),p=f.next();!p.done;p=f.next()){var m=p.value;if(t.adjustRowNumber(s,m))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new Aw,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){n.format("    |   ");continue}n.format(" %3d|%3d",a.getRowNumber(),a.getValue())}n.format("%n")}return n.toString()},t})(),cJ=(function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),uJ=(function(){function t(){}return t.initialize=function(){for(var e=0;e<wt.SYMBOL_TABLE.length;e++)for(var n=wt.SYMBOL_TABLE[e],r=n&1,i=0;i<wt.BARS_IN_MODULE;i++){for(var a=0;(n&1)===r;)a+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(wt.BARS_IN_MODULE)),t.RATIOS_TABLE[e][wt.BARS_IN_MODULE-i-1]=Math.fround(a/wt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=St.sum(e),r=new Int32Array(wt.BARS_IN_MODULE),i=0,a=0,s=0;s<wt.MODULES_IN_CODEWORD;s++){var o=n/(2*wt.MODULES_IN_CODEWORD)+s*n/wt.MODULES_IN_CODEWORD;a+e[i]<=o&&(a+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return wt.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=St.sum(e),r=new Array(wt.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var a=E2.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var o=0;o<t.RATIOS_TABLE.length;o++){for(var c=0,d=t.RATIOS_TABLE[o],f=0;f<wt.BARS_IN_MODULE;f++){var p=Math.fround(d[f]-r[f]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,s=wt.SYMBOL_TABLE[o])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(wt.SYMBOL_TABLE.length).map(function(e){return new Array(wt.BARS_IN_MODULE)}),t})(),dJ=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),fT=(function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t})(),fJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hJ=(function(t){fJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(hi),pJ=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new hJ;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new bw;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),mJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),gJ=(function(t){mJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(hi),xJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),yJ=(function(t){xJ(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new Ye("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new gJ;i=ut.MAX_VALUE}this.buf=Qn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new bw;this.ensureCapacity(this.count+i),Qt.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Qn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e})(pJ),Ht;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ht||(Ht={}));function hM(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Bp;function co(t){if(typeof Bp>"u"&&(Bp=hM()),Bp===null)throw new Error("BigInt is not supported!");return Bp(t)}function vJ(){var t=[];t[0]=co(1);var e=co(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var bJ=(function(){function t(){}return t.decode=function(e,n){var r=new ct(""),i=Jn.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],o=new dJ;a<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(s,e,i,a,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,r);break;case t.ECI_CHARSET:Jn.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,o);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new De;default:a--,a=t.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw De.getFormatInstance()}if(r.length()===0)throw De.getFormatInstance();var c=new xm(null,r.toString(),null,n);return c.setOther(o),c},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw De.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,n++)i[a]=e[n];r.setSegmentIndex(ut.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new ct;n=t.textCompaction(e,n,s),r.setFileId(s.toString());var o=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new ct;n=t.textCompaction(e,n+1,c),r.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new ct;n=t.textCompaction(e,n+1,d),r.setSender(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new ct;n=t.textCompaction(e,n+1,f),r.setAddressee(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new ct;n=t.numericCompaction(e,n+1,p),r.setSegmentCount(ut.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new ct;n=t.numericCompaction(e,n+1,m),r.setTimestamp(fT.parseLong(m.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new ct;n=t.numericCompaction(e,n+1,y),r.setChecksum(ut.parseInt(y.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new ct;n=t.numericCompaction(e,n+1,v),r.setFileSize(fT.parseLong(v.toString()));break;default:throw De.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw De.getFormatInstance()}if(o!==-1){var C=n-o;r.isLastSegment()&&C--,r.setOptionalData(Qn.copyOfRange(e,o,o+C))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),a=new Int32Array((e[0]-n)*2),s=0,o=!1;n<e[0]&&!o;){var c=e[n++];if(c<t.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[n++],a[s]=c,s++;break}}return t.decodeTextCompaction(i,a,s,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var a=Ht.ALPHA,s=Ht.ALPHA,o=0;o<r;){var c=e[o],d="";switch(a){case Ht.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case t.LL:a=Ht.LOWER;break;case t.ML:a=Ht.MIXED;break;case t.PS:s=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case t.AS:s=a,a=Ht.ALPHA_SHIFT;break;case t.ML:a=Ht.MIXED;break;case t.PS:s=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.MIXED:if(c<t.PL)d=t.MIXED_CHARS[c];else switch(c){case t.PL:a=Ht.PUNCT;break;case 26:d=" ";break;case t.LL:a=Ht.LOWER;break;case t.AL:a=Ht.ALPHA;break;case t.PS:s=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.PUNCT:if(c<t.PAL)d=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=Ht.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.ALPHA_SHIFT:if(a=s,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.PUNCT_SHIFT:if(a=s,c<t.PAL)d=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=Ht.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break}d!==""&&i.append(d),o++}},t.byteCompaction=function(e,n,r,i,a){var s=new yJ,o=0,c=0,d=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),p=n[i++];i<n[0]&&!d;)switch(f[o++]=p,c=900*c+p,p=n[i++],p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(o%5===0&&o>0){for(var m=0;m<6;++m)s.write(Number(co(c)>>co(8*(5-m))));c=0,o=0}break}i===n[0]&&p<t.TEXT_COMPACTION_MODE_LATCH&&(f[o++]=p);for(var y=0;y<o;y++)s.write(f[y]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!d;){var v=n[i++];if(v<t.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+v;else switch(v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(o%5===0&&o>0){for(var m=0;m<6;++m)s.write(Number(co(c)>>co(8*(5-m))));c=0,o=0}}break}return a.append(Ji.decode(s.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,a=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!a;){var o=e[n++];if(n===e[0]&&(a=!0),o<t.TEXT_COMPACTION_MODE_LATCH)s[i]=o,i++;else switch(o){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||o===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(t.decodeBase900toBase10(s,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=co(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*co(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new De;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=hM()?vJ():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),Td=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wJ=(function(){function t(){}return t.decode=function(e,n,r,i,a,s,o){for(var c=new k2(e,n,r,i,a),d=null,f=null,p,m=!0;;m=!1){if(n!=null&&(d=t.getRowIndicatorColumn(e,c,n,!0,s,o)),i!=null&&(f=t.getRowIndicatorColumn(e,c,i,!1,s,o)),p=t.merge(d,f),p==null)throw he.getNotFoundInstance();var y=p.getBoundingBox();if(m&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var v=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(v,f);for(var C=d!=null,E=1;E<=v;E++){var S=C?E:v-E;if(p.getDetectionResultColumn(S)===void 0){var _=void 0;S===0||S===v?_=new dT(c,S===0):_=new fM(c),p.setDetectionResultColumn(S,_);for(var N=-1,k=N,O=c.getMinY();O<=c.getMaxY();O++){if(N=t.getStartColumn(p,S,O,C),N<0||N>c.getMaxX()){if(k===-1)continue;N=k}var I=t.detectCodeword(e,c.getMinX(),c.getMaxX(),C,N,O,s,o);I!=null&&(_.setCodeword(O,I),k=N,s=Math.min(s,I.getWidth()),o=Math.max(o,I.getWidth()))}}}return t.createDecoderResult(p)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=k2.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new lJ(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),s=0;try{for(var o=Td(i),c=o.next();!c.done;c=o.next()){var d=c.value;if(s+=a-d,d>0)break}}catch(y){n={error:y}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}for(var f=e.getCodewords(),p=0;s>0&&f[p]==null;p++)s--;for(var m=0,p=i.length-1;p>=0&&(m+=a-i[p],!(i[p]>0));p--);for(var p=f.length-1;m>0&&f[p]==null;p--)m--;return e.getBoundingBox().addMissingRows(s,m,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var a=Td(e),s=a.next();!s.done;s=a.next()){var o=s.value;i=Math.max(i,o)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,a,s){for(var o=new dT(n,i),c=0;c<2;c++)for(var d=c===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),p=Math.trunc(Math.trunc(r.getY()));p<=n.getMaxY()&&p>=n.getMinY();p+=d){var m=t.detectCodeword(e,0,e.getWidth(),i,f,p,a,s);m!=null&&(o.setCodeword(p,m),i?f=m.getStartX():f=m.getEndX())}return o},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>wt.MAX_CODEWORDS_IN_BARCODE)throw he.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=n[o][c+1].getValue(),f=o*e.getBarcodeColumnCount()+c;d.length===0?r.push(f):d.length===1?i[f]=d[0]:(s.push(f),a.push(d))}for(var p=new Array(a.length),m=0;m<p.length;m++)p[m]=a[m];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,wt.toIntArray(r),wt.toIntArray(s),p)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,a){for(var s=new Int32Array(i.length),o=100;o-- >0;){for(var c=0;c<s.length;c++)n[i[c]]=a[c][s[c]];try{return t.decodeCodewords(n,e,r)}catch(f){var d=f instanceof cr;if(!d)throw f}if(s.length===0)throw cr.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<a[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw cr.getChecksumInstance()}throw cr.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)s[o][c]=new Bd;var d=0;try{for(var f=Td(e.getDetectionResultColumns()),p=f.next();!p.done;p=f.next()){var m=p.value;if(m!=null)try{for(var y=(i=void 0,Td(m.getCodewords())),v=y.next();!v.done;v=y.next()){var C=v.value;if(C!=null){var E=C.getRowNumber();if(E>=0){if(E>=s.length)continue;s[E][d].setValue(C.getValue())}}}}catch(S){i={error:S}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}d++}}catch(S){n={error:S}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return s},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var a,s,o=i?1:-1,c=null;if(t.isValidBarcodeColumn(e,n-o)&&(c=e.getDetectionResultColumn(n-o).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,n-o)&&(c=e.getDetectionResultColumn(n-o).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var d=0;t.isValidBarcodeColumn(e,n-o);){n-=o;try{for(var f=(a=void 0,Td(e.getDetectionResultColumn(n).getCodewords())),p=f.next();!p.done;p=f.next()){var m=p.value;if(m!=null)return(i?m.getEndX():m.getStartX())+o*d*(m.getEndX()-m.getStartX())}}catch(y){a={error:y}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,a,s,o,c){a=t.adjustCodewordStartColumn(e,n,r,i,a,s);var d=t.getModuleBitCount(e,n,r,i,a,s);if(d==null)return null;var f,p=St.sum(d);if(i)f=a+p;else{for(var m=0;m<d.length/2;m++){var y=d[m];d[m]=d[d.length-1-m],d[d.length-1-m]=y}f=a,a=f-p}if(!t.checkCodewordSkew(p,o,c))return null;var v=uJ.getDecodedValue(d),C=wt.getCodeword(v);return C===-1?null:new cJ(a,f,t.getCodewordBucketNumber(v),C)},t.getModuleBitCount=function(e,n,r,i,a,s){for(var o=a,c=new Int32Array(8),d=0,f=i?1:-1,p=i;(i?o<r:o>=n)&&d<c.length;)e.get(o,s)===p?(c[d]++,o+=f):(d++,p=!p);return d===c.length||o===(i?r:n)&&d===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,a,s){for(var o=a,c=i?-1:1,d=0;d<2;d++){for(;(i?o>=n:o<r)&&i===e.get(o,s);){if(Math.abs(a-o)>t.CODEWORD_SKEW_SIZE)return a;o+=c}c=-c,i=!i}return o},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw De.getFormatInstance();var i=1<<n+1,a=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var s=bJ.decode(e,""+n);return s.setErrorsCorrected(a),s.setErasures(r.length),s},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw cr.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw De.getFormatInstance();var r=e[0];if(r>e.length)throw De.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw De.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new Aw,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new tJ,t})(),CJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O2=(function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw he.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof De||r instanceof cr?he.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,a,s=new Array,o=XZ.detectMultiple(e,n,r);try{for(var c=CJ(o.getPoints()),d=c.next();!d.done;d=c.next()){var f=d.value,p=wJ.decode(o.getBits(),f[4],f[5],f[6],f[7],t.getMinCodewordWidth(f),t.getMaxCodewordWidth(f)),m=new Fr(p.getText(),p.getRawBytes(),void 0,f,$e.PDF_417);m.putMetadata(Tr.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&m.putMetadata(Tr.PDF417_EXTRA_METADATA,y),s.push(m)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.map(function(v){return v})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?ut.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*wt.MODULES_IN_CODEWORD/wt.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*wt.MODULES_IN_CODEWORD/wt.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*wt.MODULES_IN_CODEWORD/wt.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*wt.MODULES_IN_CODEWORD/wt.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),EJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hT=(function(t){EJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(hi),pT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SJ=(function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(en.TRY_HARDER)!==void 0,r=e==null?null:e.get(en.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===$e.UPC_A||s===$e.UPC_E||s===$e.EAN_13||s===$e.EAN_8||s===$e.CODABAR||s===$e.CODE_39||s===$e.CODE_93||s===$e.CODE_128||s===$e.ITF||s===$e.RSS_14||s===$e.RSS_EXPANDED});a&&!n&&i.push(new Pd(e)),r.includes($e.QR_CODE)&&i.push(new N2),r.includes($e.DATA_MATRIX)&&i.push(new T2),r.includes($e.AZTEC)&&i.push(new A2),r.includes($e.PDF_417)&&i.push(new O2),a&&n&&i.push(new Pd(e))}i.length===0&&(n||i.push(new Pd(e)),i.push(new N2),i.push(new T2),i.push(new A2),i.push(new O2),n&&i.push(new Pd(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=pT(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new hT("No readers where selected, nothing can be read.");try{for(var i=pT(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(o){if(o instanceof hT)continue}}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new he("No MultiFormat Readers were able to detect the code.")},t})(),AJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),_J=(function(t){AJ(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,a=new SJ;return a.setHints(n),i=t.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e})(Eu),TJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){TJ(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new O2,n)||this}return e})(Eu);var NJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){NJ(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new N2,n)||this}return e})(Eu);var M2;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(M2||(M2={}));const Fp=M2;var pM=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new _o(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,a=n.length;a<=e;a++){var s=r.multiply(new _o(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));n.push(s),r=s}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new Ye("No error correction bytes");var r=e.length-n;if(r<=0)throw new Ye("No data bytes provided");var i=this.buildGenerator(n),a=new Int32Array(r);Qt.arraycopy(e,0,a,0,r);var s=new _o(this.field,a);s=s.multiplyByMonomial(n,1);for(var o=s.divide(i)[1],c=o.getCoefficients(),d=n-c.length,f=0;f<d;f++)e[r+f]=0;Qt.arraycopy(c,0,e,r+d,c.length)},t})(),Fd=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var o=r[s],c=0;c<i-1;c++){var d=o[c];d===o[c+1]&&d===r[s+1][c]&&d===r[s+1][c+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=0;o<i;o++){var c=r[s];o+6<i&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(t.isWhiteHorizontal(c,o-4,o)||t.isWhiteHorizontal(c,o+7,o+11))&&n++,s+6<a&&r[s][o]===1&&r[s+1][o]===0&&r[s+2][o]===1&&r[s+3][o]===1&&r[s+4][o]===1&&r[s+5][o]===0&&r[s+6][o]===1&&(t.isWhiteVertical(r,o,s-4,s)||t.isWhiteVertical(r,o,s+7,s+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var o=r[s],c=0;c<i;c++)o[c]===1&&n++;var d=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(n*2-d)*10/d);return f*t.N4},t.getDataMaskBit=function(e,n,r){var i,a;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:a=r*n,i=(a&1)+a%3;break;case 6:a=r*n,i=(a&1)+a%3&1;break;case 7:a=r*n,i=a%3+(r+n&1)&1;break;default:throw new Ye("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),a=n?e.getWidth():e.getHeight(),s=e.getArray(),o=0;o<i;o++){for(var c=0,d=-1,f=0;f<a;f++){var p=n?s[o][f]:s[f][o];p===d?c++:(c>=5&&(r+=t.N1+(c-5)),c=1,d=p)}c>=5&&(r+=t.N1+(c-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),kJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OJ=(function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=kJ(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Qn.fill(s,e)}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=n.bytes[r],o=0,c=this.width;o<c;++o)if(a[o]!==s[o])return!1;return!0},t.prototype.toString=function(){for(var e=new ct,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),D2=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new ct;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),MJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),ln=(function(t){MJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(hi),mT=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,a){t.clearMatrix(a),t.embedBasicPatterns(r,a),t.embedTypeInfo(n,i,a),t.maybeEmbedVersionInfo(r,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new dr;t.makeTypeInfoBits(e,n,i);for(var a=0,s=i.getSize();a<s;++a){var o=i.get(i.getSize()-1-a),c=t.TYPE_INFO_COORDINATES[a],d=c[0],f=c[1];if(r.setBoolean(d,f,o),a<8){var p=r.getWidth()-a-1,m=8;r.setBoolean(p,m,o)}else{var p=8,m=r.getHeight()-7+(a-8);r.setBoolean(p,m,o)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new dr;t.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var o=r.get(i);i--,n.setBoolean(a,n.getHeight()-11+s,o),n.setBoolean(n.getHeight()-11+s,a,o)}}},t.embedDataBits=function(e,n,r){for(var i=0,a=-1,s=r.getWidth()-1,o=r.getHeight()-1;s>0;){for(s===6&&(s-=1);o>=0&&o<r.getHeight();){for(var c=0;c<2;++c){var d=s-c;if(t.isEmpty(r.get(d,o))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,n!==255&&Fd.getDataMaskBit(n,d,o)&&(f=!f),r.setBoolean(d,o,f)}}o+=a}a=-a,o+=a,s-=2}if(i!==e.getSize())throw new ln("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-ut.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new Ye("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!D2.isValidMaskPattern(n))throw new ln("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(a,10);var s=new dr;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new ln("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new ln("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ln;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new ln;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new ln;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,n+i,a[s])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,n+i,a[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var o=i[a];if(o>=0)for(var c=0;c!==s;c++){var d=i[c];d>=0&&t.isEmpty(n.get(d,o))&&t.embedPositionAdjustmentPattern(d-2,o-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),DJ=(function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),gT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Fd.applyMaskPenaltyRule1(e)+Fd.applyMaskPenaltyRule2(e)+Fd.applyMaskPenaltyRule3(e)+Fd.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Fp.CHARACTER_SET)!==void 0;a&&(i=r.get(Fp.CHARACTER_SET).toString());var s=this.chooseMode(e,i),o=new dr;if(s===un.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Jn.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(s,o);var d=new dr;this.appendBytes(e,s,d,i);var f;if(r!==null&&r.get(Fp.QR_VERSION)!==void 0){var p=Number.parseInt(r.get(Fp.QR_VERSION).toString(),10);f=Rl.getVersionForNumber(p);var m=this.calculateBitsNeeded(s,o,d,f);if(!this.willFit(m,f,n))throw new ln("Data too big for requested version")}else f=this.recommendVersion(n,s,o,d);var y=new dr;y.appendBitArray(o);var v=s===un.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(v,f,s,y),y.appendBitArray(d);var C=f.getECBlocksForLevel(n),E=f.getTotalCodewords()-C.getTotalECCodewords();this.terminateBits(E,y);var S=this.interleaveWithECBytes(y,f.getTotalCodewords(),E,C.getNumBlocks()),_=new D2;_.setECLevel(n),_.setMode(s),_.setVersion(f);var N=f.getDimensionForVersion(),k=new OJ(N,N),O=this.chooseMaskPattern(S,n,f,k);return _.setMaskPattern(O),mT.buildMatrix(S,n,f,O,k),_.setMatrix(k),_},t.recommendVersion=function(e,n,r,i){var a=this.calculateBitsNeeded(n,r,i,Rl.getVersionForNumber(1)),s=this.chooseVersion(a,e),o=this.calculateBitsNeeded(n,r,i,s);return this.chooseVersion(o,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),Jn.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return un.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var o=e.charAt(a);if(t.isDigit(o))r=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)i=!0;else return un.BYTE}return i?un.ALPHANUMERIC:r?un.NUMERIC:un.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=Ji.encode(e,Jn.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=n[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<D2.NUM_MASK_PATTERNS;o++){mT.buildMatrix(e,n,r,o,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,s=o)}return s},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=Rl.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new ln("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),a=n.getECBlocksForLevel(r),s=a.getTotalECCodewords(),o=i-s,c=(e+7)/8;return o>=c},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new ln("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var a=n.getSize()&7;if(a>0)for(var i=a;i<8;i++)n.appendBit(!1);for(var s=e-n.getSizeInBytes(),i=0;i<s;++i)n.appendBits((i&1)===0?236:17,8);if(n.getSize()!==r)throw new ln("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,a,s){if(i>=r)throw new ln("Block ID too large");var o=e%r,c=r-o,d=Math.floor(e/r),f=d+1,p=Math.floor(n/r),m=p+1,y=d-p,v=f-m;if(y!==v)throw new ln("EC bytes mismatch");if(r!==c+o)throw new ln("RS blocks mismatch");if(e!==(p+y)*c+(m+v)*o)throw new ln("Total bytes mismatch");i<c?(a[0]=p,s[0]=y):(a[0]=m,s[0]=v)},t.interleaveWithECBytes=function(e,n,r,i){var a,s,o,c;if(e.getSizeInBytes()!==r)throw new ln("Number of bits and data bytes does not match");for(var d=0,f=0,p=0,m=new Array,y=0;y<i;++y){var v=new Int32Array(1),C=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,y,v,C);var E=v[0],S=new Uint8Array(E);e.toBytes(8*d,S,0,E);var _=t.generateECBytes(S,C[0]);m.push(new DJ(S,_)),f=Math.max(f,E),p=Math.max(p,_.length),d+=v[0]}if(r!==d)throw new ln("Data bytes does not match offset");for(var N=new dr,y=0;y<f;++y)try{for(var k=(a=void 0,gT(m)),O=k.next();!O.done;O=k.next()){var I=O.value,S=I.getDataBytes();y<S.length&&N.appendBits(S[y],8)}}catch(le){a={error:le}}finally{try{O&&!O.done&&(s=k.return)&&s.call(k)}finally{if(a)throw a.error}}for(var y=0;y<p;++y)try{for(var M=(o=void 0,gT(m)),L=M.next();!L.done;L=M.next()){var I=L.value,_=I.getErrorCorrectionBytes();y<_.length&&N.appendBits(_[y],8)}}catch(le){o={error:le}}finally{try{L&&!L.done&&(c=M.return)&&c.call(M)}finally{if(o)throw o.error}}if(n!==N.getSizeInBytes())throw new ln("Interleaving error: "+n+" and "+N.getSizeInBytes()+" differ.");return N},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),a=0;a<r;a++)i[a]=e[a]&255;new pM(di.QR_CODE_FIELD_256).encode(i,n);for(var s=new Uint8Array(n),a=0;a<n;a++)s[a]=i[r+a];return s},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var a=r.getCharacterCountBits(n);if(e>=1<<a)throw new ln(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,n,r,i){switch(n){case un.NUMERIC:t.appendNumericBytes(e,r);break;case un.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case un.BYTE:t.append8BitBytes(e,r,i);break;case un.KANJI:t.appendKanjiBytes(e,r);break;default:throw new ln("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var a=t.getDigit(e.charAt(i));if(i+2<r){var s=t.getDigit(e.charAt(i+1)),o=t.getDigit(e.charAt(i+2));n.appendBits(a*100+s*10+o,10),i+=3}else if(i+1<r){var s=t.getDigit(e.charAt(i+1));n.appendBits(a*10+s,7),i+=2}else n.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new ln;if(i+1<r){var s=t.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new ln;n.appendBits(a*45+s,11),i+=2}else n.appendBits(a,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=Ji.encode(e,r)}catch(c){throw new ln(c)}for(var a=0,s=i.length;a!==s;a++){var o=i[a];n.appendBits(o,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=Ji.encode(e,Jn.SJIS)}catch(p){throw new ln(p)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,o=r[a+1]&255,c=s<<8&4294967295|o,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new ln("Invalid byte sequence");var f=(d>>8)*192+(d&255);n.appendBits(f,13)}},t.appendECI=function(e,n){n.appendBits(un.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Jn.UTF8.getName(),t})();var RJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){RJ(e,t);function e(n,r,i,a,s,o,c,d){var f=t.call(this,o,c)||this;if(f.yuvData=n,f.dataWidth=r,f.dataHeight=i,f.left=a,f.top=s,a+o>r||s+c>i)throw new Ye("Crop rectangle does not fit within image data.");return d&&f.reverseHorizontal(o,c),f}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new Ye("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(n+this.top)*this.dataWidth+this.left;return Qt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Qt.arraycopy(this.yuvData,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*n;Qt.arraycopy(this.yuvData,s,a,c,n),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,o=0;o<r;o++){for(var c=o*n,d=0;d<n;d++){var f=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+d]=4278190080|f*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var o=s+n/2,c=s,d=s+n-1;c<o;c++,d--){var f=i[c];i[c]=i[d],i[d]=f}},e.prototype.invert=function(){return new ww(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(gm);var IJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){IJ(e,t);function e(n,r,i,a,s,o,c){var d=t.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=o,d.top=c,n.BYTES_PER_ELEMENT===4){for(var f=r*i,p=new Uint8ClampedArray(f),m=0;m<f;m++){var y=n[m],v=y>>16&255,C=y>>7&510,E=y&255;p[m]=(v+C+E)/4&255}d.luminances=p}else d.luminances=n;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),o===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new Ye("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new Ye("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(n+this.top)*this.dataWidth+this.left;return Qt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Qt.arraycopy(this.luminances,s,a,0,i),a;for(var o=0;o<r;o++){var c=o*n;Qt.arraycopy(this.luminances,s,a,c,n),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new ww(this)},e})(gm);var LJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),jJ=(function(t){LJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e})(Jn),PJ=(function(){function t(){}return t.ISO_8859_1=Jn.ISO8859_1,t})(),R2,BJ=301,FJ=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=BJ);return{LOG:t,ALOG:e}};R2=FJ([],[]),R2.LOG;R2.ALOG;var xT;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(xT||(xT={}));var yT=129,mM=230,zJ=231,UJ=235,HJ=236,VJ=237,$J=238,GJ=239,WJ=240,My=254,qJ=254,vT="[)>05",bT="[)>06",wT="",Pt=0,wr=1,Gr=2,Kn=3,sr=4,Dr=5,KJ=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Pt},t.prototype.encode=function(e){var n=da.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=da.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Dr:e.writeCodeword(zJ),e.signalEncoderChange(Dr);return;case wr:e.writeCodeword(mM),e.signalEncoderChange(wr);return;case Kn:e.writeCodeword($J),e.signalEncoderChange(Kn);break;case Gr:e.writeCodeword(GJ),e.signalEncoderChange(Gr);break;case sr:e.writeCodeword(WJ),e.signalEncoderChange(sr);break;default:throw new Error("Illegal mode: "+i)}else da.isExtendedASCII(r)?(e.writeCodeword(UJ),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(da.isDigit(e)&&da.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t})(),XJ=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Dr},t.prototype.encode=function(e){var n=new ct;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=da.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Pt);break}}var a=n.length()-1,s=1,o=e.getCodewordCount()+a+s;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(a<=249)n.setCharAt(0,bt.getCharAt(a));else if(a<=1555)n.setCharAt(0,bt.getCharAt(Math.floor(a/250)+249)),n.insert(1,bt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=n.length();d<r;d++)e.writeCodeword(this.randomize255State(n.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t})(),_w=(function(){function t(){}return t.prototype.getEncodingMode=function(){return wr},t.prototype.encodeMaximal=function(e){for(var n=new ct,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,n),n.length()%3===0&&(i=e.pos,a=n.length())}if(a!==n.length()){var o=Math.floor(n.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,f=Math.floor(n.length()%3);(f===2&&d!==2||f===1&&(r>3||d!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(mM),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new ct;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),a=Math.floor(n.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new ct;for(n.length()%3===2&&o!==2&&(i=this.backtrackOneCharacter(e,n,c,i));n.length()%3===1&&(i>3||o!==1);)i=this.backtrackOneCharacter(e,n,c,i);break}var d=n.length();if(d%3===0){var f=da.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(Pt);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var a=n.length(),s=n.toString().substring(0,a-i);n.setLengthToZero(),n.append(s),e.pos--;var o=e.getCurrentChar();return i=this.encodeChar(o,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(My)}else if(s===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(My),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(s>0||e.hasMoreCharacters())&&e.writeCodeword(My)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Pt)},t.prototype.encodeChar=function(e,n){if(e===32)return n.append(3),1;if(e>=48&&e<=57)return n.append(e-48+4),1;if(e>=65&&e<=90)return n.append(e-65+14),1;if(e<32)return n.append(0),n.append(e),2;if(e<=47)return n.append(1),n.append(e-33),2;if(e<=64)return n.append(1),n.append(e-58+15),2;if(e<=95)return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,a=new ct;return a.append(r),a.append(i),a.toString()},t})(),YJ=(function(){function t(){}return t.prototype.getEncodingMode=function(){return sr},t.prototype.encode=function(e){for(var n=new ct;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var a=n.toString().substring(4);n.setLengthToZero(),n.append(a);var s=da.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Pt);break}}}n.append(bt.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,o=this.encodeToCodewords(n.toString()),c=!e.hasMoreCharacters(),d=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(o)}finally{e.signalEncoderChange(Pt)}},t.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(bt.getCharAt(e-64)):da.illegalCharacter(bt.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,a=n>=3?e.charAt(2).charCodeAt(0):0,s=n>=4?e.charAt(3).charCodeAt(0):0,o=(r<<18)+(i<<12)+(a<<6)+s,c=o>>16&255,d=o>>8&255,f=o&255,p=new ct;return p.append(c),n>=2&&p.append(d),n>=3&&p.append(f),p.toString()},t})(),ZJ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),JJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ot=(function(){function t(e,n,r,i,a,s,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=o,this.rsBlockError=c}return t.lookup=function(e,n,r,i,a){var s,o;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=JJ(eQ),d=c.next();!d.done;d=c.next()){var f=d.value;if(!(n===1&&f.rectangular)&&!(n===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t})(),QJ=(function(t){ZJ(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e})(Ot),eQ=[new Ot(!1,3,5,8,8,1),new Ot(!1,5,7,10,10,1),new Ot(!0,5,7,16,6,1),new Ot(!1,8,10,12,12,1),new Ot(!0,10,11,14,6,2),new Ot(!1,12,12,14,14,1),new Ot(!0,16,14,24,10,1),new Ot(!1,18,14,16,16,1),new Ot(!1,22,18,18,18,1),new Ot(!0,22,18,16,10,2),new Ot(!1,30,20,20,20,1),new Ot(!0,32,24,16,14,2),new Ot(!1,36,24,22,22,1),new Ot(!1,44,28,24,24,1),new Ot(!0,49,28,22,14,2),new Ot(!1,62,36,14,14,4),new Ot(!1,86,42,16,16,4),new Ot(!1,114,48,18,18,4),new Ot(!1,144,56,20,20,4),new Ot(!1,174,68,22,22,4),new Ot(!1,204,84,24,24,4,102,42),new Ot(!1,280,112,14,14,16,140,56),new Ot(!1,368,144,16,16,16,92,36),new Ot(!1,456,192,18,18,16,114,48),new Ot(!1,576,224,20,20,16,144,56),new Ot(!1,696,272,22,22,16,174,68),new Ot(!1,816,336,24,24,16,136,56),new Ot(!1,1050,408,18,18,36,175,68),new Ot(!1,1304,496,20,20,36,163,62),new QJ],tQ=(function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(o){return o.charCodeAt(0)}),r=new ct,i=0,a=n.length;i<a;i++){var s=String.fromCharCode(n[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new ct,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ot.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t})(),nQ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),rQ=(function(t){nQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Kn},e.prototype.encode=function(n){for(var r=new ct;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(n,r);var s=da.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){n.signalEncoderChange(Pt);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:n>=48&&n<=57?r.append(n-48+4):n>=65&&n<=90?r.append(n-65+14):da.illegalCharacter(bt.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),a=r.length();n.pos-=a,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(qJ),n.getNewEncoding()<0&&n.signalEncoderChange(Pt)},e})(_w),iQ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),aQ=(function(t){iQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Gr},e.prototype.encodeChar=function(n,r){if(n===32)return r.append(3),1;if(n>=48&&n<=57)return r.append(n-48+4),1;if(n>=97&&n<=122)return r.append(n-97+14),1;if(n<32)return r.append(0),r.append(n),2;if(n<=47)return r.append(1),r.append(n-33),2;if(n<=64)return r.append(1),r.append(n-58+15),2;if(n>=91&&n<=95)return r.append(1),r.append(n-91+22),2;if(n===96)return r.append(2),r.append(0),2;if(n<=90)return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e})(_w),da=(function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=yT+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,a){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new _w,o=[new KJ,s,new aQ,new rQ,new YJ,new XJ],c=new tQ(e);c.setSymbolShape(n),c.setSizeConstraints(r,i),e.startsWith(vT)&&e.endsWith(wT)?(c.writeCodeword(HJ),c.setSkipAtEnd(2),c.pos+=vT.length):e.startsWith(bT)&&e.endsWith(wT)&&(c.writeCodeword(VJ),c.setSkipAtEnd(2),c.pos+=bT.length);var d=Pt;for(a&&(s.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var f=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();f<p&&d!==Pt&&d!==Dr&&d!==sr&&c.writeCodeword("");var m=c.getCodewords();for(m.length()<p&&m.append(yT);m.length()<p;)m.append(this.randomize253State(m.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===Kn&&i===Kn){for(var a=Math.min(n+3,e.length),s=n;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Pt}else if(r===sr&&i===sr){for(var a=Math.min(n+4,e.length),s=n;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Pt}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===Pt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),o=[];;){if(n+a===e.length){Qn.fill(s,0),Qn.fill(o,0);var c=this.findMinimums(i,o,ut.MAX_VALUE,s),d=this.getMinimumCount(s);if(o[Pt]===c)return Pt;if(d===1){if(s[Dr]>0)return Dr;if(s[sr]>0)return sr;if(s[Gr]>0)return Gr;if(s[Kn]>0)return Kn}return wr}var f=e.charCodeAt(n+a);if(a++,this.isDigit(f)?i[Pt]+=.5:this.isExtendedASCII(f)?(i[Pt]=Math.ceil(i[Pt]),i[Pt]+=2):(i[Pt]=Math.ceil(i[Pt]),i[Pt]++),this.isNativeC40(f)?i[wr]+=2/3:this.isExtendedASCII(f)?i[wr]+=8/3:i[wr]+=4/3,this.isNativeText(f)?i[Gr]+=2/3:this.isExtendedASCII(f)?i[Gr]+=8/3:i[Gr]+=4/3,this.isNativeX12(f)?i[Kn]+=2/3:this.isExtendedASCII(f)?i[Kn]+=13/3:i[Kn]+=10/3,this.isNativeEDIFACT(f)?i[sr]+=3/4:this.isExtendedASCII(f)?i[sr]+=17/4:i[sr]+=13/4,this.isSpecialB256(f)?i[Dr]+=4:i[Dr]++,a>=4){if(Qn.fill(s,0),Qn.fill(o,0),this.findMinimums(i,o,ut.MAX_VALUE,s),o[Pt]<this.min(o[Dr],o[wr],o[Gr],o[Kn],o[sr]))return Pt;if(o[Dr]<o[Pt]||o[Dr]+1<this.min(o[wr],o[Gr],o[Kn],o[sr]))return Dr;if(o[sr]+1<this.min(o[Dr],o[wr],o[Gr],o[Kn],o[Pt]))return sr;if(o[Gr]+1<this.min(o[Dr],o[wr],o[sr],o[Kn],o[Pt]))return Gr;if(o[Kn]+1<this.min(o[Dr],o[wr],o[sr],o[Gr],o[Pt]))return Kn;if(o[wr]+1<this.min(o[Pt],o[Dr],o[sr],o[Gr])){if(o[wr]<o[Kn])return wr;if(o[wr]===o[Kn]){for(var p=n+a+1;p<e.length;){var m=e.charCodeAt(p);if(this.isX12TermSep(m))return Kn;if(!this.isNativeX12(m))break;p++}return wr}}}}},t.min=function(e,n,r,i,a){var s=Math.min(e,Math.min(n,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},t.findMinimums=function(e,n,r,i){for(var a=0;a<6;a++){var s=n[a]=Math.ceil(e[a]);r>s&&(r=s,Qn.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=ut.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t})(),Dy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CT=(function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Ji.encode(e,this.charset)!=null}catch{return!1}},t})(),sQ=(function(){function t(e,n,r){var i,a,s,o,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(B){return new CT(jJ.forName(B))}),this.encoders=[];var f=[];f.push(new CT(PJ.ISO_8859_1));for(var p=n!=null&&n.name.startsWith("UTF"),m=0;m<e.length;m++){var y=!1;try{for(var v=(i=void 0,Dy(f)),C=v.next();!C.done;C=v.next()){var E=C.value,S=e.charAt(m),_=S.charCodeAt(0);if(_===r||E.canEncode(S)){y=!0;break}}}catch(B){i={error:B}}finally{try{C&&!C.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}if(!y)try{for(var N=(s=void 0,Dy(this.ENCODERS)),k=N.next();!k.done;k=N.next()){var E=k.value;if(E.canEncode(e.charAt(m))){f.push(E),y=!0;break}}}catch(B){s={error:B}}finally{try{k&&!k.done&&(o=N.return)&&o.call(N)}finally{if(s)throw s.error}}y||(p=!0)}if(f.length===1&&!p)this.encoders=[f[0]];else{this.encoders=[];var O=0;try{for(var I=Dy(f),M=I.next();!M.done;M=I.next()){var E=M.value;this.encoders[O++]=E}}catch(B){c={error:B}}finally{try{M&&!M.done&&(d=I.return)&&d.call(I)}finally{if(c)throw c.error}}}var L=-1;if(n!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&n.name===this.encoders[m].name){L=m;break}}this.priorityEncoderIndex=L}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Ji.encode(bt.getCharAt(e),this.encoders[n].name)},t})(),oQ=3,lQ=(function(){function t(e,n,r){this.fnc1=r;var i=new sQ(e,n,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new ct,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,a,s){var o=e.charAt(i).charCodeAt(0),c=0,d=n.length();n.getPriorityEncoderIndex()>=0&&(o===s||n.canEncode(o,n.getPriorityEncoderIndex()))&&(c=n.getPriorityEncoderIndex(),d=c+1);for(var f=c;f<d;f++)(o===s||n.canEncode(o,f))&&this.addEdge(r,i+1,new ET(o,n,f,a,s))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,a=new ET[i+1][n.length()];this.addEdges(e,n,a,0,null,r);for(var s=1;s<=i;s++){for(var o=0;o<n.length();o++)a[s][o]!=null&&s<i&&this.addEdges(e,n,a,s,a[s][o],r);for(var o=0;o<n.length();o++)a[s-1][o]=null}for(var c=-1,d=ut.MAX_VALUE,o=0;o<n.length();o++)if(a[i][o]!=null){var f=a[i][o];f.cachedTotalSize<d&&(d=f.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],m=a[i][c];m!=null;){if(m.isFNC1())p.unshift(1e3);else for(var y=n.encode(m.c,m.encoderIndex),s=y.length-1;s>=0;s--)p.unshift(y[s]&255);var v=m.previous===null?0:m.previous.encoderIndex;v!==m.encoderIndex&&p.unshift(256+n.getECIValue(m.encoderIndex)),m=m.previous}for(var C=[],s=0;s<C.length;s++)C[s]=p[s];return C},t})(),ET=(function(){function t(e,n,r,i,a){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:n.encode(e,r).length,o=i===null?0:i.encoderIndex;o!==r&&(s+=oQ),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t})(),cQ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();var ST;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(ST||(ST={}));(function(t){cQ(e,t);function e(n,r,i,a,s){var o=t.call(this,n,r,i)||this;return o.shape=a,o.macroId=s,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(lQ);var uQ=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),AT=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t})(),dQ=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),fQ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Tw=(function(t){fQ(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+ut.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e})(dQ),hQ=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),pQ=(function(t){hQ(e,t);function e(n,r,i){var a=t.call(this,n,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Tw);function mQ(t,e,n){return new pQ(t,e,n)}function Nd(t,e,n){return new Tw(t,e,n)}var gQ=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],To=0,E1=1,Ki=2,gM=3,Ma=4,xQ=new Tw(null,0,0),Ry=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],yQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function vQ(t){var e,n;try{for(var r=yQ(t),i=r.next();!i.done;i=r.next()){var a=i.value;Qn.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[To][Ma]=0,t[E1][Ma]=0,t[E1][To]=28,t[gM][Ma]=0,t[Ki][Ma]=0,t[Ki][To]=15,t}var xM=vQ(Qn.createInt32Array(6,6)),bQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wQ=(function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Ry[this.mode][e];i=Nd(i,a&65535,a>>16),r+=a>>16}var s=e===Ki?4:5;return i=Nd(i,n,s),new t(i,e,0,r+s)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===Ki?4:5;return r=Nd(r,xM[this.mode][e],i),r=Nd(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===Ma||this.mode===Ki){var a=Ry[r][To];n=Nd(n,a&65535,a>>16),i+=a>>16,r=To}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new t(n,r,this.binaryShiftByteCount+1,i+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=mQ(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(Ry[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new dr;try{for(var o=bQ(i),c=o.next();!c.done;c=o.next()){var d=c.value;d.appendTo(s,e)}}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},t.prototype.toString=function(){return bt.format("%s bits=%d bytes=%d",gQ[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(xQ,To,0,0),t})();function CQ(t){var e=bt.getCharCode(" "),n=bt.getCharCode("."),r=bt.getCharCode(",");t[To][e]=1;for(var i=bt.getCharCode("Z"),a=bt.getCharCode("A"),s=a;s<=i;s++)t[To][s]=s-a+2;t[E1][e]=1;for(var o=bt.getCharCode("z"),c=bt.getCharCode("a"),s=c;s<=o;s++)t[E1][s]=s-c+2;t[Ki][e]=1;for(var d=bt.getCharCode("9"),f=bt.getCharCode("0"),s=f;s<=d;s++)t[Ki][s]=s-f+2;t[Ki][r]=12,t[Ki][n]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<p.length;m++)t[gM][bt.getCharCode(p[m])]=m;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<y.length;m++)bt.getCharCode(y[m])>0&&(t[Ma][bt.getCharCode(y[m])]=m);return t}var Iy=CQ(Qn.createInt32Array(5,256)),zp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EQ=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=bt.getCharCode(" "),n=bt.getCharCode(`
`),r=AT.singletonList(wQ.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case bt.getCharCode("\r"):a=s===n?2:0;break;case bt.getCharCode("."):a=s===e?3:0;break;case bt.getCharCode(","):a=s===e?4:0;break;case bt.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=t.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var o=AT.min(r,function(c,d){return c.getBitCount()-d.getBitCount()});return o.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,a=[];try{for(var s=zp(e),o=s.next();!o.done;o=s.next()){var c=o.value;this.updateStateForChar(c,n,a)}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,a=Iy[e.getMode()][i]>0,s=null,o=0;o<=Ma;o++){var c=Iy[o][i];if(c>0){if(s==null&&(s=e.endBinaryShift(n)),!a||o===e.getMode()||o===Ki){var d=s.latchAndAppend(o,c);r.push(d)}if(!a&&xM[e.getMode()][o]>=0){var f=s.shiftAndAppend(o,c);r.push(f)}}}if(e.getBinaryShiftByteCount()>0||Iy[e.getMode()][i]===0){var p=e.addBinaryShiftChar(n);r.push(p)}},t.updateStateListForPair=function(e,n,r){var i,a,s=[];try{for(var o=zp(e),c=o.next();!c.done;c=o.next()){var d=c.value;this.updateStateForPair(d,n,r,s)}}catch(f){i={error:f}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,n,r,i){var a=e.endBinaryShift(n);if(i.push(a.latchAndAppend(Ma,r)),e.getMode()!==Ma&&i.push(a.shiftAndAppend(Ma,r)),r===3||r===4){var s=a.latchAndAppend(Ki,16-r).latchAndAppend(Ki,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(o)}},t.simplifyStates=function(e){var n,r,i,a,s=[];try{for(var o=zp(e),c=o.next();!c.done;c=o.next()){var d=c.value,f=!0,p=function(E){if(E.isBetterThanOrEqualTo(d))return f=!1,"break";d.isBetterThanOrEqualTo(E)&&(s=s.filter(function(S){return S!==E}))};try{for(var m=(i=void 0,zp(s)),y=m.next();!y.done;y=m.next()){var v=y.value,C=p(v);if(C==="break")break}}catch(E){i={error:E}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}f&&s.push(d)}}catch(E){n={error:E}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},t})(),SQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new EQ(e).encode(),a=ut.truncDivision(i.getSize()*n,100)+11,s=i.getSize()+a,o,c,d,f,p;if(r!==t.DEFAULT_AZTEC_LAYERS){if(o=r<0,c=Math.abs(r),c>(o?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Ye(bt.format("Illegal value %s for layers",r));d=t.totalBitsInLayer(c,o),f=t.WORD_SIZE[c];var m=d-d%f;if(p=t.stuffBits(i,f),p.getSize()+a>m)throw new Ye("Data to large for user specified layer");if(o&&p.getSize()>f*64)throw new Ye("Data to large for user specified layer")}else{f=0,p=null;for(var y=0;;y++){if(y>t.MAX_NB_BITS)throw new Ye("Data too large for an Aztec code");if(o=y<=3,c=o?y+1:y,d=t.totalBitsInLayer(c,o),!(s>d)){(p==null||f!==t.WORD_SIZE[c])&&(f=t.WORD_SIZE[c],p=t.stuffBits(i,f));var m=d-d%f;if(!(o&&p.getSize()>f*64)&&p.getSize()+a<=m)break}}}var v=t.generateCheckWords(p,d,f),C=p.getSize()/f,E=t.generateModeMessage(o,c,C),S=(o?11:14)+c*4,_=new Int32Array(S),N;if(o){N=S;for(var y=0;y<_.length;y++)_[y]=y}else{N=S+1+2*ut.truncDivision(ut.truncDivision(S,2)-1,15);for(var k=ut.truncDivision(S,2),O=ut.truncDivision(N,2),y=0;y<k;y++){var I=y+ut.truncDivision(y,15);_[k-y-1]=O-I-1,_[k+y]=O+I+1}}for(var M=new Ba(N),y=0,L=0;y<c;y++){for(var B=(c-y)*4+(o?9:12),le=0;le<B;le++)for(var ae=le*2,fe=0;fe<2;fe++)v.get(L+ae+fe)&&M.set(_[y*2+fe],_[y*2+le]),v.get(L+B*2+ae+fe)&&M.set(_[y*2+le],_[S-1-y*2-fe]),v.get(L+B*4+ae+fe)&&M.set(_[S-1-y*2-fe],_[S-1-y*2-le]),v.get(L+B*6+ae+fe)&&M.set(_[S-1-y*2-le],_[y*2+fe]);L+=B*8}if(t.drawModeMessage(M,o,N,E),o)t.drawBullsEye(M,ut.truncDivision(N,2),5);else{t.drawBullsEye(M,ut.truncDivision(N,2),7);for(var y=0,le=0;y<ut.truncDivision(S,2)-1;y+=15,le+=16)for(var fe=ut.truncDivision(N,2)&1;fe<N;fe+=2)M.set(ut.truncDivision(N,2)-le,fe),M.set(ut.truncDivision(N,2)+le,fe),M.set(fe,ut.truncDivision(N,2)-le),M.set(fe,ut.truncDivision(N,2)+le)}var W=new uQ;return W.setCompact(o),W.setSize(N),W.setLayers(c),W.setCodeWords(C),W.setMatrix(M),W},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var a=n-i;a<=n+i;a++)e.set(a,n-i),e.set(a,n+i),e.set(n-i,a),e.set(n+i,a);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new dr;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var a=ut.truncDivision(r,2);if(n)for(var s=0;s<7;s++){var o=a-3+s;i.get(s)&&e.set(o,a-5),i.get(s+7)&&e.set(a+5,o),i.get(20-s)&&e.set(o,a+5),i.get(27-s)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var o=a-5+s+ut.truncDivision(s,5);i.get(s)&&e.set(o,a-7),i.get(s+10)&&e.set(a+7,o),i.get(29-s)&&e.set(o,a+7),i.get(39-s)&&e.set(a-7,o)}},t.generateCheckWords=function(e,n,r){var i,a,s=e.getSize()/r,o=new pM(t.getGF(r)),c=ut.truncDivision(n,r),d=t.bitsToWords(e,r,c);o.encode(d,c-s);var f=n%r,p=new dr;p.appendBits(0,f);try{for(var m=SQ(Array.from(d)),y=m.next();!y.done;y=m.next()){var v=y.value;p.appendBits(v,r)}}catch(C){i={error:C}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}return p},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/n;a<s;a++){for(var o=0,c=0;c<n;c++)o|=e.get(a*n+c)?1<<n-c-1:0;i[a]=o}return i},t.getGF=function(e){switch(e){case 4:return di.AZTEC_PARAM;case 6:return di.AZTEC_DATA_6;case 8:return di.AZTEC_DATA_8;case 10:return di.AZTEC_DATA_10;case 12:return di.AZTEC_DATA_12;default:throw new Ye("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new dr,i=e.getSize(),a=(1<<n)-2,s=0;s<i;s+=n){for(var o=0,c=0;c<n;c++)(s+c>=i||e.get(s+c))&&(o|=1<<n-1-c);(o&a)===a?(r.appendBits(o&a,n),s--):(o&a)===0?(r.appendBits(o|1,n),s--):r.appendBits(o,n)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const yM=new Set(["localhost","127.0.0.1"]),AQ="http://localhost:8000",_Q="https://api.tomehub.nl",TQ="https://api.tomehub.nl".trim(),NQ=yM.has(window.location.hostname)?AQ:_Q,dt=(TQ||NQ).replace(/\/+$/,""),kQ="Backend baglantisi kurulamadi. `apps/backend` klasorunde `python app.py` calistirin (port 8000).";async function OQ(){const{auth:t}=await jl(async()=>{const{auth:n}=await Promise.resolve().then(()=>gD);return{auth:n}},void 0),e=t.currentUser;if(!e)throw new Error("Oturum dogrulamasi bulunamadi. Lutfen tekrar giris yapin.");return e.getIdToken()}async function rn(t,e={}){var a;const n=await OQ(),{auth:r}=await jl(async()=>{const{auth:s}=await Promise.resolve().then(()=>gD);return{auth:s}},void 0),i=new Headers(e.headers||{});if(i.has("Authorization")||i.set("Authorization",`Bearer ${n}`),yM.has(window.location.hostname)&&!i.has("X-Firebase-UID")){const s=(a=r.currentUser)==null?void 0:a.uid;s&&i.set("X-Firebase-UID",s)}return fetch(t,{...e,headers:i})}async function ba(t,e){try{const n=await t.json(),r=(n==null?void 0:n.detail)||(n==null?void 0:n.details)||(n==null?void 0:n.error);if(typeof r=="string"&&r.trim())return r}catch{}return e}function zc(t){return t instanceof TypeError&&/fetch/i.test(t.message)?`${kQ} (API: ${dt})`:t instanceof Error&&t.message?t.message:"Beklenmeyen API hatasi"}const vM=t=>{const e=(t||"").trim().toUpperCase();return e==="NOTE"||e==="PERSONAL"?"PERSONAL_NOTE":e==="NOTES"?"HIGHLIGHT":e==="INSIGHTS"?"INSIGHT":e||"PERSONAL_NOTE"};async function MQ(t,e,n="STANDARD",r,i="AUTO",a){if(!e)throw new Error("User must be authenticated to search");const s=await rn(`${dt}/api/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:t,firebase_uid:e,mode:n,book_id:r,context_book_id:a,scope_mode:i})});if(!s.ok){const o=await s.json();throw new Error(o.details||o.error||"Search failed")}return s.json()}async function DQ(t,e,n=null,r="EXPLORER",i=null,a=20,s="AUTO",o=null,c=null){if(!e)throw new Error("User must be authenticated to chat");const d=await rn(`${dt}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,firebase_uid:e,session_id:n,mode:r,resource_type:i,scope_mode:s,book_id:o,context_book_id:c,limit:a})});if(!d.ok){const f=await d.json();throw new Error(f.details||f.error||"Chat failed")}return d.json()}async function bM(t,e,n,r,i,a){if(!r)throw new Error("User must be authenticated to ingest documents");const s=new FormData;s.append("file",t),s.append("title",e),s.append("author",n),s.append("firebase_uid",r),i&&s.append("book_id",i),a&&s.append("tags",a);const o=await rn(`${dt}/api/ingest`,{method:"POST",body:s});if(!o.ok){const c=await o.json();throw new Error(c.details||c.error||"Ingestion failed")}return o.json()}async function RQ(t){const e=await rn(`${dt}/api/feedback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.details||n.error||"Feedback failed")}return e.json()}async function IQ(t,e,n){if(!e)throw new Error("User must be authenticated to fetch ingestion status");const r=new URLSearchParams;r.set("firebase_uid",e),n&&n.trim()&&r.set("title",n.trim());const i=await rn(`${dt}/api/books/${encodeURIComponent(t)}/ingestion-status?${r.toString()}`,{method:"GET",headers:{"Content-Type":"application/json","X-Firebase-UID":e}});if(!i.ok){const a=await i.json();throw new Error(a.details||a.error||"Failed to fetch ingestion status")}return i.json()}async function LQ(t){const e=new FormData;e.append("file",t);const n=await rn(`${dt}/api/extract-metadata`,{method:"POST",body:e});if(!n.ok){const r=await n.json();throw new Error(r.error||"Metadata extraction failed")}return n.json()}async function wM(t,e,n,r,i,a){const s=vM(r),o=await rn(`${dt}/api/add-item`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,title:e,author:n,type:s,firebase_uid:i,...a})});if(!o.ok)throw new Error("Failed to add item");return o.json()}async function jQ(t,e){const n=t.map(i=>({...i,type:vM(i.type)})),r=await rn(`${dt}/api/migrate_bulk`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:n,firebase_uid:e})});if(!r.ok)throw new Error("Failed to migrate batch");return r.json()}async function I2(t,e,n,r,i){const a=i.map(o=>({...o,type:J1(o.type)})),s=await rn(`${dt}/api/books/${encodeURIComponent(e)}/sync-highlights`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firebase_uid:t,title:n,author:r,highlights:a})});if(!s.ok){const o=await s.text();throw new Error(o||"Failed to sync highlights")}return s.json()}async function PQ(t,e,n){const r=await rn(`${dt}/api/notes/${encodeURIComponent(e)}/sync-personal-note`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firebase_uid:t,...n})});if(!r.ok){const i=await r.text();throw new Error(i||"Failed to sync personal note")}return r.json()}async function _T(t,e){const n=await rn(`${dt}/api/resources/${encodeURIComponent(e)}/purge`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firebase_uid:t})});if(!n.ok)throw new Error("Failed to purge resource content");return n.json()}async function BQ(t,e,n,r=50,i=0){const a=new URL(`${dt}/api/analytics/concordance`);a.searchParams.append("book_id",e),a.searchParams.append("term",n),a.searchParams.append("limit",r.toString()),a.searchParams.append("offset",i.toString()),a.searchParams.append("firebase_uid",t);const s=await rn(a.toString(),{headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to fetch concordance");return s.json()}async function FQ(t,e,n){const r=new URL(`${dt}/api/analytics/distribution`);r.searchParams.append("book_id",e),r.searchParams.append("term",n),r.searchParams.append("firebase_uid",t);const i=await rn(r.toString(),{headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error("Failed to fetch distribution");return i.json()}async function zQ(t,e=0,n=100){if(!t)throw new Error("User must be authenticated for realtime polling");const r=new URL(`${dt}/api/realtime/poll`);r.searchParams.append("firebase_uid",t),r.searchParams.append("since_ms",String(Math.max(0,Math.floor(e||0)))),r.searchParams.append("limit",String(Math.min(300,Math.max(1,Math.floor(n||100)))));const i=await rn(r.toString(),{headers:{"Content-Type":"application/json"}});if(i.status===404)throw new Error("REALTIME_ENDPOINT_NOT_FOUND");if(!i.ok){let a="Realtime polling failed";try{const s=await i.json();a=s.details||s.error||a}catch{}throw new Error(a)}return i.json()}async function UQ(t){const e=new FormData;e.append("file",t);const n=await rn(`${dt}/api/scan-isbn`,{method:"POST",body:e});if(n.status===404)throw new Error("NO_BARCODE_FOUND");if(!n.ok){const i=await n.json().catch(()=>({error:"Scan failed"}));throw new Error(i.details||i.error||"Barcode scan failed")}return(await n.json()).isbn}const HQ=[$e.EAN_13,$e.EAN_8,$e.UPC_A,$e.UPC_E,$e.CODE_128],TT=["ean_13","ean_8","upc_a","upc_e","code_128"],NT=t=>{var a,s;const e=String(t||"").replace(/[\s-]/g,"").trim(),n=e.replace(/[^0-9Xx]/g,"").toUpperCase();if(n.length===13||n.length===10)return n;const r=(a=n.match(/97[89]\d{10}/))==null?void 0:a[0];if(r)return r;const i=(s=n.match(/\d{9}[0-9X]/))==null?void 0:s[0];return i||e},VQ=t=>{var i,a;if(!t)return null;const e=t.toUpperCase().replace(/[^0-9X]/g,""),n=(i=e.match(/97[89]\d{10}/))==null?void 0:i[0];if(n)return n;const r=(a=e.match(/\d{9}[0-9X]/))==null?void 0:a[0];return r||null},kT=()=>{const t=new Map;return t.set(en.POSSIBLE_FORMATS,HQ),t.set(en.TRY_HARDER,!0),new _J(t,160)},$Q=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=()=>n(new Error("Image could not be loaded")),r.src=t}),GQ=(t,e,n)=>{const r=document.createElement("canvas"),i=e===90||e===270;r.width=i?t.naturalHeight:t.naturalWidth,r.height=i?t.naturalWidth:t.naturalHeight;const a=r.getContext("2d",{willReadFrequently:!0});return a&&(a.save(),a.translate(r.width/2,r.height/2),a.rotate(e*Math.PI/180),a.filter=n,a.drawImage(t,-t.naturalWidth/2,-t.naturalHeight/2),a.restore()),r},Ly=t=>{var e;return!t||t.length===0?null:((e=t.find(n=>!!(n!=null&&n.rawValue)))==null?void 0:e.rawValue)||null},OT=({onDetected:t,onClose:e})=>{const n=A.useRef(null),r=A.useRef(null),i=A.useRef(null),a=A.useRef(null),s=A.useRef(null),o=A.useRef(null),c=A.useRef(!1),[d,f]=A.useState(null),[p,m]=A.useState(!0),[y,v]=A.useState(!1),[C,E]=A.useState(""),S=A.useRef(t);S.current=t;const _=A.useRef(e);_.current=e;const N=A.useCallback(()=>{if(s.current!==null&&(window.clearTimeout(s.current),s.current=null),o.current=null,a.current){try{a.current.reset()}catch{}a.current=null}i.current&&(i.current.getTracks().forEach(ae=>ae.stop()),i.current=null),n.current&&(n.current.srcObject=null)},[]),k=A.useCallback(ae=>{const fe=NT(ae);!fe||c.current||(c.current=!0,N(),S.current(fe))},[N]),O=A.useCallback(async ae=>{var W;const fe=kT();try{const de=await fe.decodeFromImageUrl(ae);return((W=de==null?void 0:de.getText)==null?void 0:W.call(de))||null}catch{return null}finally{try{fe.reset()}catch{}}},[]),I=A.useCallback(async ae=>{var fe;try{const{createWorker:W}=await jl(async()=>{const{createWorker:xe}=await Promise.resolve().then(()=>aie);return{createWorker:xe}},void 0),de=await W("eng");try{const xe=await de.recognize(ae),H=((fe=xe==null?void 0:xe.data)==null?void 0:fe.text)||"";return VQ(H)}finally{await de.terminate()}}catch{return null}},[]),M=A.useCallback(async ae=>{const fe=window.BarcodeDetector,W=fe?new fe({formats:TT}):null;let de=null;try{if(de=await createImageBitmap(ae),W){const H=Ly(await W.detect(de));if(H)return H}}catch{}finally{de&&de.close()}const xe=URL.createObjectURL(ae);try{const H=await O(xe);if(H)return H;const J=await $Q(xe),q=[0,90,180,270],F=["none","grayscale(1) contrast(1.9) brightness(1.1)"];for(const R of q)for(const $ of F){const Z=GQ(J,R,$);if(W)try{const Q=Ly(await W.detect(Z));if(Q)return Q}catch{}const pe=Z.toDataURL("image/jpeg",.95),ge=await O(pe);if(ge)return ge}const z=await I(ae);return z||null}finally{URL.revokeObjectURL(xe)}},[I,O]);A.useEffect(()=>{let ae=!0;return(async()=>{try{const W=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920,min:640},height:{ideal:1080,min:480}},audio:!1});if(!ae){W.getTracks().forEach(J=>J.stop());return}i.current=W;const de=n.current;if(!de||(de.srcObject=W,de.setAttribute("playsinline","true"),de.setAttribute("autoplay","true"),de.muted=!0,await de.play(),!ae))return;m(!1);const xe=window.BarcodeDetector;if(xe)try{o.current=new xe({formats:TT});const J=async()=>{if(!ae||c.current)return;const q=o.current;if(q){try{const F=await q.detect(de),z=Ly(F);if(z){k(z);return}}catch{}s.current=window.setTimeout(J,120)}};J()}catch{o.current=null}const H=kT();a.current=H,H.decodeFromVideoElementContinuously(de,(J,q)=>{if(!(!ae||c.current)){if(J){k(J.getText());return}q&&q instanceof he}})}catch(W){if(!ae)return;const de=W instanceof Error?W.message:String(W);de.includes("NotAllowed")||de.includes("Permission")||de.includes("denied")?f("Camera permission denied. Please allow camera access and try again."):de.includes("NotFound")||de.includes("Overconstrained")?f("No suitable camera found on this device."):f(`Camera error: ${de}`),m(!1)}})(),()=>{ae=!1,N()}},[N,k]);const L=A.useCallback(()=>{N(),_.current()},[N]),B=A.useCallback(()=>{const ae=NT(C);ae&&(N(),S.current(ae))},[C,N]),le=A.useCallback(async ae=>{var W;const fe=(W=ae.target.files)==null?void 0:W[0];if(fe){f(null),v(!0);try{const de=await UQ(fe);k(de)}catch(de){if((de instanceof Error?de.message:"")==="NO_BARCODE_FOUND"){f("Could not read barcode from photo. Try better lighting or a flatter angle.");return}try{const H=await M(fe);if(!H){f("Could not read barcode from photo. Try another angle, better light, or use manual ISBN.");return}k(H)}catch(H){const J=H instanceof Error?H.message:String(H);f(`Photo decode failed: ${J}`)}}finally{v(!1),ae.target.value=""}}},[M,k]);return g.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:g.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden",children:[g.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[g.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[g.jsx(tu,{className:"text-[#CC561E]",size:20}),"Scan ISBN Barcode"]}),g.jsx("button",{onClick:L,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:g.jsx(xa,{size:20})})]}),g.jsxs("div",{className:"p-4",children:[g.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-black min-h-[320px]",children:[g.jsx("video",{ref:n,className:"w-full h-[320px] object-cover",playsInline:!0,autoPlay:!0,muted:!0}),g.jsx("div",{className:"absolute inset-0 pointer-events-none",children:g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsxs("div",{className:"w-[280px] h-[90px] relative",children:[g.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-l-2 border-t-2 border-white"}),g.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-r-2 border-t-2 border-white"}),g.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-l-2 border-b-2 border-white"}),g.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-r-2 border-b-2 border-white"}),g.jsx("div",{className:"absolute top-1/2 left-2 right-2 h-0.5 bg-[#CC561E]/70 animate-pulse"})]})})}),p&&g.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-3 bg-black/50",children:[g.jsx(In,{className:"animate-spin text-[#CC561E]",size:32}),g.jsx("p",{className:"text-sm text-slate-200",children:"Starting camera..."})]})]}),g.jsx("p",{className:"text-center text-xs text-slate-400 dark:text-slate-500 mt-3",children:"Align the barcode in the frame and keep the phone steady."}),d&&g.jsx("p",{className:"mt-2 text-center text-xs text-red-500 dark:text-red-400",children:d}),g.jsxs("div",{className:"mt-3",children:[g.jsx("input",{ref:r,type:"file",accept:"image/*",capture:"environment",onChange:le,className:"hidden"}),g.jsx("button",{type:"button",onClick:()=>{var ae;return(ae=r.current)==null?void 0:ae.click()},disabled:y,className:"w-full px-3 py-2 rounded-lg text-sm font-medium border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:border-[#CC561E]/50 hover:text-[#CC561E] disabled:opacity-60 transition-colors",children:y?"Reading photo...":"Scan From Photo"})]}),g.jsxs("div",{className:"mt-4 flex gap-2",children:[g.jsx("input",{value:C,onChange:ae=>E(ae.target.value),placeholder:"Type or paste ISBN",className:"flex-1 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 text-sm font-mono bg-white dark:bg-slate-950 text-slate-900 dark:text-white"}),g.jsx("button",{type:"button",onClick:B,disabled:!C.trim(),className:"px-3 py-2 rounded-lg text-sm font-medium bg-[#CC561E] text-white disabled:opacity-50",children:"Use ISBN"})]})]})]})})},WQ=()=>{};var MT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qQ=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},EM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=a>>2,p=(a&3)<<4|o>>4;let m=(o&15)<<2|d>>6,y=d&63;c||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qQ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||d==null||p==null)throw new KQ;const m=a<<2|o>>4;if(r.push(m),d!==64){const y=o<<4&240|d>>2;if(r.push(y),p!==64){const v=d<<6&192|p;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KQ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XQ=function(t){const e=CM(t);return EM.encodeByteArray(e,!0)},SM=function(t){return XQ(t).replace(/\./g,"")},AM=function(t){try{return EM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZQ=()=>YQ().__FIREBASE_DEFAULTS__,JQ=()=>{if(typeof process>"u"||typeof MT>"u")return;const t=MT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QQ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AM(t[1]);return e&&JSON.parse(e)},Nw=()=>{try{return WQ()||ZQ()||JQ()||QQ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eee=t=>{var e,n;return(n=(e=Nw())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},_M=()=>{var t;return(t=Nw())==null?void 0:t.config},TM=t=>{var e;return(e=Nw())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nee(t){return(await fetch(t,{credentials:"include"})).ok}const af={};function ree(){const t={prod:[],emulator:[]};for(const e of Object.keys(af))af[e]?t.emulator.push(e):t.prod.push(e);return t}function iee(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let DT=!1;function aee(t,e){if(typeof window>"u"||typeof document>"u"||!vm(window.location.host)||af[t]===e||af[t]||DT)return;af[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=ree().prod.length>0;function s(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{DT=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=iee(r),y=n("text"),v=document.getElementById(y)||document.createElement("span"),C=n("learnmore"),E=document.getElementById(C)||document.createElement("a"),S=n("preprendIcon"),_=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;o(N),f(E,C);const k=d();c(_,S),N.append(_,v,E,k),document.body.appendChild(N)}a?(v.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function see(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yr())}function oee(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lee(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cee(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uee(){const t=Yr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dee(){try{return typeof indexedDB=="object"}catch{return!1}}function fee(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hee="FirebaseError";class Fo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hee,Object.setPrototypeOf(this,Fo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yf.prototype.create)}}class Yf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?pee(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Fo(i,o,r)}}function pee(t,e){return t.replace(mee,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mee=/\{\$([^}]+)}/g;function gee(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(RT(a)&&RT(s)){if(!pu(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function RT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xee(t,e){const n=new yee(t,e);return n.subscribe.bind(n)}class yee{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vee(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jy),i.error===void 0&&(i.error=jy),i.complete===void 0&&(i.complete=jy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vee(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){return t&&t._delegate?t._delegate:t}class mu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bee{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tee;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cee(e))try{this.getOrInitializeService({instanceIdentifier:pl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=pl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pl){return this.instances.has(e)}getOptions(e=pl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wee(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pl){return this.component?this.component.multipleInstances?e:pl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wee(t){return t===pl?void 0:t}function Cee(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bee(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Yt||(Yt={}));const See={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},Aee=Yt.INFO,_ee={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},Tee=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_ee[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class NM{constructor(e){this.name=e,this._logLevel=Aee,this._logHandler=Tee,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?See[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const Nee=(t,e)=>e.some(n=>t instanceof n);let IT,LT;function kee(){return IT||(IT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Oee(){return LT||(LT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kM=new WeakMap,L2=new WeakMap,OM=new WeakMap,Py=new WeakMap,kw=new WeakMap;function Mee(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(No(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&kM.set(n,t)}).catch(()=>{}),kw.set(e,t),e}function Dee(t){if(L2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});L2.set(t,e)}let j2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return L2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return No(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ree(t){j2=t(j2)}function Iee(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(By(this),e,...n);return OM.set(r,e.sort?e.sort():[e]),No(r)}:Oee().includes(t)?function(...e){return t.apply(By(this),e),No(kM.get(this))}:function(...e){return No(t.apply(By(this),e))}}function Lee(t){return typeof t=="function"?Iee(t):(t instanceof IDBTransaction&&Dee(t),Nee(t,kee())?new Proxy(t,j2):t)}function No(t){if(t instanceof IDBRequest)return Mee(t);if(Py.has(t))return Py.get(t);const e=Lee(t);return e!==t&&(Py.set(t,e),kw.set(e,t)),e}const By=t=>kw.get(t);function jee(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=No(s);return r&&s.addEventListener("upgradeneeded",c=>{r(No(s.result),c.oldVersion,c.newVersion,No(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const Pee=["get","getKey","getAll","getAllKeys","count"],Bee=["put","add","delete","clear"],Fy=new Map;function jT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fy.get(e))return Fy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Bee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Pee.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[n](...o),i&&c.done]))[0]};return Fy.set(e,a),a}Ree(t=>({...t,get:(e,n,r)=>jT(e,n)||t.get(e,n,r),has:(e,n)=>!!jT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zee(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zee(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const P2="@firebase/app",PT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new NM("@firebase/app"),Uee="@firebase/app-compat",Hee="@firebase/analytics-compat",Vee="@firebase/analytics",$ee="@firebase/app-check-compat",Gee="@firebase/app-check",Wee="@firebase/auth",qee="@firebase/auth-compat",Kee="@firebase/database",Xee="@firebase/data-connect",Yee="@firebase/database-compat",Zee="@firebase/functions",Jee="@firebase/functions-compat",Qee="@firebase/installations",ete="@firebase/installations-compat",tte="@firebase/messaging",nte="@firebase/messaging-compat",rte="@firebase/performance",ite="@firebase/performance-compat",ate="@firebase/remote-config",ste="@firebase/remote-config-compat",ote="@firebase/storage",lte="@firebase/storage-compat",cte="@firebase/firestore",ute="@firebase/ai",dte="@firebase/firestore-compat",fte="firebase",hte="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="[DEFAULT]",pte={[P2]:"fire-core",[Uee]:"fire-core-compat",[Vee]:"fire-analytics",[Hee]:"fire-analytics-compat",[Gee]:"fire-app-check",[$ee]:"fire-app-check-compat",[Wee]:"fire-auth",[qee]:"fire-auth-compat",[Kee]:"fire-rtdb",[Xee]:"fire-data-connect",[Yee]:"fire-rtdb-compat",[Zee]:"fire-fn",[Jee]:"fire-fn-compat",[Qee]:"fire-iid",[ete]:"fire-iid-compat",[tte]:"fire-fcm",[nte]:"fire-fcm-compat",[rte]:"fire-perf",[ite]:"fire-perf-compat",[ate]:"fire-rc",[ste]:"fire-rc-compat",[ote]:"fire-gcs",[lte]:"fire-gcs-compat",[cte]:"fire-fst",[dte]:"fire-fst-compat",[ute]:"fire-vertex","fire-js":"fire-js",[fte]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=new Map,mte=new Map,F2=new Map;function BT(t,e){try{t.container.addComponent(e)}catch(n){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kf(t){const e=t.name;if(F2.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;F2.set(e,t);for(const n of S1.values())BT(n,t);for(const n of mte.values())BT(n,t);return!0}function MM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Oa(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gte={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ko=new Yf("app","Firebase",gte);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xte{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=hte;function DM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:B2,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ko.create("bad-app-name",{appName:String(i)});if(n||(n=_M()),!n)throw ko.create("no-options");const a=S1.get(i);if(a){if(pu(n,a.options)&&pu(r,a.config))return a;throw ko.create("duplicate-app",{appName:i})}const s=new Eee(i);for(const c of F2.values())s.addComponent(c);const o=new xte(n,r,s);return S1.set(i,o),o}function yte(t=B2){const e=S1.get(t);if(!e&&t===B2&&_M())return DM();if(!e)throw ko.create("no-app",{appName:t});return e}function Xc(t,e,n){let r=pte[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(s.join(" "));return}kf(new mu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte="firebase-heartbeat-database",bte=1,Of="firebase-heartbeat-store";let zy=null;function RM(){return zy||(zy=jee(vte,bte,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Of)}catch(n){console.warn(n)}}}}).catch(t=>{throw ko.create("idb-open",{originalErrorMessage:t.message})})),zy}async function wte(t){try{const n=(await RM()).transaction(Of),r=await n.objectStore(Of).get(IM(t));return await n.done,r}catch(e){if(e instanceof Fo)Ss.warn(e.message);else{const n=ko.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(n.message)}}}async function FT(t,e){try{const r=(await RM()).transaction(Of,"readwrite");await r.objectStore(Of).put(e,IM(t)),await r.done}catch(n){if(n instanceof Fo)Ss.warn(n.message);else{const r=ko.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ss.warn(r.message)}}}function IM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cte=1024,Ete=30;class Ste{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _te(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=zT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>Ete){const s=Tte(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ss.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zT(),{heartbeatsToSend:r,unsentEntries:i}=Ate(this._heartbeatsCache.heartbeats),a=SM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ss.warn(n),""}}}function zT(){return new Date().toISOString().substring(0,10)}function Ate(t,e=Cte){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),UT(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),UT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _te{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dee()?fee().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wte(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return FT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return FT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function UT(t){return SM(JSON.stringify({version:2,heartbeats:t})).length}function Tte(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nte(t){kf(new mu("platform-logger",e=>new Fee(e),"PRIVATE")),kf(new mu("heartbeat",e=>new Ste(e),"PRIVATE")),Xc(P2,PT,t),Xc(P2,PT,"esm2020"),Xc("fire-js","")}Nte("");function LM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kte=LM,jM=new Yf("auth","Firebase",LM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new NM("@firebase/auth");function Ote(t,...e){A1.logLevel<=Yt.WARN&&A1.warn(`Auth (${Jf}): ${t}`,...e)}function l0(t,...e){A1.logLevel<=Yt.ERROR&&A1.error(`Auth (${Jf}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t,...e){throw Mw(t,...e)}function ma(t,...e){return Mw(t,...e)}function Ow(t,e,n){const r={...kte(),[e]:n};return new Yf("auth","Firebase",r).create(e,{appName:t.name})}function Il(t){return Ow(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mte(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fa(t,"argument-error"),Ow(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jM.create(t,...e)}function tt(t,e,...n){if(!t)throw Mw(e,...n)}function xs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw l0(e),new Error(e)}function As(t,e){t||xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Dte(){return HT()==="http:"||HT()==="https:"}function HT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rte(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dte()||lee()||"connection"in navigator)?navigator.onLine:!0}function Ite(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.shortDelay=e,this.longDelay=n,As(n>e,"Short delay should be less than long delay!"),this.isMobile=see()||cee()}get(){return Rte()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e){As(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lte={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jte=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pte=new Qf(3e4,6e4);function Rw(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Su(t,e,n,r,i={}){return BM(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=Zf({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...a};return oee()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&vm(t.emulatorConfig.host)&&(d.credentials="include"),PM.fetch()(await FM(t,t.config.apiHost,n,o),d)})}async function BM(t,e,n){t._canInitEmulator=!1;const r={...Lte,...e};try{const i=new Fte(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Up(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Up(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Up(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Up(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ow(t,f,d);Fa(t,f)}}catch(i){if(i instanceof Fo)throw i;Fa(t,"network-request-failed",{message:String(i)})}}async function Bte(t,e,n,r,i={}){const a=await Su(t,e,n,r,i);return"mfaPendingCredential"in a&&Fa(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function FM(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?Dw(t.config,i):`${t.config.apiScheme}://${i}`;return jte.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class Fte{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ma(this.auth,"network-request-failed")),Pte.get())})}}function Up(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ma(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zte(t,e){return Su(t,"POST","/v1/accounts:delete",e)}async function _1(t,e){return Su(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ute(t,e=!1){const n=zo(t),r=await n.getIdToken(e),i=Iw(r);tt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:sf(Uy(i.auth_time)),issuedAtTime:sf(Uy(i.iat)),expirationTime:sf(Uy(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Uy(t){return Number(t)*1e3}function Iw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return l0("JWT malformed, contained fewer than 3 sections"),null;try{const i=AM(n);return i?JSON.parse(i):(l0("Failed to decode base64 JWT payload"),null)}catch(i){return l0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function VT(t){const e=Iw(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fo&&Hte(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Hte({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vte{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sf(this.lastLoginAt),this.creationTime=sf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Mf(t,_1(e,{idToken:n}));tt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=(p=i.providerUserInfo)!=null&&p.length?zM(i.providerUserInfo):[],s=Gte(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),d=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new U2(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function $te(t){const e=zo(t);await T1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gte(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wte(t,e){const n=await BM(t,{},async()=>{const r=Zf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await FM(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&vm(t.emulatorConfig.host)&&(c.credentials="include"),PM.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qte(t,e){return Su(t,"POST","/v2/accounts:revokeToken",Rw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=VT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Wte(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Yc;return r&&(tt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(tt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(tt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yc,this.toJSON())}_performRefresh(){return xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ha{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Vte(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new U2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Mf(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ute(this,e)}reload(){return $te(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ha({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await T1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Oa(this.auth.app))return Promise.reject(Il(this.auth));const e=await this.getIdToken();return await Mf(this,zte(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:v,stsTokenManager:C}=n;tt(p&&C,e,"internal-error");const E=Yc.fromJSON(this.name,C);tt(typeof p=="string",e,"internal-error"),to(r,e.name),to(i,e.name),tt(typeof m=="boolean",e,"internal-error"),tt(typeof y=="boolean",e,"internal-error"),to(a,e.name),to(s,e.name),to(o,e.name),to(c,e.name),to(d,e.name),to(f,e.name);const S=new ha({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:E,createdAt:d,lastLoginAt:f});return v&&Array.isArray(v)&&(S.providerData=v.map(_=>({..._}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Yc;i.updateFromServerResponse(n);const a=new ha({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await T1(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];tt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?zM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Yc;o.updateFromIdToken(r);const c=new ha({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new U2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=new Map;function ys(t){As(t instanceof Function,"Expected a class definition");let e=$T.get(t);return e?(As(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$T.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}UM.type="NONE";const GT=UM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e,n){return`firebase:${t}:${e}:${n}`}class Zc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=c0(this.userKey,i.apiKey,a),this.fullPersistenceKey=c0("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _1(this.auth,{idToken:e}).catch(()=>{});return n?ha._fromGetAccountInfoResponse(this.auth,n,e):null}return ha._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zc(ys(GT),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ys(GT);const s=c0(r,e.config.apiKey,e.name);let o=null;for(const d of n)try{const f=await d._get(s);if(f){let p;if(typeof f=="string"){const m=await _1(e,{idToken:f}).catch(()=>{});if(!m)break;p=await ha._fromGetAccountInfoResponse(e,m,f)}else p=ha._fromJSON(e,f);d!==a&&(o=p),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Zc(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(s)}catch{}})),new Zc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qM(e))return"Blackberry";if(KM(e))return"Webos";if(VM(e))return"Safari";if((e.includes("chrome/")||$M(e))&&!e.includes("edge/"))return"Chrome";if(WM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HM(t=Yr()){return/firefox\//i.test(t)}function VM(t=Yr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $M(t=Yr()){return/crios\//i.test(t)}function GM(t=Yr()){return/iemobile/i.test(t)}function WM(t=Yr()){return/android/i.test(t)}function qM(t=Yr()){return/blackberry/i.test(t)}function KM(t=Yr()){return/webos/i.test(t)}function Lw(t=Yr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Kte(t=Yr()){var e;return Lw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Xte(){return uee()&&document.documentMode===10}function XM(t=Yr()){return Lw(t)||WM(t)||KM(t)||qM(t)||/windows phone/i.test(t)||GM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t,e=[]){let n;switch(t){case"Browser":n=WT(Yr());break;case"Worker":n=`${WT(Yr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yte{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zte(t,e={}){return Su(t,"GET","/v2/passwordPolicy",Rw(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jte=6;class Qte{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Jte,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ene{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qT(this),this.idTokenSubscription=new qT(this),this.beforeStateQueue=new Yte(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ys(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Zc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _1(this,{idToken:e}),r=await ha._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Oa(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await T1(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ite()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Oa(this.app))return Promise.reject(Il(this));const n=e?zo(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Oa(this.app)?Promise.reject(Il(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Oa(this.app)?Promise.reject(Il(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zte(this),n=new Qte(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qte(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ys(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await Zc.create(this,[ys(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Oa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Ote(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function eh(t){return zo(t)}class qT{constructor(e){this.auth=e,this.observer=null,this.addObserver=xee(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tne(t){jw=t}function nne(t){return jw.loadJS(t)}function rne(){return jw.gapiScript}function ine(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ane(t,e){const n=MM(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(pu(a,e??{}))return i;Fa(i,"already-initialized")}return n.initialize({options:e})}function sne(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ys);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function one(t,e,n){const r=eh(t);tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=ZM(e),{host:s,port:o}=lne(e),c=o===null?"":`:${o}`,d={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),tt(pu(d,r.config.emulator)&&pu(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,vm(s)?(nee(`${a}//${s}${c}`),aee("Auth",!0)):cne()}function ZM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lne(t){const e=ZM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:KT(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:KT(s)}}}function KT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cne(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xs("not implemented")}_getIdTokenResponse(e){return xs("not implemented")}_linkToIdToken(e,n){return xs("not implemented")}_getReauthenticationResolver(e){return xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(t,e){return Bte(t,"POST","/v1/accounts:signInWithIdp",Rw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const une="http://localhost";class $l extends JM{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $l(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new $l(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Jc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Jc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jc(e,n)}buildRequest(){const e={requestUri:une,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends Pw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends th{constructor(){super("facebook.com")}static credential(e){return $l._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends th{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $l._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ps.credential(n,r)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends th{constructor(){super("github.com")}static credential(e){return $l._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.GITHUB_SIGN_IN_METHOD="github.com";mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends th{constructor(){super("twitter.com")}static credential(e,n){return $l._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return go.credential(n,r)}catch{return null}}}go.TWITTER_SIGN_IN_METHOD="twitter.com";go.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ha._fromIdTokenResponse(e,r,i),s=XT(r);return new gu({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=XT(r);return new gu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function XT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends Fo{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,N1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new N1(e,n,r,i)}}function QM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?N1._fromErrorAndOperation(t,a,e,r):a})}async function dne(t,e,n=!1){const r=await Mf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fne(t,e,n=!1){const{auth:r}=t;if(Oa(r.app))return Promise.reject(Il(r));const i="reauthenticate";try{const a=await Mf(t,QM(r,i,e,t),n);tt(a.idToken,r,"internal-error");const s=Iw(a.idToken);tt(s,r,"internal-error");const{sub:o}=s;return tt(t.uid===o,r,"user-mismatch"),gu._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fa(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hne(t,e,n=!1){if(Oa(t.app))return Promise.reject(Il(t));const r="signIn",i=await QM(t,r,e),a=await gu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}function pne(t,e,n,r){return zo(t).onIdTokenChanged(e,n,r)}function mne(t,e,n){return zo(t).beforeAuthStateChanged(e,n)}function gne(t,e,n,r){return zo(t).onAuthStateChanged(e,n,r)}function xne(t){return zo(t).signOut()}const k1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(k1,"1"),this.storage.removeItem(k1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yne=1e3,vne=10;class tD extends eD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);Xte()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vne):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yne)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tD.type="LOCAL";const bne=tD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD extends eD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nD.type="SESSION";const rD=nD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wne(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new bm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async d=>d(n.origin,a)),c=await wne(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cne{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const d=Bw("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(m.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(){return window}function Ene(t){Ia().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(){return typeof Ia().WorkerGlobalScope<"u"&&typeof Ia().importScripts=="function"}async function Sne(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ane(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function _ne(){return iD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="firebaseLocalStorageDb",Tne=1,O1="firebaseLocalStorage",sD="fbase_key";class nh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wm(t,e){return t.transaction([O1],e?"readwrite":"readonly").objectStore(O1)}function Nne(){const t=indexedDB.deleteDatabase(aD);return new nh(t).toPromise()}function H2(){const t=indexedDB.open(aD,Tne);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(O1,{keyPath:sD})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(O1)?e(r):(r.close(),await Nne(),e(await H2()))})})}async function YT(t,e,n){const r=wm(t,!0).put({[sD]:e,value:n});return new nh(r).toPromise()}async function kne(t,e){const n=wm(t,!1).get(e),r=await new nh(n).toPromise();return r===void 0?null:r.value}function ZT(t,e){const n=wm(t,!0).delete(e);return new nh(n).toPromise()}const One=800,Mne=3;class oD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await H2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Mne)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bm._getInstance(_ne()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Sne(),!this.activeServiceWorker)return;this.sender=new Cne(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ane()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await H2();return await YT(e,k1,"1"),await ZT(e,k1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>YT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kne(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ZT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=wm(i,!1).getAll();return new nh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),One)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oD.type="LOCAL";const Dne=oD;new Qf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){return e?ys(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw extends JM{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Rne(t){return hne(t.auth,new Fw(t),t.bypassAuthState)}function Ine(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),fne(n,new Fw(t),t.bypassAuthState)}async function Lne(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),dne(n,new Fw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rne;case"linkViaPopup":case"linkViaRedirect":return Lne;case"reauthViaPopup":case"reauthViaRedirect":return Ine;default:Fa(this.auth,"internal-error")}}resolve(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jne=new Qf(2e3,1e4);async function Pne(t,e,n){if(Oa(t.app))return Promise.reject(ma(t,"operation-not-supported-in-this-environment"));const r=eh(t);Mte(t,e,Pw);const i=lD(r,n);return new El(r,"signInViaPopup",e,i).executeNotNull()}class El extends cD{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,El.currentPopupAction&&El.currentPopupAction.cancel(),El.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const e=Bw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ma(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ma(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,El.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ma(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jne.get())};e()}}El.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bne="pendingRedirect",u0=new Map;class Fne extends cD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=u0.get(this.auth._key());if(!e){try{const r=await zne(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}u0.set(this.auth._key(),e)}return this.bypassAuthState||u0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zne(t,e){const n=Vne(e),r=Hne(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Une(t,e){u0.set(t._key(),e)}function Hne(t){return ys(t._redirectPersistence)}function Vne(t){return c0(Bne,t.config.apiKey,t.name)}async function $ne(t,e){return await eh(t)._initializationPromise,uD(t,e,!1)}async function uD(t,e,n=!1){if(Oa(t.app))return Promise.reject(Il(t));const r=eh(t),i=lD(r,e),s=await new Fne(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gne=600*1e3;class Wne{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qne(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dD(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ma(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gne&&this.cachedEventUids.clear(),this.cachedEventUids.has(JT(e))}saveEventToCache(e){this.cachedEventUids.add(JT(e)),this.lastProcessedEventTime=Date.now()}}function JT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qne(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kne(t,e={}){return Su(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xne=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yne=/^https?/;async function Zne(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Kne(t);for(const n of e)try{if(Jne(n))return}catch{}Fa(t,"unauthorized-domain")}function Jne(t){const e=z2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Yne.test(n))return!1;if(Xne.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qne=new Qf(3e4,6e4);function QT(){const t=Ia().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ere(t){return new Promise((e,n)=>{var i,a,s;function r(){QT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QT(),n(ma(t,"network-request-failed"))},timeout:Qne.get()})}if((a=(i=Ia().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=Ia().gapi)!=null&&s.load)r();else{const o=ine("iframefcb");return Ia()[o]=()=>{gapi.load?r():n(ma(t,"network-request-failed"))},nne(`${rne()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw d0=null,e})}let d0=null;function tre(t){return d0=d0||ere(t),d0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nre=new Qf(5e3,15e3),rre="__/auth/iframe",ire="emulator/auth/iframe",are={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sre=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ore(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dw(e,ire):`https://${t.config.authDomain}/${rre}`,r={apiKey:e.apiKey,appName:t.name,v:Jf},i=sre.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Zf(r).slice(1)}`}async function lre(t){const e=await tre(t),n=Ia().gapi;return tt(n,t,"internal-error"),e.open({where:document.body,url:ore(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:are,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=ma(t,"network-request-failed"),o=Ia().setTimeout(()=>{a(s)},nre.get());function c(){Ia().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cre={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ure=500,dre=600,fre="_blank",hre="http://localhost";class eN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pre(t,e,n,r=ure,i=dre){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...cre,width:r.toString(),height:i.toString(),top:a,left:s},d=Yr().toLowerCase();n&&(o=$M(d)?fre:n),HM(d)&&(e=e||hre,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[y,v])=>`${m}${y}=${v},`,"");if(Kte(d)&&o!=="_self")return mre(e||"",o),new eN(null);const p=window.open(e||"",o,f);tt(p,t,"popup-blocked");try{p.focus()}catch{}return new eN(p)}function mre(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gre="__/auth/handler",xre="emulator/auth/handler",yre=encodeURIComponent("fac");async function tN(t,e,n,r,i,a){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Jf,eventId:i};if(e instanceof Pw){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",gee(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof th){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),d=c?`#${yre}=${encodeURIComponent(c)}`:"";return`${vre(t)}?${Zf(o).slice(1)}${d}`}function vre({config:t}){return t.emulator?Dw(t,xre):`https://${t.authDomain}/${gre}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="webStorageSupport";class bre{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rD,this._completeRedirectFn=uD,this._overrideRedirectResult=Une}async _openPopup(e,n,r,i){var s;As((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await tN(e,n,r,z2(),i);return pre(e,a,Bw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await tN(e,n,r,z2(),i);return Ene(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(As(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lre(e),r=new Wne(e);return n.register("authEvent",i=>(tt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hy,{type:Hy},i=>{var s;const a=(s=i==null?void 0:i[0])==null?void 0:s[Hy];a!==void 0&&n(!!a),Fa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zne(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XM()||VM()||Lw()}}const wre=bre;var nN="@firebase/auth",rN="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cre{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ere(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sre(t){kf(new mu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;tt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YM(t)},d=new ene(r,i,a,c);return sne(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),kf(new mu("auth-internal",e=>{const n=eh(e.getProvider("auth").getImmediate());return(r=>new Cre(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xc(nN,rN,Ere(t)),Xc(nN,rN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Are=300,_re=TM("authIdTokenMaxAge")||Are;let iN=null;const Tre=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_re)return;const i=n==null?void 0:n.token;iN!==i&&(iN=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zw(t=yte()){const e=MM(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ane(t,{popupRedirectResolver:wre,persistence:[Dne,bne,rD]}),r=TM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=Tre(a.toString());mne(n,s,()=>s(n.currentUser)),pne(n,o=>s(o))}}const i=eee("auth");return i&&one(n,`http://${i}`),n}function Nre(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}tne({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=ma("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Nre().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sre("Browser");const Au=async()=>{const e=zw().currentUser;return e?await e.getIdToken():""},M1=t=>{const e=(t||"").toLowerCase().trim();if(e==="tr"||e==="turkish"||e==="turkce"||e==="trke")return"tr";if(e==="en"||e==="english"||e==="ingilizce")return"en"},Cm=t=>({title:t.title,author:t.author,publisher:t.publisher,isbn:t.isbn,translator:t.translator,tags:t.tags,summary:t.summaryText||t.generalNotes||t.summary||"",publishedDate:t.publicationYear?String(t.publicationYear):t.publishedDate||"",url:t.url,coverUrl:t.coverUrl??null,pageCount:t.pageCount||void 0,contentLanguageMode:t.contentLanguageMode||"AUTO",contentLanguageResolved:t.contentLanguageResolved,sourceLanguageHint:M1(t.sourceLanguageHint)}),Em=(t,e)=>{const n=(e.content_language_resolved||e.contentLanguageResolved||"").toString().toLowerCase(),r=n==="tr"||n==="en"?n:t.contentLanguageResolved,i=Number(e.language_decision_confidence??e.languageDecisionConfidence??t.languageDecisionConfidence??NaN),a=Number.isFinite(i)?i:t.languageDecisionConfidence;return{...t,summaryText:e.summary&&e.summary.trim().length>0?e.summary:t.summaryText,tags:e.tags&&e.tags.length>0?e.tags:t.tags,publisher:e.publisher||t.publisher,isbn:t.isbn,author:e.author||t.author,translator:e.translator||t.translator,publicationYear:e.publishedDate?String(Number(e.publishedDate)||t.publicationYear||""):t.publicationYear,coverUrl:e.coverUrl??t.coverUrl,pageCount:e.pageCount||t.pageCount||void 0,contentLanguageMode:e.contentLanguageMode||t.contentLanguageMode||"AUTO",contentLanguageResolved:r,sourceLanguageHint:M1(e.sourceLanguageHint||t.sourceLanguageHint),languageDecisionReason:e.language_decision_reason||e.languageDecisionReason||t.languageDecisionReason,languageDecisionConfidence:a}},kre=async t=>{if(!t.trim())return[];const e=[];try{const n=`https://api.crossref.org/works?query=${encodeURIComponent(t)}&rows=5&select=title,author,publisher,published,DOI,abstract,URL`,i=await fetch(n).then(a=>a.ok?a.json():null).then(a=>{var s;return(s=a==null?void 0:a.message)!=null&&s.items?a.message.items.map(o=>{var c,d,f,p,m,y,v,C,E;return{title:Array.isArray(o.title)?o.title[0]:o.title||"",author:(d=(c=o.author)==null?void 0:c[0])!=null&&d.family?`${o.author[0].given||""} ${o.author[0].family}`.trim():((p=(f=o.author)==null?void 0:f[0])==null?void 0:p.name)||"Unknown",publisher:o.publisher||((m=o["container-title"])==null?void 0:m[0])||"",isbn:"",translator:"",tags:o.subject||[],summary:o.abstract||`DOI: ${o.DOI||""}`,publishedDate:((E=(C=(v=(y=o.published)==null?void 0:y["date-parts"])==null?void 0:v[0])==null?void 0:C[0])==null?void 0:E.toString())||"",url:o.URL||(o.DOI?`https://doi.org/${o.DOI}`:""),coverUrl:null}}):[]}).catch(()=>[]);return e.push(...i),e}catch(n){return console.error("Article search error:",n),[]}},V2=async(t,e)=>{const n=t.trim();if(!n)return[];if(e==="BOOK"){const{searchBooks:r,isIsbn:i}=await jl(async()=>{const{searchBooks:s,isIsbn:o}=await import("./bookSearchService-BP_vxeL3.js");return{searchBooks:s,isIsbn:o}},[]),a=await r(n);if(a.results.length>0)return console.log(` Results from bookSearchService (${a.source}, cached: ${a.cached})`),a.results;if(i(n))return console.log(" ISBN not found in standard APIs. Skipping LLM fallback."),[]}if(e==="ARTICLE"){const r=await kre(n);if(r.length>0)return console.log(" Results from CrossRef (fast)"),r}try{const r=await Au(),i=await fetch(`${dt}/api/ai/search-resources`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({query:n,type:e})});if(!i.ok){const s=await i.json();throw new Error(s.detail||"Search failed")}return(await i.json()).results.map(s=>({...s,isbn:"",coverUrl:null,sourceLanguageHint:M1(s.sourceLanguageHint||s.source_language_hint),contentLanguageResolved:M1(s.contentLanguageResolved||s.content_language_resolved)}))}catch(r){return console.error("Error searching with Gemini (Backend):",r),[]}},fD=async t=>{if(t.length===0)return null;try{const e=await Au(),n=await fetch(`${dt}/api/ai/analyze-highlights`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({highlights:t})});return n.ok&&(await n.json()).summary||null}catch(e){return console.error("Gemini error (Backend):",e),null}},Uw=async t=>{if(!t)return[];try{const e=await Au(),n=await fetch(`${dt}/api/ai/generate-tags`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({note_content:t})});return n.ok?(await n.json()).tags||[]:[]}catch(e){return console.error("Gemini tag generation error (Backend):",e),[]}},Vy=async(t,e)=>{var s,o;const n=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${t}&maxResults=1`,{signal:e});if(!n.ok)throw new Error(`Google Books Error: ${n.status}`);const i=(s=(await n.json()).items)==null?void 0:s[0],a=(o=i==null?void 0:i.volumeInfo)==null?void 0:o.imageLinks;if(a!=null&&a.thumbnail||a!=null&&a.smallThumbnail){let c=a.thumbnail||a.smallThumbnail;return c=c.replace(/^http:\/\//i,"https://").replace("&edge=curl",""),c}throw new Error("No cover in Google Books result")},Ore=async(t,e,n,r)=>{var o;if(n){const d=`https://covers.openlibrary.org/b/isbn/${n.replace(/[^0-9X]/gi,"")}-L.jpg`;if((await fetch(d,{method:"HEAD",signal:r})).ok)return console.log(" Cover found via OpenLibrary ISBN"),d}const i=e?`${t} ${e}`:t,a=`https://openlibrary.org/search.json?q=${encodeURIComponent(i)}&limit=11`,s=await fetch(a,{signal:r});if(s.ok){const d=(o=(await s.json()).docs)==null?void 0:o[0];if(d!=null&&d.cover_i){const f=`https://covers.openlibrary.org/b/id/${d.cover_i}-L.jpg`;return console.log(" Cover found via OpenLibrary search"),f}}throw new Error("No cover found in OpenLibrary")},Mre=async(t,e,n)=>{try{const r=await Au(),i=new AbortController,a=setTimeout(()=>i.abort(),3e4),s=await fetch(`${dt}/api/ai/verify-cover`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({title:t,author:e,isbn:n}),signal:i.signal});return clearTimeout(a),s.ok&&(await s.json()).url||null}catch(r){return r.name==="AbortError"?console.warn("AI Cover Verification timed out"):console.error("AI cover verification error (Backend):",r),null}},Dre=async(t,e,n)=>{const r=n?n.replace(/[^0-9X]/gi,""):"",i=new AbortController,a=i.signal,s=[];if(r&&s.push(Vy(`isbn:${r}`,a)),t&&e){const o=`intitle:${encodeURIComponent(t)}+inauthor:${encodeURIComponent(e)}`;s.push(Vy(o,a))}s.push(Ore(t,e,r,a)),t&&!e&&s.push(Vy(`intitle:${encodeURIComponent(t)}`,a));try{const o=await Promise.any(s);return i.abort(),o}catch{console.warn("Fast cover fetch failed (all sources). Falling back to AI...");const c=await Mre(t,e,n);if(c)return console.log(" Cover found via AI verification"),c}return console.log(" No verified cover found"),null},Hw=async(t,e)=>{if(!((e==null?void 0:e.forceRegenerate)||hD(t)))return t;try{const r=await Au(),i={...t,content_language_mode:t.contentLanguageMode||"AUTO",source_language_hint:t.sourceLanguageHint||void 0,force_regenerate:!!(e!=null&&e.forceRegenerate)},a=await fetch(`${dt}/api/ai/enrich-book`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(i)});if(!a.ok){const o=await a.text();return console.error(`Enrichment failed with status ${a.status}: ${o}`),t}return await a.json()}catch(r){return console.error("Enrich error (Backend):",r),t}},hD=t=>{const e=!t.summary||t.summary.trim().length<40,n=!t.tags||t.tags.length<2,r=(t.contentLanguageMode||"AUTO").toUpperCase(),i=(t.contentLanguageResolved||"").toLowerCase(),a=r==="TR"&&i!=="tr"||r==="EN"&&i!=="en"||!!t.sourceLanguageHint&&!i;return e||n||a},pD=async t=>{if(t.length===0)return[];try{const e=await Au(),n=await fetch(`${dt}/api/ai/enrich-batch`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({books:t})});if(!n.ok||!n.body)return console.error("Batch response failed"),t;const r=n.body.getReader(),i=new TextDecoder,a=[];let s="";for(;;){const{value:o,done:c}=await r.read();if(c)break;const d=i.decode(o,{stream:!0});s+=d;const f=s.split(`
`);s=f.pop()||"";for(const p of f)if(p.trim())try{const m=JSON.parse(p);a.push(m)}catch(m){console.error("Error parsing NDJSON line:",m)}}if(s.trim())try{const o=JSON.parse(s);a.push(o)}catch(o){console.error("Error parsing final buffer:",o)}return a.length>0?a:t}catch(e){return console.error("Batch enrich error (Backend):",e),t}},aN=Object.freeze(Object.defineProperty({__proto__:null,analyzeHighlightsAI:fD,enrichBookWithAI:Hw,enrichBooksBatch:pD,fetchBookCover:Dre,generateTagsForNote:Uw,libraryItemToDraft:Cm,mergeEnrichedDraftIntoItem:Em,needsBookEnrichment:hD,searchResourcesAI:V2},Symbol.toStringTag,{value:"Module"}));var Rre="firebase",Ire="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xc(Rre,Ire,"app");const Lre={apiKey:"AIzaSyDwvjdmQGhwIgAKgaVmOkOnFdMgzaJ4heA",authDomain:"tomehub.firebaseapp.com",projectId:"tomehub",storageBucket:"tomehub.firebasestorage.app",messagingSenderId:"407093539608",appId:"1:407093539608:web:dfd1e04346b49060d2246d"},jre=DM(Lre),zd=zw(jre),mD=new ps,gD=Object.freeze(Object.defineProperty({__proto__:null,auth:zd,googleProvider:mD},Symbol.toStringTag,{value:"Module"})),xD=A.createContext(void 0),Pre=({children:t})=>{const[e,n]=A.useState(null),[r,i]=A.useState(!0);A.useEffect(()=>{$ne(zd).then(d=>{d&&console.log("Successfully signed in with redirect")}).catch(d=>{console.error("Redirect login error:",d)});const c=gne(zd,d=>{n(d),i(!1)});return()=>c()},[]);const o={user:e,loading:r,loginWithGoogle:async()=>{try{await Pne(zd,mD)}catch(c){console.error("Login with Google failed:",c),c.code==="auth/popup-blocked"?alert("Giri penceresi engellendi. Ltfen Safari veya Chrome gibi bir taraycda an veya pop-uplara izin verin."):c.code==="auth/cancelled-popup-request"||alert("Giri hatas: "+(c.message||"Bilinmeyen bir hata olutu."))}},logout:async()=>{await xne(zd)}};return g.jsx(xD.Provider,{value:o,children:t})},Sm=()=>{const t=A.useContext(xD);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Bre=({initialData:t,initialType:e,noteDefaults:n,onSave:r,onCancel:i})=>{const[a,s]=A.useState(t||e==="WEBSITE"||e==="PERSONAL_NOTE"?"edit":"search"),[o,c]=A.useState(""),[d,f]=A.useState([]),[p,m]=A.useState(!1),[y,v]=A.useState(!1),[C,E]=A.useState(!1),[S,_]=A.useState(!1),[N,k]=A.useState(!1),[O,I]=A.useState(!1),[M,L]=A.useState(null),[B,le]=A.useState(!1),ae=A.useRef(null),{user:fe}=Sm(),[W,de]=A.useState({title:"",author:"",translator:"",publisher:"",publicationYear:"",isbn:"",url:"",code:"",status:"On Shelf",readingStatus:"To Read",tags:"",generalNotes:"",summaryText:"",coverUrl:"",lentToName:"",lentDate:"",addedAt:new Date().toISOString().split("T")[0],pageCount:"",contentLanguageMode:"AUTO",contentLanguageResolved:"",sourceLanguageHint:"",personalNoteCategory:"DAILY",personalFolderId:"",folderPath:""});A.useEffect(()=>{var oe,ke,Oe;const K=t?`edit:${t.id}`:`new:${e}:${(n==null?void 0:n.personalNoteCategory)||""}:${(n==null?void 0:n.personalFolderId)||""}:${(n==null?void 0:n.folderPath)||""}`;if(ae.current!==K){if(ae.current=K,t){de({title:t.title,author:t.author,translator:t.translator||"",publisher:t.publisher||"",publicationYear:t.publicationYear||"",isbn:t.isbn||"",url:t.url||"",code:t.code||"",status:t.status,readingStatus:t.readingStatus,tags:t.tags.join(", "),generalNotes:t.generalNotes||"",summaryText:t.summaryText||"",coverUrl:t.coverUrl||"",lentToName:((oe=t.lentInfo)==null?void 0:oe.borrowerName)||"",lentDate:((ke=t.lentInfo)==null?void 0:ke.lentDate)||"",addedAt:new Date(t.addedAt).toISOString().split("T")[0],pageCount:((Oe=t.pageCount)==null?void 0:Oe.toString())||"",contentLanguageMode:t.contentLanguageMode||"AUTO",contentLanguageResolved:t.contentLanguageResolved||"",sourceLanguageHint:t.sourceLanguageHint||"",personalNoteCategory:t.personalNoteCategory||"DAILY",personalFolderId:t.personalFolderId||"",folderPath:t.folderPath||""});return}e==="PERSONAL_NOTE"&&de(Ue=>({...Ue,author:"Self",status:"On Shelf",readingStatus:"Finished",personalNoteCategory:(n==null?void 0:n.personalNoteCategory)||"DAILY",personalFolderId:(n==null?void 0:n.personalFolderId)||"",folderPath:(n==null?void 0:n.folderPath)||""}))}},[t==null?void 0:t.id,e,n==null?void 0:n.personalNoteCategory,n==null?void 0:n.personalFolderId,n==null?void 0:n.folderPath]);const xe=async K=>{if(K.preventDefault(),!!o.trim()){m(!0),f([]);try{const oe=await V2(o,e);f(oe),e==="BOOK"&&console.log(` Search completed for book: "${o}"`)}catch(oe){console.error("Search failed:",oe)}finally{m(!1)}}},H=async()=>{const K=au(W.generalNotes);if(!K)return;_(!0);const oe=await Uw(K);oe.length>0&&de(ke=>({...ke,tags:oe.join(", ")})),_(!1)},J=async(K,oe,ke)=>{v(!0);try{const{fetchBookCover:Oe}=await jl(async()=>{const{fetchBookCover:Ke}=await Promise.resolve().then(()=>aN);return{fetchBookCover:Ke}},void 0),Ue=await Oe(K,oe,ke);Ue&&de(Ke=>({...Ke,coverUrl:Ue}))}catch(Oe){console.error("Cover fetch failed:",Oe)}finally{v(!1)}},q=async(K,oe=!1)=>{E(!0);try{const{enrichBookWithAI:ke}=await jl(async()=>{const{enrichBookWithAI:Ue}=await Promise.resolve().then(()=>aN);return{enrichBookWithAI:Ue}},void 0),Oe=await ke({...K,contentLanguageMode:W.contentLanguageMode,sourceLanguageHint:W.sourceLanguageHint||K.sourceLanguageHint},{forceRegenerate:oe});de(Ue=>({...Ue,tags:Oe.tags&&Oe.tags.length>0?Oe.tags.join(", "):Ue.tags,summaryText:Oe.summary&&Oe.summary.length>0?Oe.summary:Ue.summaryText,publisher:Oe.publisher||Ue.publisher,publicationYear:Oe.publishedDate?String(Oe.publishedDate):Ue.publicationYear,isbn:Ue.isbn,pageCount:Oe.pageCount?String(Oe.pageCount):Ue.pageCount,translator:Oe.translator||Ue.translator,contentLanguageResolved:Oe.content_language_resolved||Oe.contentLanguageResolved||Ue.contentLanguageResolved||""}))}catch(ke){console.error("Enrichment failed",ke)}finally{E(!1)}},F=async K=>{de(oe=>{var ke;return{...oe,title:K.title,author:K.author,publisher:K.publisher||"",isbn:K.isbn||"",publicationYear:K.publishedDate||"",translator:K.translator||"",tags:K.tags?K.tags.join(", "):"",summaryText:K.summary||"",coverUrl:K.coverUrl||"",url:(e==="WEBSITE"||e==="ARTICLE")&&K.url||"",pageCount:((ke=K.pageCount)==null?void 0:ke.toString())||"",contentLanguageMode:K.contentLanguageMode||W.contentLanguageMode||"AUTO",contentLanguageResolved:(K.contentLanguageResolved||"").toLowerCase()==="tr"?"tr":(K.contentLanguageResolved||"").toLowerCase()==="en"?"en":"",sourceLanguageHint:(K.sourceLanguageHint||"").toLowerCase()==="tr"?"tr":(K.sourceLanguageHint||"").toLowerCase()==="en"?"en":""}}),s("edit"),e==="BOOK"&&(J(K.title,K.author,K.isbn||""),(!K.summary||!K.tags||K.tags.length===0||K.sourceLanguageHint)&&q(K))},z=K=>{const{name:oe,value:ke}=K.target;de(Oe=>oe==="contentLanguageMode"?{...Oe,[oe]:ke,contentLanguageResolved:""}:{...Oe,[oe]:ke})},R=async K=>{if(K.target.files&&K.target.files[0]){const oe=K.target.files[0];if(oe.type==="application/pdf"){L(oe),I(!0);try{const ke=await LQ(oe);de(Oe=>{var Ue;return{...Oe,title:Oe.title||ke.title||"",author:Oe.author||ke.author||"",pageCount:Oe.pageCount||((Ue=ke.page_count)==null?void 0:Ue.toString())||""}}),!W.title&&ke.title&&e==="BOOK"&&!W.coverUrl&&J(ke.title,ke.author||"","")}catch(ke){console.error("Failed to extract PDF metadata:",ke)}finally{I(!1)}}else alert("Please select a PDF file"),K.target.value=""}},$=async K=>{K.preventDefault();const oe=t?t.id:Date.now().toString();if(M&&fe){k(!0);try{await bM(M,W.title,W.author,fe.uid,oe,W.tags)}catch(Ue){console.error("PDF Ingestion failed:",Ue)}finally{k(!1)}}const ke=e==="BOOK"&&W.status==="Lent Out"&&W.lentToName?{borrowerName:W.lentToName,lentDate:W.lentDate||new Date().toISOString().split("T")[0]}:void 0,Oe=W.addedAt?new Date(W.addedAt).getTime():Date.now();r({id:oe,type:e,title:W.title,author:W.author,translator:W.translator,publisher:W.publisher,publicationYear:W.publicationYear,isbn:W.isbn,url:e==="WEBSITE"||e==="ARTICLE"?W.url:"",code:W.code,status:W.status,readingStatus:W.readingStatus,tags:W.tags.split(",").map(Ue=>Ue.trim()).filter(Ue=>Ue.length>0),generalNotes:ge?W.generalNotes:"",summaryText:ge?"":W.summaryText,contentLanguageMode:W.contentLanguageMode,contentLanguageResolved:W.contentLanguageResolved||void 0,sourceLanguageHint:W.sourceLanguageHint||void 0,personalNoteCategory:ge?W.personalNoteCategory:void 0,personalFolderId:ge&&W.personalFolderId.trim()||void 0,folderPath:ge&&W.folderPath.trim()||void 0,coverUrl:W.coverUrl,lentInfo:ke,addedAt:Oe,pageCount:W.pageCount?parseInt(W.pageCount):void 0})},Z=()=>{switch(e){case"ARTICLE":return g.jsx(zf,{className:"text-[#CC561E]",size:24});case"WEBSITE":return g.jsx(W1,{className:"text-[#CC561E]",size:24});case"PERSONAL_NOTE":return g.jsx(b0,{className:"text-[#CC561E]",size:24});default:return g.jsx(yb,{className:"text-[#CC561E]",size:24})}},pe=()=>{if(t)return"Edit Details";switch(e){case"ARTICLE":return"New Article";case"WEBSITE":return"New Website Resource";case"PERSONAL_NOTE":return"New Note";default:return"New Book"}},ge=e==="PERSONAL_NOTE",Q=ge?"text-slate-900 dark:text-white":"text-slate-700 dark:text-slate-300",Ee=ge?"text-slate-800 dark:text-slate-200":"text-slate-700 dark:text-slate-300",ie=ge?"text-slate-700 dark:text-slate-400":"text-slate-500 dark:text-slate-400";return g.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:g.jsxs("div",{className:`bg-white dark:bg-slate-900 rounded-xl shadow-2xl w-full overflow-hidden flex flex-col ${ge?"max-w-3xl max-h-[94vh]":"max-w-2xl max-h-[90vh]"}`,children:[g.jsxs("div",{className:`${ge?"p-4":"p-5"} border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-slate-900 z-10`,children:[g.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:a==="search"?g.jsxs(g.Fragment,{children:[g.jsx(ms,{className:"text-[#CC561E]",size:24}),"Find ",e==="ARTICLE"?"Article":"Book"]}):g.jsxs(g.Fragment,{children:[Z(),pe()]})}),g.jsx("button",{onClick:i,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:g.jsx(xa,{size:24})})]}),a==="search"&&g.jsxs("div",{className:"p-6 flex flex-col h-full overflow-y-auto",children:[g.jsxs("form",{onSubmit:xe,className:"relative mb-4",children:[g.jsx("input",{autoFocus:!0,type:"text",value:o,onChange:K=>c(K.target.value),placeholder:e==="ARTICLE"?"Enter Title, DOI, Author...":"Enter Title, ISBN, Author...",className:"w-full pl-5 pr-28 py-4 text-lg border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:border-[#CC561E] dark:focus:border-[#CC561E] focus:ring-4 focus:ring-[#CC561E]/10 outline-none transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500 bg-white dark:bg-slate-950 text-slate-900 dark:text-white"}),g.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1.5",children:[e==="BOOK"&&g.jsx("button",{type:"button",onClick:()=>le(!0),className:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 p-2 rounded-lg hover:bg-[#CC561E]/10 hover:text-[#CC561E] dark:hover:bg-[#CC561E]/20 dark:hover:text-[#f3a47b] transition-colors",title:"Scan ISBN barcode with camera",children:g.jsx(tu,{size:20})}),g.jsx("button",{type:"submit",disabled:p||!o.trim(),className:"bg-[#CC561E] text-white p-2 rounded-lg hover:bg-[#b34b1a] disabled:opacity-50 disabled:hover:bg-[#CC561E] transition-colors",children:p?g.jsx(In,{className:"animate-spin",size:20}):g.jsx(ms,{size:20})})]})]}),B&&g.jsx(OT,{onDetected:K=>{le(!1),c(K),m(!0),f([]),V2(K,e).then(oe=>f(oe)).catch(oe=>console.error("Barcode search failed:",oe)).finally(()=>m(!1))},onClose:()=>le(!1)}),g.jsx("div",{className:"space-y-3 flex-1 mt-6",children:d.length>0?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Matches Found"}),d.map((K,oe)=>g.jsxs("button",{onClick:()=>F(K),className:"w-full text-left p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-[#CC561E]/50 dark:hover:border-[#CC561E]/50 hover:shadow-md hover:bg-[rgba(204,86,30,0.05)] dark:hover:bg-[rgba(204,86,30,0.1)] transition-all group flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:K.title}),g.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:K.author}),g.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-slate-400",children:[K.publisher&&g.jsx("span",{children:K.publisher}),K.publishedDate&&g.jsx("span",{children:K.publishedDate}),K.isbn&&g.jsxs("span",{className:"font-mono tracking-tight",children:["ISBN: ",K.isbn]})]})]}),g.jsx(m5,{className:"text-slate-300 dark:text-slate-600 group-hover:text-[#CC561E]",size:20})]},oe))]}):!p&&o&&g.jsxs("div",{className:"text-center py-10 text-slate-500",children:[g.jsxs("p",{children:['No AI results found matching "',o,'".']}),g.jsx("p",{className:"text-sm mt-2",children:"Try entering details manually."})]})}),g.jsx("div",{className:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-800 flex justify-center",children:g.jsxs("button",{onClick:()=>s("edit"),className:"text-slate-500 dark:text-slate-400 hover:text-[#CC561E] dark:hover:text-[#f3a47b] text-sm font-medium flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[g.jsx("span",{children:"Don't see it? Enter details manually"}),g.jsx(uB,{size:16})]})})]}),a==="edit"&&g.jsxs("form",{onSubmit:$,className:`${ge?"p-4 md:p-5":"p-6"} overflow-y-auto flex-1`,children:[g.jsxs("div",{className:ge?"space-y-3":"space-y-5",children:[g.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 ${ge?"gap-3":"gap-4"}`,children:[g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:`block text-sm font-medium mb-1 ${Q}`,children:"Title *"}),g.jsx("input",{required:!0,name:"title",value:W.title,onChange:z,className:`w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 ${ge?"py-1.5 text-sm":"py-2"} focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white`,placeholder:ge?"Note Title":e==="WEBSITE"?"Page Title or Site Name":"e.g. The Stranger"})]}),!ge&&g.jsxs("div",{className:e==="WEBSITE"?"md:col-span-2":"",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:e==="WEBSITE"?"Author / Organization":"Author *"}),g.jsx("input",{required:e!=="WEBSITE",name:"author",value:W.author,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white",placeholder:"e.g. Albert Camus"})]}),ge&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsxs("label",{className:`block text-[13px] font-medium mb-1 flex items-center gap-1 ${Ee}`,children:[g.jsx(eu,{size:14,className:"text-slate-400"}),"Date"]}),g.jsx("input",{type:"date",name:"addedAt",value:W.addedAt,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white"})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-[13px] font-medium mb-1 ${Ee}`,children:"Category"}),g.jsxs("select",{name:"personalNoteCategory",value:W.personalNoteCategory,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white",children:[g.jsx("option",{value:"PRIVATE",children:"Private"}),g.jsx("option",{value:"DAILY",children:"Daily"}),g.jsx("option",{value:"IDEAS",children:"Ideas"})]}),g.jsx("p",{className:`mt-0.5 text-[10px] leading-tight ${ie}`,children:"Private/Daily sadece local aramada kalir. Ideas AI aramalara da katilir."})]})]}),e==="BOOK"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Translator"}),g.jsx("input",{name:"translator",value:W.translator,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white"})]}),e==="BOOK"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Content Language"}),g.jsxs("select",{name:"contentLanguageMode",value:W.contentLanguageMode,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white",children:[g.jsx("option",{value:"AUTO",children:"AUTO (Recommended)"}),g.jsx("option",{value:"TR",children:"TR"}),g.jsx("option",{value:"EN",children:"EN"})]}),(W.contentLanguageResolved||W.sourceLanguageHint)&&g.jsxs("p",{className:"mt-1 text-[11px] text-slate-500 dark:text-slate-400",children:["Resolved: ",W.contentLanguageResolved||"-"," | Source Hint: ",W.sourceLanguageHint||"-"]})]})]}),!ge&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e!=="WEBSITE"&&g.jsxs("div",{className:e==="ARTICLE"?"md:col-span-2":"",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:e==="ARTICLE"?"Journal / Publisher":"Publisher"}),g.jsx("input",{name:"publisher",value:W.publisher,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white"})]}),e==="BOOK"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"ISBN"}),g.jsxs("div",{className:"flex gap-1.5",children:[g.jsx("input",{name:"isbn",value:W.isbn,onChange:z,className:"flex-1 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] font-mono bg-white dark:bg-slate-950 text-slate-900 dark:text-white"}),g.jsx("button",{type:"button",onClick:()=>le(!0),className:"px-2.5 border border-slate-300 dark:border-slate-700 rounded-lg text-slate-500 dark:text-slate-400 hover:text-[#CC561E] hover:border-[#CC561E]/50 dark:hover:text-[#f3a47b] dark:hover:border-[#CC561E]/50 transition-colors",title:"Scan ISBN barcode",children:g.jsx(tu,{size:18})})]}),B&&g.jsx(OT,{onDetected:K=>{le(!1),de(oe=>({...oe,isbn:K}))},onClose:()=>le(!1)})]}),e==="ARTICLE"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Year"}),g.jsx("input",{name:"publicationYear",value:W.publicationYear,onChange:z,placeholder:"YYYY",className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white"})]}),e==="BOOK"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Page Count"}),g.jsx("input",{type:"number",name:"pageCount",value:W.pageCount,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white",placeholder:"e.g. 250"})]}),e==="BOOK"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Shelf Code"}),g.jsx("input",{name:"code",value:W.code,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white",placeholder:"e.g. A-12"})]})]}),(e==="WEBSITE"||e==="ARTICLE")&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"URL"}),g.jsx("input",{name:"url",value:W.url,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] text-[#CC561E] dark:text-[#f3a47b] bg-white dark:bg-slate-950",placeholder:"https://..."})]}),ge&&g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-1 ${Q}`,children:"Sub-file (optional)"}),g.jsx("input",{name:"folderPath",value:W.folderPath,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white",placeholder:"e.g. Sermon Ideas or Journal-2026-Week1"})]}),e==="BOOK"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(N3,{size:16}),"Cover Image URL"]})}),g.jsxs("div",{className:"flex gap-4 items-start",children:[g.jsxs("div",{className:"flex-1 relative",children:[g.jsx("input",{name:"coverUrl",value:W.coverUrl,onChange:z,placeholder:"Paste image URL or Auto-Find ->",className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg pl-3 pr-24 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] text-sm text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-950"}),g.jsxs("button",{type:"button",onClick:()=>J(W.title,W.author,W.isbn),disabled:y||!W.title&&!W.isbn,className:"absolute right-1 top-1 bottom-1 px-3 bg-[rgba(204,86,30,0.1)] dark:bg-[rgba(204,86,30,0.2)] hover:bg-[rgba(204,86,30,0.15)] dark:hover:bg-[rgba(204,86,30,0.25)] text-[#CC561E] dark:text-[#f3a47b] rounded text-xs font-semibold flex items-center gap-1 transition-colors",title:"Auto-find cover based on Title/ISBN",children:[y?g.jsx(In,{size:14,className:"animate-spin"}):g.jsx(PB,{size:14}),"Auto-Find"]})]}),g.jsxs("div",{className:"w-16 h-20 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center overflow-hidden flex-shrink-0 shadow-sm relative group",children:[W.coverUrl?g.jsx("img",{src:W.coverUrl,alt:"Preview",className:"w-full h-full object-cover",onError:K=>K.currentTarget.style.display="none"}):g.jsx(N3,{className:"text-slate-300",size:20}),y&&g.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center backdrop-blur-[1px]",children:g.jsx(In,{size:16,className:"animate-spin text-[#CC561E]"})}),!y&&!W.coverUrl&&g.jsx("div",{className:"absolute inset-0 bg-black/5 hidden group-hover:flex items-center justify-center",children:g.jsx(ms,{size:12,className:"text-slate-500"})})]})]}),g.jsx("div",{className:"mt-1 flex justify-end",children:g.jsxs("a",{href:`https://www.google.com/search?tbm=isch&q=book+cover+${encodeURIComponent(W.title+" "+W.author)}`,target:"_blank",rel:"noreferrer",className:"text-xs text-slate-400 dark:text-slate-500 hover:text-[#CC561E] dark:hover:text-[#f3a47b] hover:underline flex items-center gap-1",children:["Manual Search on Google Images ",g.jsx(ms,{size:10})]})})]}),(e==="BOOK"||e==="ARTICLE")&&g.jsxs("div",{className:"bg-[rgba(204,86,30,0.05)] dark:bg-[rgba(204,86,30,0.1)] p-4 rounded-xl border border-[#CC561E]/10 dark:border-[#CC561E]/20",children:[g.jsxs("label",{className:"block text-sm font-semibold text-[#CC561E] dark:text-[#f3a47b] mb-2 flex items-center gap-2",children:[g.jsx(C0,{size:16}),"Upload PDF Document to Library"]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{type:"file",accept:".pdf",onChange:R,className:"flex-1 text-sm text-slate-600 dark:text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-[#CC561E] file:text-white hover:file:bg-[#b34b1a] transition-all cursor-pointer"}),M&&g.jsx("button",{type:"button",onClick:()=>L(null),className:"text-red-500 hover:text-red-600 p-2",title:"Remove PDF",children:g.jsx(xa,{size:18})}),O&&g.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-[#CC561E] font-medium animate-pulse",children:[g.jsx(In,{size:14,className:"animate-spin"}),"Verifying metadata..."]})]}),g.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-2",children:"PDF content will be vectorized and added to your searchable AI library."})]})]}),g.jsx("hr",{className:`${ge?"my-3":"my-6"} border-slate-100 dark:border-slate-800`}),ge&&g.jsxs("div",{className:"mb-4 flex-1 flex flex-col",children:[g.jsx("label",{className:`block text-sm font-medium mb-1 ${Q}`,children:"Content"}),g.jsx(rM,{value:W.generalNotes,onChange:K=>de(oe=>({...oe,generalNotes:K})),minHeight:420}),g.jsx("p",{className:`mt-1 text-[10px] ${ie}`,children:"Toolbar supports heading, bold, underline, bullet list, numbered list and checklist."})]}),g.jsxs("div",{className:ge?"space-y-3":"space-y-5",children:[!ge&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Reading Status *"}),g.jsxs("select",{name:"readingStatus",value:W.readingStatus,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white",children:[g.jsx("option",{value:"To Read",children:"To Read"}),g.jsx("option",{value:"Reading",children:"Reading"}),g.jsx("option",{value:"Finished",children:"Finished"})]})]}),e==="BOOK"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Inventory Status *"}),g.jsxs("select",{name:"status",value:W.status,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white",children:[g.jsx("option",{value:"On Shelf",children:"On Shelf"}),g.jsx("option",{value:"Lent Out",children:"Lent Out"}),g.jsx("option",{value:"Lost",children:"Lost"})]})]})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("label",{className:`block text-sm font-medium mb-1 flex justify-between ${Q}`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:["Tags (comma separated)",C&&g.jsxs("span",{className:"text-xs text-[#CC561E] animate-pulse flex items-center gap-1",children:[g.jsx(Ra,{size:10})," AI Enriching..."]})]}),ge&&g.jsxs("button",{type:"button",onClick:H,disabled:S||!M0(W.generalNotes),className:"text-xs text-[#CC561E] dark:text-[#f3a47b] hover:text-[#b34b1a] dark:hover:text-white flex items-center gap-1 disabled:opacity-50",children:[S?g.jsx(In,{size:12,className:"animate-spin"}):g.jsx(Ra,{size:12}),"AI Auto-Tag"]})]}),g.jsx("input",{name:"tags",value:W.tags,onChange:z,className:`w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 ${ge?"py-1.5 text-sm":"py-2"} focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] bg-white dark:bg-slate-950 text-slate-900 dark:text-white`,placeholder:ge?"Use AI to generate tags...":"Ideas, Todo, Research"})]}),e==="BOOK"&&W.status==="Lent Out"&&g.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-200 grid grid-cols-1 md:grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-amber-800 mb-1",children:"Lent To (Name) *"}),g.jsx("input",{required:!0,name:"lentToName",value:W.lentToName,onChange:z,className:"w-full border border-amber-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-amber-800 mb-1",children:"Date"}),g.jsx("input",{type:"date",name:"lentDate",value:W.lentDate,onChange:z,className:"w-full border border-amber-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500"})]})]})]}),g.jsx("hr",{className:`${ge?"my-3":"my-6"} border-slate-100 dark:border-slate-800`}),!ge&&g.jsxs("div",{className:"mb-4 flex-1 flex flex-col",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Summary"}),g.jsx("textarea",{name:"summaryText",rows:4,value:W.summaryText,onChange:z,className:"w-full border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#CC561E] focus:border-[#CC561E] resize-none leading-relaxed flex-1 bg-white dark:bg-slate-950 text-slate-900 dark:text-white",placeholder:e==="WEBSITE"?"Why did you save this website?":"Your thoughts..."})]}),g.jsxs("div",{className:`flex justify-between items-center ${ge?"pt-1":"pt-2"} mt-auto`,children:[!t&&e!=="WEBSITE"&&!ge&&g.jsx("button",{type:"button",onClick:()=>s("search"),className:"text-sm text-slate-500 dark:text-slate-400 hover:text-[#CC561E] dark:hover:text-[#f3a47b] underline decoration-[#CC561E]/30 dark:decoration-[#CC561E]/50 hover:decoration-[#CC561E] dark:hover:decoration-[#CC561E]",children:"Back to Search"}),g.jsxs("div",{className:"flex gap-3 ml-auto",children:[g.jsx("button",{type:"button",onClick:i,className:"px-5 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors font-medium",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:N,className:"px-5 py-2 bg-[#CC561E] text-white hover:bg-[#b34b1a] rounded-lg shadow-lg shadow-[#CC561E]/20 transition-all font-medium flex items-center gap-2 active:scale-95",children:N?g.jsxs(g.Fragment,{children:[g.jsx(In,{size:18,className:"animate-spin"}),"Ingesting PDF..."]}):g.jsxs(g.Fragment,{children:["Save ",e==="ARTICLE"?"Article":e==="WEBSITE"?"Website":e==="PERSONAL_NOTE"?"Note":"Book"]})})]})]})]})]})})};var $y={exports:{}},sN;function Fre(){return sN||(sN=1,(function(t){var e=(function(n){var r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(F,z,R){F[z]=R.value},s,o=typeof Symbol=="function"?Symbol:{},c=o.iterator||"@@iterator",d=o.asyncIterator||"@@asyncIterator",f=o.toStringTag||"@@toStringTag";function p(F,z,R){return Object.defineProperty(F,z,{value:R,enumerable:!0,configurable:!0,writable:!0}),F[z]}try{p({},"")}catch{p=function(z,R,$){return z[R]=$}}function m(F,z,R,$){var Z=z&&z.prototype instanceof N?z:N,pe=Object.create(Z.prototype),ge=new H($||[]);return a(pe,"_invoke",{value:fe(F,R,ge)}),pe}n.wrap=m;function y(F,z,R){try{return{type:"normal",arg:F.call(z,R)}}catch($){return{type:"throw",arg:$}}}var v="suspendedStart",C="suspendedYield",E="executing",S="completed",_={};function N(){}function k(){}function O(){}var I={};p(I,c,function(){return this});var M=Object.getPrototypeOf,L=M&&M(M(J([])));L&&L!==r&&i.call(L,c)&&(I=L);var B=O.prototype=N.prototype=Object.create(I);k.prototype=O,a(B,"constructor",{value:O,configurable:!0}),a(O,"constructor",{value:k,configurable:!0}),k.displayName=p(O,f,"GeneratorFunction");function le(F){["next","throw","return"].forEach(function(z){p(F,z,function(R){return this._invoke(z,R)})})}n.isGeneratorFunction=function(F){var z=typeof F=="function"&&F.constructor;return z?z===k||(z.displayName||z.name)==="GeneratorFunction":!1},n.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,O):(F.__proto__=O,p(F,f,"GeneratorFunction")),F.prototype=Object.create(B),F},n.awrap=function(F){return{__await:F}};function ae(F,z){function R(pe,ge,Q,Ee){var ie=y(F[pe],F,ge);if(ie.type==="throw")Ee(ie.arg);else{var K=ie.arg,oe=K.value;return oe&&typeof oe=="object"&&i.call(oe,"__await")?z.resolve(oe.__await).then(function(ke){R("next",ke,Q,Ee)},function(ke){R("throw",ke,Q,Ee)}):z.resolve(oe).then(function(ke){K.value=ke,Q(K)},function(ke){return R("throw",ke,Q,Ee)})}}var $;function Z(pe,ge){function Q(){return new z(function(Ee,ie){R(pe,ge,Ee,ie)})}return $=$?$.then(Q,Q):Q()}a(this,"_invoke",{value:Z})}le(ae.prototype),p(ae.prototype,d,function(){return this}),n.AsyncIterator=ae,n.async=function(F,z,R,$,Z){Z===void 0&&(Z=Promise);var pe=new ae(m(F,z,R,$),Z);return n.isGeneratorFunction(z)?pe:pe.next().then(function(ge){return ge.done?ge.value:pe.next()})};function fe(F,z,R){var $=v;return function(pe,ge){if($===E)throw new Error("Generator is already running");if($===S){if(pe==="throw")throw ge;return q()}for(R.method=pe,R.arg=ge;;){var Q=R.delegate;if(Q){var Ee=W(Q,R);if(Ee){if(Ee===_)continue;return Ee}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if($===v)throw $=S,R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);$=E;var ie=y(F,z,R);if(ie.type==="normal"){if($=R.done?S:C,ie.arg===_)continue;return{value:ie.arg,done:R.done}}else ie.type==="throw"&&($=S,R.method="throw",R.arg=ie.arg)}}}function W(F,z){var R=z.method,$=F.iterator[R];if($===s)return z.delegate=null,R==="throw"&&F.iterator.return&&(z.method="return",z.arg=s,W(F,z),z.method==="throw")||R!=="return"&&(z.method="throw",z.arg=new TypeError("The iterator does not provide a '"+R+"' method")),_;var Z=y($,F.iterator,z.arg);if(Z.type==="throw")return z.method="throw",z.arg=Z.arg,z.delegate=null,_;var pe=Z.arg;if(!pe)return z.method="throw",z.arg=new TypeError("iterator result is not an object"),z.delegate=null,_;if(pe.done)z[F.resultName]=pe.value,z.next=F.nextLoc,z.method!=="return"&&(z.method="next",z.arg=s);else return pe;return z.delegate=null,_}le(B),p(B,f,"Generator"),p(B,c,function(){return this}),p(B,"toString",function(){return"[object Generator]"});function de(F){var z={tryLoc:F[0]};1 in F&&(z.catchLoc=F[1]),2 in F&&(z.finallyLoc=F[2],z.afterLoc=F[3]),this.tryEntries.push(z)}function xe(F){var z=F.completion||{};z.type="normal",delete z.arg,F.completion=z}function H(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(de,this),this.reset(!0)}n.keys=function(F){var z=Object(F),R=[];for(var $ in z)R.push($);return R.reverse(),function Z(){for(;R.length;){var pe=R.pop();if(pe in z)return Z.value=pe,Z.done=!1,Z}return Z.done=!0,Z}};function J(F){if(F){var z=F[c];if(z)return z.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var R=-1,$=function Z(){for(;++R<F.length;)if(i.call(F,R))return Z.value=F[R],Z.done=!1,Z;return Z.value=s,Z.done=!0,Z};return $.next=$}}return{next:q}}n.values=J;function q(){return{value:s,done:!0}}return H.prototype={constructor:H,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(xe),!F)for(var z in this)z.charAt(0)==="t"&&i.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=s)},stop:function(){this.done=!0;var F=this.tryEntries[0],z=F.completion;if(z.type==="throw")throw z.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var z=this;function R(Ee,ie){return pe.type="throw",pe.arg=F,z.next=Ee,ie&&(z.method="next",z.arg=s),!!ie}for(var $=this.tryEntries.length-1;$>=0;--$){var Z=this.tryEntries[$],pe=Z.completion;if(Z.tryLoc==="root")return R("end");if(Z.tryLoc<=this.prev){var ge=i.call(Z,"catchLoc"),Q=i.call(Z,"finallyLoc");if(ge&&Q){if(this.prev<Z.catchLoc)return R(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return R(Z.finallyLoc)}else if(ge){if(this.prev<Z.catchLoc)return R(Z.catchLoc,!0)}else if(Q){if(this.prev<Z.finallyLoc)return R(Z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(F,z){for(var R=this.tryEntries.length-1;R>=0;--R){var $=this.tryEntries[R];if($.tryLoc<=this.prev&&i.call($,"finallyLoc")&&this.prev<$.finallyLoc){var Z=$;break}}Z&&(F==="break"||F==="continue")&&Z.tryLoc<=z&&z<=Z.finallyLoc&&(Z=null);var pe=Z?Z.completion:{};return pe.type=F,pe.arg=z,Z?(this.method="next",this.next=Z.finallyLoc,_):this.complete(pe)},complete:function(F,z){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&z&&(this.next=z),_},finish:function(F){for(var z=this.tryEntries.length-1;z>=0;--z){var R=this.tryEntries[z];if(R.finallyLoc===F)return this.complete(R.completion,R.afterLoc),xe(R),_}},catch:function(F){for(var z=this.tryEntries.length-1;z>=0;--z){var R=this.tryEntries[z];if(R.tryLoc===F){var $=R.completion;if($.type==="throw"){var Z=$.arg;xe(R)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(F,z,R){return this.delegate={iterator:J(F),resultName:z,nextLoc:R},this.method==="next"&&(this.arg=s),_}},n})(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})($y)),$y.exports}var Gy,oN;function Vw(){return oN||(oN=1,Gy=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`),Gy}var Wy,lN;function yD(){if(lN)return Wy;lN=1;const t=Vw();let e=0;return Wy=({id:n,action:r,payload:i={}})=>{let a=n;return typeof a>"u"&&(a=t("Job",e),e+=1),{id:a,action:r,payload:i}},Wy}var kd={},cN;function $w(){if(cN)return kd;cN=1;let t=!1;return kd.logging=t,kd.setLogging=e=>{t=e},kd.log=(...e)=>t?console.log.apply(this,e):null,kd}var qy,uN;function zre(){if(uN)return qy;uN=1;const t=yD(),{log:e}=$w(),n=Vw();let r=0;return qy=()=>{const i=n("Scheduler",r),a={},s={};let o=[];r+=1;const c=()=>o.length,d=()=>Object.keys(a).length,f=()=>{if(o.length!==0){const C=Object.keys(a);for(let E=0;E<C.length;E+=1)if(typeof s[C[E]]>"u"){o[0](a[C[E]]);break}}},p=(C,E)=>new Promise((S,_)=>{const N=t({action:C,payload:E});o.push(async k=>{o.shift(),s[k.id]=N;try{S(await k[C].apply(this,[...E,N.id]))}catch(O){_(O)}finally{delete s[k.id],f()}}),e(`[${i}]: Add ${N.id} to JobQueue`),e(`[${i}]: JobQueue length=${o.length}`),f()});return{addWorker:C=>(a[C.id]=C,e(`[${i}]: Add ${C.id}`),e(`[${i}]: Number of workers=${d()}`),f(),C.id),addJob:async(C,...E)=>{if(d()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return p(C,E)},terminate:async()=>{Object.keys(a).forEach(async C=>{await a[C].terminate()}),o=[]},getQueueLen:c,getNumWorkers:d}},qy}function Ure(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ky,dN;function Hre(){return dN||(dN=1,Ky=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Ure=="function"&&(e.type="node"),typeof t>"u"?e:e[t]}),Ky}var Xy,fN;function Vre(){if(fN)return Xy;fN=1;const e=Hre()("type")==="browser"?n=>new URL(n,window.location.href).href:n=>n;return Xy=n=>{const r={...n};return["corePath","workerPath","langPath"].forEach(i=>{n[i]&&(r[i]=e(r[i]))}),r},Xy}var Yy,hN;function vD(){return hN||(hN=1,Yy={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Yy}const $re="7.0.0",Gre={version:$re};var Zy,pN;function Wre(){return pN||(pN=1,Zy={workerBlobURL:!0,logger:()=>{}}),Zy}var Jy,mN;function qre(){if(mN)return Jy;mN=1;const t=Gre.version;return Jy={...Wre(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${t}/dist/worker.min.js`},Jy}var Qy,gN;function Kre(){return gN||(gN=1,Qy=({workerPath:t,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${t}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(t);return n}),Qy}var ev,xN;function Xre(){return xN||(xN=1,ev=t=>{t.terminate()}),ev}var tv,yN;function Yre(){return yN||(yN=1,tv=(t,e)=>{t.onmessage=({data:n})=>{e(n)}}),tv}var nv,vN;function Zre(){return vN||(vN=1,nv=async(t,e)=>{t.postMessage(e)}),nv}var rv,bN;function Jre(){if(bN)return rv;bN=1;const t=n=>new Promise((r,i)=>{const a=new FileReader;a.onload=()=>{r(a.result)},a.onerror=({target:{error:{code:s}}})=>{i(Error(`File could not be read! Code=${s}`))},a.readAsArrayBuffer(n)}),e=async n=>{let r=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?r=atob(n.split(",")[1]).split("").map(i=>i.charCodeAt(0)):r=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(r=await e(n.src)),n.tagName==="VIDEO"&&(r=await e(n.poster)),n.tagName==="CANVAS"&&await new Promise(i=>{n.toBlob(async a=>{r=await t(a),i()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const i=await n.convertToBlob();r=await t(i)}else(n instanceof File||n instanceof Blob)&&(r=await t(n));return new Uint8Array(r)};return rv=e,rv}var iv,wN;function Qre(){if(wN)return iv;wN=1;const t=qre(),e=Kre(),n=Xre(),r=Yre(),i=Zre(),a=Jre();return iv={defaultOptions:t,spawnWorker:e,terminateWorker:n,onMessage:r,send:i,loadImage:a},iv}var av,CN;function bD(){if(CN)return av;CN=1;const t=Vre(),e=yD(),{log:n}=$w(),r=Vw(),i=vD(),{defaultOptions:a,spawnWorker:s,terminateWorker:o,onMessage:c,loadImage:d,send:f}=Qre();let p=0;return av=async(m="eng",y=i.LSTM_ONLY,v={},C={})=>{const E=r("Worker",p),{logger:S,errorHandler:_,...N}=t({...a,...v}),k={},O=typeof m=="string"?m.split("+"):m;let I=y,M=C;const L=[i.DEFAULT,i.LSTM_ONLY].includes(y)&&!N.legacyCore;let B,le;const ae=new Promise((K,oe)=>{le=K,B=oe}),fe=K=>{B(K.message)};let W=s(N);W.onerror=fe,p+=1;const de=({id:K,action:oe,payload:ke})=>new Promise((Oe,Ue)=>{n(`[${E}]: Start ${K}, action=${oe}`);const Ke=`${oe}-${K}`;k[Ke]={resolve:Oe,reject:Ue},f(W,{workerId:E,jobId:K,action:oe,payload:ke})}),xe=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),H=K=>de(e({id:K,action:"load",payload:{options:{lstmOnly:L,corePath:N.corePath,logging:N.logging}}})),J=(K,oe,ke)=>de(e({id:ke,action:"FS",payload:{method:"writeFile",args:[K,oe]}})),q=(K,oe)=>de(e({id:oe,action:"FS",payload:{method:"readFile",args:[K,{encoding:"utf8"}]}})),F=(K,oe)=>de(e({id:oe,action:"FS",payload:{method:"unlink",args:[K]}})),z=(K,oe,ke)=>de(e({id:ke,action:"FS",payload:{method:K,args:oe}})),R=(K,oe)=>de(e({id:oe,action:"loadLanguage",payload:{langs:K,options:{langPath:N.langPath,dataPath:N.dataPath,cachePath:N.cachePath,cacheMethod:N.cacheMethod,gzip:N.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(I)&&!N.legacyLang}}})),$=(K,oe,ke,Oe)=>de(e({id:Oe,action:"initialize",payload:{langs:K,oem:oe,config:ke}})),Z=(K="eng",oe,ke,Oe)=>{if(L&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(oe))throw Error("Legacy model requested but code missing.");const Ue=oe||I;I=Ue;const Ke=ke||M;M=Ke;const $t=(typeof K=="string"?K.split("+"):K).filter(je=>!O.includes(je));return O.push(...$t),$t.length>0?R($t,Oe).then(()=>$(K,Ue,Ke,Oe)):$(K,Ue,Ke,Oe)},pe=(K={},oe)=>de(e({id:oe,action:"setParameters",payload:{params:K}})),ge=async(K,oe={},ke={text:!0},Oe)=>de(e({id:Oe,action:"recognize",payload:{image:await d(K),options:oe,output:ke}})),Q=async(K,oe)=>{if(L)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return de(e({id:oe,action:"detect",payload:{image:await d(K)}}))},Ee=async()=>(W!==null&&(o(W),W=null),Promise.resolve());c(W,({workerId:K,jobId:oe,status:ke,action:Oe,data:Ue})=>{const Ke=`${Oe}-${oe}`;if(ke==="resolve")n(`[${K}]: Complete ${oe}`),k[Ke].resolve({jobId:oe,data:Ue}),delete k[Ke];else if(ke==="reject")if(k[Ke].reject(Ue),delete k[Ke],Oe==="load"&&B(Ue),_)_(Ue);else throw Error(Ue);else ke==="progress"&&S({...Ue,userJobId:oe})});const ie={id:E,worker:W,load:xe,writeText:J,readText:q,removeFile:F,FS:z,reinitialize:Z,setParameters:pe,recognize:ge,detect:Q,terminate:Ee};return H().then(()=>R(m)).then(()=>$(m,y,C)).then(()=>le(ie)).catch(()=>{}),ae},av}var sv,EN;function eie(){if(EN)return sv;EN=1;const t=bD();return sv={recognize:async(r,i,a)=>{const s=await t(i,1,a);return s.recognize(r).finally(async()=>{await s.terminate()})},detect:async(r,i)=>{const a=await t("osd",0,i);return a.detect(r).finally(async()=>{await a.terminate()})}},sv}var ov,SN;function tie(){return SN||(SN=1,ov={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),ov}var lv,AN;function nie(){return AN||(AN=1,lv={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),lv}var cv,_N;function rie(){if(_N)return cv;_N=1,Fre();const t=zre(),e=bD(),n=eie(),r=tie(),i=vD(),a=nie(),{setLogging:s}=$w();return cv={languages:r,OEM:i,PSM:a,createScheduler:t,createWorker:e,setLogging:s,...n},cv}var Gw=rie();const iie=U1(Gw),aie=x7({__proto__:null,default:iie},[Gw]),sie=async(t,e)=>{const n=await Gw.createWorker("tur+eng",1,{logger:r=>{r.status==="recognizing text"&&e&&e(Math.round(r.progress*100))}});try{const{data:{text:r,confidence:i}}=await n.recognize(t);return{text:r,confidence:i}}finally{await n.terminate()}},oie=1600,lie=.85;function cie(t){const e=t.maxTouchPoints>0||t.hasCoarsePointer,n=t.viewportWidth<=1024;return e&&n}function uie(t,e){const n=(t||"").trim(),r=(e||"").trim();return r?n?`${n}

${r}`:r:n}async function die(t,e={}){const n=e.maxWidth??oie,r=e.quality??lie,i=await createImageBitmap(t);try{const a=i.width,s=i.height;if(!a||!s)throw new Error("Invalid image dimensions");const o=a>n?n/a:1,c=Math.max(1,Math.round(a*o)),d=Math.max(1,Math.round(s*o)),f=document.createElement("canvas");f.width=c,f.height=d;const p=f.getContext("2d");if(!p)throw new Error("Canvas context is unavailable");return p.drawImage(i,0,0,c,d),await new Promise(y=>{f.toBlob(y,"image/jpeg",r)})||t}finally{i.close()}}const TN=.02,fie=({open:t,onClose:e,onApply:n,onProcessingChange:r,onErrorChange:i,onDraftChange:a})=>{const[s,o]=A.useState(null),[c,d]=A.useState(null),[f,p]=A.useState(null),[m,y]=A.useState(!1),[v,C]=A.useState(!1),[E,S]=A.useState(0),[_,N]=A.useState(""),k=A.useRef(null),O=A.useRef(null),I=A.useRef(null),M=A.useRef(null),L=(q,F,z)=>Math.min(z,Math.max(F,q));if(A.useEffect(()=>{t&&(o(null),d(null),p(null),N(""),S(0),y(!1),C(!1),r(!1),i(null),a(""),setTimeout(()=>{var q;(q=k.current)==null||q.click()},100))},[t,a,i,r]),A.useEffect(()=>{M.current=f},[f]),!t)return null;const B=q=>{var R;const F=(R=q.target.files)==null?void 0:R[0];if(!F)return;d(F),p(null),N(""),a(""),i(null);const z=new FileReader;z.onload=$=>{var Z;o((Z=$.target)==null?void 0:Z.result)},z.readAsDataURL(F)},le=q=>{if(!O.current)return null;const F=O.current.getBoundingClientRect();return F.width<=0||F.height<=0?null:{x:L((q.clientX-F.left)/F.width,0,1),y:L((q.clientY-F.top)/F.height,0,1)}},ae=q=>{if(m)return;const F=le(q);F&&(q.currentTarget.setPointerCapture(q.pointerId),I.current=F,p({x:F.x,y:F.y,width:0,height:0}),C(!0))},fe=q=>{if(!v||!I.current)return;const F=le(q);if(!F)return;const z=I.current,R=Math.min(z.x,F.x),$=Math.min(z.y,F.y),Z=Math.abs(F.x-z.x),pe=Math.abs(F.y-z.y);p({x:R,y:$,width:Z,height:pe})},W=q=>{if(!v)return;q.currentTarget.hasPointerCapture(q.pointerId)&&q.currentTarget.releasePointerCapture(q.pointerId),C(!1);const F=M.current;(!F||F.width<TN||F.height<TN)&&p(null)},de=async(q,F)=>{const z=await createImageBitmap(q);try{const R=L(Math.round(F.x*z.width),0,z.width-1),$=L(Math.round(F.y*z.height),0,z.height-1),Z=Math.max(1,Math.round(F.width*z.width)),pe=Math.max(1,Math.round(F.height*z.height)),ge=Math.min(Z,z.width-R),Q=Math.min(pe,z.height-$),Ee=document.createElement("canvas");Ee.width=ge,Ee.height=Q;const ie=Ee.getContext("2d");if(!ie)throw new Error("Canvas context is unavailable");return ie.drawImage(z,R,$,ge,Q,0,0,ge,Q),await new Promise(oe=>{Ee.toBlob(oe,"image/jpeg",.92)})||q}finally{z.close()}},xe=async q=>{if(c){y(!0),r(!0),i(null),S(0);try{const F=q&&f?await de(c,f):c,z=await die(F),$=((await sie(z,Z=>S(Z))).text||"").trim();N($),a($),$||i("Secilen alanda okunabilir metin bulunamadi. Alani degistirip tekrar deneyin.")}catch(F){console.error("OCR Error:",F);const z="Metin okunamadi. Isigi ve aciyi duzeltip tekrar deneyin.";i(z),alert(z)}finally{y(!1),r(!1)}}},H=()=>{o(null),d(null),p(null),N(""),S(0),C(!1),a(""),i(null),k.current&&(k.current.value="",k.current.click())},J=()=>{n(_),e()};return g.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:[g.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 dark:border-white/10",children:[g.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[g.jsx(tu,{size:20,className:"text-primary dark:text-orange-500"}),"Metin Tara (OCR)"]}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-white/5 rounded-full transition-colors","aria-label":"Kapat",children:g.jsx(xa,{size:20,className:"text-slate-500"})})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[!s&&g.jsxs("div",{onClick:()=>{var q;return(q=k.current)==null?void 0:q.click()},className:"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-12 flex flex-col items-center justify-center gap-4 cursor-pointer hover:border-primary/50 dark:hover:border-orange-500/50 transition-colors",children:[g.jsx("div",{className:"w-16 h-16 bg-primary/10 dark:bg-orange-500/10 rounded-full flex items-center justify-center text-primary dark:text-orange-500",children:g.jsx(tu,{size:32})}),g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Kamerayi Ac"}),g.jsx("p",{className:"text-sm text-slate-500",children:"Sayfayi cekin, sonra metin alanini secin"})]})]}),s&&g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"relative bg-black rounded-lg border border-slate-200 dark:border-white/10 shadow-inner p-2",children:[g.jsxs("div",{className:"relative mx-auto w-fit max-w-full touch-none",children:[g.jsx("img",{src:s,alt:"Captured",className:"block max-h-[58vh] w-auto max-w-full rounded-md"}),!m&&g.jsx("div",{ref:O,className:"absolute inset-0 cursor-crosshair",onPointerDown:ae,onPointerMove:fe,onPointerUp:W,onPointerCancel:W,children:f&&g.jsx("div",{className:"absolute border-2 border-emerald-400 bg-emerald-400/12",style:{left:`${f.x*100}%`,top:`${f.y*100}%`,width:`${f.width*100}%`,height:`${f.height*100}%`}})})]}),m&&g.jsxs("div",{className:"absolute inset-0 bg-black/60 flex flex-col items-center justify-center text-white p-6 text-center backdrop-blur-[2px]",children:[g.jsx(In,{size:48,className:"animate-spin mb-4 text-primary dark:text-orange-500"}),g.jsx("p",{className:"font-bold text-lg mb-2",children:"Metin Isleniyor..."}),g.jsx("div",{className:"w-full max-w-xs bg-white/20 h-2 rounded-full overflow-hidden",children:g.jsx("div",{className:"bg-primary dark:bg-orange-500 h-full transition-all duration-300",style:{width:`${E}%`}})}),g.jsxs("p",{className:"mt-2 text-sm font-medium",children:["%",E]}),g.jsx("p",{className:"mt-4 text-[10px] text-white/60",children:"Bu islem cihaz hizina gore 5-10 saniye surebilir."})]})]}),!m&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Metin bolgesini secmek icin gorsel uzerinde surukleyin."}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[g.jsxs("button",{type:"button",onClick:()=>xe(!0),disabled:!f,className:"py-2 px-3 rounded-lg bg-emerald-600 text-white text-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center gap-2",children:[g.jsx(nB,{size:16}),"Secili Alani Tara"]}),g.jsx("button",{type:"button",onClick:()=>xe(!1),className:"py-2 px-3 rounded-lg border border-slate-200 dark:border-white/10 text-sm font-semibold text-slate-700 dark:text-slate-200 inline-flex items-center justify-center gap-2 hover:bg-slate-50 dark:hover:bg-white/5",children:"Tum Sayfayi Tara"}),g.jsxs("button",{type:"button",onClick:H,className:"py-2 px-3 rounded-lg border border-slate-200 dark:border-white/10 text-sm font-semibold text-slate-700 dark:text-slate-200 inline-flex items-center justify-center gap-2 hover:bg-slate-50 dark:hover:bg-white/5",children:[g.jsx(w5,{size:16}),"Tekrar Cek"]})]})]}),!m&&_&&g.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[g.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Okunan Metin"}),g.jsx("textarea",{value:_,onChange:q=>{N(q.target.value),a(q.target.value)},className:"w-full h-40 border border-slate-200 dark:border-white/10 rounded-xl p-3 text-sm bg-slate-50 dark:bg-white/5 text-slate-800 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none resize-none font-lora"}),g.jsx("p",{className:"text-[10px] text-slate-400 italic text-right",children:"* Hatalari buradan duzeltebilirsiniz."})]})]})]}),g.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-white/10 flex gap-3",children:[s&&!m&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 border border-slate-200 dark:border-white/10 rounded-xl text-slate-600 dark:text-slate-300 font-semibold hover:bg-slate-50 dark:hover:bg-white/5 transition-colors",children:"Kapat"}),g.jsxs("button",{onClick:J,disabled:!_,className:"flex-[1.5] py-3 px-4 bg-primary dark:bg-orange-600 text-white rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-primary/20 dark:shadow-orange-600/20 disabled:opacity-50 flex items-center justify-center gap-2",children:[g.jsx(vb,{size:18}),"Highlight'a Ekle"]})]}),!s&&g.jsx("button",{onClick:e,className:"w-full py-3 text-slate-500 font-medium hover:text-slate-700 dark:hover:text-slate-300 transition-colors",children:"Vazgec"})]})]}),g.jsx("input",{ref:k,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:B})]})},hie=({highlights:t,onUpdate:e,autoEditHighlightId:n})=>{const[r,i]=A.useState(!1),[a,s]=A.useState(null),[o,c]=A.useState({}),[d,f]=A.useState("highlight"),[p,m]=A.useState(!1),[y,v]=A.useState(!1),[C,E]=A.useState(!1),[S,_]=A.useState(""),[N,k]=A.useState(null),[O,I]=A.useState(""),[M,L]=A.useState(""),[B,le]=A.useState(!1);nt.useEffect(()=>{if(n){const q=t.find(F=>F.id===n);q&&fe(q)}},[n]),nt.useEffect(()=>{const q=()=>{if(typeof window>"u"){v(!1);return}const F=typeof window.matchMedia=="function"&&window.matchMedia("(pointer: coarse)").matches,z=typeof navigator<"u"?Number(navigator.maxTouchPoints||0):0;v(cie({viewportWidth:window.innerWidth||0,maxTouchPoints:z,hasCoarsePointer:F}))};return q(),window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]);const ae=()=>{s(null),c({}),f("highlight"),I(new Date().toISOString().split("T")[0]),L(""),m(!1),k(null),_(""),i(!0)},fe=q=>{s(q.id),c({...q}),f(J1(q.type)),I(new Date(q.createdAt).toISOString().split("T")[0]),L(q.tags?q.tags.join(", "):""),m(!1),k(null),_(""),i(!0)},W=()=>{i(!1),s(null),c({}),L(""),I(""),m(!1),k(null),_(""),E(!1)},de=nt.useCallback(q=>{c(F=>({...F,text:uie(String(F.text||""),q)})),_(q),k(null),m(!1)},[]),xe=async()=>{if(!o.text)return;le(!0);const q=`"${o.text}"
${o.comment?`Context: ${o.comment}`:""}`,F=await Uw(q);if(F.length>0){const z=M?M.split(",").map($=>$.trim()).filter(Boolean):[],R=Array.from(new Set([...z,...F]));L(R.join(", "))}le(!1)},H=()=>{if(!o.text)return;const q=M.split(",").map(R=>R.trim()).filter(R=>R.length>0),F=O?new Date(O).getTime():Date.now(),z={id:a||Date.now().toString(),text:o.text,type:d,pageNumber:o.pageNumber,paragraphNumber:o.paragraphNumber,chapterTitle:o.chapterTitle,comment:o.comment,createdAt:F,tags:q};if(a){const R=t.map($=>$.id===a?z:$);e(R)}else e([z,...t]);W()},J=q=>{window.confirm("Delete this item?")&&e(t.filter(F=>F.id!==q))};return g.jsxs("div",{className:"space-y-4 md:space-y-6",children:[!r&&g.jsxs("button",{onClick:ae,className:"w-full py-3 md:py-4 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl text-slate-500 dark:text-slate-400 hover:border-[#262D40]/24 hover:text-[#262D40] hover:bg-[#262D40]/30 dark:hover:bg-white/5 transition-all flex flex-col items-center gap-1 md:gap-2",children:[g.jsx(Dv,{size:20,className:"md:w-6 md:h-6"}),g.jsx("span",{className:"text-sm md:text-base font-medium",children:"Add Highlight or Insights"})]}),r&&g.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 md:p-6 rounded-xl shadow-lg border border-[#262D40]/8 dark:border-white/10 animate-in fade-in zoom-in-95 duration-200 relative ring-1 ring-[#262D40]/5 dark:ring-white/5",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[g.jsxs("h4",{className:"font-semibold text-slate-800 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[a?g.jsx(w0,{size:16,className:"md:w-[18px] md:h-[18px] text-[#262D40] dark:text-orange-500"}):g.jsx(Dv,{size:16,className:"md:w-[18px] md:h-[18px] text-[#262D40] dark:text-orange-500"}),a?d==="highlight"?"Edit Highlight":"Edit Note":"New Entry"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[d==="highlight"&&y&&g.jsxs("button",{type:"button",onClick:()=>{k(null),_(""),m(!0)},disabled:C,className:"inline-flex items-center gap-1 rounded-md border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-semibold text-sky-700 transition-colors hover:bg-sky-100 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:bg-sky-950/35 dark:text-sky-200 dark:hover:bg-sky-950/55",title:"Kamera ile metin tara",children:[C?g.jsx(In,{size:12,className:"animate-spin"}):g.jsx(tu,{size:12}),"Tara"]}),g.jsx("button",{onClick:W,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:g.jsx(xa,{size:18,className:"md:w-5 md:h-5"})})]})]}),g.jsxs("div",{className:"flex bg-[#F3F5FA] dark:bg-white/5 p-1 rounded-lg mb-4 md:mb-5",children:[g.jsxs("button",{type:"button",onClick:()=>{d!=="highlight"&&(f("highlight"),c({}),L(""),k(null),_(""))},className:`flex-1 flex items-center justify-center gap-2 py-1.5 md:py-2 text-xs md:text-sm font-medium rounded-md transition-all ${d==="highlight"?"bg-white dark:bg-white/10 text-[#262D40] dark:text-orange-500 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:[g.jsx(pf,{size:14,className:"md:w-4 md:h-4"}),"Highlight"]}),g.jsxs("button",{type:"button",onClick:()=>{d!=="insight"&&(f("insight"),c({}),L(""),m(!1),k(null),_(""))},className:`flex-1 flex items-center justify-center gap-2 py-1.5 md:py-2 text-xs md:text-sm font-medium rounded-md transition-all ${d==="insight"?"bg-white dark:bg-white/10 text-[#262D40] dark:text-orange-500 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:[g.jsx(ru,{size:14,className:"md:w-4 md:h-4"}),"Insights"]})]}),g.jsxs("div",{className:"space-y-2 md:space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] md:text-xs font-medium text-slate-500 dark:text-slate-400 mb-0.5 uppercase",children:d==="highlight"?"Highlight Text *":"Insight Content *"}),g.jsx("textarea",{autoFocus:!0,rows:12,className:"w-full border rounded-lg p-2 md:p-3 text-sm md:text-base text-slate-800 dark:text-white focus:ring-2 focus:ring-[#262D40]/30 dark:focus:ring-orange-500/30 focus:border-[#262D40]/30 dark:focus:border-orange-500/30 font-lora bg-[#F3F5FA] border-[#E6EAF2] dark:bg-slate-800/50 dark:border-white/10",placeholder:d==="highlight"?"Type the text exactly as it appears...":"Write your thoughts, summary, or key takeaway...",value:o.text||"",onChange:q=>c(F=>({...F,text:q.target.value}))}),d==="highlight"&&S&&g.jsx("p",{className:"mt-1 text-[10px] md:text-xs text-sky-700 dark:text-sky-300",children:"OCR metni eklendi. Kaydetmeden once metni kontrol edebilirsiniz."}),d==="highlight"&&N&&g.jsx("p",{className:"mt-1 text-[10px] md:text-xs text-red-600 dark:text-red-400",children:N})]}),d==="highlight"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] md:text-xs font-medium text-slate-500 dark:text-slate-400 mb-0.5 uppercase",children:"Comment"}),g.jsx("input",{type:"text",className:"w-full border border-[#E6EAF2] dark:border-white/10 rounded-lg py-1.5 px-2 text-xs md:text-sm bg-white dark:bg-slate-800/50 text-slate-800 dark:text-white focus:ring-2 focus:ring-orange-500/30",placeholder:"Why is this quote important?",value:o.comment||"",onChange:q=>c(F=>({...F,comment:q.target.value}))})]}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] md:text-xs font-medium text-slate-500 dark:text-slate-400 mb-0.5 uppercase",children:"Page #"}),g.jsx("input",{type:"number",className:"w-full border border-[#E6EAF2] dark:border-white/10 rounded-lg py-1.5 px-2 text-xs md:text-sm bg-white dark:bg-slate-800/50 text-slate-800 dark:text-white focus:ring-2 focus:ring-orange-500/30",value:o.pageNumber||"",onChange:q=>c(F=>({...F,pageNumber:parseInt(q.target.value)||void 0}))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] md:text-xs font-medium text-slate-500 dark:text-slate-400 mb-0.5 uppercase",children:"Paragraph #"}),g.jsx("input",{type:"number",className:"w-full border border-[#E6EAF2] dark:border-white/10 rounded-lg py-1.5 px-2 text-xs md:text-sm bg-white dark:bg-slate-800/50 text-slate-800 dark:text-white focus:ring-2 focus:ring-orange-500/30",value:o.paragraphNumber||"",onChange:q=>c(F=>({...F,paragraphNumber:parseInt(q.target.value)||void 0}))})]}),g.jsxs("div",{className:"col-span-2 md:col-span-1",children:[g.jsx("label",{className:"block text-[10px] md:text-xs font-medium text-slate-500 dark:text-slate-400 mb-0.5 uppercase",children:"Chapter"}),g.jsx("input",{type:"text",className:"w-full border border-[#E6EAF2] dark:border-white/10 rounded-lg py-1.5 px-2 text-xs md:text-sm bg-white dark:bg-slate-800/50 text-slate-800 dark:text-white focus:ring-2 focus:ring-orange-500/30",placeholder:"Title or No.",value:o.chapterTitle||"",onChange:q=>c(F=>({...F,chapterTitle:q.target.value}))})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4 pt-2 border-t border-slate-50 dark:border-white/5",children:[g.jsxs("div",{className:"md:col-span-1",children:[g.jsxs("label",{className:"block text-[10px] md:text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 uppercase flex items-center gap-1",children:[g.jsx(eu,{size:10,className:"md:w-3 md:h-3"})," Date"]}),g.jsx("input",{type:"date",value:O,onChange:q=>I(q.target.value),className:"w-full border border-[#E6EAF2] dark:border-white/10 rounded-lg py-1.5 px-2 text-xs md:text-sm bg-white dark:bg-slate-800/50 text-slate-800 dark:text-white focus:ring-2 focus:ring-orange-500/30"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsxs("label",{className:"block text-[10px] md:text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 uppercase flex items-center justify-between",children:[g.jsx("span",{children:"Tags"}),g.jsxs("button",{type:"button",onClick:xe,disabled:B||!o.text,className:"text-[#262D40] dark:text-orange-500 hover:text-[#262D40] dark:hover:text-orange-400 flex items-center gap-1 disabled:opacity-50 text-[10px] font-bold tracking-wide",children:[B?g.jsx(In,{size:10,className:"animate-spin"}):g.jsx(Ra,{size:10}),"AI AUTO-TAG"]})]}),g.jsx("input",{type:"text",value:M,onChange:q=>L(q.target.value),placeholder:"Separate with commas...",className:"w-full border border-[#E6EAF2] dark:border-white/10 rounded-lg py-1.5 px-2 text-xs md:text-sm bg-white dark:bg-slate-800/50 text-slate-800 dark:text-white focus:ring-2 focus:ring-orange-500/30"})]})]}),g.jsxs("div",{className:"flex justify-end gap-3 pt-2 mt-2",children:[g.jsx("button",{onClick:W,className:"px-3 md:px-4 py-2 text-xs md:text-sm text-slate-600 dark:text-slate-400 hover:bg-[#F3F5FA] dark:hover:bg-white/5 rounded-lg flex items-center gap-2",children:"Cancel"}),g.jsxs("button",{onClick:H,disabled:!o.text,className:"px-3 md:px-4 py-2 text-xs md:text-sm bg-[#262D40]/40 dark:bg-orange-600/40 text-white rounded-lg hover:bg-[#262D40]/55 dark:hover:bg-orange-600/60 disabled:opacity-50 shadow-sm flex items-center gap-2",children:[g.jsx(eB,{size:14,className:"md:w-4 md:h-4"}),a?"Update Entry":"Save Entry"]})]})]})]}),g.jsxs("div",{className:"space-y-3 md:space-y-4",children:[t.map(q=>{const F=W5(q.type);return g.jsxs("div",{className:"p-3 md:p-6 rounded-xl border transition-all relative group bg-white dark:bg-slate-900/50 border-[#E6EAF2] dark:border-white/10 hover:border-[#262D40]/12 dark:hover:border-orange-500/30 hover:shadow-md",children:[g.jsxs("div",{className:"absolute top-1 right-1 md:top-4 md:right-4 flex gap-0.5 md:gap-2 md:bg-white/80 md:dark:bg-slate-800/90 md:backdrop-blur-sm p-0 md:p-1 rounded-lg md:shadow-sm md:border md:border-[#E6EAF2] md:dark:border-white/10 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity z-10",children:[g.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),fe(q)},className:"p-1.5 text-slate-400/70 dark:text-slate-500/70 hover:text-[#262D40] dark:hover:text-orange-500 hover:bg-[#262D40]/5 dark:hover:bg-white/5 rounded-md transition-colors",title:"Edit",children:g.jsx(w0,{size:14,className:"md:w-4 md:h-4"})}),g.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),J(q.id)},className:"p-1.5 text-slate-400/70 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:g.jsx(Tl,{size:14,className:"md:w-4 md:h-4"})})]}),g.jsxs("div",{className:"flex gap-3 md:gap-4",children:[g.jsx("div",{className:"flex-shrink-0 mt-0.5 md:mt-1",children:F?g.jsx(ru,{size:16,className:"text-[#262D40]/82 fill-[#262D40]/85 md:w-5 md:h-5"}):g.jsx(pf,{size:16,className:"text-yellow-400 fill-yellow-200 md:w-5 md:h-5"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:`text-sm md:text-lg leading-relaxed mb-2 md:mb-3 pr-0 md:pr-16 whitespace-pre-wrap font-lora ${F?"text-slate-700 dark:text-slate-300":"text-slate-900 dark:text-white"}`,children:q.text}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mb-2",children:[(q.pageNumber||q.paragraphNumber)&&g.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 md:px-2 md:py-1 rounded border bg-[#F3F5FA] dark:bg-white/5 border-[#E6EAF2] dark:border-white/10 text-slate-600 dark:text-slate-400",children:[g.jsx(DP,{size:10,className:"md:w-3 md:h-3"}),q.pageNumber&&g.jsxs("span",{children:["Pg ",q.pageNumber]}),q.pageNumber&&q.paragraphNumber&&g.jsx("span",{children:""}),q.paragraphNumber&&g.jsxs("span",{children:["Para ",q.paragraphNumber]})]}),q.chapterTitle&&g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(zf,{size:10,className:"md:w-3 md:h-3"}),g.jsx("span",{children:q.chapterTitle})]}),g.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[g.jsx(eu,{size:10,className:"md:w-3 md:h-3"}),g.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()})]})]}),q.tags&&q.tags.length>0&&g.jsx("div",{className:"flex flex-wrap gap-1 md:gap-2 mb-2",children:q.tags.map((z,R)=>g.jsxs("span",{className:"px-1.5 py-0.5 bg-[#F3F5FA] dark:bg-white/5 border border-[#E6EAF2] dark:border-white/10 rounded text-[9px] md:text-[10px] text-slate-500 dark:text-slate-400 flex items-center gap-0.5",children:[g.jsx(v0,{size:8})," ",z]},R))}),q.comment&&g.jsx("div",{className:"mt-2 md:mt-3 pl-3 md:pl-4 border-l-2 border-[#E6EAF2] dark:border-white/10 py-0.5 md:py-1",children:g.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 italic",children:q.comment})})]})]})]},q.id)}),t.length===0&&!r&&g.jsx("div",{className:"text-center py-8 md:py-12 text-slate-400",children:g.jsx("p",{className:"text-xs md:text-base",children:"No highlights or insights added yet."})})]}),g.jsx(fie,{open:p,onClose:()=>m(!1),onApply:de,onProcessingChange:E,onErrorChange:k,onDraftChange:_})]})},D1=(t,e)=>{if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=Date.parse(t);if(Number.isFinite(n))return n}return e},pie=t=>{const e=String(t||"AUTO").trim().toUpperCase();return e==="TR"||e==="EN"?e:"AUTO"},NN=t=>{const e=String(t||"").trim().toLowerCase();if(e==="tr"||e==="en")return e},mie=(t,e)=>{const n=D1(t.createdAt,Date.now());return{id:typeof t.id=="string"&&t.id.trim()?t.id:`${n}-${e}`,text:t.text||"",type:J1(t.type),pageNumber:t.pageNumber,paragraphNumber:t.paragraphNumber,chapterTitle:t.chapterTitle,comment:t.comment,createdAt:n,tags:Array.isArray(t.tags)?t.tags:[],isFavorite:!!t.isFavorite}},wD=t=>({...t,addedAt:D1(t.addedAt,Date.now()),tags:Array.isArray(t.tags)?t.tags:[],contentLanguageMode:pie(t.contentLanguageMode),contentLanguageResolved:NN(t.contentLanguageResolved),sourceLanguageHint:NN(t.sourceLanguageHint),highlights:Array.isArray(t.highlights)?t.highlights.map((e,n)=>mie(e,n)):[],personalNoteCategory:t.type==="PERSONAL_NOTE"?Q1(t.personalNoteCategory):void 0,personalFolderId:t.type==="PERSONAL_NOTE"?Z5(t.personalFolderId):void 0,folderPath:t.type==="PERSONAL_NOTE"?Y5(t.folderPath):void 0,status:t.status||"On Shelf",readingStatus:t.readingStatus||"To Read",author:(t.author||"Unknown Author").trim()||"Unknown Author",title:(t.title||"Untitled").trim()||"Untitled",summaryText:typeof t.summaryText=="string"?t.summaryText:void 0}),CD=t=>({...t,category:Q1(t.category),name:(t.name||"").trim(),order:Number.isFinite(t.order)?t.order:0,createdAt:D1(t.createdAt,Date.now()),updatedAt:D1(t.updatedAt,Date.now())});function gie(t){return t?{__oracleCursor:t}:null}function xie(t){return t?t.__oracleCursor:void 0}const Hp=async(t,e=2e3,n)=>{const r=new URL(`${dt}/api/library/items`);r.searchParams.set("limit",String(e));const i=xie(n);i&&r.searchParams.set("cursor",i);const a=await rn(r.toString());if(!a.ok)throw new Error(await ba(a,"Failed to fetch library items from Oracle"));const s=await a.json(),c=(Array.isArray(s==null?void 0:s.items)?s.items:[]).map(f=>wD(f)),d=gie(typeof(s==null?void 0:s.next_cursor)=="string"?s.next_cursor:null);return{items:c,lastDoc:d}},R1=async(t,e)=>{const n=wD(e),r=await rn(`${dt}/api/library/items/${encodeURIComponent(n.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(await ba(r,"Failed to save library item to Oracle"))},Ud=async(t,e,n)=>{const r=await rn(`${dt}/api/library/items/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({patch:n})});if(!r.ok)throw new Error(await ba(r,"Failed to patch library item in Oracle"))},yie=async(t,e)=>{const n=await rn(`${dt}/api/library/items/${encodeURIComponent(e)}`,{method:"DELETE"});if(!n.ok)throw new Error(await ba(n,"Failed to delete library item from Oracle"))},vie=async(t,e)=>{if(e.length===0)return;const n=await rn(`${dt}/api/library/items/bulk-delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_ids:e})});if(!n.ok)throw new Error(await ba(n,"Failed to bulk delete library items from Oracle"))},uv=async t=>{const e=await rn(`${dt}/api/library/personal-note-folders`);if(!e.ok)throw new Error(await ba(e,"Failed to fetch personal note folders from Oracle"));const n=await e.json();return(Array.isArray(n==null?void 0:n.folders)?n.folders:[]).map(i=>CD(i)).sort((i,a)=>i.category!==a.category?i.category.localeCompare(a.category):i.order!==a.order?i.order-a.order:i.name.localeCompare(a.name))},kN=async(t,e)=>{const n=CD(e),r=await rn(`${dt}/api/library/personal-note-folders/${encodeURIComponent(n.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(await ba(r,"Failed to save personal note folder to Oracle"))},ON=async(t,e,n)=>{const r=await rn(`${dt}/api/library/personal-note-folders/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(await ba(r,"Failed to update personal note folder in Oracle"))},bie=async(t,e)=>{const n=await rn(`${dt}/api/library/personal-note-folders/${encodeURIComponent(e)}`,{method:"DELETE"});if(!n.ok)throw new Error(await ba(n,"Failed to delete personal note folder from Oracle"))},Vp=async(t,e,n,r,i)=>{const a=await rn(`${dt}/api/library/items/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({patch:{personalNoteCategory:Q1(n),personalFolderId:Z5(r)||null,folderPath:Y5(i)||null}})});if(!a.ok)throw new Error(await ba(a,"Failed to move personal note in Oracle"))},wie=nt.memo(({book:t,onBack:e,onEdit:n,onDelete:r,onUpdateHighlights:i,initialTab:a="info",autoEditHighlightId:s,onIngestSuccess:o,onBookUpdated:c})=>{const[d,f]=A.useState(a),[p,m]=A.useState(null),[y,v]=A.useState(!1),[C,E]=A.useState(!1),[S,_]=A.useState(!1),[N,k]=A.useState(null),[O,I]=A.useState(null),[M,L]=A.useState(null),[B,le]=A.useState(null),[ae,fe]=A.useState(null),[W,de]=A.useState(0),[xe,H]=A.useState(0),{user:J}=Sm(),q=nt.useRef(null),F=nt.useRef(null),z=t.type==="PERSONAL_NOTE",R=je=>{if(!je)return"";const Je=je.replace(/_/g," ").replace(/\s+/g," ").trim(),Ie=24;return Je.length<=Ie?Je:`${Je.slice(0,Ie).trimEnd()}...`},$=async je=>{var Ie;const Je=(Ie=je.target.files)==null?void 0:Ie[0];if(!(!Je||!J)){if(Je.type!=="application/pdf"){L("Please select a PDF file");return}E(!0),L(null),I(null),le({status:"PROCESSING",file_name:Je.name,chunk_count:null,embedding_count:null,updated_at:new Date().toISOString()}),de(Le=>Le+1);try{const Le=await bM(Je,t.title,t.author,J.uid,t.id);I(Le),setTimeout(()=>I(null),5e3)}catch(Le){L(Le instanceof Error?Le.message:"Ingestion failed")}finally{E(!1),q.current&&(q.current.value="")}}},Z=je=>{switch(je){case"Reading":return{icon:_l,color:"text-[#38BDF8]",bg:"bg-[#38BDF8]/12",border:"border-[#38BDF8]/45"};case"Finished":return{icon:hf,color:"text-[#22C55E]",bg:"bg-[#22C55E]/12",border:"border-[#22C55E]/45"};case"To Read":return{icon:Pj,color:"text-[#94A3B8]",bg:"bg-[#94A3B8]/12",border:"border-[#94A3B8]/40"};default:return{icon:_l,color:"text-[#94A3B8]",bg:"bg-[#94A3B8]/12",border:"border-[#94A3B8]/40"}}},pe=je=>{switch(je){case"Lent Out":return{icon:xo,color:"text-[#F59E0B]",bg:"bg-[#F59E0B]/15",border:"border-[#F59E0B]/45"};case"Lost":return{icon:xo,color:"text-[#F43F5E]",bg:"bg-[#F43F5E]/15",border:"border-[#F43F5E]/45"};case"On Shelf":default:return{icon:bb,color:"text-[#14B8A6]",bg:"bg-[#14B8A6]/15",border:"border-[#14B8A6]/45"}}},ge=async()=>{if(t.highlights.length===0)return;v(!0);const je=t.highlights.map(Ie=>Ie.text),Je=await fD(je);m(Je),v(!1)},Q=async()=>{if(!(!(J!=null&&J.uid)||S)){_(!0),k(null);try{const je=Cm(t),Je=await Hw(je,{forceRegenerate:!0}),Ie=Em(t,Je),Le={};Ie.summaryText!==t.summaryText&&(Le.summaryText=Ie.summaryText),JSON.stringify(Ie.tags||[])!==JSON.stringify(t.tags||[])&&(Le.tags=Ie.tags),Ie.publisher!==t.publisher&&(Le.publisher=Ie.publisher),Ie.translator!==t.translator&&(Le.translator=Ie.translator),Ie.publicationYear!==t.publicationYear&&(Le.publicationYear=Ie.publicationYear),Ie.isbn!==t.isbn&&(Le.isbn=Ie.isbn),Ie.coverUrl!==t.coverUrl&&(Le.coverUrl=Ie.coverUrl),Ie.pageCount!==t.pageCount&&(Le.pageCount=Ie.pageCount),Ie.contentLanguageMode!==t.contentLanguageMode&&(Le.contentLanguageMode=Ie.contentLanguageMode),Ie.contentLanguageResolved!==t.contentLanguageResolved&&(Le.contentLanguageResolved=Ie.contentLanguageResolved),Ie.sourceLanguageHint!==t.sourceLanguageHint&&(Le.sourceLanguageHint=Ie.sourceLanguageHint),Ie.languageDecisionReason!==t.languageDecisionReason&&(Le.languageDecisionReason=Ie.languageDecisionReason),Ie.languageDecisionConfidence!==t.languageDecisionConfidence&&(Le.languageDecisionConfidence=Ie.languageDecisionConfidence),Object.keys(Le).length>0&&await Ud(J.uid,t.id,Le),c==null||c({...t,...Le}),(Ie.summaryText||Ie.generalNotes)&&m(Ie.summaryText||Ie.generalNotes||null)}catch(je){console.error("Enrich failed",je),k(je instanceof Error?je.message:"Failed to generate with AI")}finally{_(!1)}}},Ee=z?null:Z(t.readingStatus),ie=z?null:pe(t.status),K=!!((B==null?void 0:B.status)==="COMPLETED"&&(B!=null&&B.matched_by_title)&&(B!=null&&B.resolved_book_id)&&String(B.resolved_book_id)!==String(t.id)),oe=(B==null?void 0:B.status)==="COMPLETED"&&!K,ke=(B==null?void 0:B.status)==="PROCESSING",Oe=(B==null?void 0:B.status)==="FAILED",Ue=oe||ke||C,Ke=Math.min(95,Math.max(12,12+xe*3)),mt=nt.useCallback(()=>{de(je=>je+1)},[]);nt.useEffect(()=>{if(!(J!=null&&J.uid)||!(t!=null&&t.id)||z){le(null),fe(null),H(0),F.current&&(clearTimeout(F.current),F.current=null);return}let je=!1;const Je=60,Ie=async()=>{try{const Le=await IQ(t.id,J.uid,t.title);if(je)return;le(Le),fe(null);const Ve=!!(Le.status==="COMPLETED"&&Le.matched_by_title&&Le.resolved_book_id&&String(Le.resolved_book_id)!==String(t.id)),wn=Le.status==="COMPLETED"&&!Ve;Le.status==="COMPLETED"&&!Ve&&(o==null||o()),Le.status==="PROCESSING"&&H(Jr=>{const an=Jr+1;return an<Je&&!je&&(F.current=setTimeout(Ie,1e4)),an})}catch(Le){if(je)return;fe(Le instanceof Error?Le.message:"Failed to fetch ingestion status"),H(Ve=>{const wn=Ve+1;return wn<Je&&!je&&(F.current=setTimeout(Ie,1e4)),wn})}};return H(0),Ie(),()=>{je=!0,F.current&&(clearTimeout(F.current),F.current=null)}},[t.id,J==null?void 0:J.uid,z,W]);const $t=(je,Je,Ie)=>g.jsxs("div",{className:`p-2 md:p-4 rounded-lg md:rounded-xl border-2 ${je.bg} ${je.border} flex items-center gap-2 md:gap-3 shadow-sm h-full`,children:[g.jsx("div",{className:`p-1.5 md:p-2 rounded-full bg-white/50 dark:bg-black/20 ${je.color} flex-shrink-0`,children:g.jsx(je.icon,{size:16,className:"md:w-5 md:h-5"})}),g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("span",{className:"block text-[9px] md:text-[10px] uppercase tracking-wider font-bold text-[#111827] dark:text-white/60 truncate",children:Je}),g.jsx("span",{className:"font-bold text-xs md:text-base leading-tight text-[#111827] dark:text-white truncate block",children:Ie})]})]});return g.jsxs("div",{className:"max-w-[1100px] w-full mx-auto p-3 md:p-4 pb-20 animate-in fade-in duration-300",children:[g.jsxs("button",{onClick:e,className:"mb-2 md:mb-6 flex items-center text-slate-500 dark:text-slate-400 hover:text-[#262D40] dark:hover:text-white transition-colors group text-base md:text-base",children:[g.jsx(h5,{size:18,className:"mr-1.5 md:mr-1 md:w-5 md:h-5 group-hover:-translate-x-1 transition-transform"}),"Back to ",z?"Notes":"Library"]}),g.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl md:rounded-2xl shadow-sm border border-[#E6EAF2] dark:border-slate-800 overflow-hidden",children:[g.jsx("div",{className:"p-4 md:p-8 border-b border-[#E6EAF2] dark:border-slate-800",children:z?g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-2 md:mb-4 text-[#262D40]/90 dark:text-white/85",children:[g.jsx(b0,{size:18,className:"md:w-6 md:h-6"}),g.jsx("span",{className:"text-xs md:text-sm font-bold tracking-wide uppercase text-[#262D40]/80 dark:text-white",children:"Personal Note"}),g.jsx("span",{className:"px-2 py-0.5 rounded-md bg-[#CC561E]/10 text-[#CC561E] text-[10px] md:text-xs font-bold tracking-wide",children:Rr(t)}),t.folderPath&&g.jsx("span",{className:"px-2 py-0.5 rounded-md bg-[#F3F5FA] dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[10px] md:text-xs border border-[#E6EAF2] dark:border-slate-700",children:t.folderPath})]}),g.jsx("h1",{className:"text-xl md:text-4xl font-bold text-slate-900 dark:text-white mb-2 md:mb-4 leading-tight",children:t.title}),g.jsxs("div",{className:"flex flex-wrap gap-1.5 md:gap-2 mb-2",children:[t.tags.map((je,Je)=>g.jsxs("span",{className:"px-1.5 py-0.5 md:px-2 md:py-1 bg-[#F3F5FA] dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[10px] md:text-xs rounded border border-[#E6EAF2] dark:border-slate-700",children:["#",je]},Je)),g.jsxs("span",{className:"px-1.5 py-0.5 md:px-2 md:py-1 text-slate-400 dark:text-slate-500 text-[10px] md:text-xs flex items-center gap-1",children:[g.jsx(eu,{size:10,className:"md:w-3 md:h-3"}),new Date(t.addedAt).toLocaleDateString()]})]})]}),g.jsxs("div",{className:"flex gap-1 md:gap-2 ml-2 md:ml-4 flex-shrink-0",children:[g.jsx("input",{type:"file",ref:q,className:"hidden",accept:".pdf",onChange:$}),g.jsx("button",{type:"button",onClick:()=>{var je;return(je=q.current)==null?void 0:je.click()},disabled:Ue,className:"p-2 text-slate-400 dark:text-slate-500 hover:text-[#262D40] dark:hover:text-[#262D40]/82 hover:bg-[#262D40]/5 dark:hover:bg-[#262D40]/30 rounded-full transition-colors relative",title:oe?`PDF already indexed: ${(B==null?void 0:B.file_name)||""}`:"Upload PDF",children:C?g.jsx(In,{size:18,className:"md:w-5 md:h-5 animate-spin text-[#262D40]/90"}):g.jsx(C0,{size:18,className:"md:w-5 md:h-5"})}),g.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),n()},className:"p-2 text-slate-400 dark:text-slate-500 hover:text-[#262D40] dark:hover:text-[#262D40]/82 hover:bg-[#262D40]/5 dark:hover:bg-[#262D40]/30 rounded-full transition-colors",title:"Edit Note",children:g.jsx(w0,{size:18,className:"md:w-5 md:h-5"})}),g.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),r()},className:"p-2 text-slate-400 dark:text-slate-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-full transition-colors",title:"Delete Note",children:g.jsx(Tl,{size:18,className:"md:w-5 md:h-5"})})]})]}):g.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-8",children:[g.jsxs("div",{className:"flex gap-4 md:block md:shrink-0",children:[g.jsx("div",{className:"w-20 h-32 md:w-34 md:h-52 bg-slate-200 dark:bg-slate-800 rounded-lg shadow-inner flex-shrink-0 flex items-center justify-center text-slate-400 dark:text-slate-600 self-center md:self-start overflow-hidden relative border border-[#E6EAF2] dark:border-slate-700",children:t.type==="BOOK"&&t.coverUrl?g.jsx("img",{src:t.coverUrl,alt:t.title,className:"w-full h-full object-cover"}):t.type==="BOOK"?g.jsx(_l,{size:32,className:"md:w-12 md:h-12"}):t.type==="ARTICLE"?g.jsx(zf,{size:32,className:"md:w-12 md:h-12"}):g.jsx(W1,{size:32,className:"md:w-12 md:h-12"})}),g.jsxs("div",{className:"md:hidden flex-1 flex justify-between items-start min-w-0 py-1 gap-2",children:[g.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[g.jsx("h1",{className:"text-[16px] font-bold text-slate-900 dark:text-white mb-1 leading-snug line-clamp-3",children:t.title}),g.jsx("p",{className:"text-[13px] text-slate-600 dark:text-slate-400 mb-2 line-clamp-2",children:t.author}),t.url&&t.type!=="BOOK"&&g.jsxs("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 text-[#262D40] dark:text-slate-400 hover:underline max-w-full",children:[g.jsx(k3,{size:12}),g.jsx("span",{className:"text-xs truncate",children:new URL(t.url).hostname})]})]}),g.jsxs("div",{className:"flex flex-col gap-1.5 flex-shrink-0 pt-0.5",children:[Ee&&g.jsxs("div",{className:`px-2 py-0.5 rounded-md border text-[10px] font-bold flex items-center gap-1.5 shadow-sm whitespace-nowrap ${Ee.bg} ${Ee.border} ${Ee.color}`,children:[g.jsx(Ee.icon,{size:10}),g.jsx("span",{children:t.readingStatus})]}),ie&&t.type==="BOOK"&&g.jsxs("div",{className:`px-2 py-0.5 rounded-md border text-[10px] font-bold flex items-center gap-1.5 shadow-sm whitespace-nowrap ${ie.bg} ${ie.border} ${ie.color}`,children:[g.jsx(ie.icon,{size:10}),g.jsx("span",{children:t.status})]})]})]})]}),g.jsxs("div",{className:"hidden md:block flex-1 min-w-0",children:[g.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-2 leading-tight",children:t.title}),g.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400 mb-4",children:t.author}),g.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.tags.map((je,Je)=>g.jsxs("span",{className:"px-2 py-1 bg-[#F3F5FA] dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs rounded border border-[#E6EAF2] dark:border-slate-700",children:["#",je]},Je))}),t.url&&t.type!=="BOOK"&&g.jsx("div",{className:"mb-6",children:g.jsxs("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-[#262D40] dark:text-[#262D40]/82 hover:underline",children:[g.jsx(k3,{size:16}),g.jsx("span",{className:"text-sm",children:t.url})]})})]}),g.jsx("div",{className:"md:hidden flex flex-wrap gap-1.5 -mt-1 mb-1",children:t.tags.map((je,Je)=>g.jsxs("span",{className:"px-1.5 py-0.5 bg-[#F3F5FA] dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[10px] rounded border border-[#E6EAF2] dark:border-slate-700",children:["#",je]},Je))}),g.jsxs("div",{className:"w-full md:w-64 flex-shrink-0 flex flex-col gap-2 md:gap-3",children:[g.jsxs("div",{className:"hidden md:flex md:flex-col gap-2 md:gap-3",children:[Ee&&g.jsx("div",{className:!ie||t.type!=="BOOK"?"col-span-2 md:col-span-1":"col-span-1",children:$t(Ee,"Status",t.readingStatus)}),ie&&t.type==="BOOK"&&g.jsx("div",{className:"col-span-1",children:$t(ie,"Inventory",t.status)})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-1 md:mt-2",children:[g.jsx("input",{type:"file",ref:q,className:"hidden",accept:".pdf",onChange:$}),g.jsxs("button",{type:"button",onClick:()=>{var je;return(je=q.current)==null?void 0:je.click()},disabled:Ue,className:"flex items-center justify-center gap-2 px-2 py-2 bg-white dark:bg-slate-900 border border-[#E6EAF2] dark:border-slate-700 hover:border-[#262D40]/18 dark:hover:border-[#262D40]/30 hover:text-[#262D40] dark:hover:text-[#262D40]/82 rounded-lg text-slate-600 dark:text-slate-400 transition-colors text-xs font-medium disabled:opacity-50",title:oe?`PDF already indexed: ${(B==null?void 0:B.file_name)||""}`:"Upload PDF",children:[C?g.jsx(In,{size:14,className:"animate-spin"}):g.jsx(C0,{size:14}),g.jsx("span",{className:"hidden lg:inline",children:"PDF"})]}),g.jsxs("button",{type:"button",onClick:je=>{je.stopPropagation(),n()},className:"flex items-center justify-center gap-2 px-2 py-2 bg-white dark:bg-slate-900 border border-[#E6EAF2] dark:border-slate-700 hover:border-[#262D40]/18 dark:hover:border-[#262D40]/30 hover:text-[#262D40] dark:hover:text-[#262D40]/82 rounded-lg text-slate-600 dark:text-slate-400 transition-colors text-xs font-medium",children:[g.jsx(w0,{size:14})," ",g.jsx("span",{className:"hidden lg:inline",children:"Edit"})]}),g.jsxs("button",{type:"button",onClick:je=>{je.stopPropagation(),r()},className:"flex items-center justify-center gap-2 px-2 py-2 bg-white dark:bg-slate-900 border border-[#E6EAF2] dark:border-slate-700 hover:border-red-300 dark:hover:border-red-500 hover:text-red-600 dark:hover:text-red-400 rounded-lg text-slate-600 dark:text-slate-400 transition-colors text-xs font-medium",children:[g.jsx(Tl,{size:14})," ",g.jsx("span",{className:"hidden lg:inline",children:"Delete"})]})]}),(O||oe)&&g.jsxs("div",{className:"mt-2 text-[10px] text-emerald-600 dark:text-emerald-400 font-medium flex items-center gap-1 animate-in fade-in slide-in-from-top-1",children:[g.jsx(hf,{size:10}),(B==null?void 0:B.chunk_count)!=null?`PDF indexlendi (${B.chunk_count} chunk)`:"PDF indexlendi"]}),K&&g.jsxs("div",{className:"mt-2 text-[10px] text-amber-600 dark:text-amber-400 font-medium flex items-center gap-1 animate-in fade-in slide-in-from-top-1",children:[g.jsx(xo,{size:10})," Ayni baslikta baska bir kaydin PDF'i bulundu; bu kayit icin indexli sayilmadi."]}),M&&g.jsxs("div",{className:"mt-2 text-[10px] text-red-600 dark:text-red-400 font-medium flex items-center gap-1 animate-in fade-in slide-in-from-top-1",children:[g.jsx(nu,{size:10})," ",M]}),Oe&&g.jsxs("div",{className:"mt-2 text-[10px] text-red-600 dark:text-red-400 font-medium flex items-center gap-1 animate-in fade-in slide-in-from-top-1",children:[g.jsx(xo,{size:10})," PDF islenemedi. Lutfen farkli bir PDF ile tekrar deneyin."]})]})]})}),!z&&g.jsxs("div",{className:"flex border-b border-[#E6EAF2] dark:border-slate-800",children:[g.jsx("button",{onClick:()=>f("info"),className:`flex-1 py-3 md:py-4 text-xs md:text-sm font-medium text-center border-b-2 transition-colors ${d==="info"?"border-[#262D40] dark:border-white text-[#262D40] dark:text-white":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"Details"}),g.jsxs("button",{onClick:()=>f("highlights"),className:`flex-1 py-3 md:py-4 text-xs md:text-sm font-medium text-center border-b-2 transition-colors ${d==="highlights"?"border-[#262D40] dark:border-white text-[#262D40] dark:text-white":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["Highlights (",t.highlights.length,")"]})]}),g.jsxs("div",{className:"p-4 md:p-8 bg-[#F7F8FB] dark:bg-slate-900/50 min-h-[400px]",children:[(d==="info"||z)&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8",children:[g.jsx("div",{className:z?"md:col-span-3":"md:col-span-2 space-y-6",children:g.jsxs("div",{className:`bg-white dark:bg-slate-900 p-4 md:p-6 rounded-xl border border-[#E6EAF2] dark:border-slate-800 shadow-sm ${z?"min-h-[300px]":""}`,children:[!z&&g.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3 md:mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(ru,{size:18,className:"text-[#262D40]/90 dark:text-[#262D40]/82 md:w-5 md:h-5"}),g.jsx("h3",{className:"text-base md:text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Summary"})]}),g.jsxs("button",{type:"button",onClick:Q,disabled:S,className:"flex items-center gap-1.5 text-[11px] md:text-xs font-semibold text-white px-2 py-1 rounded-lg border border-[#262D40] bg-[#262D40] hover:bg-[#1d2333] disabled:opacity-60",children:[S?g.jsx(In,{size:14,className:"animate-spin"}):g.jsx(Ra,{size:14}),S?"Generating...":"Generate with AI"]})]}),(z?t.generalNotes:t.summaryText||t.generalNotes)?z?g.jsx("div",{className:"personal-note-render text-slate-700 dark:text-slate-300 leading-relaxed text-sm md:text-base max-w-none",dangerouslySetInnerHTML:{__html:Ob(t.generalNotes)}}):g.jsx("p",{className:"text-slate-600 dark:text-slate-300 whitespace-pre-wrap leading-relaxed text-sm md:text-lg",children:t.summaryText||t.generalNotes}):g.jsx("p",{className:"text-slate-400 dark:text-slate-500 italic text-sm",children:"No content added."}),N&&g.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2 flex items-center gap-1",children:[g.jsx(nu,{size:12})," ",N]})]})}),!z&&g.jsx("div",{className:"space-y-4 md:space-y-6",children:g.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 md:p-6 rounded-xl border border-[#E6EAF2] dark:border-slate-800 shadow-sm space-y-4",children:[g.jsx("h3",{className:"text-xs md:text-sm font-semibold text-slate-900 dark:text-white uppercase tracking-wider mb-2 md:mb-4",children:"Information"}),t.publisher&&g.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[g.jsx("span",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:t.type==="ARTICLE"?"Journal":"Publisher"}),g.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:t.publisher})]}),t.publicationYear&&g.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[g.jsx("span",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:"Year"}),g.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:t.publicationYear})]}),t.translator&&g.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[g.jsx("span",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:"Translator"}),g.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:t.translator})]}),t.isbn&&g.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[g.jsx("span",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:"ISBN"}),g.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200 font-mono",children:t.isbn})]}),t.pageCount&&g.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[g.jsx("span",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:"Page Count"}),g.jsxs("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:[t.pageCount," pages"]})]}),B&&B.status!=="NOT_FOUND"&&!K&&g.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[g.jsx("span",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:"PDF"}),g.jsxs("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:[ke&&"Processing...",Oe&&"Failed - please re-upload",oe&&g.jsxs(g.Fragment,{children:[B.file_name?g.jsx("span",{title:B.file_name,children:`Indexed: ${R(B.file_name)}`}):"Indexed",B.chunk_count!==null?` (${B.chunk_count} chunks)`:""]})]}),(ke||C)&&g.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[g.jsx("div",{className:"h-1.5 w-full rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:g.jsx("div",{className:"h-full rounded-full bg-sky-500 transition-all duration-500",style:{width:`${Ke}%`}})}),g.jsx("button",{type:"button",onClick:mt,className:"text-[10px] md:text-xs text-sky-600 dark:text-sky-400 underline underline-offset-2",children:"Yenile"})]}),ae&&g.jsx("span",{className:"text-[10px] md:text-xs text-red-600 dark:text-red-400",children:ae})]}),t.code&&g.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[g.jsx("span",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:"Shelf Code"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(v0,{size:12,className:"text-slate-400 dark:text-slate-500 md:w-3.5 md:h-3.5"}),g.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:t.code})]})]}),g.jsxs("div",{className:"flex flex-col gap-0.5 md:gap-1",children:[g.jsx("span",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400",children:"Added"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(eu,{size:12,className:"text-slate-400 dark:text-slate-500 md:w-3.5 md:h-3.5"}),g.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:new Date(t.addedAt).toLocaleDateString()})]})]})]})})]}),!z&&d==="highlights"&&g.jsxs("div",{className:"space-y-6",children:[t.highlights.length>0&&g.jsx("div",{className:"flex justify-end",children:g.jsxs("button",{onClick:ge,disabled:y,className:"text-xs md:text-sm text-[#262D40] dark:text-[#262D40]/82 hover:text-[#262D40] dark:hover:text-[#262D40]/78 flex items-center gap-2 disabled:opacity-50",children:[g.jsx(Ra,{size:14,className:"md:w-4 md:h-4"}),y?"Analyzing...":"Analyze Highlights with AI"]})}),p&&g.jsxs("div",{className:"bg-[#262D40]/5 dark:bg-[#262D40]/20 border border-[#262D40]/8 dark:border-[#262D40]/70 p-3 md:p-4 rounded-lg mb-4 animate-in fade-in slide-in-from-top-2",children:[g.jsxs("h4",{className:"text-[#262D40] dark:text-[#262D40]/78 font-semibold text-xs md:text-sm mb-2 flex items-center gap-2",children:[g.jsx(Ra,{size:14})," AI Analysis"]}),g.jsxs("p",{className:"text-[#262D40] dark:text-[#262D40]/75 text-xs md:text-sm leading-relaxed italic",children:['"',p,'"']})]}),g.jsx(hie,{highlights:t.highlights,onUpdate:i,autoEditHighlightId:s})]})]})]})]})}),ED="/assets/logo_v9-D75hAm-V.png",SD=A.createContext(void 0),Cie=({children:t})=>{const[e,n]=A.useState("light");A.useEffect(()=>{const i=localStorage.getItem("theme");i?n(i):window.matchMedia("(prefers-color-scheme: dark)").matches&&n("dark")},[]),A.useEffect(()=>{const i=window.document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")};return g.jsx(SD.Provider,{value:{theme:e,toggleTheme:r},children:t})},Eie=()=>{const t=A.useContext(SD);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},Sie=({activeTab:t,onTabChange:e,isOpen:n,onClose:r})=>{const{theme:i,toggleTheme:a}=Eie(),s=[{id:"DASHBOARD",label:"Dashboard",icon:H5},{id:"SMART_SEARCH",label:"Search (Layer 2)",icon:O0},{id:"RAG_SEARCH",label:"LogosChat (Layer 3)",icon:G5},{id:"FLOW",label:"Flux (Layer 4)",icon:Sz},{id:"BOOK",label:"Books",icon:jv},{id:"ARTICLE",label:"Articles",icon:Yp},{id:"WEBSITE",label:"Websites",icon:Zp},{id:"PERSONAL_NOTE",label:"Personal Notes",icon:$5},{id:"NOTES",label:"All Notes",icon:V5}];return g.jsxs(g.Fragment,{children:[n&&g.jsx("div",{className:"fixed inset-0 bg-slate-900/50 z-40 lg:hidden backdrop-blur-sm",onClick:r}),g.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-[269px] bg-[#262D40] border-r border-white/10 transform transition-transform duration-300 ease-in-out flex flex-col shadow-xl lg:shadow-none h-full
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[g.jsxs("div",{className:"px-3 pt-0 pb-3 flex flex-col items-center border-b border-white/10 bg-[#262D40] gap-2 relative",children:[g.jsx("img",{src:ED,alt:"TomeHub Icon",className:"h-[68px] lg:h-[77px] w-auto object-contain brightness-110 drop-shadow-md"}),g.jsx("button",{onClick:r,className:"lg:hidden absolute top-2 right-3 p-1 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors",children:g.jsx(xa,{size:20})})]}),g.jsx("nav",{className:"flex-1 px-3 pt-2 pb-6 space-y-1 overflow-y-auto",children:s.map(o=>{const c=o.icon,d=t===o.id;return g.jsxs("button",{onClick:()=>{e(o.id),r()},className:`w-full flex items-center gap-3 px-3 py-2.5 lg:py-3 rounded-xl text-[13px] lg:text-sm font-medium transition-all duration-200 group ${d?"bg-white/10 text-white shadow-sm border-r-2 border-[#CC561E]":"text-white/70 hover:bg-white/5 hover:text-white"}`,children:[g.jsx(c,{className:`w-[18px] h-[18px] lg:w-5 lg:h-5 transition-colors ${d?"text-[#CC561E]":"text-white/60 group-hover:text-white"}`}),o.label]},o.id)})}),g.jsxs("div",{className:"p-3 border-t border-white/10",children:[g.jsxs("button",{onClick:()=>{e("PROFILE"),r()},className:`w-full flex items-center gap-3 px-3 py-2.5 lg:py-3 rounded-xl text-[13px] lg:text-sm font-medium transition-all duration-200 group ${t==="PROFILE"?"bg-white/10 text-white shadow-sm border-r-2 border-[#CC561E]":"text-white/70 hover:bg-white/5 hover:text-white"}`,children:[g.jsx(wb,{className:`w-[17px] h-[17px] lg:w-5 lg:h-5 transition-colors ${t==="PROFILE"?"text-[#CC561E]":"text-white/60 group-hover:text-white"}`}),"Profile"]}),g.jsx("button",{onClick:a,className:"w-full flex items-center gap-3 px-3 py-2.5 lg:py-3 rounded-xl text-[13px] lg:text-sm font-medium text-white/70 hover:bg-white/5 hover:text-white transition-all duration-200 group mt-1",children:i==="light"?g.jsxs(g.Fragment,{children:[g.jsx(PP,{className:"w-[17px] h-[17px] lg:w-5 lg:h-5 text-white/60 group-hover:text-white"}),"Dark Mode"]}):g.jsxs(g.Fragment,{children:[g.jsx(wB,{className:"w-[17px] h-[17px] lg:w-5 lg:h-5 text-amber-400"}),"Light Mode"]})})]}),g.jsx("div",{className:"p-4 border-t border-white/10",children:g.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[g.jsx("p",{className:"text-[13px] text-white/70 font-medium mb-1",children:"My Personal Library"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-[#CC561E] animate-pulse"}),g.jsx("p",{className:"text-[11px] text-white/50 uppercase tracking-wider font-semibold",children:"Online"})]})]})})]})]})},Aie=({books:t,userId:e})=>{const[n,r]=A.useState(!1),[i,a]=A.useState(0),[s,o]=A.useState({success:0,failed:0,total:0}),[c,d]=A.useState(""),[f,p]=A.useState(null),[m,y]=A.useState(!1),v=async()=>{if(!e)return;r(!0),p(null),y(!1);let C=0,E=0;o({success:0,failed:0,total:t.length});const S=t.map(M=>{if(vn(M)&&!K5(M))return null;let L="";return M.type==="PERSONAL_NOTE"?(L=au(M.generalNotes||"")||M.title,M.highlights&&M.highlights.length>0&&(L+=`

`+M.highlights.map(B=>B.text).join(`

`))):(L=`Title: ${M.title}
Author: ${M.author}
`,M.generalNotes&&(L+=`
Summary/Notes: ${au(M.generalNotes)}`),M.tags&&M.tags.length>0&&(L+=`
Tags: ${M.tags.join(", ")}`)),{text:L,title:M.title,author:M.author,type:vn(M)?X5(M):M.type,book_id:M.id,tags:M.tags}}).filter(M=>!!M&&M.text.length>20),_=S.length,N=20,k=[];for(let M=0;M<S.length;M+=N)k.push(S.slice(M,M+N));let O=0;for(let M=0;M<k.length;M++){const L=k[M];d(`Batch ${M+1}/${k.length} (${L.length} items)`);try{const B=await jQ(L,e);B.success&&B.results&&(C+=B.results.success,E+=B.results.failed)}catch(B){console.error(`Batch ${M+1} failed:`,B),E+=L.length}O+=L.length,a(Math.round(O/_*100)),o(B=>({...B,success:C,failed:E+(t.length-_)}))}const I=t.filter(M=>M.highlights&&M.highlights.length>0);if(I.length>0){d("Syncing highlights...");for(const M of I)try{await I2(e,M.id,M.title,M.author,M.highlights||[])}catch(L){console.error(`Highlight sync failed for ${M.title}:`,L)}}r(!1),y(!0),d("")};return g.jsx("div",{className:"bg-gradient-to-br from-[#262D40]/5 to-slate-50 dark:from-[#262D40]/20 dark:to-slate-900/20 rounded-xl border border-[#262D40]/8 dark:border-[#262D40]/70 shadow-sm overflow-hidden mb-8",children:g.jsxs("div",{className:"p-6 md:p-8",children:[g.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[g.jsx("div",{className:"p-3 bg-white dark:bg-slate-900 rounded-lg shadow-sm text-[#262D40] dark:text-[#262D40]/82",children:g.jsx(Hj,{size:24})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Migrate to AI Library"}),g.jsx("p",{className:"text-slate-600 dark:text-slate-300 mt-1",children:"Sync your existing books and notes to the new AI backend to make them searchable."})]})]}),g.jsxs("div",{className:"bg-white/60 dark:bg-slate-900/60 rounded-xl p-6 border border-[#262D40]/50 dark:border-[#262D40]/50",children:[g.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-slate-900 dark:text-white mb-1",children:n?"Migration in Progress...":"Ready to Sync"}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:m?g.jsxs("span",{className:"text-[#262D40] font-medium",children:["Migration Complete! ",s.success," items synced."]}):n?g.jsxs("span",{children:["Syncing: ",g.jsx("span",{className:"font-medium text-[#262D40] dark:text-[#262D40]/82",children:c})]}):g.jsxs("span",{children:["Sync ",t.length," items to Oracle AI Vector Database."]})})]}),!n&&!m&&g.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-6 py-3 bg-[#CC561E] text-white hover:bg-[#b34b1a] rounded-lg font-medium transition-colors shadow-md shadow-[#CC561E]/20 dark:shadow-none",children:[g.jsx(b5,{size:18,fill:"currentColor"}),"Start Migration"]}),n&&g.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 text-slate-500 rounded-lg border border-slate-200 dark:border-slate-700",children:[g.jsx(In,{size:18,className:"animate-spin"}),"Processing..."]})]}),(n||m)&&g.jsxs("div",{className:"mt-6",children:[g.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-2",children:[g.jsx("span",{children:"Progress"}),g.jsxs("span",{children:[i,"%"]})]}),g.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-orange-500 transition-all duration-300 ease-out",style:{width:`${i}%`}})}),g.jsxs("div",{className:"flex justify-between text-xs text-slate-400 dark:text-slate-500 mt-2",children:[g.jsxs("span",{children:[s.success+s.failed,"/",s.total," items"]}),g.jsxs("span",{children:["Success: ",s.success,"  Failed: ",s.failed]})]})]})]})]})})},_ie=()=>{const{user:t}=Sm(),[e,n]=A.useState(!1),[r,i]=A.useState(0),[a,s]=A.useState(0),[o,c]=A.useState(!1),[d,f]=A.useState(null),p=A.useRef(null),m=async C=>{var _;const E=(_=C.target.files)==null?void 0:_[0];if(!E)return;if(!E.name.toLowerCase().endsWith(".json")){f("Please upload a valid JSON file.");return}const S=new FileReader;S.onload=async N=>{var k;try{const O=(k=N.target)==null?void 0:k.result,I=JSON.parse(O);if(!Array.isArray(I))throw new Error("JSON must be an array of books.");await y(I)}catch(O){console.error("File parsing error:",O),f("Failed to parse JSON file. Make sure it's a valid list of books.")}},S.onerror=()=>{f("Error reading file.")},S.readAsText(E)},y=async C=>{if(!t)return;n(!0),f(null),c(!1),s(C.length),i(0);let E=0;try{for(const S of C){const _={id:Date.now().toString()+Math.random().toString(36).substr(2,9),type:"BOOK",title:S.title||"Untitled",author:S.author||"Unknown Author",status:"On Shelf",readingStatus:"To Read",tags:[],highlights:[],addedAt:Date.now(),coverUrl:S.coverUrl||void 0};await R1(t.uid,_);try{const N=`Title: ${_.title}
Author: ${_.author}`;await wM(N,_.title,_.author,_.type,t.uid,{book_id:_.id,tags:_.tags||[]})}catch(N){console.error("Import sync to AI backend failed:",N)}E++,i(E),await new Promise(N=>setTimeout(N,50))}c(!0),p.current&&(p.current.value="")}catch(S){console.error("Import failed:",S),f("Failed to import books. Please try again.")}finally{n(!1)}},v=()=>{var C;(C=p.current)==null||C.click()};return g.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6 md:p-8 mt-6",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Import Books"}),g.jsx("p",{className:"text-slate-500 mt-1",children:"Upload a JSON file to add books to your library."})]}),g.jsx("div",{className:"p-3 bg-[#262D40]/5 text-[#262D40] rounded-lg",children:g.jsx(y5,{size:24})})]}),d&&g.jsxs("div",{className:"mb-4 p-4 bg-red-50 text-red-700 rounded-lg flex items-center gap-2",children:[g.jsx(nu,{size:20}),d]}),o?g.jsxs("div",{className:"mb-4 p-4 bg-green-50 text-green-700 rounded-lg flex items-center gap-2",children:[g.jsx(vb,{size:20}),"Successfully imported ",a," books!"]}):null,e?g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[g.jsx("span",{children:"Importing..."}),g.jsxs("span",{children:[Math.round(r/a*100),"%"]})]}),g.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:g.jsx("div",{className:"bg-[#262D40]/40 h-2.5 rounded-full transition-all duration-300",style:{width:`${r/a*100}%`}})}),g.jsxs("p",{className:"text-xs text-slate-400 text-center mt-2",children:[r," / ",a," books processed"]})]}):g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"file",ref:p,onChange:m,accept:".json",className:"hidden"}),g.jsxs("button",{onClick:v,disabled:e,className:"w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors bg-[#262D40]/40 hover:bg-[#262D40]/55 text-white shadow-md hover:shadow-lg",children:[g.jsx(C0,{size:20}),"Select JSON File"]})]})]})},Tie=({books:t})=>{const[e,n]=A.useState(!1),[r,i]=A.useState(!1),[a,s]=A.useState(null),o=()=>{try{n(!0),s(null),i(!1);const c=t.map(v=>({...v,id:v.id,type:v.type,title:v.title,author:v.author,status:v.status,readingStatus:v.readingStatus,tags:v.tags,highlights:v.highlights,addedAt:v.addedAt,generalNotes:v.generalNotes,coverUrl:v.coverUrl,isbn:v.isbn,publisher:v.publisher,publicationYear:v.publicationYear,translator:v.translator,code:v.code,url:v.url,lentTo:v.lentTo,lentDate:v.lentDate})),d=JSON.stringify(c,null,2),f=new Blob([d],{type:"application/json"}),p=URL.createObjectURL(f),m=document.createElement("a");m.href=p;const y=new Date().toISOString().split("T")[0];m.download=`tomehub-export-${y}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p),i(!0),n(!1),setTimeout(()=>{i(!1)},3e3)}catch(c){console.error("Export failed:",c),s("Failed to export library. Please try again."),n(!1)}};return g.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm p-6 md:p-8 mt-6",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Export Library"}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Download your entire library as a JSON file."})]}),g.jsx("div",{className:"p-3 bg-[#262D40]/5 dark:bg-[#262D40]/20 text-[#262D40] dark:text-[#262D40]/82 rounded-lg",children:g.jsx(y5,{size:24})})]}),a&&g.jsxs("div",{className:"mb-4 p-4 bg-[#262D40]/5 dark:bg-[#262D40]/20 text-[#262D40] dark:text-[#262D40]/82 rounded-lg flex items-center gap-2 border border-[#262D40]/8 dark:border-[#262D40]/30",children:[g.jsx(nu,{size:20}),a]}),r&&g.jsxs("div",{className:"mb-4 p-4 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 rounded-lg flex items-center gap-2 border border-orange-100 dark:border-orange-900/30",children:[g.jsx(vb,{size:20}),"Successfully exported ",t.length," items!"]}),g.jsxs("button",{onClick:o,disabled:e||t.length===0,className:"w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors bg-[#CC561E] dark:bg-[#CC561E] hover:bg-[#b34b1a] text-white shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx($j,{size:20}),t.length===0?"No Items to Export":`Export ${t.length} Items`]}),g.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 text-center mt-3",children:"Exports all books, articles, websites, and notes with highlights"})]})},Nie=({userId:t,email:e,onLogout:n,onBack:r,books:i,onStartEnrichment:a,onStopEnrichment:s,isEnriching:o,enrichmentStats:c})=>{const d=i.filter(f=>f.type==="BOOK"&&(!f.generalNotes||f.generalNotes.length<10)&&(!f.tags||f.tags.length===0)).length;return g.jsxs("div",{className:"p-6 md:p-10 max-w-[1100px] w-full mx-auto animate-in fade-in slide-in-from-bottom-4",children:[g.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white mb-6 transition-colors group",children:[g.jsx(h5,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),g.jsx("span",{className:"font-medium",children:"Back"})]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Profile"}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Manage your account settings"})]}),g.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden mb-8",children:[g.jsxs("div",{className:"p-6 md:p-8 border-b border-slate-100 dark:border-slate-800 flex flex-col md:flex-row items-start md:items-center gap-6",children:[g.jsx("div",{className:"w-20 h-20 bg-[#262D40]/8 dark:bg-[#262D40]/30 rounded-full flex items-center justify-center text-[#262D40] dark:text-[#262D40]/82",children:g.jsx(wb,{size:40})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Account Information"}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Signed in as"}),g.jsx("p",{className:"text-lg font-medium text-slate-900 dark:text-slate-200 mt-1",children:e||"No email available"})]})]}),g.jsx("div",{className:"p-6 md:p-8 bg-slate-50/50 dark:bg-slate-900/50",children:g.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-6 py-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg font-medium transition-colors border border-red-100 dark:border-red-900/30",children:[g.jsx(OP,{size:20}),"Log Out"]})})]}),g.jsx("div",{className:"bg-gradient-to-br from-[#262D40]/5 to-purple-50 dark:from-[#262D40]/20 dark:to-purple-900/20 rounded-xl border border-[#262D40]/8 dark:border-[#262D40]/70 shadow-sm overflow-hidden mb-8",children:g.jsxs("div",{className:"p-6 md:p-8",children:[g.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[g.jsx("div",{className:"p-3 bg-white dark:bg-slate-900 rounded-lg shadow-sm text-[#262D40] dark:text-[#262D40]/82",children:g.jsx(Ra,{size:24})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"AI Library Assistant"}),g.jsx("p",{className:"text-slate-600 dark:text-slate-300 mt-1",children:"Automatically fill in missing summaries and tags for your imported books."})]})]}),g.jsxs("div",{className:"bg-white/60 dark:bg-slate-900/60 rounded-xl p-6 border border-[#262D40]/50 dark:border-[#262D40]/50",children:[g.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-slate-900 dark:text-white mb-1",children:o?"Enrichment in Progress...":"Library Status"}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:o?g.jsxs("span",{children:["Processing: ",g.jsx("span",{className:"font-medium text-[#262D40] dark:text-[#262D40]/82",children:c.currentBookTitle||"Initializing..."})]}):g.jsxs("span",{children:[g.jsx("span",{className:"font-bold text-[#262D40] dark:text-[#262D40]/82",children:d})," books are missing details."]})})]}),o?g.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-medium transition-colors border border-red-100 dark:border-red-900/30 shadow-sm",children:[g.jsx(xB,{size:18,fill:"currentColor"}),"Stop"]}):g.jsxs("button",{onClick:()=>a(i),disabled:d===0,className:"flex items-center gap-2 px-6 py-3 bg-[#262D40]/40 dark:bg-[#262D40]/30 text-white hover:bg-[#262D40]/55 dark:hover:bg-[#262D40]/40 rounded-lg font-medium transition-colors shadow-md shadow-[#262D40]/12 dark:shadow-none disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(b5,{size:18,fill:"currentColor"}),"Auto-fill Missing Info"]})]}),o&&g.jsxs("div",{className:"mt-6",children:[g.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-2",children:[g.jsx("span",{children:"Progress"}),g.jsxs("span",{children:[Math.round(c.processed/c.total*100),"%"]})]}),g.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-[#262D40]/30 dark:bg-[#262D40]/24 transition-all duration-500 ease-out",style:{width:`${c.processed/c.total*100}%`}})}),g.jsxs("div",{className:"flex justify-between text-xs text-slate-400 dark:text-slate-500 mt-2",children:[g.jsxs("span",{children:["Processed: ",c.processed,"/",c.total]}),g.jsxs("span",{children:["Success: ",c.success,"  Failed: ",c.failed]})]})]})]})]})}),g.jsx(Aie,{books:i,userId:t}),g.jsx(_ie,{}),g.jsx(Tie,{books:i})]})},kie=({data:t,onBarClick:e,currentStartPage:n,currentEndPage:r})=>{const{maxPage:i,maxCount:a,bars:s}=A.useMemo(()=>{if(!t||t.length===0)return{maxPage:0,maxCount:0,bars:[]};const o=Math.max(...t.map(d=>d.page_number)),c=Math.max(...t.map(d=>d.count));return{maxPage:o,maxCount:c,bars:t}},[t]);return s.length===0?null:g.jsxs("div",{className:"w-full space-y-2",children:[g.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-mono uppercase tracking-wider",children:[g.jsx("span",{children:"Page 1"}),g.jsx("span",{children:"Distribution Timeline"}),g.jsxs("span",{children:["Page ",i]})]}),g.jsxs("div",{className:"relative w-full h-[60px] bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-100 dark:border-slate-800 overflow-hidden flex items-end",children:[g.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none p-[1px]",children:[g.jsx("div",{className:"w-full h-px border-t border-dashed border-slate-200 dark:border-slate-700/50 opacity-50"}),g.jsx("div",{className:"w-full h-px border-t border-dashed border-slate-200 dark:border-slate-700/50 opacity-50"})]}),s.map(o=>{const c=(o.page_number-1)/i*100,d=o.count/a*100,f=o.count>a*.7;return g.jsxs("div",{onClick:()=>e&&e(o.page_number),className:"absolute bottom-0 cursor-pointer transition-all hover:opacity-80 group",style:{left:`${c}%`,height:`${d}%`,width:`max(2px, ${100/i}%)`,minHeight:"4px"},children:[g.jsx("div",{className:`w-full h-full rounded-t-sm ${f?"bg-[#262D40]/30 dark:bg-[#262D40]/24":"bg-[#262D40]/18 dark:bg-[#262D40]/40"}`}),g.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block z-20 whitespace-nowrap",children:g.jsxs("div",{className:"bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow-lg",children:["Page ",o.page_number,": ",o.count," hits"]})})]},o.page_number)})]})]})},AD=({bookId:t,term:e,initialContexts:n=[],firebaseUid:r,onClose:i})=>{const[a,s]=nt.useState(n||[]),[o,c]=nt.useState(!1),[d,f]=nt.useState((a==null?void 0:a.length)||0),[p,m]=nt.useState(((a==null?void 0:a.length)||0)>=10),[y,v]=nt.useState([]);A.useEffect(()=>{(async()=>{try{const _=await FQ(r,t,e);v(_.distribution||[])}catch(_){console.error("Dist fetch failed",_)}})()},[t,e,r]);const C=async()=>{if(!o){c(!0);try{const S=await BQ(r,t,e,50,d);S.contexts.length>0?(s(_=>[..._,...S.contexts]),f(_=>_+S.contexts.length)):m(!1)}catch(S){console.error("Failed to load more contexts:",S)}finally{c(!1)}}},E=(S,_)=>{if(!_)return S;const N=S.split(new RegExp(`(${_})`,"gi"));return g.jsx(g.Fragment,{children:N.map((k,O)=>k.toLowerCase()===_.toLowerCase()?g.jsx("mark",{className:"bg-yellow-200 text-slate-900 font-semibold rounded-sm px-0.5",children:k},O):k)})};return g.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-slate-950 border-l border-slate-200 dark:border-slate-800 shadow-xl animate-in slide-in-from-right duration-300",children:[g.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-900 flex justify-between items-center bg-slate-50/50 dark:bg-slate-900/50",children:[g.jsxs("div",{children:[g.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:['"',e,'" Balamlar']}),g.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total occurrences found"})]}),g.jsx("button",{onClick:i,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors text-slate-500",children:g.jsx(xa,{size:20})})]}),g.jsxs("div",{className:"p-3 bg-[#262D40]/5 dark:bg-[#262D40]/20 m-4 rounded-lg border border-[#262D40]/8 dark:border-[#262D40]/70 flex gap-3 text-xs text-[#262D40] dark:text-[#262D40]/78",children:[g.jsx(mP,{size:16,className:"shrink-0 mt-0.5"}),g.jsx("p",{children:"Bu liste, kelimenin kitaptaki farkl formlarn (ekim ekleri, kk formlar) ve getii orijinal pasajlar gsterir."})]}),g.jsx("div",{className:"px-4 pb-2",children:g.jsx(kie,{data:y})}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[a.map((S,_)=>g.jsxs("div",{className:"group relative",children:[g.jsxs("div",{className:"flex justify-between items-start mb-1 text-[10px] items-center",children:[g.jsxs("span",{className:"font-semibold text-[#262D40] dark:text-[#262D40]/82 bg-[#262D40]/5 dark:bg-[#262D40]/40 px-1.5 py-0.5 rounded uppercase tracking-wider",children:["Sayfa ",S.page_number]}),g.jsxs("button",{className:"text-slate-300 group-hover:text-slate-500 dark:text-slate-700 dark:group-hover:text-slate-400 flex items-center gap-1 transition-colors",children:[g.jsx("span",{className:"text-[9px]",children:"GRNTLE"}),g.jsx(G1,{size:10})]})]}),g.jsx("div",{className:"text-sm md:text-base text-slate-700 dark:text-slate-300 leading-relaxed font-lora border-l-2 border-slate-100 dark:border-slate-800 pl-4 py-1 italic hover:border-[#262D40]/18 dark:hover:border-[#262D40]/55 transition-colors",children:E(S.snippet,S.keyword_found)})]},_)),p&&g.jsx("button",{onClick:C,disabled:o,className:"w-full py-4 text-sm font-medium text-slate-500 hover:text-[#262D40] dark:hover:text-[#262D40]/82 border-2 border-dashed border-slate-100 dark:border-slate-800 rounded-xl hover:border-[#262D40]/12 dark:hover:border-[#262D40]/70 hover:bg-slate-50 dark:hover:bg-slate-900 transition-all flex items-center justify-center gap-2",children:o?g.jsxs(g.Fragment,{children:[g.jsx(In,{size:16,className:"animate-spin"}),"Ykleniyor..."]}):"Daha Fazla Balam Ykle"})]})]})},Oie=new Set(["ve","veya","ile","ama","fakat","ancak","lakin","ki","de","da","gibi","icin","iin","gore","gre","kadar","hem","ya","yada","yahut","mi","mu","m","m"]);function Mie({userId:t,onBack:e,books:n=[]}){const[r,i]=A.useState(""),[a,s]=A.useState([]),[o,c]=A.useState(!1),[d,f]=A.useState(null),[p,m]=A.useState(!1),[y,v]=A.useState(null),[C,E]=A.useState(!1),[S,_]=A.useState(0),[N,k]=A.useState(0),O=20,I=(L,B)=>{if(!B||!L)return L;const le={i:"[iI]",:"[iI]",s:"[sS]",:"[sS]",c:"[cC]",:"[cC]",g:"[gG]",:"[gG]",o:"[oO]",:"[oO]",u:"[uU]",:"[uU]"},ae=B.toLowerCase().split(/\s+/).map(fe=>fe.trim()).filter(fe=>fe.length>=2&&!Oie.has(fe));if(ae.length===0)return L;try{const fe=ae.map(xe=>xe.split("").map(H=>le[H]||H).join("")),W=new RegExp(`((?<![\\p{L}\\p{N}])(?:${fe.join("|")})[\\p{L}\\p{N}]*(?![\\p{L}\\p{N}]))`,"giu");return L.split(W).map((xe,H)=>H%2===1?g.jsx("mark",{className:"bg-[rgba(204,86,30,0.12)] dark:bg-[rgba(204,86,30,0.25)] text-[#111827] dark:text-white px-0.5 rounded font-medium shadow-sm transition-colors duration-200",children:xe},H):g.jsx("span",{children:xe},H))}catch{return L}},M=async(L,B=0)=>{var le,ae,fe;if(L&&L.preventDefault(),!!r.trim()){c(!0),f(null),B===0&&(s([]),m(!0)),_(B);try{const W=`${dt}/api/smart-search`;console.log("[SmartSearch] Calling:",W,"Offset:",B);const de=await rn(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:r,firebase_uid:t,limit:O,offset:B})});if(!de.ok)throw new Error(await ba(de,"Search failed"));const xe=await de.json();((le=xe.metadata)==null?void 0:le.status)==="analytic"&&((ae=xe.metadata)!=null&&ae.analytics)?(v({...xe.metadata.analytics,answer:xe.answer}),s([]),k(0)):(s(xe.results||[]),k(xe.total||((fe=xe.results)==null?void 0:fe.length)||0),v(null))}catch(W){console.error("[SmartSearch] Error:",W),f(zc(W))}finally{c(!1)}}};return g.jsxs("div",{className:`max-w-[1100px] w-full mx-auto p-3 md:p-6 flex flex-col transition-all duration-1000 ease-in-out ${p?"space-y-6 md:space-y-8":"min-h-[70vh]"}`,children:[g.jsxs("div",{className:"relative flex items-center justify-between w-full h-10 md:h-12 mb-2 md:mb-6",children:[g.jsx("div",{className:"flex-shrink-0 z-10",children:e&&g.jsxs("button",{onClick:e,className:"group flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-[#CC561E] transition-all duration-300",children:[g.jsx("div",{className:"p-1.5 rounded-lg bg-[#F3F5FA] dark:bg-slate-800 group-hover:bg-[rgba(204,86,30,0.1)] transition-colors",children:g.jsx(Co,{size:16})}),g.jsx("span",{className:"text-xs font-bold uppercase tracking-wider hidden sm:inline",children:"Back"})]})}),p&&g.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-2 md:gap-3 transition-all duration-500 origin-center animate-in fade-in zoom-in-95",children:[g.jsx("div",{className:"p-1.5 md:p-2 bg-[rgba(204,86,30,0.1)] dark:bg-[rgba(204,86,30,0.2)] rounded-2xl shrink-0 scale-75",children:g.jsx(O0,{className:"w-5 h-5 md:w-8 md:h-8"})}),g.jsx("h1",{className:"font-extrabold bg-gradient-to-r from-[#CC561E] to-[#e66a2e] bg-clip-text text-transparent tracking-tight text-xl md:text-2xl",children:"Search"})]}),g.jsx("div",{className:"w-20 hidden sm:block"})," "]}),g.jsx("div",{className:`flex-1 flex flex-col relative transition-all duration-700 ${p?"pt-4 md:pt-6":"justify-center items-center"}`,children:g.jsxs("form",{onSubmit:M,className:`space-y-4 md:space-y-6 w-full transition-all duration-1000 ease-in-out ${p?"max-w-none":"max-w-2xl text-center"}`,children:[!p&&g.jsxs("div",{className:"mb-6 md:mb-10 space-y-4 animate-slide-up",children:[g.jsxs("div",{className:"flex items-center justify-center gap-3",children:[g.jsx("div",{className:"p-1.5 md:p-2 bg-[rgba(204,86,30,0.1)] dark:bg-[rgba(204,86,30,0.2)] rounded-2xl shrink-0",children:g.jsx(O0,{className:"w-6 h-6 md:w-10 md:h-10"})}),g.jsx("h1",{className:"text-2xl md:text-5xl font-extrabold bg-gradient-to-r from-[#CC561E] to-[#e66a2e] bg-clip-text text-transparent tracking-tight",children:"Search"})]}),g.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 md:gap-4 mt-4 opacity-80",children:[g.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-slate-100 dark:bg-slate-800 text-[10px] md:text-xs font-bold text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700",children:[g.jsx(Ra,{className:"w-3 h-3 text-[#CC561E]"})," AI Query Expansion"]}),g.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-slate-100 dark:bg-slate-800 text-[10px] md:text-xs font-bold text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700",children:[g.jsx(MB,{className:"w-3 h-3"})," Typo Correction"]}),g.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-slate-100 dark:bg-slate-800 text-[10px] md:text-xs font-bold text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700",children:[g.jsx(_l,{className:"w-3 h-3"})," Hybrid Retrieval"]})]})]}),g.jsxs("div",{className:"relative group",children:[g.jsx(ms,{className:"absolute left-4 md:left-5 top-1/2 -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-slate-400 group-focus-within:text-[#CC561E] transition-colors"}),g.jsx("input",{type:"text",value:r,onChange:L=>i(L.target.value),placeholder:"Search your library intelligently...",className:"w-full pl-11 md:pl-14 pr-4 md:pr-6 py-3.5 md:py-5 rounded-2xl border border-[#E6EAF2] dark:border-slate-700 bg-white dark:bg-slate-800 text-base md:text-lg text-slate-900 dark:text-white shadow-sm focus:shadow-xl focus:shadow-[#CC561E]/5 focus:outline-none focus:ring-2 focus:ring-[#CC561E]/50 transition-all placeholder:text-slate-400"})]}),g.jsxs("div",{className:`text-[11px] md:text-xs text-slate-500 dark:text-slate-400 ${p?"text-left":"text-center"}`,children:["Tip: ",g.jsx("span",{className:"font-bold text-[#CC561E]",children:"Enter"})," to search."]})]})}),d&&g.jsxs("div",{className:"bg-[#262D40]/5 dark:bg-[#262D40]/20 text-[#262D40] dark:text-[#262D40]/78 p-5 rounded-2xl flex items-center gap-4 border border-[#262D40]/8 dark:border-[#262D40]/50 shadow-sm",children:[g.jsx(nu,{className:"w-6 h-6 shrink-0"}),g.jsx("p",{className:"font-medium",children:d})]}),g.jsx("div",{className:"space-y-6 pb-12 mt-6",children:a.length>0?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"flex items-center justify-between px-2",children:g.jsxs("span",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:["Found ",N," relevant items"]})}),g.jsx("div",{className:"grid gap-5",children:a.map((L,B)=>g.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-xl hover:-translate-y-1 border border-[#E6EAF2] dark:border-gray-700 transition-all duration-300",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("h3",{className:"font-bold text-xl text-gray-900 dark:text-gray-100 flex items-center gap-3 group-hover:text-[#CC561E] transition-colors",children:[g.jsx(_l,{className:"w-5 h-5 text-[#CC561E]"}),I(L.title,r)]}),g.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[L.match_type==="content_exact"&&g.jsx("span",{className:"px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider bg-[#262D40] text-white ring-1 ring-white/10",children:"Match"}),L.match_type==="semantic"&&g.jsx("span",{className:"px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider bg-[#262D40] text-white ring-1 ring-white/10",children:"Semantic"}),g.jsxs("span",{className:"bg-[#262D40] text-white text-xs px-3 py-1 rounded-full font-mono font-medium ring-1 ring-white/10",children:["p.",L.page_number]})]})]}),g.jsx("div",{className:"pl-5 border-l-4 border-[#262D40]/10 group-hover:border-[#CC561E]/30 transition-colors",children:g.jsx("p",{className:"text-gray-700 dark:text-gray-200 leading-relaxed text-base whitespace-pre-wrap font-serif",children:I(L.content_chunk,r)})}),(L.comment||L.personal_comment)&&g.jsxs("div",{className:"mt-4 pt-4 border-t border-[#E6EAF2] dark:border-gray-700 bg-[rgba(204,86,30,0.08)] dark:bg-[rgba(204,86,30,0.1)] -mx-6 px-6 py-4 rounded-b-2xl",children:[g.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-[#CC561E] block mb-1",children:"Comment:"}),g.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 italic border-l-2 border-[#CC561E]/30 pl-3",children:I(L.comment||L.personal_comment||"",r)})]})]},B))}),N>O&&g.jsxs("div",{className:"flex items-center justify-between mt-10 pt-6 border-t border-[#E6EAF2] dark:border-gray-700",children:[g.jsxs("button",{onClick:()=>M(void 0,Math.max(0,S-O)),disabled:o||S===0,className:"px-6 py-3 bg-white dark:bg-gray-800 border border-[#E6EAF2] dark:border-gray-700 rounded-xl font-bold text-gray-700 dark:text-gray-200 hover:bg-[#F3F5FA] dark:hover:bg-gray-700 transition-all disabled:opacity-50 flex items-center gap-2 shadow-sm",children:[g.jsx(Co,{size:20}),"Previous"]}),g.jsxs("span",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:["Page ",Math.floor(S/O)+1," of ",Math.ceil(N/O)]}),g.jsxs("button",{onClick:()=>M(void 0,S+O),disabled:o||S+O>=N,className:"px-6 py-3 bg-white dark:bg-gray-800 border border-[#E6EAF2] dark:border-gray-700 rounded-xl font-bold text-gray-700 dark:text-gray-200 hover:bg-[#F3F5FA] dark:hover:bg-gray-700 transition-all disabled:opacity-50 flex items-center gap-2 shadow-sm",children:["Next",g.jsx(Co,{size:20,className:"rotate-180"})]})]})]}):p&&!o&&!d?g.jsxs("div",{className:"text-center py-24 opacity-60",children:[g.jsx("div",{className:"bg-[#F3F5FA] dark:bg-gray-800 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx(ms,{className:"w-10 h-10 text-gray-300 dark:text-gray-600"})}),g.jsx("p",{className:"text-2xl font-bold text-gray-400",children:"No results found"})]}):null}),y&&g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-xl border-t-4 border-[#CC561E] animate-in zoom-in duration-300 relative overflow-hidden",children:[g.jsx("div",{className:"absolute right-[-20px] top-[-20px] opacity-[0.03] dark:opacity-[0.05] pointer-events-none",children:g.jsx(Zj,{size:220})}),g.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-[rgba(204,86,30,0.1)] text-[#CC561E] text-xs font-bold uppercase tracking-widest",children:[g.jsx(Ra,{size:12}),"Deterministic Analytics"]}),g.jsx("h3",{className:"text-3xl font-extrabold text-slate-900 dark:text-white leading-tight",children:y.answer})]}),y.contexts&&y.contexts.length>0&&g.jsxs("button",{onClick:()=>E(!0),className:"group flex items-center gap-3 bg-[#CC561E] hover:bg-[#b34b1a] text-white px-8 py-4 rounded-2xl font-bold shadow-lg shadow-[#CC561E]/30 transition-all hover:scale-[1.02] active:scale-[0.98]",children:[g.jsx(v5,{size:20,className:"group-hover:rotate-12 transition-transform"}),"See Contexts"]})]})]}),C&&y&&g.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-end",children:[g.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>E(!1)}),g.jsx("div",{className:"relative w-full max-w-lg h-full overflow-hidden",children:g.jsx(AD,{bookId:y.resolved_book_id||"",term:y.term,initialContexts:y.contexts,firebaseUid:t,onClose:()=>E(!1)})})]})]})}const _D=A.createContext({});function Die(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const TD=typeof window<"u",Rie=TD?A.useLayoutEffect:A.useEffect,Ww=A.createContext(null);function qw(t,e){t.indexOf(e)===-1&&t.push(e)}function Kw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const za=(t,e,n)=>n>e?e:n<t?t:n;let Xw=()=>{};const _s={},ND=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function kD(t){return typeof t=="object"&&t!==null}const OD=t=>/^0[^.\s]+$/u.test(t);function Yw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Qi=t=>t,Iie=(t,e)=>n=>e(t(n)),rh=(...t)=>t.reduce(Iie),Df=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Zw{constructor(){this.subscriptions=[]}add(e){return qw(this.subscriptions,e),()=>Kw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ws=t=>t*1e3,Xi=t=>t/1e3;function MD(t,e){return e?t*(1e3/e):0}const DD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Lie=1e-7,jie=12;function Pie(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=DD(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Lie&&++o<jie);return s}function ih(t,e,n,r){if(t===e&&n===r)return Qi;const i=a=>Pie(a,0,1,t,n);return a=>a===0||a===1?a:DD(i(a),e,r)}const RD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ID=t=>e=>1-t(1-e),LD=ih(.33,1.53,.69,.99),Jw=ID(LD),jD=RD(Jw),PD=t=>(t*=2)<1?.5*Jw(t):.5*(2-Math.pow(2,-10*(t-1))),Qw=t=>1-Math.sin(Math.acos(t)),BD=ID(Qw),FD=RD(Qw),Bie=ih(.42,0,1,1),Fie=ih(0,0,.58,1),zD=ih(.42,0,.58,1),zie=t=>Array.isArray(t)&&typeof t[0]!="number",UD=t=>Array.isArray(t)&&typeof t[0]=="number",Uie={linear:Qi,easeIn:Bie,easeInOut:zD,easeOut:Fie,circIn:Qw,circInOut:FD,circOut:BD,backIn:Jw,backInOut:jD,backOut:LD,anticipate:PD},Hie=t=>typeof t=="string",MN=t=>{if(UD(t)){Xw(t.length===4);const[e,n,r,i]=t;return ih(e,n,r,i)}else if(Hie(t))return Uie[t];return t},$p=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Vie(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(d.schedule(f),t()),f(o)}const d={schedule:(f,p=!1,m=!1)=>{const v=m&&i?n:r;return p&&s.add(f),v.has(f)||v.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,d.process(f))}};return d}const $ie=40;function HD(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=$p.reduce((N,k)=>(N[k]=Vie(a),N),{}),{setup:o,read:c,resolveKeyframes:d,preUpdate:f,update:p,preRender:m,render:y,postRender:v}=s,C=()=>{const N=_s.useManualTiming?i.timestamp:performance.now();n=!1,_s.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,$ie),1)),i.timestamp=N,i.isProcessing=!0,o.process(i),c.process(i),d.process(i),f.process(i),p.process(i),m.process(i),y.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(C))},E=()=>{n=!0,r=!0,i.isProcessing||t(C)};return{schedule:$p.reduce((N,k)=>{const O=s[k];return N[k]=(I,M=!1,L=!1)=>(n||E(),O.schedule(I,M,L)),N},{}),cancel:N=>{for(let k=0;k<$p.length;k++)s[$p[k]].cancel(N)},state:i,steps:s}}const{schedule:tn,cancel:Do,state:Er,steps:dv}=HD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qi,!0);let f0;function Gie(){f0=void 0}const Wr={now:()=>(f0===void 0&&Wr.set(Er.isProcessing||_s.useManualTiming?Er.timestamp:performance.now()),f0),set:t=>{f0=t,queueMicrotask(Gie)}},VD=t=>e=>typeof e=="string"&&e.startsWith(t),$D=VD("--"),Wie=VD("var(--"),eC=t=>Wie(t)?qie.test(t.split("/*")[0].trim()):!1,qie=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function DN(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const _u={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Rf={..._u,transform:t=>za(0,1,t)},Gp={..._u,default:1},of=t=>Math.round(t*1e5)/1e5,tC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Kie(t){return t==null}const Xie=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nC=(t,e)=>n=>!!(typeof n=="string"&&Xie.test(n)&&n.startsWith(t)||e&&!Kie(n)&&Object.prototype.hasOwnProperty.call(n,e)),GD=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(tC);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},Yie=t=>za(0,255,t),fv={..._u,transform:t=>Math.round(Yie(t))},Sl={test:nC("rgb","red"),parse:GD("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+fv.transform(t)+", "+fv.transform(e)+", "+fv.transform(n)+", "+of(Rf.transform(r))+")"};function Zie(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const $2={test:nC("#"),parse:Zie,transform:Sl.transform},ah=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ro=ah("deg"),La=ah("%"),Be=ah("px"),Jie=ah("vh"),Qie=ah("vw"),RN={...La,parse:t=>La.parse(t)/100,transform:t=>La.transform(t*100)},Uc={test:nC("hsl","hue"),parse:GD("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+La.transform(of(e))+", "+La.transform(of(n))+", "+of(Rf.transform(r))+")"},Hn={test:t=>Sl.test(t)||$2.test(t)||Uc.test(t),parse:t=>Sl.test(t)?Sl.parse(t):Uc.test(t)?Uc.parse(t):$2.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Sl.transform(t):Uc.transform(t),getAnimatableNone:t=>{const e=Hn.parse(t);return e.alpha=0,Hn.transform(e)}},eae=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tae(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(tC))==null?void 0:e.length)||0)+(((n=t.match(eae))==null?void 0:n.length)||0)>0}const WD="number",qD="color",nae="var",rae="var(",IN="${}",iae=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function If(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(iae,c=>(Hn.test(c)?(r.color.push(a),i.push(qD),n.push(Hn.parse(c))):c.startsWith(rae)?(r.var.push(a),i.push(nae),n.push(c)):(r.number.push(a),i.push(WD),n.push(parseFloat(c))),++a,IN)).split(IN);return{values:n,split:o,indexes:r,types:i}}function KD(t){return If(t).values}function XD(t){const{split:e,types:n}=If(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===WD?a+=of(i[s]):o===qD?a+=Hn.transform(i[s]):a+=i[s]}return a}}const aae=t=>typeof t=="number"?0:Hn.test(t)?Hn.getAnimatableNone(t):t;function sae(t){const e=KD(t);return XD(t)(e.map(aae))}const Ro={test:tae,parse:KD,createTransformer:XD,getAnimatableNone:sae};function hv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function oae({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=hv(c,o,t+1/3),a=hv(c,o,t),s=hv(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function I1(t,e){return n=>n>0?e:t}const bn=(t,e,n)=>t+(e-t)*n,pv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},lae=[$2,Sl,Uc],cae=t=>lae.find(e=>e.test(t));function LN(t){const e=cae(t);if(!e)return!1;let n=e.parse(t);return e===Uc&&(n=oae(n)),n}const jN=(t,e)=>{const n=LN(t),r=LN(e);if(!n||!r)return I1(t,e);const i={...n};return a=>(i.red=pv(n.red,r.red,a),i.green=pv(n.green,r.green,a),i.blue=pv(n.blue,r.blue,a),i.alpha=bn(n.alpha,r.alpha,a),Sl.transform(i))},G2=new Set(["none","hidden"]);function uae(t,e){return G2.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function dae(t,e){return n=>bn(t,e,n)}function rC(t){return typeof t=="number"?dae:typeof t=="string"?eC(t)?I1:Hn.test(t)?jN:pae:Array.isArray(t)?YD:typeof t=="object"?Hn.test(t)?jN:fae:I1}function YD(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>rC(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function fae(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=rC(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function hae(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const pae=(t,e)=>{const n=Ro.createTransformer(e),r=If(t),i=If(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?G2.has(t)&&!i.values.length||G2.has(e)&&!r.values.length?uae(t,e):rh(YD(hae(r,i),i.values),n):I1(t,e)};function ZD(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?bn(t,e,n):rC(t)(t,e)}const mae=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>tn.update(e,n),stop:()=>Do(e),now:()=>Er.isProcessing?Er.timestamp:Wr.now()}},JD=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},L1=2e4;function iC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<L1;)e+=n,r=t.next(e);return e>=L1?1/0:e}function gae(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(iC(r),L1);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Xi(i)}}const xae=5;function QD(t,e,n){const r=Math.max(e-xae,0);return MD(n-t(r),e-r)}const _n={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mv=.001;function yae({duration:t=_n.duration,bounce:e=_n.bounce,velocity:n=_n.velocity,mass:r=_n.mass}){let i,a,s=1-e;s=za(_n.minDamping,_n.maxDamping,s),t=za(_n.minDuration,_n.maxDuration,Xi(t)),s<1?(i=d=>{const f=d*s,p=f*t,m=f-n,y=W2(d,s),v=Math.exp(-p);return mv-m/y*v},a=d=>{const p=d*s*t,m=p*n+n,y=Math.pow(s,2)*Math.pow(d,2)*t,v=Math.exp(-p),C=W2(Math.pow(d,2),s);return(-i(d)+mv>0?-1:1)*((m-y)*v)/C}):(i=d=>{const f=Math.exp(-d*t),p=(d-n)*t+1;return-mv+f*p},a=d=>{const f=Math.exp(-d*t),p=(n-d)*(t*t);return f*p});const o=5/t,c=bae(i,a,o);if(t=ws(t),isNaN(c))return{stiffness:_n.stiffness,damping:_n.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:s*2*Math.sqrt(r*d),duration:t}}}const vae=12;function bae(t,e,n){let r=n;for(let i=1;i<vae;i++)r=r-t(r)/e(r);return r}function W2(t,e){return t*Math.sqrt(1-e*e)}const wae=["duration","bounce"],Cae=["stiffness","damping","mass"];function PN(t,e){return e.some(n=>t[n]!==void 0)}function Eae(t){let e={velocity:_n.velocity,stiffness:_n.stiffness,damping:_n.damping,mass:_n.mass,isResolvedFromDuration:!1,...t};if(!PN(t,Cae)&&PN(t,wae))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*za(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:_n.mass,stiffness:i,damping:a}}else{const n=yae(t);e={...e,...n,mass:_n.mass},e.isResolvedFromDuration=!0}return e}function j1(t=_n.visualDuration,e=_n.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:d,mass:f,duration:p,velocity:m,isResolvedFromDuration:y}=Eae({...n,velocity:-Xi(n.velocity||0)}),v=m||0,C=d/(2*Math.sqrt(c*f)),E=s-a,S=Xi(Math.sqrt(c/f)),_=Math.abs(E)<5;r||(r=_?_n.restSpeed.granular:_n.restSpeed.default),i||(i=_?_n.restDelta.granular:_n.restDelta.default);let N;if(C<1){const O=W2(S,C);N=I=>{const M=Math.exp(-C*S*I);return s-M*((v+C*S*E)/O*Math.sin(O*I)+E*Math.cos(O*I))}}else if(C===1)N=O=>s-Math.exp(-S*O)*(E+(v+S*E)*O);else{const O=S*Math.sqrt(C*C-1);N=I=>{const M=Math.exp(-C*S*I),L=Math.min(O*I,300);return s-M*((v+C*S*E)*Math.sinh(L)+O*E*Math.cosh(L))/O}}const k={calculatedDuration:y&&p||null,next:O=>{const I=N(O);if(y)o.done=O>=p;else{let M=O===0?v:0;C<1&&(M=O===0?ws(v):QD(N,O,I));const L=Math.abs(M)<=r,B=Math.abs(s-I)<=i;o.done=L&&B}return o.value=o.done?s:I,o},toString:()=>{const O=Math.min(iC(k),L1),I=JD(M=>k.next(O*M).value,O,30);return O+"ms "+I},toTransition:()=>{}};return k}j1.applyToOptions=t=>{const e=gae(t,100,j1);return t.ease=e.ease,t.duration=ws(e.duration),t.type="keyframes",t};function q2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:d=.5,restSpeed:f}){const p=t[0],m={done:!1,value:p},y=L=>o!==void 0&&L<o||c!==void 0&&L>c,v=L=>o===void 0?c:c===void 0||Math.abs(o-L)<Math.abs(c-L)?o:c;let C=n*e;const E=p+C,S=s===void 0?E:s(E);S!==E&&(C=S-p);const _=L=>-C*Math.exp(-L/r),N=L=>S+_(L),k=L=>{const B=_(L),le=N(L);m.done=Math.abs(B)<=d,m.value=m.done?S:le};let O,I;const M=L=>{y(m.value)&&(O=L,I=j1({keyframes:[m.value,v(m.value)],velocity:QD(N,L,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:f}))};return M(0),{calculatedDuration:null,next:L=>{let B=!1;return!I&&O===void 0&&(B=!0,k(L),M(L)),O!==void 0&&L>=O?I.next(L-O):(!B&&k(L),m)}}}function Sae(t,e,n){const r=[],i=n||_s.mix||ZD,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Qi:e;o=rh(c,o)}r.push(o)}return r}function Aae(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(Xw(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Sae(e,r,i),c=o.length,d=f=>{if(s&&f<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const m=Df(t[p],t[p+1],f);return o[p](m)};return n?f=>d(za(t[0],t[a-1],f)):d}function _ae(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Df(0,e,r);t.push(bn(n,1,i))}}function Tae(t){const e=[0];return _ae(e,t.length-1),e}function Nae(t,e){return t.map(n=>n*e)}function kae(t,e){return t.map(()=>e||zD).splice(0,t.length-1)}function lf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=zie(r)?r.map(MN):MN(r),a={done:!1,value:e[0]},s=Nae(n&&n.length===e.length?n:Tae(e),t),o=Aae(s,e,{ease:Array.isArray(i)?i:kae(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const Oae=t=>t!==null;function aC(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Oae),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const Mae={decay:q2,inertia:q2,tween:lf,keyframes:lf,spring:j1};function eR(t){typeof t.type=="string"&&(t.type=Mae[t.type])}class sC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Dae=t=>t/100;class oC extends sC{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Wr.now()&&this.tick(Wr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;eR(e);const{type:n=lf,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||lf;c!==lf&&typeof o[0]!="number"&&(this.mixKeyframes=rh(Dae,ZD(o[0],o[1])),o=[0,100]);const d=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=iC(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:f,repeat:p,repeatType:m,repeatDelay:y,type:v,onUpdate:C,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-d*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,k=r;if(p){const L=Math.min(this.currentTime,i)/o;let B=Math.floor(L),le=L%1;!le&&L>=1&&(le=1),le===1&&B--,B=Math.min(B,p+1),!!(B%2)&&(m==="reverse"?(le=1-le,y&&(le-=y/o)):m==="mirror"&&(k=s)),N=za(0,1,le)*o}const O=_?{done:!1,value:f[0]}:k.next(N);a&&(O.value=a(O.value));let{done:I}=O;!_&&c!==null&&(I=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return M&&v!==q2&&(O.value=aC(f,this.options,E,this.speed)),C&&C(O.value),M&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return Xi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Xi(e)}get time(){return Xi(this.currentTime)}set time(e){var n;e=ws(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Xi(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=mae,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Rae(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Al=t=>t*180/Math.PI,K2=t=>{const e=Al(Math.atan2(t[1],t[0]));return X2(e)},Iae={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:K2,rotateZ:K2,skewX:t=>Al(Math.atan(t[1])),skewY:t=>Al(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},X2=t=>(t=t%360,t<0&&(t+=360),t),BN=K2,FN=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),zN=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Lae={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:FN,scaleY:zN,scale:t=>(FN(t)+zN(t))/2,rotateX:t=>X2(Al(Math.atan2(t[6],t[5]))),rotateY:t=>X2(Al(Math.atan2(-t[2],t[0]))),rotateZ:BN,rotate:BN,skewX:t=>Al(Math.atan(t[4])),skewY:t=>Al(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Y2(t){return t.includes("scale")?1:0}function Z2(t,e){if(!t||t==="none")return Y2(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Lae,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Iae,i=o}if(!i)return Y2(e);const a=r[e],s=i[1].split(",").map(Pae);return typeof a=="function"?a(s):s[a]}const jae=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Z2(n,e)};function Pae(t){return parseFloat(t.trim())}const Tu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nu=new Set(Tu),UN=t=>t===_u||t===Be,Bae=new Set(["x","y","z"]),Fae=Tu.filter(t=>!Bae.has(t));function zae(t){const e=[];return Fae.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const wo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Z2(e,"x"),y:(t,{transform:e})=>Z2(e,"y")};wo.translateX=wo.x;wo.translateY=wo.y;const Ll=new Set;let J2=!1,Q2=!1,eb=!1;function tR(){if(Q2){const t=Array.from(Ll).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=zae(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))==null||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Q2=!1,J2=!1,Ll.forEach(t=>t.complete(eb)),Ll.clear()}function nR(){Ll.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Q2=!0)})}function Uae(){eb=!0,nR(),tR(),eb=!1}class lC{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Ll.add(this),J2||(J2=!0,tn.read(nR),tn.resolveKeyframes(tR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Rae(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ll.delete(this)}cancel(){this.state==="scheduled"&&(Ll.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Hae=t=>t.startsWith("--");function Vae(t,e,n){Hae(e)?t.style.setProperty(e,n):t.style[e]=n}const $ae=Yw(()=>window.ScrollTimeline!==void 0),Gae={};function Wae(t,e){const n=Yw(t);return()=>Gae[e]??n()}const rR=Wae(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,HN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hd([0,.65,.55,1]),circOut:Hd([.55,0,1,.45]),backIn:Hd([.31,.01,.66,-.59]),backOut:Hd([.33,1.53,.69,.99])};function iR(t,e){if(t)return typeof t=="function"?rR()?JD(t,e):"ease-out":UD(t)?Hd(t):Array.isArray(t)?t.map(n=>iR(n,e)||HN.easeOut):HN[t]}function qae(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},d=void 0){const f={[e]:n};c&&(f.offset=c);const p=iR(o,i);Array.isArray(p)&&(f.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(f,m)}function aR(t){return typeof t=="function"&&"applyToOptions"in t}function Kae({type:t,...e}){return aR(t)&&rR()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Xae extends sC{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,Xw(typeof e.type!="string");const d=Kae(e);this.animation=qae(n,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=aC(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):Vae(n,r,f),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Xi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Xi(e)}get time(){return Xi(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ws(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&$ae()?(this.animation.timeline=e,Qi):n(this)}}const sR={anticipate:PD,backInOut:jD,circInOut:FD};function Yae(t){return t in sR}function Zae(t){typeof t.ease=="string"&&Yae(t.ease)&&(t.ease=sR[t.ease])}const gv=10;class Jae extends Xae{constructor(e){Zae(e),eR(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new oC({...s,autoplay:!1}),c=Math.max(gv,Wr.now()-this.startTime),d=za(0,gv,c-gv);n.setWithVelocity(o.sample(Math.max(0,c-d)).value,o.sample(c).value,d),o.stop()}}const VN=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ro.test(t)||t==="0")&&!t.startsWith("url("));function Qae(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ese(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=VN(i,e),o=VN(a,e);return!s||!o?!1:Qae(t)||(n==="spring"||aR(n))&&r}function tb(t){t.duration=0,t.type="keyframes"}const tse=new Set(["opacity","clipPath","filter","transform"]),nse=Yw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function rse(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(((f=e==null?void 0:e.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return nse()&&n&&tse.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const ise=40;class ase extends sC{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:d,element:f,...p}){var v;super(),this.stop=()=>{var C,E;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Wr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:d,element:f,...p},y=(f==null?void 0:f.KeyframeResolver)||lC;this.keyframeResolver=new y(o,(C,E,S)=>this.onKeyframesResolved(C,E,m,!S),c,d,f),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){var E,S;this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:d,onUpdate:f}=r;this.resolvedAt=Wr.now(),ese(e,a,s,o)||((_s.instantAnimations||!c)&&(f==null||f(aC(e,r,n))),e[0]=e[e.length-1],tb(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>ise?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!d&&rse(m),v=(S=(E=m.motionValue)==null?void 0:E.owner)==null?void 0:S.current,C=y?new Jae({...m,element:v}):new oC(m);C.finished.then(()=>{this.notifyFinished()}).catch(Qi),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Uae()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function oR(t,e,n,r=0,i=1){const a=Array.from(t).sort((d,f)=>d.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}const sse=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ose(t){const e=sse.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function lR(t,e,n=1){const[r,i]=ose(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return ND(s)?parseFloat(s):s}return eC(i)?lR(i,e,n+1):i}const lse={type:"spring",stiffness:500,damping:25,restSpeed:10},cse=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),use={type:"keyframes",duration:.8},dse={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fse=(t,{keyframes:e})=>e.length>2?use:Nu.has(t)?t.startsWith("scale")?cse(e[1]):lse:dse,hse=t=>t!==null;function pse(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(hse),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}function cC(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}function mse({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:d,...f}){return!!Object.keys(f).length}const uC=(t,e,n,r={},i,a)=>s=>{const o=cC(r,t)||{},c=o.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ws(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-d,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};mse(o)||Object.assign(f,fse(t,f)),f.duration&&(f.duration=ws(f.duration)),f.repeatDelay&&(f.repeatDelay=ws(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(tb(f),f.delay===0&&(p=!0)),(_s.instantAnimations||_s.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(p=!0,tb(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,p&&!a&&e.get()!==void 0){const m=pse(f.keyframes,o);if(m!==void 0){tn.update(()=>{f.onUpdate(m),f.onComplete()});return}}return o.isSync?new oC(f):new ase(f)};function $N(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function dC(t,e,n,r){if(typeof e=="function"){const[i,a]=$N(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=$N(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Qc(t,e,n){const r=t.getProps();return dC(r,e,n!==void 0?n:r.custom,t)}const cR=new Set(["width","height","top","left","right","bottom",...Tu]),GN=30,gse=t=>!isNaN(parseFloat(t));class xse{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const i=Wr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Wr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=gse(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Zw);const r=this.events[e].add(n);return e==="change"?()=>{r(),tn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>GN)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,GN);return MD(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xu(t,e){return new xse(t,e)}const nb=t=>Array.isArray(t);function yse(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,xu(n))}function vse(t){return nb(t)?t[t.length-1]||0:t}function bse(t,e){const n=Qc(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=vse(a[s]);yse(t,s,o)}}const Lr=t=>!!(t&&t.getVelocity);function wse(t){return!!(Lr(t)&&t.add)}function rb(t,e){const n=t.getValue("willChange");if(wse(n))return n.add(e);if(!n&&_s.WillChange){const r=new _s.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function fC(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Cse="framerAppearId",uR="data-"+fC(Cse);function dR(t){return t.props[uR]}function Ese({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function fR(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;const c=a==null?void 0:a.reduceMotion;r&&(a=r);const d=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const p in o){const m=t.getValue(p,t.latestValues[p]??null),y=o[p];if(y===void 0||f&&Ese(f,p))continue;const v={delay:n,...cC(a||{},p)},C=m.get();if(C!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===C&&!v.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const N=dR(t);if(N){const k=window.MotionHandoffAnimation(N,p,tn);k!==null&&(v.startTime=k,E=!0)}}rb(t,p);const S=c??t.shouldReduceMotion;m.start(uC(p,m,y,S&&cR.has(p)?{type:!1}:v,t,E));const _=m.animation;_&&d.push(_)}return s&&Promise.all(d).then(()=>{tn.update(()=>{s&&bse(t,s)})}),d}function ib(t,e,n={}){var c;const r=Qc(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(fR(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=i;return Sse(t,e,d,f,p,m,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[d,f]=o==="beforeChildren"?[a,s]:[s,a];return d().then(()=>f())}else return Promise.all([a(),s(n.delay)])}function Sse(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(ib(c,e,{...s,delay:n+(typeof r=="function"?0:r)+oR(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function Ase(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>ib(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=ib(t,e,n);else{const i=typeof e=="function"?Qc(t,e,n.custom):e;r=Promise.all(fR(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const _se={test:t=>t==="auto",parse:t=>t},hR=t=>e=>e.test(t),pR=[_u,Be,La,ro,Qie,Jie,_se],WN=t=>pR.find(hR(t));function Tse(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||OD(t):!0}const Nse=new Set(["brightness","contrast","saturate","opacity"]);function kse(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(tC)||[];if(!r)return t;const i=n.replace(r,"");let a=Nse.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Ose=/\b([a-z-]*)\(.*?\)/gu,ab={...Ro,getAnimatableNone:t=>{const e=t.match(Ose);return e?e.map(kse).join(" "):t}},qN={..._u,transform:Math.round},Mse={rotate:ro,rotateX:ro,rotateY:ro,rotateZ:ro,scale:Gp,scaleX:Gp,scaleY:Gp,scaleZ:Gp,skew:ro,skewX:ro,skewY:ro,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Rf,originX:RN,originY:RN,originZ:Be},hC={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,inset:Be,insetBlock:Be,insetBlockStart:Be,insetBlockEnd:Be,insetInline:Be,insetInlineStart:Be,insetInlineEnd:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,paddingBlock:Be,paddingBlockStart:Be,paddingBlockEnd:Be,paddingInline:Be,paddingInlineStart:Be,paddingInlineEnd:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,marginBlock:Be,marginBlockStart:Be,marginBlockEnd:Be,marginInline:Be,marginInlineStart:Be,marginInlineEnd:Be,fontSize:Be,backgroundPositionX:Be,backgroundPositionY:Be,...Mse,zIndex:qN,fillOpacity:Rf,strokeOpacity:Rf,numOctaves:qN},Dse={...hC,color:Hn,backgroundColor:Hn,outlineColor:Hn,fill:Hn,stroke:Hn,borderColor:Hn,borderTopColor:Hn,borderRightColor:Hn,borderBottomColor:Hn,borderLeftColor:Hn,filter:ab,WebkitFilter:ab},mR=t=>Dse[t];function gR(t,e){let n=mR(t);return n!==ab&&(n=Ro),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Rse=new Set(["auto","none","0"]);function Ise(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Rse.has(a)&&If(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=gR(n,i)}class Lse extends lC{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),eC(p))){const m=lR(p,n.current);m!==void 0&&(e[f]=m),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!cR.has(r)||e.length!==2)return;const[i,a]=e,s=WN(i),o=WN(a),c=DN(i),d=DN(a);if(c!==d&&wo[r]){this.needsMeasurement=!0;return}if(s!==o)if(UN(s)&&UN(o))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else wo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Tse(e[i]))&&r.push(i);r.length&&Ise(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=wo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function xR(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const yR=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function jse(t){return kD(t)&&"offsetHeight"in t}const{schedule:pC}=HD(queueMicrotask,!1),la={x:!1,y:!1};function vR(){return la.x||la.y}function Pse(t){return t==="x"||t==="y"?la[t]?null:(la[t]=!0,()=>{la[t]=!1}):la.x||la.y?null:(la.x=la.y=!0,()=>{la.x=la.y=!1})}function bR(t,e){const n=xR(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Bse(t){return!(t.pointerType==="touch"||vR())}function Fse(t,e,n={}){const[r,i,a]=bR(t,n);return r.forEach(s=>{let o=!1,c=!1,d;const f=()=>{s.removeEventListener("pointerleave",v)},p=E=>{d&&(d(E),d=void 0),f()},m=E=>{o=!1,window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",m),c&&(c=!1,p(E))},y=()=>{o=!0,window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",m,i)},v=E=>{if(E.pointerType!=="touch"){if(o){c=!0;return}p(E)}},C=E=>{if(!Bse(E))return;c=!1;const S=e(s,E);typeof S=="function"&&(d=S,s.addEventListener("pointerleave",v,i))};s.addEventListener("pointerenter",C,i),s.addEventListener("pointerdown",y,i)}),a}const wR=(t,e)=>e?t===e?!0:wR(t,e.parentElement):!1,mC=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,zse=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Use(t){return zse.has(t.tagName)||t.isContentEditable===!0}const Hse=new Set(["INPUT","SELECT","TEXTAREA"]);function Vse(t){return Hse.has(t.tagName)||t.isContentEditable===!0}const h0=new WeakSet;function KN(t){return e=>{e.key==="Enter"&&t(e)}}function xv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $se=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=KN(()=>{if(h0.has(n))return;xv(n,"down");const i=KN(()=>{xv(n,"up")}),a=()=>xv(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function XN(t){return mC(t)&&!vR()}function Gse(t,e,n={}){const[r,i,a]=bR(t,n),s=o=>{const c=o.currentTarget;if(!XN(o))return;h0.add(c);const d=e(c,o),f=(y,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),h0.has(c)&&h0.delete(c),XN(y)&&typeof d=="function"&&d(y,{success:v})},p=y=>{f(y,c===window||c===document||n.useGlobalTarget||wR(c,y.target))},m=y=>{f(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),jse(o)&&(o.addEventListener("focus",d=>$se(d,i)),!Use(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function gC(t){return kD(t)&&"ownerSVGElement"in t}const p0=new WeakMap;let io;const CR=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:gC(r)&&"getBBox"in r?r.getBBox()[e]:r[n],Wse=CR("inline","width","offsetWidth"),qse=CR("block","height","offsetHeight");function Kse({target:t,borderBoxSize:e}){var n;(n=p0.get(t))==null||n.forEach(r=>{r(t,{get width(){return Wse(t,e)},get height(){return qse(t,e)}})})}function Xse(t){t.forEach(Kse)}function Yse(){typeof ResizeObserver>"u"||(io=new ResizeObserver(Xse))}function Zse(t,e){io||Yse();const n=xR(t);return n.forEach(r=>{let i=p0.get(r);i||(i=new Set,p0.set(r,i)),i.add(e),io==null||io.observe(r)}),()=>{n.forEach(r=>{const i=p0.get(r);i==null||i.delete(e),i!=null&&i.size||io==null||io.unobserve(r)})}}const m0=new Set;let Hc;function Jse(){Hc=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};m0.forEach(e=>e(t))},window.addEventListener("resize",Hc)}function Qse(t){return m0.add(t),Hc||Jse(),()=>{m0.delete(t),!m0.size&&typeof Hc=="function"&&(window.removeEventListener("resize",Hc),Hc=void 0)}}function YN(t,e){return typeof t=="function"?Qse(t):Zse(t,e)}function eoe(t){return gC(t)&&t.tagName==="svg"}const toe=[...pR,Hn,Ro],noe=t=>toe.find(hR(t)),ZN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vc=()=>({x:ZN(),y:ZN()}),JN=()=>({min:0,max:0}),Xn=()=>({x:JN(),y:JN()}),sb={current:null},ER={current:!1},roe=typeof window<"u";function ioe(){if(ER.current=!0,!!roe)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>sb.current=t.matches;t.addEventListener("change",e),e()}else sb.current=!1}const aoe=new WeakMap;function Am(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Lf(t){return typeof t=="string"||Array.isArray(t)}const xC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yC=["initial",...xC];function _m(t){return Am(t.animate)||yC.some(e=>Lf(t[e]))}function SR(t){return!!(_m(t)||t.variants)}function soe(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Lr(i))t.addValue(r,i);else if(Lr(a))t.addValue(r,xu(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,xu(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const QN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let P1={};function AR(t){P1=t}function ooe(){return P1}class loe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=lC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Wr.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,tn.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=_m(n),this.isVariantNode=SR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in m){const v=m[y];d[y]!==void 0&&Lr(v)&&v.set(d[y])}}mount(e){var n;this.current=e,aoe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(ER.current||ioe(),this.shouldReduceMotion=sb.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Do(this.notifyUpdate),Do(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Nu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&tn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in P1){const n=P1[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<QN.length;r++){const i=QN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=soe(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=xu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ND(r)||OD(r))?r=parseFloat(r):!noe(r)&&Ro.test(n)&&(r=gR(e,n)),this.setBaseTarget(e,Lr(r)?r.get():r)),Lr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=dC(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Lr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Zw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){pC.render(this.render)}}class _R extends loe{constructor(){super(...arguments),this.KeyframeResolver=Lse}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Lr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Uo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function TR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function coe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uoe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yv(t){return t===void 0||t===1}function ob({scale:t,scaleX:e,scaleY:n}){return!yv(t)||!yv(e)||!yv(n)}function ml(t){return ob(t)||NR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function NR(t){return ek(t.x)||ek(t.y)}function ek(t){return t&&t!=="0%"}function B1(t,e,n){const r=t-n,i=e*r;return n+i}function tk(t,e,n,r,i){return i!==void 0&&(t=B1(t,i,r)),B1(t,n,r)+e}function lb(t,e=0,n=1,r,i){t.min=tk(t.min,e,n,r,i),t.max=tk(t.max,e,n,r,i)}function kR(t,{x:e,y:n}){lb(t.x,e.translate,e.scale,e.originPoint),lb(t.y,n.translate,n.scale,n.originPoint)}const nk=.999999999999,rk=1.0000000000001;function doe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Gc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,kR(t,s)),r&&ml(a.latestValues)&&Gc(t,a.latestValues))}e.x<rk&&e.x>nk&&(e.x=1),e.y<rk&&e.y>nk&&(e.y=1)}function $c(t,e){t.min=t.min+e,t.max=t.max+e}function ik(t,e,n,r,i=.5){const a=bn(t.min,t.max,i);lb(t,e,n,a,r)}function Gc(t,e){ik(t.x,e.x,e.scaleX,e.scale,e.originX),ik(t.y,e.y,e.scaleY,e.scale,e.originY)}function OR(t,e){return TR(uoe(t.getBoundingClientRect(),e))}function foe(t,e,n){const r=OR(t,n),{scroll:i}=e;return i&&($c(r.x,i.offset.x),$c(r.y,i.offset.y)),r}const hoe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},poe=Tu.length;function moe(t,e,n){let r="",i=!0;for(let a=0;a<poe;a++){const s=Tu[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number")c=o===(s.startsWith("scale")?1:0);else{const d=parseFloat(o);c=s.startsWith("scale")?d===1:d===0}if(!c||n){const d=yR(o,hC[s]);if(!c){i=!1;const f=hoe[s]||s;r+=`${f}(${d}) `}n&&(e[s]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function vC(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const d=e[c];if(Nu.has(c)){s=!0;continue}else if($D(c)){i[c]=d;continue}else{const f=yR(d,hC[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=moe(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:d="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${d} ${f}`}}function MR(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i==null||i.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function ak(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Od={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Be.test(t))t=parseFloat(t);else return t;const n=ak(t,e.target.x),r=ak(t,e.target.y);return`${n}% ${r}%`}},goe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ro.parse(t);if(i.length>5)return r;const a=Ro.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const d=bn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=d),typeof i[3+s]=="number"&&(i[3+s]/=d),a(i)}},cb={borderRadius:{...Od,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Od,borderTopRightRadius:Od,borderBottomLeftRadius:Od,borderBottomRightRadius:Od,boxShadow:goe};function DR(t,{layout:e,layoutId:n}){return Nu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!cb[t]||t==="opacity")}function bC(t,e,n){var s;const r=t.style,i=e==null?void 0:e.style,a={};if(!r)return a;for(const o in r)(Lr(r[o])||i&&Lr(i[o])||DR(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(a[o]=r[o]);return a}function xoe(t){return window.getComputedStyle(t)}class yoe extends _R{constructor(){super(...arguments),this.type="html",this.renderInstance=MR}readValueFromInstance(e,n){var r;if(Nu.has(n))return(r=this.projection)!=null&&r.isProjecting?Y2(n):jae(e,n);{const i=xoe(e),a=($D(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return OR(e,n)}build(e,n,r){vC(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return bC(e,n,r)}}const voe={offset:"stroke-dashoffset",array:"stroke-dasharray"},boe={offset:"strokeDashoffset",array:"strokeDasharray"};function woe(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?voe:boe;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const Coe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function RR(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,d,f){if(vC(t,o,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete p.transformBox);for(const y of Coe)p[y]!==void 0&&(m[y]=p[y],delete p[y]);e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&woe(p,i,a,s,!1)}const IR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),LR=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Eoe(t,e,n,r){MR(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(IR.has(i)?i:fC(i),e.attrs[i])}function jR(t,e,n){const r=bC(t,e,n);for(const i in t)if(Lr(t[i])||Lr(e[i])){const a=Tu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}class Soe extends _R{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Nu.has(n)){const r=mR(n);return r&&r.default||0}return n=IR.has(n)?n:fC(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return jR(e,n,r)}build(e,n,r){RR(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Eoe(e,n,r,i)}mount(e){this.isSVGTag=LR(e.tagName),super.mount(e)}}const Aoe=yC.length;function PR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?PR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Aoe;n++){const r=yC[n],i=t.props[r];(Lf(i)||i===!1)&&(e[r]=i)}return e}function BR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const _oe=[...xC].reverse(),Toe=xC.length;function Noe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Ase(t,n,r)))}function koe(t){let e=Noe(t),n=sk(),r=!0;const i=c=>(d,f)=>{var m;const p=Qc(t,f,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(p){const{transition:y,transitionEnd:v,...C}=p;d={...d,...C,...v}}return d};function a(c){e=c(t)}function s(c){const{props:d}=t,f=PR(t.parent)||{},p=[],m=new Set;let y={},v=1/0;for(let E=0;E<Toe;E++){const S=_oe[E],_=n[S],N=d[S]!==void 0?d[S]:f[S],k=Lf(N),O=S===c?_.isActive:null;O===!1&&(v=E);let I=N===f[S]&&N!==d[S]&&k;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),_.protectedKeys={...y},!_.isActive&&O===null||!N&&!_.prevProp||Am(N)||typeof N=="boolean")continue;const M=Ooe(_.prevProp,N);let L=M||S===c&&_.isActive&&!I&&k||E>v&&k,B=!1;const le=Array.isArray(N)?N:[N];let ae=le.reduce(i(S),{});O===!1&&(ae={});const{prevResolvedValues:fe={}}=_,W={...fe,...ae},de=J=>{L=!0,m.has(J)&&(B=!0,m.delete(J)),_.needsAnimating[J]=!0;const q=t.getValue(J);q&&(q.liveStyle=!1)};for(const J in W){const q=ae[J],F=fe[J];if(y.hasOwnProperty(J))continue;let z=!1;nb(q)&&nb(F)?z=!BR(q,F):z=q!==F,z?q!=null?de(J):m.add(J):q!==void 0&&m.has(J)?de(J):_.protectedKeys[J]=!0}_.prevProp=N,_.prevResolvedValues=ae,_.isActive&&(y={...y,...ae}),r&&t.blockInitialAnimation&&(L=!1);const xe=I&&M;L&&(!xe||B)&&p.push(...le.map(J=>{const q={type:S};if(typeof J=="string"&&r&&!xe&&t.manuallyAnimateOnMount&&t.parent){const{parent:F}=t,z=Qc(F,J);if(F.enteringChildren&&z){const{delayChildren:R}=z.transition||{};q.delay=oR(F.enteringChildren,t,R)}}return{animation:J,options:q}}))}if(m.size){const E={};if(typeof d.initial!="boolean"){const S=Qc(t,Array.isArray(d.initial)?d.initial[0]:d.initial);S&&S.transition&&(E.transition=S.transition)}m.forEach(S=>{const _=t.getBaseTarget(S),N=t.getValue(S);N&&(N.liveStyle=!0),E[S]=_??null}),p.push({animation:E})}let C=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(p):Promise.resolve()}function o(c,d){var p;if(n[c].isActive===d)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(c,d)}),n[c].isActive=d;const f=s(c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=sk()}}}function Ooe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!BR(e,t):!1}function fl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sk(){return{animate:fl(!0),whileInView:fl(),whileHover:fl(),whileTap:fl(),whileDrag:fl(),whileFocus:fl(),exit:fl()}}function ok(t,e){t.min=e.min,t.max=e.max}function sa(t,e){ok(t.x,e.x),ok(t.y,e.y)}function lk(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const FR=1e-4,Moe=1-FR,Doe=1+FR,zR=.01,Roe=0-zR,Ioe=0+zR;function qr(t){return t.max-t.min}function Loe(t,e,n){return Math.abs(t-e)<=n}function ck(t,e,n,r=.5){t.origin=r,t.originPoint=bn(e.min,e.max,t.origin),t.scale=qr(n)/qr(e),t.translate=bn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Moe&&t.scale<=Doe||isNaN(t.scale))&&(t.scale=1),(t.translate>=Roe&&t.translate<=Ioe||isNaN(t.translate))&&(t.translate=0)}function cf(t,e,n,r){ck(t.x,e.x,n.x,r?r.originX:void 0),ck(t.y,e.y,n.y,r?r.originY:void 0)}function uk(t,e,n){t.min=n.min+e.min,t.max=t.min+qr(e)}function joe(t,e,n){uk(t.x,e.x,n.x),uk(t.y,e.y,n.y)}function dk(t,e,n){t.min=e.min-n.min,t.max=t.min+qr(e)}function F1(t,e,n){dk(t.x,e.x,n.x),dk(t.y,e.y,n.y)}function fk(t,e,n,r,i){return t-=e,t=B1(t,1/n,r),i!==void 0&&(t=B1(t,1/i,r)),t}function Poe(t,e=0,n=1,r=.5,i,a=t,s=t){if(La.test(e)&&(e=parseFloat(e),e=bn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=bn(a.min,a.max,r);t===a&&(o-=e),t.min=fk(t.min,e,n,o,i),t.max=fk(t.max,e,n,o,i)}function hk(t,e,[n,r,i],a,s){Poe(t,e[n],e[r],e[i],e.scale,a,s)}const Boe=["x","scaleX","originX"],Foe=["y","scaleY","originY"];function pk(t,e,n,r){hk(t.x,e,Boe,n?n.x:void 0,r?r.x:void 0),hk(t.y,e,Foe,n?n.y:void 0,r?r.y:void 0)}function mk(t){return t.translate===0&&t.scale===1}function UR(t){return mk(t.x)&&mk(t.y)}function gk(t,e){return t.min===e.min&&t.max===e.max}function zoe(t,e){return gk(t.x,e.x)&&gk(t.y,e.y)}function xk(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function HR(t,e){return xk(t.x,e.x)&&xk(t.y,e.y)}function yk(t){return qr(t.x)/qr(t.y)}function vk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function $i(t){return[t("x"),t("y")]}function Uoe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:p,rotateY:m,skewX:y,skewY:v}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const VR=["TopLeft","TopRight","BottomLeft","BottomRight"],Hoe=VR.length,bk=t=>typeof t=="string"?parseFloat(t):t,wk=t=>typeof t=="number"||Be.test(t);function Voe(t,e,n,r,i,a){i?(t.opacity=bn(0,n.opacity??1,$oe(r)),t.opacityExit=bn(e.opacity??1,0,Goe(r))):a&&(t.opacity=bn(e.opacity??1,n.opacity??1,r));for(let s=0;s<Hoe;s++){const o=`border${VR[s]}Radius`;let c=Ck(e,o),d=Ck(n,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||wk(c)===wk(d)?(t[o]=Math.max(bn(bk(c),bk(d),r),0),(La.test(d)||La.test(c))&&(t[o]+="%")):t[o]=d}(e.rotate||n.rotate)&&(t.rotate=bn(e.rotate||0,n.rotate||0,r))}function Ck(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $oe=$R(0,.5,BD),Goe=$R(.5,.95,Qi);function $R(t,e,n){return r=>r<t?0:r>e?1:n(Df(t,e,r))}function Woe(t,e,n){const r=Lr(t)?t:xu(t);return r.start(uC("",r,e,n)),r.animation}function jf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const qoe=(t,e)=>t.depth-e.depth;class Koe{constructor(){this.children=[],this.isDirty=!1}add(e){qw(this.children,e),this.isDirty=!0}remove(e){Kw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(qoe),this.isDirty=!1,this.children.forEach(e)}}function Xoe(t,e){const n=Wr.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Do(r),t(a-e))};return tn.setup(r,!0),()=>Do(r)}function g0(t){return Lr(t)?t.get():t}class Yoe{constructor(){this.members=[]}add(e){qw(this.members,e),e.scheduleRender()}remove(e){if(Kw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,a=e.options.layoutDependency;i!==void 0&&a!==void 0&&i===a||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const x0={hasAnimatedSinceResize:!0,hasEverUpdated:!1},vv=["","X","Y","Z"],Zoe=1e3;let Joe=0;function bv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function GR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=dR(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",tn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&GR(r)}function WR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=Joe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tle),this.nodes.forEach(ale),this.nodes.forEach(sle),this.nodes.forEach(nle)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Koe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Zw),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=gC(s)&&!eoe(s),this.instance=s;const{layoutId:o,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,p=0;const m=()=>this.root.updateBlockedByResize=!1;tn.read(()=>{p=window.innerWidth}),t(s,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,f&&f(),f=Xoe(m,250),x0.hasAnimatedSinceResize&&(x0.hasAnimatedSinceResize=!1,this.nodes.forEach(Ak)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&d&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||dle,{onLayoutAnimationStart:C,onLayoutAnimationComplete:E}=d.getProps(),S=!this.targetLayout||!HR(this.targetLayout,y),_=!p&&m;if(this.options.layoutRoot||this.resumeFrom||_||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...cC(v,"layout"),onPlay:C,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(f,_)}else p||Ak(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Do(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ole),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ek);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Sk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ile),this.nodes.forEach(Qoe),this.nodes.forEach(ele)):this.nodes.forEach(Sk),this.clearAllSnapshots();const o=Wr.now();Er.delta=za(0,1e3/60,o-Er.timestamp),Er.timestamp=o,Er.isProcessing=!0,dv.update.process(Er),dv.preRender.process(Er),dv.render.process(Er),Er.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rle),this.sharedNodes.forEach(lle)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qr(this.snapshot.measuredBox.x)&&!qr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!UR(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;s&&this.instance&&(o||ml(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),fle(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:s}=this.options;if(!s)return Xn();const o=s.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(hle))){const{scroll:f}=this.root;f&&($c(o.x,f.offset.x),$c(o.y,f.offset.y))}return o}removeElementScroll(s){var c;const o=Xn();if(sa(o,s),(c=this.scroll)!=null&&c.wasRoot)return o;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&sa(o,s),$c(o.x,p.offset.x),$c(o.y,p.offset.y))}return o}applyTransform(s,o=!1){const c=Xn();sa(c,s);for(let d=0;d<this.path.length;d++){const f=this.path[d];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Gc(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ml(f.latestValues)&&Gc(c,f.latestValues)}return ml(this.latestValues)&&Gc(c,this.latestValues),c}removeTransform(s){const o=Xn();sa(o,s);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ml(d.latestValues))continue;ob(d.latestValues)&&d.updateSnapshot();const f=Xn(),p=d.measurePageBox();sa(f,p),pk(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return ml(this.latestValues)&&pk(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Er.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var y;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!this.layout||!(f||p))return;this.resolvedRelativeTargetAt=Er.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xn(),this.targetWithTransforms=Xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),joe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sa(this.target,this.layout.layoutBox),kR(this.target,this.targetDelta)):sa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||ob(this.parent.latestValues)||NR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,c){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),F1(this.relativeTargetOrigin,o,c),sa(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Er.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;sa(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;doe(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Xn());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lk(this.prevProjectionDelta.x,this.projectionDelta.x),lk(this.prevProjectionDelta.y,this.projectionDelta.y)),cf(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!vk(this.projectionDelta.x,this.prevProjectionDelta.x)||!vk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vc(),this.projectionDelta=Vc(),this.projectionDeltaWithTransform=Vc()}setAnimationOrigin(s,o=!1){const c=this.snapshot,d=c?c.latestValues:{},f={...this.latestValues},p=Vc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=Xn(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,C=y!==v,E=this.getStack(),S=!E||E.members.length<=1,_=!!(C&&!S&&this.options.crossfade===!0&&!this.path.some(ule));this.animationProgress=0;let N;this.mixTargetDelta=k=>{const O=k/1e3;_k(p.x,s.x,O),_k(p.y,s.y,O),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(F1(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cle(this.relativeTarget,this.relativeTargetOrigin,m,O),N&&zoe(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Xn()),sa(N,this.relativeTarget)),C&&(this.animationValues=f,Voe(f,d,this.latestValues,O,_,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,c,d;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Do(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tn.update(()=>{x0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xu(0)),this.currentAnimation=Woe(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),s.onUpdate&&s.onUpdate(f)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Zoe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:f}=s;if(!(!o||!c||!d)){if(this!==s&&this.layout&&d&&qR(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Xn();const p=qr(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+p;const m=qr(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+m}sa(o,c),Gc(o,f),cf(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Yoe),this.sharedNodes.get(s).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const d={};c.z&&bv("z",s,d,this.animationValues);for(let f=0;f<vv.length;f++)bv(`rotate${vv[f]}`,s,d,this.animationValues),bv(`skew${vv[f]}`,s,d,this.animationValues);s.render();for(const f in d)s.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=g0(o==null?void 0:o.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=g0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ml(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=Uoe(this.projectionDeltaWithTransform,this.treeScale,f);c&&(p=c(f,p)),s.transform=p;const{x:m,y}=this.projectionDelta;s.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?s.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in cb){if(f[v]===void 0)continue;const{correct:C,applyTo:E,isCSSVariable:S}=cb[v],_=p==="none"?f[v]:C(f[v],d);if(E){const N=E.length;for(let k=0;k<N;k++)s[E[k]]=_}else S?this.options.visualElement.renderState.vars[v]=_:s[v]=_}this.options.layoutId&&(s.pointerEvents=d===this?g0(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(Ek),this.root.sharedNodes.clear()}}}function Qoe(t){t.updateLayout()}function ele(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=e.source!==t.layout.source;a==="size"?$i(p=>{const m=s?e.measuredBox[p]:e.layoutBox[p],y=qr(m);m.min=r[p].min,m.max=m.min+y}):qR(a,e.layoutBox,r)&&$i(p=>{const m=s?e.measuredBox[p]:e.layoutBox[p],y=qr(r[p]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const o=Vc();cf(o,r,e.layoutBox);const c=Vc();s?cf(c,t.applyTransform(i,!0),e.measuredBox):cf(c,r,e.layoutBox);const d=!UR(o);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const v=Xn();F1(v,e.layoutBox,m.layoutBox);const C=Xn();F1(C,r,y.layoutBox),HR(v,C)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=v,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function tle(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function nle(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rle(t){t.clearSnapshot()}function Ek(t){t.clearMeasurements()}function Sk(t){t.isLayoutDirty=!1}function ile(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ak(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ale(t){t.resolveTargetDelta()}function sle(t){t.calcProjection()}function ole(t){t.resetSkewAndRotation()}function lle(t){t.removeLeadSnapshot()}function _k(t,e,n){t.translate=bn(e.translate,0,n),t.scale=bn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Tk(t,e,n,r){t.min=bn(e.min,n.min,r),t.max=bn(e.max,n.max,r)}function cle(t,e,n,r){Tk(t.x,e.x,n.x,r),Tk(t.y,e.y,n.y,r)}function ule(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const dle={duration:.45,ease:[.4,0,.1,1]},Nk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),kk=Nk("applewebkit/")&&!Nk("chrome/")?Math.round:Qi;function Ok(t){t.min=kk(t.min),t.max=kk(t.max)}function fle(t){Ok(t.x),Ok(t.y)}function qR(t,e,n){return t==="position"||t==="preserve-aspect"&&!Loe(yk(e),yk(n),.2)}function hle(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const ple=WR({attachResizeListener:(t,e)=>jf(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),wv={current:void 0},KR=WR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!wv.current){const t=new ple({});t.mount(window),t.setOptions({layoutScroll:!0}),wv.current=t}return wv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),XR=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function mle(t=!0){const e=A.useContext(Ww);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const YR=A.createContext({strict:!1}),Mk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Dk=!1;function gle(){if(Dk)return;const t={};for(const e in Mk)t[e]={isEnabled:n=>Mk[e].some(r=>!!n[r])};AR(t),Dk=!0}function ZR(){return gle(),ooe()}function xle(t){const e=ZR();for(const n in t)e[n]={...e[n],...t[n]};AR(e)}const yle=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function z1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||yle.has(t)}let JR=t=>!z1(t);function vle(t){typeof t=="function"&&(JR=e=>e.startsWith("on")?!z1(e):t(e))}try{vle(require("@emotion/is-prop-valid").default)}catch{}function ble(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(JR(i)||n===!0&&z1(i)||!e&&!z1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Tm=A.createContext({});function wle(t,e){if(_m(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Lf(n)?n:void 0,animate:Lf(r)?r:void 0}}return t.inherit!==!1?e:{}}function Cle(t){const{initial:e,animate:n}=wle(t,A.useContext(Tm));return A.useMemo(()=>({initial:e,animate:n}),[Rk(e),Rk(n)])}function Rk(t){return Array.isArray(t)?t.join(" "):t}const wC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function QR(t,e,n){for(const r in e)!Lr(e[r])&&!DR(r,n)&&(t[r]=e[r])}function Ele({transformTemplate:t},e){return A.useMemo(()=>{const n=wC();return vC(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Sle(t,e){const n=t.style||{},r={};return QR(r,n,t),Object.assign(r,Ele(t,e)),r}function Ale(t,e){const n={},r=Sle(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const eI=()=>({...wC(),attrs:{}});function _le(t,e,n,r){const i=A.useMemo(()=>{const a=eI();return RR(a,e,LR(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};QR(a,t.style,t),i.style={...a,...i.style}}return i}const Tle=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function CC(t){return typeof t!="string"||t.includes("-")?!1:!!(Tle.indexOf(t)>-1||/[A-Z]/u.test(t))}function Nle(t,e,n,{latestValues:r},i,a=!1,s){const c=(s??CC(t)?_le:Ale)(e,r,i,t),d=ble(e,typeof t=="string",a),f=t!==A.Fragment?{...d,...c,ref:n}:{},{children:p}=e,m=A.useMemo(()=>Lr(p)?p.get():p,[p]);return A.createElement(t,{...f,children:m})}function kle({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Ole(n,r,i,t),renderState:e()}}function Ole(t,e,n,r){const i={},a=r(t,{});for(const m in a)i[m]=g0(a[m]);let{initial:s,animate:o}=t;const c=_m(t),d=SR(t);e&&d&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const p=f?o:s;if(p&&typeof p!="boolean"&&!Am(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const v=dC(t,m[y]);if(v){const{transitionEnd:C,transition:E,...S}=v;for(const _ in S){let N=S[_];if(Array.isArray(N)){const k=f?N.length-1:0;N=N[k]}N!==null&&(i[_]=N)}for(const _ in C)i[_]=C[_]}}}return i}const tI=t=>(e,n)=>{const r=A.useContext(Tm),i=A.useContext(Ww),a=()=>kle(t,e,r,i);return n?a():Die(a)},Mle=tI({scrapeMotionValuesFromProps:bC,createRenderState:wC}),Dle=tI({scrapeMotionValuesFromProps:jR,createRenderState:eI}),Rle=Symbol.for("motionComponentSymbol");function Ile(t,e,n){const r=A.useRef(n);A.useInsertionEffect(()=>{r.current=n});const i=A.useRef(null);return A.useCallback(a=>{var o;a&&((o=t.onMount)==null||o.call(t,a)),e&&(a?e.mount(a):e.unmount());const s=r.current;if(typeof s=="function")if(a){const c=s(a);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):s(a);else s&&(s.current=a)},[e])}const nI=A.createContext({});function Lc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Lle(t,e,n,r,i,a){var N,k;const{visualElement:s}=A.useContext(Tm),o=A.useContext(YR),c=A.useContext(Ww),d=A.useContext(XR),f=d.reducedMotion,p=d.skipAnimations,m=A.useRef(null),y=A.useRef(!1);r=r||o.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f,skipAnimations:p,isSVG:a}),y.current&&m.current&&(m.current.manuallyAnimateOnMount=!0));const v=m.current,C=A.useContext(nI);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&jle(m.current,n,i,C);const E=A.useRef(!1);A.useInsertionEffect(()=>{v&&E.current&&v.update(n,c)});const S=n[uR],_=A.useRef(!!S&&!((N=window.MotionHandoffIsComplete)!=null&&N.call(window,S))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,S)));return Rie(()=>{y.current=!0,v&&(E.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),_.current&&v.animationState&&v.animationState.animateChanges())}),A.useEffect(()=>{v&&(!_.current&&v.animationState&&v.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)==null||O.call(window,S)}),_.current=!1),v.enteringChildren=void 0)}),v}function jle(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:d,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:rI(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Lc(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:d})}function rI(t){if(t)return t.options.allowProjection!==!1?t.projection:rI(t.parent)}function Cv(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&xle(r);const a=n?n==="svg":CC(t),s=a?Dle:Mle;function o(d,f){let p;const m={...A.useContext(XR),...d,layoutId:Ple(d)},{isStatic:y}=m,v=Cle(d),C=s(d,y);if(!y&&TD){Ble();const E=Fle(m);p=E.MeasureLayout,v.visualElement=Lle(t,C,m,i,E.ProjectionNode,a)}return g.jsxs(Tm.Provider,{value:v,children:[p&&v.visualElement?g.jsx(p,{visualElement:v.visualElement,...m}):null,Nle(t,d,Ile(C,v.visualElement,f),C,y,e,a)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=A.forwardRef(o);return c[Rle]=t,c}function Ple({layoutId:t}){const e=A.useContext(_D).id;return e&&t!==void 0?e+"-"+t:t}function Ble(t,e){A.useContext(YR).strict}function Fle(t){const e=ZR(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function zle(t,e){if(typeof Proxy>"u")return Cv;const n=new Map,r=(a,s)=>Cv(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,Cv(s,void 0,t,e)),n.get(s))})}const Ule=(t,e)=>e.isSVG??CC(t)?new Soe(e):new yoe(e,{allowProjection:t!==A.Fragment});class Hle extends Uo{constructor(e){super(e),e.animationState||(e.animationState=koe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Am(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Vle=0;class $le extends Uo{constructor(){super(...arguments),this.id=Vle++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Gle={animation:{Feature:Hle},exit:{Feature:$le}};function sh(t){return{point:{x:t.pageX,y:t.pageY}}}const Wle=t=>e=>mC(e)&&t(e,sh(e));function uf(t,e,n,r){return jf(t,e,Wle(n),r)}const iI=({current:t})=>t?t.ownerDocument.defaultView:null,Ik=(t,e)=>Math.abs(t-e);function qle(t,e){const n=Ik(t.x,e.x),r=Ik(t.y,e.y);return Math.sqrt(n**2+r**2)}const Lk=new Set(["auto","scroll"]);class aI{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Sv(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,C=qle(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!C)return;const{point:E}=y,{timestamp:S}=Er;this.history.push({...E,timestamp:S});const{onStart:_,onMove:N}=this.handlers;v||(_&&_(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,y)},this.handlePointerMove=(y,v)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Ev(v,this.transformPagePoint),tn.update(this.updatePoint,!0)},this.handlePointerUp=(y,v)=>{this.end();const{onEnd:C,onSessionEnd:E,resumeAnimation:S}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Sv(y.type==="pointercancel"?this.lastMoveEventInfo:Ev(v,this.transformPagePoint),this.history);this.startEvent&&C&&C(y,_),E&&E(y,_)},!mC(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const c=sh(e),d=Ev(c,this.transformPagePoint),{point:f}=d,{timestamp:p}=Er;this.history=[{...f,timestamp:p}];const{onSessionStart:m}=n;m&&m(e,Sv(d,this.history)),this.removeListeners=rh(uf(this.contextWindow,"pointermove",this.handlePointerMove),uf(this.contextWindow,"pointerup",this.handlePointerUp),uf(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(Lk.has(r.overflowX)||Lk.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-n.x,y:i.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),tn.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Do(this.updatePoint)}}function Ev(t,e){return e?{point:e(t.point)}:t}function jk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sv({point:t},e){return{point:t,delta:jk(t,sI(e)),offset:jk(t,Kle(e)),velocity:Xle(e,.1)}}function Kle(t){return t[0]}function sI(t){return t[t.length-1]}function Xle(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=sI(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ws(e)));)n--;if(!r)return{x:0,y:0};const a=Xi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Yle(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?bn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?bn(n,t,r.max):Math.min(t,n)),t}function Pk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Zle(t,{top:e,left:n,bottom:r,right:i}){return{x:Pk(t.x,n,i),y:Pk(t.y,e,r)}}function Bk(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Jle(t,e){return{x:Bk(t.x,e.x),y:Bk(t.y,e.y)}}function Qle(t,e){let n=.5;const r=qr(t),i=qr(e);return i>r?n=Df(e.min,e.max-r,t.min):r>i&&(n=Df(t.min,t.max-i,e.min)),za(0,1,n)}function ece(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ub=.35;function tce(t=ub){return t===!1?t=0:t===!0&&(t=ub),{x:Fk(t,"left","right"),y:Fk(t,"top","bottom")}}function Fk(t,e,n){return{min:zk(t,e),max:zk(t,n)}}function zk(t,e){return typeof t=="number"?t:t[e]||0}const nce=new WeakMap;class rce{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=p=>{n?(this.stopAnimation(),this.snapToCursor(sh(p).point)):this.pauseAnimation()},s=(p,m)=>{this.stopAnimation();const{drag:y,dragPropagation:v,onDragStart:C}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Pse(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$i(S=>{let _=this.getAxisMotionValue(S).get()||0;if(La.test(_)){const{projection:N}=this.visualElement;if(N&&N.layout){const k=N.layout.layoutBox[S];k&&(_=qr(k)*(parseFloat(_)/100))}}this.originPoint[S]=_}),C&&tn.update(()=>C(p,m),!1,!0),rb(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:C,onDrag:E}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:S}=m;if(v&&this.currentDirection===null){this.currentDirection=ace(S),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,S),this.updateAxis("y",m.point,S),this.visualElement.render(),E&&tn.update(()=>E(p,m),!1,!0)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>$i(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)==null?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new aI(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:iI(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&tn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Wp(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=Yle(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&Lc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Zle(r.layoutBox,e):this.constraints=!1,this.elastic=tce(n),i!==this.constraints&&!Lc(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&$i(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=ece(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Lc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=foe(r,i.root,this.visualElement.getTransformPagePoint());let s=Jle(i.layout.layoutBox,a);if(n){const o=n(coe(s));this.hasMutatedConstraints=!!o,o&&(s=TR(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=$i(f=>{if(!Wp(f,n,this.currentDirection))return;let p=c&&c[f]||{};s&&(p={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,v={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(f,v)});return Promise.all(d).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return rb(this.visualElement,e),r.start(uC(e,r,0,n,this.visualElement,!1))}stopAnimation(){$i(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$i(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$i(n=>{const{drag:r}=this.getProps();if(!Wp(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-bn(s,o,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Lc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$i(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=Qle({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),$i(s=>{if(!Wp(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:d}=this.constraints[s];o.set(bn(c,d,i[s]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;nce.set(this.visualElement,this);const e=this.visualElement.current,n=uf(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps(),m=d.target,y=m!==e&&Vse(m);f&&p&&!y&&this.start(d)});let r;const i=()=>{const{dragConstraints:d}=this.getProps();Lc(d)&&d.current&&(this.constraints=this.resolveRefConstraints(),r||(r=ice(e,d.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),tn.read(i);const o=jf(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&($i(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=ub,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Uk(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function ice(t,e,n){const r=YN(t,Uk(n)),i=YN(e,Uk(n));return()=>{r(),i()}}function Wp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function ace(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class sce extends Uo{constructor(e){super(e),this.removeGroupControls=Qi,this.removeListeners=Qi,this.controls=new rce(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qi}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Av=t=>(e,n)=>{t&&tn.update(()=>t(e,n),!1,!0)};class oce extends Uo{constructor(){super(...arguments),this.removePointerDownListener=Qi}onPointerDown(e){this.session=new aI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Av(e),onStart:Av(n),onMove:Av(r),onEnd:(a,s)=>{delete this.session,i&&tn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=uf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let _v=!1;class lce extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),_v&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),x0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,e.layoutDependency!==n&&s.setOptions({...s.options,layoutDependency:n}),_v=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||tn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),pC.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;_v=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function oI(t){const[e,n]=mle(),r=A.useContext(_D);return g.jsx(lce,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(nI),isPresent:e,safeToRemove:n})}const cce={pan:{Feature:oce},drag:{Feature:sce,ProjectionNode:KR,MeasureLayout:oI}};function Hk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&tn.postRender(()=>a(e,sh(e)))}class uce extends Uo{mount(){const{current:e}=this.node;e&&(this.unmount=Fse(e,(n,r)=>(Hk(this.node,r,"Start"),i=>Hk(this.node,i,"End"))))}unmount(){}}class dce extends Uo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rh(jf(this.node.current,"focus",()=>this.onFocus()),jf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Vk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&tn.postRender(()=>a(e,sh(e)))}class fce extends Uo{mount(){const{current:e}=this.node;e&&(this.unmount=Gse(e,(n,r)=>(Vk(this.node,r,"Start"),(i,{success:a})=>Vk(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const db=new WeakMap,Tv=new WeakMap,hce=t=>{const e=db.get(t.target);e&&e(t)},pce=t=>{t.forEach(hce)};function mce({root:t,...e}){const n=t||document;Tv.has(n)||Tv.set(n,{});const r=Tv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(pce,{root:t,...e})),r[i]}function gce(t,e,n){const r=mce(e);return db.set(t,n),r.observe(t),()=>{db.delete(t),r.unobserve(t)}}const xce={some:0,all:1};class yce extends Uo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:xce[i]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),m=d?f:p;m&&m(c)};return gce(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(vce(e,n))&&this.startObserver()}unmount(){}}function vce({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bce={inView:{Feature:yce},tap:{Feature:fce},focus:{Feature:dce},hover:{Feature:uce}},wce={layout:{ProjectionNode:KR,MeasureLayout:oI}},Cce={...Gle,...bce,...cce,...wce},Vd=zle(Cce,Ule),$k=({color:t,size:e,initialPos:n,duration:r})=>g.jsx(Vd.div,{animate:{x:[0,80,-80,0],y:[0,-100,100,0],scale:[1,1.1,.95,1]},transition:{duration:r,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",width:e,height:e,borderRadius:"50%",backgroundColor:t,filter:"blur(120px)",opacity:.1,left:n.x,top:n.y,zIndex:1}}),Ece=({onLogin:t})=>{const e="#CC561E",n=[{icon:g.jsx(bb,{className:"w-5 h-5",style:{color:e}}),subtitle:"The Foundation",title:"Dynamic Synthesis Hub",description:"A unified home for Books, Articles, Websites, and Notes. Enhanced by Night Shift processing.",highlight:"All-in-One Evolution",accent:e},{icon:g.jsx(HB,{className:"w-5 h-5 text-yellow-500"}),subtitle:"The Reflex",title:"Smart Retrieval",description:"Sub-second response. Lemma-based and semantic proximity scan for instant access.",highlight:"Instant & Localized",accent:"#EAB308"},{icon:g.jsx(p5,{className:"w-5 h-5 text-indigo-500"}),subtitle:"The Brain",title:"Explorer & Deep AI",description:"Dual AI validation. Work AI synthesizes while Judge AI evaluates answers with zero risk.",highlight:"Verified Intelligence",accent:"#6366F1"},{icon:g.jsx(FB,{className:"w-5 h-5 text-blue-500"}),subtitle:"The Intuition",title:"Flow & Flux System",description:"Discovery beyond search. Uses graph mechanics to surface hidden connections organically.",highlight:"Autonomous Discovery",accent:"#3B82F6"},{icon:g.jsx(FP,{className:"w-5 h-5 text-emerald-500"}),subtitle:"Relational Intelligence",title:"Graph & Vector Harmony",description:"Blends vector similarity with knowledge graph traversal for deep connectivity.",highlight:"Contextual Depth",accent:"#10B981"},{icon:g.jsx(lB,{className:"w-5 h-5 text-slate-500"}),subtitle:"Governance",title:"Privacy & Isolation",description:"Strict tenant isolation and absolute data privacy. Your vault remains exclusively yours.",highlight:"Absolute Security",accent:"#64748B"}];return g.jsxs("div",{className:"min-h-screen bg-[#0d1117] text-slate-100 transition-colors duration-500 relative overflow-hidden flex flex-col font-sans",children:[g.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none",children:[g.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_rgba(13,17,23,0.8)_100%)] z-[5]"}),g.jsx("div",{className:"absolute inset-0 opacity-[0.03] animate-pulse z-[2]",style:{backgroundImage:`radial-gradient(circle, ${e} 1px, transparent 1px)`,backgroundSize:"40px 40px"}}),g.jsx("div",{className:"absolute inset-0 opacity-[0.05] contrast-150 brightness-150 z-[10] mix-blend-overlay pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3%3Cfilter id='noiseFilter'%3%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3%3C/filter%3%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3%3C/svg%3")`}}),g.jsx($k,{color:e,size:"700px",initialPos:{x:"-5%",y:"15%"},duration:30}),g.jsx($k,{color:"#6366f1",size:"600px",initialPos:{x:"65%",y:"-5%"},duration:25})]}),g.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center p-4 md:p-8 relative z-20",children:[g.jsxs(Vd.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center max-w-5xl mb-8 md:mb-10",children:[g.jsx("div",{className:"mb-6 flex justify-center",children:g.jsxs(Vd.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:60},className:"relative",children:[g.jsx("div",{className:"absolute inset-[-40px] bg-orange-500/12 blur-[140px] rounded-full pointer-events-none"}),g.jsx("img",{src:ED,alt:"TomeHub Logo",className:"h-32 md:h-40 w-auto object-contain drop-shadow-[0_20px_60px_rgba(204,86,30,0.3)] brightness-110 relative z-10"})]})}),g.jsxs("h1",{className:"text-3xl md:text-5xl font-black tracking-tight mb-4 leading-[1.1] text-white",children:["From Information to",g.jsx("br",{}),g.jsx("span",{className:"relative inline-block bg-clip-text text-transparent bg-gradient-to-r from-[#CC561E] via-[#ff8a50] to-[#CC561E] animate-gradient-x",children:"Justified Knowledge"})]}),g.jsxs("p",{className:"text-lg md:text-xl text-slate-400 max-w-3xl mx-auto mb-8 leading-relaxed font-medium",children:["Interact dynamically with your personal knowledge base. TomeHub is a ",g.jsx("span",{className:"text-white font-bold",children:"multi-dimensional synthesis tool"})," for evidence-based intelligence."]}),g.jsxs("div",{className:"flex flex-col items-center gap-6",children:[g.jsxs(Vd.button,{whileHover:{scale:1.05,translateY:-2,boxShadow:`0 20px 50px ${e}44`},whileTap:{scale:.98},onClick:t,className:"px-10 py-5 text-white rounded-xl font-black text-lg shadow-2xl transition-all flex items-center gap-4 border border-white/10 backdrop-blur-xl group relative overflow-hidden",style:{backgroundColor:e},children:[g.jsx(Ra,{className:"w-5 h-5 fill-white animate-pulse"}),"Continue with Google"]}),g.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-x-8 gap-y-2 text-[9px] font-black uppercase tracking-[0.4em] text-slate-500",children:[g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:e}}),"Dynamic Synthesis"]}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:e}}),"Deep Intelligence"]}),g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:e}}),"Relational Graph"]})]})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 md:gap-6 w-full max-w-[1240px]",children:n.map((r,i)=>g.jsx(Vd.div,{initial:{opacity:0,scale:.98},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.1*i},className:"relative group h-full",children:g.jsxs("div",{className:"h-full rounded-3xl border border-white/5 bg-[#161b22]/30 backdrop-blur-xl transition-all duration-500 group-hover:bg-[#1c2128]/50 group-hover:border-white/10 group-hover:translate-y-[-6px] group-hover:shadow-[0_40px_80px_-20px_rgba(0,0,0,0.6)] flex flex-col overflow-hidden relative",children:[g.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] opacity-10 group-hover:opacity-100 transition-opacity duration-500",style:{backgroundColor:r.accent}}),g.jsx("div",{className:"absolute inset-[1px] rounded-[inherit] border border-white/[0.03] pointer-events-none"}),g.jsxs("div",{className:"p-7 md:p-8 flex flex-col h-full relative z-10",children:[g.jsx("div",{className:"mb-6 p-4 rounded-2xl w-fit bg-white/5 border border-white/5 group-hover:scale-105 group-hover:bg-white/[0.08] transition-all duration-500",children:r.icon}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-xl md:text-2xl font-black mb-3 text-white leading-tight",children:r.title}),g.jsx("p",{className:"text-[14px] md:text-[15px] text-slate-400 leading-relaxed font-normal",children:r.description})]}),g.jsxs("div",{className:"mt-8 pt-6 border-t border-white/[0.05] flex items-center justify-between",children:[g.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 group-hover:text-orange-500/80 transition-colors",children:r.highlight}),g.jsx(pj,{className:"w-5 h-5 text-slate-500 opacity-0 group-hover:opacity-100 transition-all translate-x-3 group-hover:translate-x-0"})]})]})]})},i))})]}),g.jsx("footer",{className:"py-8 px-8 border-t border-white/5 text-center relative z-20 bg-black/10 backdrop-blur-md",children:g.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.8em] text-slate-600 opacity-60",children:"TomeHub  Multi-Layer Knowledge Engine"})})]})},Sce=(t,e)=>{const[n,r]=A.useState(!1),[i,a]=A.useState({total:0,processed:0,success:0,failed:0}),s=A.useRef(!1),o=A.useCallback(async d=>{const f=d.filter(m=>m.type==="BOOK"&&(!(m.summaryText||m.generalNotes)||(m.summaryText||m.generalNotes||"").length<10)&&(!m.tags||m.tags.length===0));if(f.length===0){alert("No books found that need enrichment!");return}r(!0),s.current=!1,a({total:f.length,processed:0,success:0,failed:0,currentBookTitle:""});const p=5;for(let m=0;m<f.length&&!s.current;m+=p){const y=f.slice(m,m+p),v=y.map(C=>C.title).join(", ");a(C=>({...C,currentBookTitle:`Batch: ${v.substring(0,30)}...`}));try{m>0&&await new Promise(S=>setTimeout(S,2e3));const C=y.map(S=>Cm(S)),E=await pD(C);for(let S=0;S<y.length;S++){const _=y[S],N=E.find(k=>k.title===_.title)||E[S];if(N){const k=Em(_,N);await R1(t,k),e(k),a(O=>({...O,processed:O.processed+1,success:O.success+1}))}else a(k=>({...k,processed:k.processed+1,failed:k.failed+1}))}}catch(C){console.error(`Failed to enrich batch starting at ${m}:`,C),a(E=>({...E,processed:E.processed+y.length,failed:E.failed+y.length}))}}r(!1),a(m=>({...m,currentBookTitle:void 0}))},[t,e]),c=A.useCallback(()=>{s.current=!0},[]);return{isEnriching:n,stats:i,startEnrichment:o,stopEnrichment:c}},Ace=({state:t})=>{const[e,n]=A.useState(!1);return!t.active_topic&&(!t.assumptions||t.assumptions.length===0)?null:g.jsx("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm border-b border-[#CC561E]/10 dark:border-slate-700 shadow-sm transition-all",children:g.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50",onClick:()=>n(!e),children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[g.jsx("div",{className:"p-1.5 bg-[#CC561E]/10 dark:bg-[#CC561E]/20 rounded-md flex-shrink-0",children:g.jsx(x5,{className:"w-4 h-4 text-[#CC561E] dark:text-[#f3a47b]"})}),g.jsxs("div",{className:"min-w-0",children:[g.jsx("p",{className:"text-[10px] font-bold text-[#CC561E] dark:text-[#f3a47b] uppercase tracking-widest",children:"Current Topic"}),g.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:t.active_topic||"Initializing exploration..."})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[t.assumptions&&t.assumptions.length>0&&g.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-xs px-2 py-1 rounded-full bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400 border border-amber-100 dark:border-amber-800/50",children:[g.jsx(xo,{className:"w-3 h-3"}),t.assumptions.length," Assumptions"]}),e?g.jsx(g5,{className:"w-4 h-4 text-slate-400"}):g.jsx(xl,{className:"w-4 h-4 text-slate-400"})]})]}),e&&g.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 dark:border-slate-700 space-y-4 pb-2 animate-fade-in-down",children:[t.assumptions&&t.assumptions.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("h4",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-2",children:[g.jsx(xo,{className:"w-3 h-3"})," Working Assumptions"]}),g.jsx("div",{className:"grid gap-2",children:t.assumptions.map((r,i)=>g.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300 bg-amber-50/50 dark:bg-amber-900/10 p-2 rounded border-l-2 border-amber-400",children:[r.text,g.jsxs("span",{className:"ml-2 text-xs text-amber-600 dark:text-amber-500 font-medium opacity-75",children:["(",r.confidence,")"]})]},i))})]}),t.open_questions&&t.open_questions.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("h4",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-2",children:[g.jsx(Rj,{className:"w-3 h-3"})," Open Questions"]}),g.jsx("ul",{className:"space-y-1",children:t.open_questions.map((r,i)=>g.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-start gap-2",children:[g.jsx("span",{className:"text-slate-400 mt-1.5",children:""}),r]},i))})]}),t.established_facts&&t.established_facts.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("h4",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-2",children:[g.jsx(hf,{className:"w-3 h-3"})," Validated Facts"]}),g.jsx("ul",{className:"space-y-1",children:t.established_facts.map((r,i)=>g.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-start gap-2",children:[g.jsx(hf,{className:"w-3 h-3 text-green-500 mt-0.5 flex-shrink-0"}),g.jsxs("span",{children:[r.text,g.jsxs("span",{className:"ml-1 text-xs text-slate-400",children:["[",r.source,"]"]})]})]},i))})]})]})]})})},_ce=({userId:t,onBack:e})=>{var H,J,q,F,z,R,$,Z,pe,ge,Q,Ee;const[n,r]=A.useState([]),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,d]=A.useState(null),[f,p]=A.useState(null),[m,y]=A.useState(new Set),[v,C]=A.useState(new Set),[E,S]=A.useState(null),[_,N]=A.useState("AUTO"),[k,O]=A.useState({}),I=A.useRef(null),M=A.useRef(null);A.useEffect(()=>{var ie;(ie=I.current)==null||ie.scrollIntoView({behavior:"smooth"})},[n]),A.useEffect(()=>{var ie;(ie=M.current)==null||ie.focus()},[]);const L=async()=>{var K;if(!i.trim()||s)return;if(!t||t.includes("@")){p("Authentication error. Please refresh the page.");return}const ie={id:Date.now(),role:"user",content:i.trim(),timestamp:new Date().toISOString()};r(oe=>[...oe,ie]),a(""),o(!0),p(null);try{const oe=await DQ(ie.content,t,c,"EXPLORER",null,20,_);oe.session_id&&d(oe.session_id),oe.conversation_state&&O(oe.conversation_state);const ke={id:Date.now()+1,role:"assistant",content:oe.answer||"",sources:oe.sources||[],thinkingHistory:oe.thinking_history||[],timestamp:oe.timestamp||new Date().toISOString()};r(Oe=>[...Oe,ke])}catch(oe){p(oe instanceof Error?oe.message:"Failed to send message")}finally{o(!1),(K=M.current)==null||K.focus()}},B=ie=>{ie.key==="Enter"&&!ie.shiftKey&&(ie.preventDefault(),L())},le=ie=>{C(K=>{const oe=new Set(K);return oe.has(ie)?oe.delete(ie):oe.add(ie),oe})},ae=ie=>{y(K=>{const oe=new Set(K);return oe.has(ie)?oe.delete(ie):oe.add(ie),oe})},fe=()=>{var ie;r([]),d(null),p(null),O({}),(ie=M.current)==null||ie.focus()},W=ie=>ie.replace(/\[DNCE SREC\][\s\S]*?\[\/DNCE SREC\]/,"").replace(/## AAMA 0:[\s\S]*?(?=##)/,"").trim(),de=(ie,K,oe)=>K?ie.split(/(\[ID: \d+\])/g).map((Oe,Ue)=>{const Ke=Oe.match(/\[ID: (\d+)\]/);if(Ke){const mt=parseInt(Ke[1]);if(K.find(je=>je.id===mt))return g.jsx("button",{onMouseEnter:je=>{const Je=je.currentTarget.getBoundingClientRect();S({id:mt,messageId:oe||0,x:Je.left,y:Je.top-10})},onMouseLeave:()=>S(null),className:"inline-flex items-center justify-center w-5 h-5 mx-0.5 text-[10px] font-bold bg-[#CC561E]/10 dark:bg-[#CC561E]/20 text-[#CC561E] dark:text-[#f3a47b] rounded-md border border-[#CC561E]/20 dark:border-[#CC561E]/30 hover:bg-[#CC561E] hover:text-white transition-all transform hover:-translate-y-0.5 cursor-help",children:mt},Ue)}return Oe}):ie,xe=(ie,K,oe)=>{const ke=W(ie);let Oe=!1;return ke.split(`
`).map((Ue,Ke)=>{const mt=Ue.trim();if(mt.toLowerCase().includes("keif nerileri")||mt.toLowerCase().includes("exploration paths"))return Oe=!0,g.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 mt-6 mb-3 flex items-center gap-2",children:[g.jsx(x5,{className:"w-4 h-4 text-[#CC561E]"}),mt]},Ke);if(mt.startsWith("## ")||mt.startsWith("### ")&&!Oe)return g.jsx("h3",{className:"text-base font-bold text-[#CC561E] dark:text-[#f3a47b] mt-5 mb-2",children:mt.replace(/^#+\s+/,"")},Ke);if(mt==="")return g.jsx("div",{className:"h-2"},Ke);if(Oe&&(mt.startsWith("-")||mt.startsWith("")||/^\d+\./.test(mt))){const $t=mt.replace(/^[-\d.]+\s+/,"");return g.jsx("div",{onClick:()=>{s||a($t)},className:"ml-2 mb-2 p-3 bg-white dark:bg-slate-800/50 border border-[#CC561E]/10 dark:border-[#CC561E]/20 rounded-xl shadow-sm hover:shadow-md hover:border-[#CC561E]/40 dark:hover:border-[#CC561E]/60 transition-all cursor-pointer group active:scale-[0.98]",children:g.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-200 flex items-center gap-3",children:[g.jsxs("span",{className:"w-6 h-6 flex-shrink-0 bg-[#CC561E]/10 dark:bg-[#CC561E]/20 rounded-full flex items-center justify-center text-[10px] font-bold text-[#CC561E] group-hover:bg-[#CC561E] group-hover:text-white transition-colors",children:[Ke-10," "]}),$t]})},Ke)}else return g.jsx("p",{className:`text-sm leading-relaxed mb-2 ${Oe?"text-slate-500 dark:text-slate-400 italic":"text-slate-700 dark:text-slate-300"}`,children:de(Ue,K,oe)},Ke)})};return g.jsx("div",{className:"flex h-[calc(100vh-120px)] w-full gap-4",children:g.jsxs("div",{className:"flex flex-col flex-1 min-w-0 bg-white dark:bg-slate-900 rounded-xl shadow-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 rounded-t-xl",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-[#CC561E]/10 dark:bg-[#CC561E]/20 rounded-lg",children:g.jsx(Mv,{className:"w-5 h-5 text-[#CC561E] dark:text-[#f3a47b]"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-semibold text-slate-900 dark:text-white",children:"Explorer Mode"}),g.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:c?`Session #${c}  ${n.length} messages`:"New conversation"})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-lg border border-slate-200 dark:border-slate-700 text-xs text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-800",children:[g.jsx("input",{type:"checkbox",checked:_==="BOOK_FIRST",onChange:ie=>N(ie.target.checked?"BOOK_FIRST":"AUTO"),className:"w-3.5 h-3.5 rounded border-slate-300 text-[#CC561E] focus:ring-[#CC561E]/40","aria-label":"Bu kitapla snrla"}),"Bu kitapla snrla"]}),g.jsxs("button",{onClick:fe,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Start new conversation",children:[g.jsx(w5,{className:"w-4 h-4"}),"New"]}),e&&g.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Back"})]})]}),g.jsx(Ace,{state:k}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-900",children:[n.length===0&&!s&&g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[g.jsx("div",{className:"p-4 bg-[#CC561E]/10 dark:bg-[#CC561E]/20 rounded-full mb-4",children:g.jsx(_l,{className:"w-8 h-8 text-[#CC561E] dark:text-[#f3a47b]"})}),g.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"Explorer Mode"}),g.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-md",children:"Ask deep, philosophical questions. I'll analyze your notes dialectically, identify gaps, and expand with general knowledge when needed."}),g.jsx("div",{className:"mt-6 space-y-2",children:["What is the relationship between consciousness and reality?","How do different philosophers define virtue?","Analyze the concept of free will in my notes"].map((ie,K)=>g.jsx("button",{onClick:()=>a(ie),className:"block w-full text-left px-4 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm text-slate-600 dark:text-slate-300 hover:bg-[#CC561E]/5 dark:hover:bg-[#CC561E]/10 transition-colors",children:ie},K))})]}),n.map(ie=>g.jsxs("div",{className:`flex gap-3 ${ie.role==="user"?"justify-end":"justify-start"}`,children:[ie.role==="assistant"&&g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[#CC561E]/10 dark:bg-[#CC561E]/20 flex items-center justify-center",children:g.jsx(S3,{className:"w-4 h-4 text-[#CC561E] dark:text-[#f3a47b]"})}),g.jsxs("div",{className:`max-w-[80%] ${ie.role==="user"?"order-first":""}`,children:[ie.role==="assistant"&&ie.thinkingHistory&&ie.thinkingHistory.length>0&&g.jsxs("div",{className:"mb-2",children:[g.jsxs("button",{onClick:()=>le(ie.id),className:"flex items-center gap-2 text-[10px] uppercase font-bold tracking-wider text-slate-400 hover:text-[#CC561E] transition-colors",children:[g.jsx(p5,{className:"w-3 h-3"}),v.has(ie.id)?"Hide Reflection":"Show Reflection",g.jsxs("span",{className:"opacity-50",children:[" ",ie.thinkingHistory.length," Iterations"]})]}),v.has(ie.id)&&g.jsx("div",{className:"mt-2 mb-3 space-y-3 bg-slate-100/50 dark:bg-slate-800/50 p-3 rounded-xl border border-dashed border-slate-200 dark:border-slate-700 animate-fade-in",children:ie.thinkingHistory.map((K,oe)=>g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${K.evaluation.verdict==="PASSED"?"bg-green-500":K.evaluation.verdict==="DECLINE"?"bg-red-500":"bg-amber-500"}`}),g.jsxs("span",{className:"text-[10px] font-bold text-slate-500",children:["STEP ",K.attempt,": ",K.evaluation.verdict]})]}),g.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[g.jsx(aP,{className:"w-2.5 h-2.5"}),(K.latency/1e3).toFixed(1),"s"]})]}),g.jsx("div",{className:"h-1 w-full bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full transition-all duration-1000 ${K.evaluation.overall_score>.7?"bg-green-500":K.evaluation.overall_score>.4?"bg-amber-500":"bg-red-500"}`,style:{width:`${K.evaluation.overall_score*100}%`}})}),g.jsx("p",{className:"text-[11px] text-slate-600 dark:text-slate-400 leading-snug",children:K.evaluation.explanation})]},oe))})]}),g.jsx("div",{className:`rounded-2xl px-4 py-3 ${ie.role==="user"?"bg-[#CC561E] text-white rounded-br-md shadow-lg shadow-[#CC561E]/20":"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-bl-md"}`,children:ie.role==="user"?g.jsx("p",{className:"text-sm",children:ie.content}):g.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:xe(ie.content,ie.sources,ie.id)})}),ie.role==="assistant"&&ie.sources&&ie.sources.length>0&&g.jsxs("div",{className:"mt-2",children:[g.jsxs("button",{onClick:()=>ae(ie.id),className:"flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 hover:text-[#CC561E] dark:hover:text-[#f3a47b] transition-colors",children:[m.has(ie.id)?g.jsx(g5,{className:"w-3 h-3"}):g.jsx(xl,{className:"w-3 h-3"}),ie.sources.length," sources"]}),m.has(ie.id)&&g.jsx("div",{className:"mt-2 space-y-1 pl-2 border-l-2 border-[#CC561E]/30 dark:border-[#CC561E]/50",children:ie.sources.map((K,oe)=>g.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 py-1 transition-colors hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded px-1",children:[g.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 mr-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded text-[9px] font-bold",children:K.id||oe+1}),g.jsx("span",{className:"font-medium",children:K.title}),g.jsxs("span",{className:"ml-2 text-slate-400 text-[10px]",children:["p.",K.page_number]})]},oe))})]})]}),ie.role==="user"&&g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[#CC561E] flex items-center justify-center",children:g.jsx(wb,{className:"w-4 h-4 text-white"})})]},ie.id)),E&&g.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:E.x,top:E.y-120},children:g.jsxs("div",{className:"w-64 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-2xl p-4 animate-in fade-in zoom-in duration-200 origin-bottom",children:[(J=(H=n.find(ie=>ie.id===E.messageId))==null?void 0:H.sources)!=null&&J.find(ie=>ie.id===E.id)?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2 text-[#CC561E]",children:[g.jsx(pf,{className:"w-3 h-3"}),g.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Source Snippet"})]}),g.jsxs("p",{className:"text-[11px] text-slate-600 dark:text-slate-300 leading-relaxed italic mb-3",children:['"...',(R=(z=(F=(q=n.find(ie=>ie.id===E.messageId))==null?void 0:q.sources)==null?void 0:F.find(ie=>ie.id===E.id))==null?void 0:z.content)==null?void 0:R.slice(0,200),'..."']}),g.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 dark:border-slate-700 pt-2 text-[10px] text-slate-400",children:[g.jsx("span",{className:"font-medium truncate max-w-[120px]",children:(pe=(Z=($=n.find(ie=>ie.id===E.messageId))==null?void 0:$.sources)==null?void 0:Z.find(ie=>ie.id===E.id))==null?void 0:pe.title}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(G1,{className:"w-2.5 h-2.5"}),"p.",(Ee=(Q=(ge=n.find(ie=>ie.id===E.messageId))==null?void 0:ge.sources)==null?void 0:Q.find(ie=>ie.id===E.id))==null?void 0:Ee.page_number]})]})]}):g.jsx("p",{className:"text-xs text-slate-400",children:"Loading source info..."}),g.jsx("div",{className:"absolute -bottom-1 left-4 w-2 h-2 bg-white dark:bg-slate-800 border-r border-b border-slate-200 dark:border-slate-700 rotate-45"})]})}),s&&g.jsxs("div",{className:"flex gap-3",children:[g.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[#CC561E]/10 dark:bg-[#CC561E]/20 flex items-center justify-center",children:g.jsx(S3,{className:"w-4 h-4 text-[#CC561E] dark:text-[#f3a47b]"})}),g.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl rounded-bl-md px-4 py-3",children:g.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[g.jsx(In,{className:"w-4 h-4 animate-spin"}),"Analyzing deeply..."]})})]}),f&&g.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-700 dark:text-red-300",children:f}),g.jsx("div",{ref:I})]}),g.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 rounded-b-xl",children:g.jsxs("div",{className:"flex gap-3",children:[g.jsx("input",{ref:M,type:"text",value:i,onChange:ie=>a(ie.target.value),onKeyPress:B,placeholder:"Ask a deep question...",disabled:s,className:"flex-1 px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[#CC561E] focus:border-transparent disabled:opacity-50"}),g.jsx("button",{onClick:L,disabled:!i.trim()||s,className:"px-4 py-3 bg-[#CC561E] hover:bg-[#b34b1a] disabled:bg-slate-300 dark:disabled:bg-slate-800 disabled:text-slate-500 dark:disabled:text-slate-500 disabled:opacity-50 text-white rounded-xl transition-all shadow-lg shadow-[#CC561E]/20 flex items-center gap-2",children:s?g.jsx(In,{className:"w-5 h-5 animate-spin"}):g.jsx(aB,{className:"w-5 h-5"})})]})})]})})},Tce=({userId:t,userEmail:e,onBack:n,books:r=[]})=>{var ae,fe,W,de;const[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,d]=A.useState(null),[f,p]=A.useState(null),[m,y]=A.useState("none"),[v,C]=A.useState(!1),[E,S]=A.useState("STANDARD"),[_,N]=A.useState(""),[k,O]=A.useState(!1);if(E==="EXPLORER")return g.jsxs("div",{className:"max-w-[1100px] w-full mx-auto p-6 animate-fade-in space-y-4",children:[g.jsx("div",{className:"flex justify-start",children:g.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-slate-500 hover:text-[#CC561E] transition-all duration-300",children:[g.jsx("div",{className:"p-1.5 rounded-lg bg-[#F3F5FA] dark:bg-slate-800 group-hover:bg-[rgba(204,86,30,0.1)] transition-colors",children:g.jsx(Co,{size:16})}),g.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Back"})]})}),g.jsx("div",{className:"flex justify-center mb-2 md:mb-4",children:g.jsxs("div",{className:"bg-[#F3F5FA] dark:bg-slate-800 p-0.5 md:p-1 rounded-lg inline-flex items-center",children:[g.jsx("button",{type:"button",onClick:()=>S("STANDARD"),className:"px-4 py-2 rounded-md text-sm font-medium transition-all text-slate-500 hover:text-slate-700 dark:text-slate-400",children:"Standard"}),g.jsxs("button",{type:"button",className:"px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 bg-white dark:bg-slate-700 text-[#CC561E] shadow-sm",children:[g.jsx(Mv,{className:"w-4 h-4 text-[#CC561E]"})," Explorer"]})]})}),g.jsx(_ce,{userId:t,onBack:()=>S("STANDARD")})]});const I=async xe=>{if(xe.preventDefault(),!i.trim()){p("Please enter a question");return}if(!t||t.includes("@")){p("Authentication is still loading. Please wait a moment and try again.");return}o(!0),p(null),d(null),y("none");try{const H=await MQ(i,t,"STANDARD");d(H),N(i)}catch(H){p(zc(H))}finally{o(!1)}},M=async xe=>{var H;if(!(!c||v)){C(!0);try{await RQ({firebase_uid:t,query:_||i,answer:c.answer,rating:xe,search_log_id:(H=c.metadata)==null?void 0:H.search_log_id}),y(xe===1?"liked":"disliked")}catch(J){console.error("Feedback failed:",J)}finally{C(!1)}}},L=(c==null?void 0:c.answer)||"",B=Array.from(L.matchAll(/<think>([\s\S]*?)<\/think>/gi)).map(xe=>(xe[1]||"").trim()).filter(Boolean).join(`

`),le=L.replace(/<think>[\s\S]*?<\/think>/gi,"").replace(/## AAMA 0:[\s\S]*?(?=##|$)/i,"").trim();return g.jsxs("div",{className:`max-w-[1100px] w-full mx-auto p-3 md:p-6 flex flex-col transition-all duration-1000 ease-in-out ${c?"space-y-6 md:space-y-8":"min-h-[70vh]"}`,children:[g.jsxs("div",{className:"relative flex flex-row items-center justify-between w-full h-10 md:h-12 mb-2 md:mb-6",children:[g.jsx("div",{className:"flex items-center gap-3 md:gap-5 z-10",children:g.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-[#CC561E] transition-all duration-300",children:[g.jsx("div",{className:"p-1.5 rounded-lg bg-[#F3F5FA] dark:bg-slate-800 group-hover:bg-[rgba(204,86,30,0.1)] transition-colors",children:g.jsx(Co,{size:16})}),g.jsx("span",{className:"text-xs font-bold uppercase tracking-wider hidden sm:inline",children:"Back"})]})}),c&&g.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-2 md:gap-3 transition-all duration-500 origin-center animate-in fade-in zoom-in-95",children:[g.jsx("div",{className:"p-1.5 md:p-2 bg-[rgba(204,86,30,0.1)] dark:bg-[rgba(204,86,30,0.2)] rounded-2xl shrink-0 scale-75",children:g.jsx(O0,{className:"w-5 h-5 md:w-8 md:h-8"})}),g.jsx("h1",{className:"font-extrabold bg-gradient-to-r from-[#CC561E] to-[#e66a2e] bg-clip-text text-transparent tracking-tight text-xl md:text-2xl",children:"LogosChat"})]}),g.jsxs("div",{className:"bg-[#F3F5FA] dark:bg-slate-800 p-0.5 md:p-1 rounded-lg inline-flex items-center z-10",children:[g.jsx("button",{type:"button",className:"px-3 md:px-4 py-1.5 md:py-2 rounded-md text-xs md:text-sm font-medium transition-all bg-white dark:bg-slate-700 text-[#CC561E] shadow-sm",children:"Standard"}),g.jsxs("button",{type:"button",onClick:()=>S("EXPLORER"),className:"px-3 md:px-4 py-1.5 md:py-2 rounded-md text-xs md:text-sm font-medium transition-all flex items-center gap-1.5 md:gap-2 text-slate-500 hover:text-slate-700 dark:text-slate-400",children:[g.jsx(Mv,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})," Explorer"]})]})]}),g.jsxs("div",{className:`flex-1 flex flex-col relative transition-all duration-700 ${c?"pt-4 md:pt-6":"justify-center items-center"}`,children:[!c&&!s&&g.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl h-full pointer-events-none -z-10 animate-fade-in",children:[g.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] md:w-[600px] h-[300px] md:h-[600px] bg-[#CC561E]/5 dark:bg-[#CC561E]/10 rounded-full blur-[80px] md:blur-[120px]"}),g.jsx("div",{className:"absolute top-1/3 left-1/4 w-[200px] h-[200px] bg-blue-500/5 dark:bg-blue-500/5 rounded-full blur-[100px]"})]}),g.jsxs("form",{onSubmit:I,className:`space-y-4 md:space-y-6 w-full transition-all duration-1000 ease-in-out ${c?"max-w-none":"max-w-2xl text-center"}`,children:[!c&&!s&&g.jsxs("div",{className:"mb-6 md:mb-10 space-y-4 animate-slide-up",children:[g.jsxs("div",{className:"flex items-center justify-center gap-3",children:[g.jsx("div",{className:"p-1.5 md:p-2 bg-[rgba(204,86,30,0.1)] dark:bg-[rgba(204,86,30,0.2)] rounded-xl shrink-0",children:g.jsx(G5,{className:"w-5 h-5 md:w-8 md:h-8"})}),g.jsxs("h1",{className:"text-2xl md:text-4xl font-black text-slate-900 dark:text-white tracking-tight",children:["Logos",g.jsx("span",{className:"text-[#CC561E]",children:"Chat"})]})]}),g.jsx("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400 max-w-lg mx-auto leading-relaxed",children:"Analyze your library with intelligence. Ask anything."})]}),g.jsxs("div",{className:"relative group flex items-center",children:[g.jsxs("div",{className:"relative flex-1 group",children:[g.jsx(ms,{className:"absolute left-4 md:left-5 top-1/2 -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-slate-400 group-focus-within:text-[#CC561E] transition-colors"}),g.jsx("input",{type:"text",value:i,onChange:xe=>a(xe.target.value),placeholder:"Type your question here...",className:"w-full pl-11 md:pl-14 pr-4 md:pr-6 py-3.5 md:py-5 rounded-2xl border border-[#E6EAF2] dark:border-slate-700 bg-white dark:bg-slate-800 text-base md:text-lg text-slate-900 dark:text-white shadow-sm focus:shadow-xl focus:shadow-[#CC561E]/5 focus:outline-none focus:ring-2 focus:ring-[#CC561E]/50 transition-all placeholder:text-slate-400",disabled:s})]}),g.jsx("button",{type:"submit",disabled:s||!i.trim(),className:"ml-2 md:ml-3 p-3.5 md:p-5 rounded-2xl bg-[#CC561E] text-white shadow-lg shadow-[#CC561E]/20 hover:bg-[#b04a1a] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed group/btn",children:s?g.jsx(In,{className:"w-5 h-5 md:w-6 md:h-6 animate-spin"}):g.jsx(ms,{className:"w-5 h-5 md:w-6 md:h-6 group-hover/btn:scale-110 transition-transform"})})]}),g.jsxs("div",{className:`text-[11px] md:text-xs text-slate-500 dark:text-slate-400 ${c?"text-left":"text-center"}`,children:["Tip: ",g.jsx("span",{className:"font-bold text-[#CC561E]",children:"Enter"})," to search. Mention ",g.jsx("span",{className:"font-bold text-[#CC561E]",children:"@book"})," for focus."]})]})]}),f&&g.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-start gap-3",children:[g.jsx(nu,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-red-900 dark:text-red-100",children:"Search Failed"}),g.jsx("p",{className:"text-sm text-red-700 mt-1",children:f})]})]}),c&&g.jsxs("div",{className:"space-y-4 md:space-y-6",children:[g.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-[#E6EAF2] dark:border-slate-700 p-3.5 md:p-6 space-y-3 md:space-y-4",children:[g.jsxs("h2",{className:"text-lg md:text-xl font-semibold text-slate-900 dark:text-white flex items-center gap-1.5 md:gap-2",children:[g.jsx(_l,{className:"w-4 h-4 md:w-5 md:h-5 text-[#CC561E]"}),"Answer"]}),g.jsx("div",{className:"max-w-none",children:le.split(`
`).map((xe,H)=>{const J=xe.trim();return J.startsWith("## ")?g.jsx("h3",{className:"text-base md:text-lg font-bold underline decoration-[#CC561E]/50 underline-offset-4 mt-2.5 md:mt-6 mb-1 md:mb-2.5 text-slate-900 dark:text-white",children:J.replace(/^##\s+/,"")},H):J===""?g.jsx("div",{className:"h-1 md:h-2"},H):g.jsx("p",{className:"text-justify text-[14px] md:text-base leading-[1.55] md:leading-relaxed text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:xe},H)})}),B&&g.jsxs("details",{className:"rounded-lg border border-[#E6EAF2] dark:border-slate-700 bg-[#F8FAFC] dark:bg-slate-900/40",children:[g.jsx("summary",{className:"cursor-pointer select-none px-3 md:px-4 py-2.5 text-xs md:text-sm font-medium text-slate-600 dark:text-slate-300",children:"Internal Notes (Optional)"}),g.jsx("div",{className:"px-3 md:px-4 pb-3 md:pb-4 border-t border-[#E6EAF2] dark:border-slate-700",children:g.jsx("pre",{className:"mt-3 whitespace-pre-wrap break-words text-xs md:text-sm leading-relaxed text-slate-600 dark:text-slate-300 font-sans",children:B})})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2.5 md:gap-4 pt-2.5 md:pt-4 border-t border-[#E6EAF2] dark:border-slate-700",children:[g.jsxs("div",{className:"flex items-center gap-2.5 md:gap-4",children:[g.jsx("span",{className:"text-xs md:text-sm text-slate-500 dark:text-slate-400",children:"Was this answer helpful?"}),g.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[g.jsx("button",{onClick:()=>M(1),disabled:m!=="none"||v,className:`p-1.5 md:p-2 rounded-lg transition-colors ${m==="liked"?"bg-green-100 text-green-600":"text-slate-400 hover:text-green-600"}`,children:g.jsx(TB,{className:"w-4 h-4 md:w-5 md:h-5"})}),g.jsx("button",{onClick:()=>M(0),disabled:m!=="none"||v,className:`p-1.5 md:p-2 rounded-lg transition-colors ${m==="disliked"?"bg-red-100 text-red-600":"text-slate-400 hover:text-red-600"}`,children:g.jsx(AB,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]}),((ae=c.metadata)==null?void 0:ae.status)==="analytic"&&((W=(fe=c.metadata)==null?void 0:fe.analytics)==null?void 0:W.contexts)&&c.metadata.analytics.contexts.length>0&&g.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-1.5 md:gap-2 text-[#CC561E] hover:text-[#b34b1a] font-bold text-xs md:text-sm transition-colors py-1.5 md:py-2 px-2.5 md:px-3 hover:bg-orange-50 dark:hover:bg-orange-900/10 rounded-lg",children:[g.jsx(v5,{size:14,className:"md:w-4 md:h-4"}),"See Contexts"]})]})]}),c.sources&&c.sources.length>0&&g.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-[#E6EAF2] dark:border-slate-700 p-3.5 md:p-6 space-y-3 md:space-y-4",children:[g.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-1.5 md:gap-2",children:[g.jsx(G1,{className:"w-4 h-4 md:w-5 md:h-5 text-[#CC561E]"}),"Sources (",c.sources.length,")"]}),g.jsx("div",{className:"space-y-1.5 md:space-y-2",children:c.sources.map((xe,H)=>g.jsxs("div",{className:"flex items-start gap-2 md:gap-3 p-2 md:p-3 rounded-lg bg-[#F3F5FA] dark:bg-slate-700/50 hover:bg-[#F3F5FA] transition-colors",children:[g.jsx("div",{className:"flex-shrink-0 w-5 h-5 md:w-6 md:h-6 rounded-full bg-[rgba(204,86,30,0.1)] text-[#CC561E] flex items-center justify-center text-xs md:text-sm font-medium",children:H+1}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm md:text-base font-medium text-slate-900 dark:text-white truncate",children:xe.title}),g.jsxs("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400",children:["Page ",xe.page_number]})]})]},H))})]})]}),k&&((de=c==null?void 0:c.metadata)==null?void 0:de.analytics)&&g.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-end",children:[g.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>O(!1)}),g.jsx("div",{className:"relative w-full max-w-2xl h-full bg-white dark:bg-gray-900 shadow-2xl flex flex-col",children:g.jsx(AD,{term:c.metadata.analytics.term,bookId:c.metadata.analytics.resolved_book_id,initialContexts:c.metadata.analytics.contexts,firebaseUid:t,onClose:()=>O(!1)})})]})]})},oh=async()=>{const e=zw().currentUser;if(!e)throw new Error("User must be logged in to use Knowledge Stream");return await e.getIdToken()},Nce=12e4,df=new Map,Nv=new Map,lI=t=>{const e=t.anchor_type||"note",n=t.anchor_id||"",r=t.mode||"FOCUS",i=Number(t.horizon_value??.25).toFixed(2),a=(t.resource_type||"").toUpperCase(),s=(t.category||"").toUpperCase();return[t.firebase_uid,e,n,r,i,a,s].join("|")},cI=t=>t?Date.now()-t.createdAt<=Nce:!1;async function kce(t){const e=lI(t),n=df.get(e);if(cI(n))return;const r=Nv.get(e);if(r){await r;return}const i=(async()=>{const a=await uI(t);return df.set(e,{response:a,createdAt:Date.now()}),a})();Nv.set(e,i);try{await i}finally{Nv.delete(e)}}function Oce(t){const e=lI(t),n=df.get(e);return cI(n)?(df.delete(e),n.response):(df.delete(e),null)}async function uI(t){if(!t.firebase_uid)throw new Error("User must be authenticated");const e=await oh(),n=await fetch(`${dt}/api/flow/start`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to start flow session")}return n.json()}async function kv(t){const e=await oh(),n=await fetch(`${dt}/api/flow/next`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to get next batch")}return n.json()}async function Mce(t){const e=await oh(),n=await fetch(`${dt}/api/flow/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to send feedback")}return n.json()}async function Dce(t,e,n){const r=await oh(),i=await fetch(`${dt}/api/flow/adjust`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({session_id:t,horizon_value:e,firebase_uid:n})});if(!i.ok){const a=await i.json();throw new Error(a.detail||"Failed to adjust horizon")}return i.json()}async function Gk(t,e,n,r,i,a){const s=await oh(),o=await fetch(`${dt}/api/flow/reset-anchor`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({session_id:t,anchor_type:e,anchor_id:n,firebase_uid:r,resource_type:i,category:a})});if(!o.ok){const c=await o.json();throw new Error(c.detail||"Failed to reset anchor")}return o.json()}const Wk={1:{color:"#CC561E",label:"Tight Context",icon:""},2:{color:"#e66a2e",label:"Author's Mind",icon:""},3:{color:"#b34b1a",label:"Syntopic Debate",icon:""},4:{color:"#CC561E",label:"Keif Kprs",icon:""}},Rce=({card:t,sessionId:e,firebaseUid:n,onFeedback:r})=>{const[i,a]=A.useState(!1),[s,o]=A.useState(null),c=Wk[t.zone]||Wk[1],d=async f=>{try{await Mce({firebase_uid:n,session_id:e,chunk_id:t.chunk_id,action:f}),o(f),r==null||r(f)}catch(p){console.error("Feedback failed:",p)}};return g.jsxs("div",{className:"flow-card",style:{"--zone-color":c.color},children:[g.jsxs("div",{className:"flow-card__top-bar",children:[g.jsxs("div",{className:"flow-card__zone-indicator",children:[g.jsx("span",{className:"zone-dot",style:{backgroundColor:c.color}}),g.jsx("span",{className:"zone-label",children:c.label})]}),t.page_number!==void 0&&t.page_number!==null&&t.page_number>0&&g.jsxs("div",{className:"flow-card__meta-item",children:[g.jsx("span",{className:"text-slate-500 mr-1.5 opacity-50",children:"#"}),g.jsxs("span",{children:["Page ",t.page_number]})]})]}),g.jsxs("div",{className:"flow-card__header",children:[g.jsx("h3",{className:"flow-card__title",children:t.title}),t.author&&g.jsxs("div",{className:"flow-card__author-pill",children:[g.jsx("span",{className:"opacity-60 italic",children:"by"})," ",t.author]})]}),g.jsx("div",{className:`flow-card__content ${i?"expanded":""}`,children:g.jsx("p",{children:t.content})}),g.jsxs("div",{className:"flow-card__footer",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"flow-card__feedback",children:[g.jsx("button",{className:`feedback-btn ${s==="like"?"active like":""}`,onClick:()=>d("like"),disabled:!!s,title:"Relevant",children:g.jsx("span",{className:"btn-icon",children:""})}),g.jsx("button",{className:`feedback-btn ${s==="dislike"?"active dislike":""}`,onClick:()=>d("dislike"),disabled:!!s,title:"Not relevant",children:g.jsx("span",{className:"btn-icon",children:""})}),g.jsx("button",{className:`feedback-btn ${s==="save"?"active save":""}`,onClick:()=>d("save"),disabled:!!s,title:"Keep in Library",children:g.jsx("span",{className:"btn-icon",children:""})})]}),t.reason&&g.jsx("div",{className:"flow-card__footer-reason",children:t.reason})]}),g.jsx("button",{className:`expand-toggle ${i?"is-expanded":""}`,onClick:()=>a(!i),children:i?"Collapse":"Read More"})]}),g.jsx("style",{children:`
                .flow-card {
                    background: #ffffff;
                    border: 1px solid #E6EAF2;
                    border-left: 3px solid var(--zone-color);
                    border-radius: 20px;
                    padding: 20px;
                    margin-bottom: 12px;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    position: relative;
                    overflow: hidden;
                }

                @media (max-width: 768px) {
                    .flow-card {
                        padding: 16px;
                        margin-bottom: 8px;
                        border-radius: 16px;
                    }
                }

                @media (min-width: 769px) {
                    .flow-card {
                            margin-bottom: 10px;
                    }
                }
                
                .dark .flow-card {
                    background: rgba(15, 23, 42, 0.5);
                    border-color: rgba(255, 255, 255, 0.1);
                }

                .flow-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    right: 0;
                    width: 150px;
                    height: 150px;
                    background: radial-gradient(circle at top right, var(--zone-color), transparent 70%);
                    opacity: 0.04;
                    pointer-events: none;
                }

                .flow-card:hover {
                    background: #ffffff;
                    border-color: #DDE2ED;
                    transform: translateY(-2px);
                    box-shadow: 0 12px 40px rgba(15, 23, 42, 0.08);
                }

                .dark .flow-card:hover {
                    background: rgba(15, 23, 42, 0.7);
                    border-color: rgba(204, 86, 30, 0.3);
                    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
                }

                .flow-card__top-bar {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 16px;
                }

                .flow-card__zone-indicator {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }

                .zone-dot {
                    width: 8px;
                    height: 8px;
                    border-radius: 50%;
                    box-shadow: 0 0 10px var(--zone-color);
                }

                .zone-label {
                    font-size: 11px;
                    font-weight: 700;
                    letter-spacing: 0.05em;
                    text-transform: uppercase;
                    color: var(--zone-color);
                    opacity: 0.9;
                }

                @media (max-width: 768px) {
                    .zone-label {
                        font-size: 9px;
                    }
                }

                .flow-card__meta-item {
                    font-size: 12px;
                    font-weight: 600;
                    color: #64748b;
                }

                @media (max-width: 768px) {
                    .flow-card__meta-item {
                        font-size: 10px;
                    }
                }

                .flow-card__header {
                    margin-bottom: 12px;
                }

                .flow-card__title {
                    font-family: 'Outfit', 'Inter', sans-serif;
                    font-size: 17px;
                    font-weight: 700;
                    color: #1e293b;
                    line-height: 1.3;
                    margin: 0 0 8px 0;
                }

                @media (max-width: 768px) {
                    .flow-card__title {
                        font-size: 15px;
                    }
                }

                .dark .flow-card__title {
                    color: #f1f5f9;
                }

                .flow-card__author-pill {
                    display: inline-flex;
                    align-items: center;
                    gap: 6px;
                    padding: 4px 12px;
                    background: #F3F5FA;
                    border: 1px solid #E6EAF2;
                    border-radius: 100px;
                    font-size: 12px;
                    color: #475569;
                    font-weight: 500;
                }

                .dark .flow-card__author-pill {
                    background: rgba(255, 255, 255, 0.05);
                    border-color: rgba(255, 255, 255, 0.1);
                    color: #94a3b8;
                }

                .flow-card__content {
                    color: #475569;
                    font-size: 15px;
                    line-height: 1.7;
                    max-height: 120px;
                    overflow: hidden;
                    position: relative;
                    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                }

                .dark .flow-card__content {
                    color: #94a3b8;
                }

                .flow-card__content:not(.expanded)::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    height: 60px;
                    background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.95));
                    pointer-events: none;
                }

                .dark .flow-card__content:not(.expanded)::after {
                    background: linear-gradient(to bottom, transparent, rgba(15, 23, 42, 0.9));
                }

                .flow-card__content.expanded {
                    max-height: 2000px;
                    color: #111827;
                }

                .dark .flow-card__content.expanded {
                    color: #f1f5f9;
                }

                .flow-card__footer-reason {
                    font-size: 12px;
                    line-height: 1.5;
                    color: rgba(204, 86, 30, 0.7);
                    font-weight: 600;
                    font-style: italic;
                    letter-spacing: 0.02em;
                }

                @media (max-width: 768px) {
                    .flow-card__footer-reason {
                        font-size: 10px;
                    }
                }

                .flow-card__footer {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-top: 16px;
                    padding-top: 14px;
                    border-top: 1px solid #E6EAF2;
                }

                .dark .flow-card__footer {
                    border-top-color: rgba(255, 255, 255, 0.1);
                }

                .flow-card__feedback {
                    display: flex;
                    gap: 8px;
                }

                .feedback-btn {
                    width: 38px;
                    height: 38px;
                    border-radius: 10px;
                    border: 1px solid #E6EAF2;
                    background: #ffffff;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    color: #64748b;
                }

                .dark .feedback-btn {
                    background: rgba(255, 255, 255, 0.05);
                    border-color: rgba(255, 255, 255, 0.1);
                    color: #94a3b8;
                }

                .feedback-btn:hover:not(:disabled) {
                    background: #F3F5FA;
                    border-color: #DDE2ED;
                    transform: translateY(-2px);
                    color: #1e293b;
                }

                .dark .feedback-btn:hover:not(:disabled) {
                    background: rgba(255, 255, 255, 0.1);
                    border-color: rgba(204, 86, 30, 0.4);
                    color: #f1f5f9;
                }

                .feedback-btn.active.like { background: rgba(34, 197, 94, 0.1); color: #22c55e; border-color: rgba(34, 197, 94, 0.2); }
                .feedback-btn.active.dislike { background: rgba(239, 68, 68, 0.1); color: #ef4444; border-color: rgba(239, 68, 68, 0.2); }
                .feedback-btn.active.save { background: rgba(204, 86, 30, 0.1); color: #CC561E; border-color: rgba(204, 86, 30, 0.2); }

                .expand-toggle {
                    background: transparent;
                    border: none;
                    color: #CC561E;
                    font-size: 13px;
                    font-weight: 700;
                    cursor: pointer;
                    padding: 8px 16px;
                    border-radius: 8px;
                    transition: all 0.2s ease;
                }

                @media (max-width: 768px) {
                    .expand-toggle {
                        font-size: 11px;
                        padding: 6px 12px;
                    }
                }

                .expand-toggle:hover {
                    background: rgba(204, 86, 30, 0.1);
                    transform: translateX(4px);
                }
            `})]})},Ice=[{label:" Focus",description:"Deep context & related works"},{label:" Syntopic",description:"Similar ideas across different authors"},{label:" Discovery",description:"Unexpected connections & serendipity"}],Lce=({value:t,onChange:e,disabled:n=!1})=>{const i=(a=>a<.33?0:a<.66?1:2)(t);return g.jsxs("div",{className:"horizon-slider",children:[g.jsxs("div",{className:"horizon-slider__header",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"horizon-slider__title",children:"Epistemic Horizon"}),g.jsx("span",{className:"text-[10px] text-card-foreground/70 font-medium tracking-tight",children:"Search Breadth Control"})]}),g.jsxs("div",{className:"horizon-slider__value-badge",children:[Math.round(t*100),"%"]})]}),g.jsxs("div",{className:"horizon-slider__track-container",children:[g.jsx("input",{type:"range",min:"0",max:"100",value:t*100,onChange:a=>e(parseInt(a.target.value)/100),disabled:n,className:"horizon-slider__input"}),g.jsx("div",{className:"horizon-slider__progress",style:{width:`${t*100}%`}})]}),g.jsx("div",{className:"horizon-slider__zones",children:Ice.map((a,s)=>{const o=s===i,c=a.label.split(" ")[0],d=a.label.split(" ")[1];return g.jsxs("div",{className:`horizon-slider__zone ${o?"active":""}`,onClick:()=>e(s*.333+.165),children:[g.jsx("span",{className:"zone-emoji",children:c}),g.jsx("span",{className:"zone-text",children:d}),o&&g.jsx("div",{className:"active-indicator"})]},s)})}),g.jsx("style",{children:`
                .horizon-slider {
                    background: hsl(var(--card));
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 12px;
                    padding: 12px;
                }

                .horizon-slider__header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 12px;
                }

                .horizon-slider__title {
                    font-size: 11px;
                    font-weight: 700;
                    text-transform: uppercase;
                    letter-spacing: 0.1em;
                    color: hsl(var(--card-foreground));
                    opacity: 0.8;
                    font-family: 'Outfit', sans-serif;
                }

                .horizon-slider__value-badge {
                    padding: 2px 8px;
                    background: rgba(204, 86, 30, 0.1);
                    color: #CC561E;
                    font-size: 11px;
                    font-weight: 800;
                    border-radius: 6px;
                    font-family: 'JetBrains Mono', monospace;
                }

                .horizon-slider__track-container {
                    position: relative;
                    height: 4px;
                    background: rgba(255, 255, 255, 0.08);
                    border-radius: 100px;
                    margin-bottom: 12px;
                    overflow: visible;
                }

                .horizon-slider__input {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    -webkit-appearance: none;
                    appearance: none;
                    background: transparent;
                    cursor: pointer;
                    z-index: 5;
                    margin: 0;
                    padding: 0;
                }

                .horizon-slider__input::-webkit-slider-thumb {
                    -webkit-appearance: none;
                    width: 14px;
                    height: 14px;
                    border-radius: 50%;
                    background: #fff;
                    box-shadow: 0 0 10px rgba(204, 86, 30, 0.5);
                    cursor: grab;
                    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
                    border: 3px solid #CC561E;
                }

                .horizon-slider__input::-webkit-slider-thumb:hover {
                    transform: scale(1.1);
                    box-shadow: 0 0 20px rgba(204, 86, 30, 0.7);
                }

                .horizon-slider__progress {
                    position: absolute;
                    top: 0;
                    left: 0;
                    height: 100%;
                    background: linear-gradient(90deg, #CC561E 0%, #e66a2e 100%);
                    border-radius: 100px;
                    pointer-events: none;
                    z-index: 1;
                }

                .horizon-slider__zones {
                    display: grid;
                    grid-template-columns: repeat(3, 1fr);
                    gap: 2px;
                }

                .horizon-slider__zone {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 2px;
                    padding: 8px 2px;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    position: relative;
                }

                .horizon-slider__zone:hover {
                    background: rgba(255, 255, 255, 0.06);
                }

                .horizon-slider__zone.active {
                    background: rgba(204, 86, 30, 0.08);
                }

                .zone-emoji {
                    font-size: 14px;
                    filter: grayscale(1) opacity(0.55);
                    transition: all 0.3s ease;
                }

                .horizon-slider__zone.active .zone-emoji {
                    filter: grayscale(0) opacity(1);
                    transform: scale(1.1);
                }

                .zone-text {
                    font-size: 9px;
                    font-weight: 700;
                    color: rgba(255, 255, 255, 0.7);
                    text-transform: uppercase;
                    letter-spacing: 0.02em;
                    transition: all 0.3s ease;
                    text-align: center;
                }

                .horizon-slider__zone.active .zone-text {
                    color: rgba(255, 255, 255, 0.95);
                }

                .active-indicator {
                    position: absolute;
                    bottom: 0;
                    width: 3px;
                    height: 3px;
                    background: #CC561E;
                    border-radius: 50%;
                    box-shadow: 0 0 8px #CC561E;
                }
            `})]})},jce=({activeFilter:t,onFilterChange:e})=>{const n=[{id:"ALL",label:"All Notes",icon:vP,color:"text-slate-400",bg:"bg-slate-500/10"},{id:"BOOK",label:"Books",icon:yb,color:"text-slate-400",bg:"bg-slate-500/10"},{id:"ARTICLE",label:"Articles",icon:zf,color:"text-slate-400",bg:"bg-slate-500/10"},{id:"WEBSITE",label:"Websites",icon:W1,color:"text-slate-400",bg:"bg-slate-500/10"},{id:"PERSONAL_NOTE",label:"Personal Notes",icon:ru,color:"text-slate-400",bg:"bg-slate-500/10"}];return g.jsxs("div",{className:"w-full flex flex-col gap-2 p-3 bg-card border border-white/10 rounded-2xl",children:[g.jsxs("h3",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-1 px-1 flex items-center gap-2",children:[g.jsx("span",{className:"w-1 h-1 bg-[#CC561E] rounded-full"}),"Source Navigator"]}),g.jsx("div",{className:"space-y-1",children:n.map(r=>{const i=r.icon,a=t===r.id;return g.jsxs("button",{onClick:()=>e(r.id),className:`w-full flex items-center justify-between px-3 py-2 rounded-xl transition-all duration-300 group relative overflow-hidden border bg-card text-card-foreground ${a?"border-[#CC561E] shadow-[0_0_12px_rgba(204,86,30,0.35)]":"border-white/10 hover:border-white/20 hover:bg-card/90"}`,children:[g.jsxs("div",{className:"flex items-center gap-2.5 relative z-10",children:[g.jsx("div",{className:`p-1.5 rounded-lg transition-all duration-300 ${a?"text-[#CC561E]":"text-card-foreground/70 group-hover:text-card-foreground"}`,children:g.jsx(i,{size:18})}),g.jsx("span",{className:`text-xs font-medium tracking-tight ${a?"text-card-foreground":"text-card-foreground/80 group-hover:text-card-foreground"}`,children:r.label})]}),a&&g.jsx("div",{className:"w-1.5 h-1.5 bg-[#CC561E] rounded-full animate-pulse mr-1"})]},r.id)})})]})},Pce=({firebaseUid:t,anchorType:e,anchorId:n,anchorLabel:r,categoryOptions:i,onClose:a})=>{const[s,o]=A.useState(null),[c,d]=A.useState([]),[f,p]=A.useState(r||"Flux"),[m,y]=A.useState(null),[v,C]=A.useState(.25),[E,S]=A.useState(!1),[_,N]=A.useState(!0),[k,O]=A.useState(null),[I,M]=A.useState(!1),[L,B]=A.useState(!1),[le,ae]=A.useState(!1),[fe,W]=A.useState(null),[de,xe]=A.useState(!1),[H,J]=A.useState("ALL"),q=A.useRef(null);A.useRef(null),A.useRef(null);const F=A.useCallback(Q=>Q==="ALL"?"ALL_NOTES":Q,[]),z=A.useCallback(async(Q,Ee=null,ie=.25)=>{if(t){S(!0),O(null),d([]),N(!0);try{const K=F(Q),oe={firebase_uid:t,anchor_type:e,anchor_id:n,mode:"FOCUS",horizon_value:ie,resource_type:K,category:Ee||void 0},Oe=Oce(oe)??await uI(oe);o(Oe.session_id),d(Oe.initial_cards),p(Oe.topic_label),W(null)}catch(K){O(zc(K))}finally{S(!1)}}},[t,e,n,F]);A.useEffect(()=>{t&&(I||M(!0))},[t,I]),A.useEffect(()=>{I&&z(H,m,v)},[I,H,m,z]);const R=A.useCallback(async()=>{if(!(s===null||E||!_)){S(!0);try{const Q=await kv({firebase_uid:t,session_id:s,batch_size:5});d(Ee=>[...Ee,...Q.cards]),N(Q.has_more),Q.pivot_info&&W(Q.pivot_info)}catch(Q){console.error("Failed to load more:",Q)}finally{S(!1)}}},[s,t,E,_]),$=async Q=>{if(C(Q),!I){M(!0);return}if(s!==null)try{await Dce(s,Q,t)}catch(Ee){console.error("Failed to adjust horizon:",Ee)}},Z=async()=>{if(!I){M(!0);return}if(s!==null){S(!0),xe(!0),O(null),W(null);try{const Q=await Gk(s,"topic","General Discovery",t,F(H),m||void 0);p(Q.topic_label),Q.pivot_info&&W(Q.pivot_info),d([]),N(!0);const Ee=await kv({session_id:s,firebase_uid:t,batch_size:5});d(Ee.cards),N(Ee.has_more),Ee.pivot_info&&W(Ee.pivot_info)}catch(Q){O(zc(Q))}finally{S(!1),xe(!1)}}},pe=Q=>{if(Q!==m){if(y(Q),!I){M(!0);return}s!==null&&(S(!0),Gk(s,"topic","General Discovery",t||"",F(H),Q||void 0).then(Ee=>{d([]),p(Ee.topic_label),W(Ee.pivot_info||null),N(!0),kv({session_id:s,firebase_uid:t,batch_size:5}).then(ie=>{d(ie.cards),N(ie.has_more),ie.pivot_info&&W(ie.pivot_info)}).catch(ie=>{console.error("Failed to load initial batch after category pivot:",ie),O(zc(ie))}).finally(()=>{S(!1)})}).catch(Ee=>{console.error("Failed to pivot category:",Ee),O(zc(Ee)),S(!1)}))}},ge=Q=>{Q!==H&&(J(Q),I||M(!0))};return g.jsxs("div",{className:"flow-container",ref:q,children:[g.jsxs("div",{className:"flow-layout",children:[g.jsxs("aside",{className:"flow-left",children:[a&&g.jsxs("button",{onClick:a,className:"flow-left__back group flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-[#CC561E] transition-all duration-300",children:[g.jsx("div",{className:"p-1.5 rounded-lg bg-slate-100 dark:bg-slate-800 group-hover:bg-[rgba(204,86,30,0.1)] transition-colors",children:g.jsx(Co,{size:16})}),g.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Back"})]}),(H==="ALL"||H==="BOOK")&&g.jsx(q3,{activeCategory:m,onCategoryChange:pe,categories:i})]}),g.jsxs("div",{className:"flow-main",children:[g.jsx("div",{className:"flow-container__header lg:hidden",children:g.jsx("div",{className:"flow-container__title-section",children:g.jsxs("div",{className:"flow-container__mobile-actions relative flex items-center justify-between",children:[g.jsxs("div",{className:"lg:hidden flex items-center gap-2 z-10 w-1/3",children:[a&&g.jsx("button",{onClick:a,className:"flow-mobile-action-btn group flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-[#CC561E] transition-all duration-300","aria-label":"Back",children:g.jsx("div",{className:"p-1.5 rounded-lg bg-slate-100 dark:bg-slate-800 group-hover:bg-[rgba(204,86,30,0.1)] transition-colors",children:g.jsx(Co,{size:16})})}),g.jsxs("button",{onClick:()=>ae(!0),className:"flow-mobile-action-btn group flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-[#CC561E] transition-all duration-300",children:[g.jsx("div",{className:"p-1.5 rounded-lg bg-slate-100 dark:bg-slate-800 group-hover:bg-[rgba(204,86,30,0.1)] transition-colors",children:g.jsx(Hx,{size:16})}),g.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider hidden sm:inline",children:"Explore"})]})]}),g.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none",children:g.jsx("span",{className:"text-[10px] font-extrabold uppercase tracking-[0.2em] text-[#CC561E] bg-[#CC561E]/10 px-3 py-1 rounded-md",children:"FLUX"})}),g.jsx("div",{className:"lg:hidden flex items-center justify-end gap-2 z-10 w-1/3",children:g.jsxs("button",{onClick:()=>B(!0),className:"flow-mobile-action-btn group flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-[#CC561E] transition-all duration-300",children:[g.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider hidden sm:inline",children:"Filters"}),g.jsx("div",{className:"p-1.5 rounded-lg bg-slate-100 dark:bg-slate-800 group-hover:bg-[rgba(204,86,30,0.1)] transition-colors",children:g.jsx(fB,{size:16})})]})})]})})}),I&&k&&g.jsxs("div",{className:"flow-container__error",children:[g.jsxs("p",{children:[" ",k]}),g.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}),I&&fe&&g.jsxs("div",{className:"flow-container__pivot",children:[g.jsx("span",{className:"pivot-icon",children:""}),g.jsx("p",{children:fe.message})]}),g.jsxs("div",{className:"flow-container__cards",children:[I?g.jsxs(g.Fragment,{children:[c.map(Q=>g.jsx(Rce,{card:Q,sessionId:s??"",firebaseUid:t},Q.flow_id)),!E&&!k&&c.length===0&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center px-4",children:[g.jsx("div",{className:"text-6xl mb-6 opacity-80",children:""}),g.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:H==="PERSONAL_NOTE"?"No Personal Notes Found":"Library Empty"}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mx-auto mb-8",children:H==="PERSONAL_NOTE"?"We couldn't find any personal notes or highlights. Try adding some content or switching to 'All Notes'.":"Your knowledge stream is waiting for content. Upload books or add notes to get started."}),g.jsx("button",{onClick:a,className:"px-6 py-2.5 bg-[#CC561E] hover:bg-[#b04a1a] text-white font-medium rounded-lg transition-colors",children:"Go to Dashboard"})]})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center px-4",children:[g.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-3",children:"Flux session not started"}),g.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mx-auto mb-6",children:"Select a filter to begin or click the button below."}),g.jsx("button",{onClick:()=>M(!0),className:"px-6 py-2.5 bg-[#CC561E] hover:bg-[#b04a1a] text-white font-medium rounded-lg transition-colors",children:"Start Flux"})]}),I&&(c.length>0||E)&&g.jsxs("div",{className:"flow-container__load-more py-8 flex justify-center",children:[E?g.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400",children:[g.jsx("div",{className:"w-5 h-5 border-2 border-[#CC561E] border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-sm font-medium",children:de?"Topic is shifting...":"Loading more thoughts..."})]}):_&&g.jsxs("button",{onClick:R,className:"px-8 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:border-[#CC561E]/50 text-slate-700 dark:text-slate-300 hover:text-[#CC561E] dark:hover:text-[#CC561E] font-medium rounded-full shadow-sm hover:shadow-md transition-all duration-300 flex items-center gap-2 group",children:[g.jsx("span",{children:"Load More"}),g.jsx(xl,{className:"w-4 h-4 group-hover:translate-y-0.5 transition-transform"})]}),!_&&c.length>0&&g.jsx("div",{className:"text-center text-slate-400 text-sm py-4",children:g.jsx("span",{children:" You've explored all related thoughts"})})]})]})]}),g.jsxs("div",{className:`flow-category-container ${le?"is-open":""}`,children:[g.jsx("div",{className:"flow-sidebar-backdrop",onClick:()=>ae(!1)}),g.jsx("aside",{className:"flow-category-sidebar",children:g.jsxs("div",{className:"flow-sidebar__sticky",children:[g.jsxs("div",{className:"lg:hidden flex items-center justify-between mb-6 pb-4 border-bottom border-slate-100 dark:border-slate-800",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-[rgba(204,86,30,0.1)] text-[#CC561E]",children:g.jsx(Hx,{size:20})}),g.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:"Discovery Areas"})]}),g.jsx("button",{onClick:()=>ae(!1),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400",children:g.jsx(xa,{size:20})})]}),(H==="ALL"||H==="BOOK")&&g.jsx(q3,{activeCategory:m,onCategoryChange:Q=>{pe(Q),ae(!1)},categories:i})]})})]}),g.jsxs("div",{className:`flow-sidebar-container ${L?"is-open":""}`,children:[g.jsx("div",{className:"flow-sidebar-backdrop",onClick:()=>B(!1)}),g.jsx("aside",{className:"flow-sidebar",children:g.jsxs("div",{className:"flow-sidebar__sticky",children:[g.jsxs("div",{className:"lg:hidden flex items-center justify-between mb-4 md:mb-0 pb-4 md:pb-0 border-bottom border-slate-100 dark:border-slate-800",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-[rgba(204,86,30,0.1)] text-[#CC561E]",children:g.jsx(Hx,{size:20})}),g.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:"Controls"})]}),g.jsx("button",{onClick:()=>B(!1),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400",children:g.jsx(xa,{size:20})})]}),g.jsx(jce,{activeFilter:H,onFilterChange:ge}),g.jsx(Lce,{value:v,onChange:$,disabled:E}),g.jsxs("button",{className:"flow-sidebar__pivot-button",onClick:Z,disabled:E,children:[g.jsx("span",{className:"icon",children:""}),"Change Topic"]})]})})]})]}),g.jsx("style",{children:`
                .flow-container {
                    max-width: 1280px;
                    margin: 0 auto;
                    width: 100%;
                    display: flex;
                    flex-direction: column;
                    height: 100%;
                    background: transparent;
                    position: relative;
                    padding: 24px;
                }

                @media (max-width: 768px) {
                    .flow-container {
                        padding: 12px;
                    }
                }

                .flow-container::before {
                    content: '';
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: 
                        radial-gradient(circle at 10% 20%, rgba(204, 86, 30, 0.03) 0%, transparent 40%),
                        radial-gradient(circle at 90% 80%, rgba(204, 86, 30, 0.03) 0%, transparent 40%);
                    pointer-events: none;
                    z-index: -1;
                }

                .flow-layout {
                    display: grid;
                    grid-template-columns: 210px 1fr 210px;
                    gap: 24px;
                    align-items: flex-start;
                    padding-top: 20px;
                    max-width: 1280px;
                    margin: 0 auto;
                }

                @media (max-width: 1024px) {
                    .flow-layout {
                        grid-template-columns: 1fr;
                        gap: 12px;
                        padding-top: 4px;
                    }

                    .flow-left {
                        display: none;
                    }

                    .flow-main {
                        padding-top: 48px;
                    }

                    .flow-sidebar-container {
                        position: fixed;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        left: 0;
                        z-index: 1000;
                        pointer-events: none;
                        display: flex;
                        justify-content: flex-end;
                    }

                    .flow-category-container {
                        position: fixed;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        left: 0;
                        z-index: 1000;
                        pointer-events: none;
                        display: flex;
                        justify-content: flex-start;
                    }

                    .flow-sidebar-container.is-open {
                        pointer-events: auto;
                    }

                    .flow-category-container.is-open {
                        pointer-events: auto;
                    }

                    .flow-sidebar-backdrop {
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: rgba(0, 0, 0, 0.5);
                        backdrop-filter: blur(4px);
                        opacity: 0;
                        transition: opacity 0.4s ease;
                        pointer-events: none;
                    }

                    .is-open .flow-sidebar-backdrop {
                        opacity: 1;
                        pointer-events: auto;
                    }

                    .flow-sidebar {
                        width: 55%;
                        min-width: 250px;
                        max-width: 400px;
                        height: 100%;
                        background: #fff;
                        transform: translateX(100%);
                        transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
                        box-shadow: -10px 0 30px rgba(0, 0, 0, 0.1);
                        z-index: 1001;
                    }

                    .dark .flow-sidebar {
                        background: #0f172a;
                    }

                    .flow-category-sidebar {
                        width: 25%;
                        min-width: 150px;
                        max-width: 340px;
                        height: 100%;
                        background: #fff;
                        transform: translateX(-100%);
                        transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
                        box-shadow: 10px 0 30px rgba(0, 0, 0, 0.1);
                        z-index: 1001;
                    }

                    .dark .flow-category-sidebar {
                        background: #0f172a;
                    }

                    .is-open .flow-sidebar {
                        transform: translateX(0);
                    }

                    .is-open .flow-category-sidebar {
                        transform: translateX(0);
                    }

                    .flow-sidebar__sticky {
                        height: 100%;
                        max-height: 100vh;
                        padding: 12px;
                        overflow-y: auto;
                        position: relative;
                        top: 0 !important;
                    }

                    .flow-container__mobile-actions {
                        position: sticky;
                        top: 0;
                        z-index: 100;
                        background: rgba(255, 255, 255, 0.85);
                        backdrop-filter: blur(16px);
                        margin: -20px -20px 20px -20px;
                        padding: 12px 20px;
                        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
                        width: calc(100% + 40px);
                    }

                    .flow-mobile-actions-row {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        gap: 8px;
                        width: 100%;
                    }

                    .flow-mobile-actions-right {
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        margin-left: auto;
                    }

                    .flow-mobile-action-btn {
                        padding: 6px 10px;
                        border-radius: 10px;
                        border: 1px solid rgba(148, 163, 184, 0.22);
                        background: rgba(255, 255, 255, 0.9);
                    }

                    .dark .flow-mobile-action-btn {
                        background: rgba(15, 23, 42, 0.9);
                        border-color: rgba(255, 255, 255, 0.12);
                    }

                    .flow-badge--title {
                        display: table;
                        margin: 4px auto 0 auto;
                        text-align: center;
                        font-size: 11px;
                        padding: 6px 14px;
                        letter-spacing: 0.14em;
                    }

                    .dark .flow-container__mobile-actions {
                        background: rgba(15, 23, 42, 0.85);
                        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                    }
                }

                @media (min-width: 1025px) {
                    .flow-container__mobile-actions {
                        display: none;
                    }

                    .flow-category-container {
                        display: none;
                    }
                }

                .flow-sidebar__sticky {
                    position: sticky;
                    top: 24px;
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }

                .flow-main {
                    padding-top: 0;
                }

                @media (min-width: 1025px) {
                    .flow-main {
                        padding-top: 40px; /* Aligns with category labels */
                    }
                    .flow-sidebar__sticky {
                        padding-top: 40px; /* Aligns with category labels */
                    }
                }

                .flow-left {
                    position: sticky;
                    top: 24px;
                    align-self: flex-start;
                }

                .flow-sidebar-container {
                    align-self: flex-start;
                }

                .flow-sidebar {
                    align-self: flex-start;
                }

                .flow-left__back {
                    margin-bottom: 24px;
                }

                .flow-card__content:not(.expanded)::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    height: 60px;
                    background: linear-gradient(to bottom, transparent, rgba(248, 250, 252, 0.9));
                    pointer-events: none;
                }

                .dark .flow-card__content:not(.expanded)::after {
                    background: linear-gradient(to bottom, transparent, rgba(15, 23, 42, 0.9));
                }

                .flow-sidebar__pivot-button {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 12px;
                    width: 100%;
                    padding: 12px;
                    background: #262D40;
                    border: none;
                    border-radius: 12px;
                    color: white;
                    font-weight: 700;
                    font-size: 13px;
                    cursor: pointer;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    box-shadow: 0 4px 15px rgba(38, 45, 64, 0.25);
                }

                .flow-sidebar__pivot-button:hover:not(:disabled) {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 25px rgba(38, 45, 64, 0.35);
                    filter: brightness(1.08);
                }

                .flow-sidebar__pivot-button:disabled {
                    opacity: 0.4;
                    cursor: not-allowed;
                    filter: grayscale(0.5);
                }

                .flow-sidebar__stats {
                    padding: 16px;
                    background: hsl(var(--card));
                    border-radius: 16px;
                    border: 1px solid rgba(255, 255, 255, 0.08);
                }

                .stat-item {
                    display: flex;
                    justify-content: space-between;
                    font-size: 11px;
                    margin-bottom: 8px;
                }

                .stat-label { color: rgba(255, 255, 255, 0.65); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }
                .stat-value { color: rgba(255, 255, 255, 0.95); font-family: 'JetBrains Mono', monospace; }

                .flow-container__header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-end;
                    margin-bottom: 24px;
                    padding-bottom: 12px;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                }

                @media (min-width: 1025px) {
                    .flow-container__header {
                        display: none;
                    }
                }

                .flow-badge {
                    display: inline-block;
                    padding: 4px 10px;
                    background: rgba(204, 86, 30, 0.1);
                    color: #CC561E;
                    font-size: 10px;
                    font-weight: 800;
                    text-transform: uppercase;
                    letter-spacing: 0.1em;
                    border-radius: 6px;
                    margin-bottom: 12px;
                }

                .flow-container__title {
                    margin: 0 0 8px 0;
                    font-size: 28px;
                    font-weight: 800;
                    color: #0f172a;
                    letter-spacing: -0.02em;
                    font-family: 'Outfit', sans-serif;
                }

                .dark .flow-container__title {
                    color: #fff;
                }

                .flow-container__meta {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }

                .meta-dot {
                    width: 4px;
                    height: 4px;
                    background: #CC561E;
                    border-radius: 50%;
                }

                .flow-container__subtitle {
                    font-size: 14px;
                    color: #64748b;
                    font-weight: 500;
                }

                .flow-container__close {
                    background: rgba(255, 255, 255, 0.03);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 12px;
                    width: 40px;
                    height: 40px;
                    font-size: 14px;
                    color: #64748b;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .flow-container__close:hover {
                    background: rgba(239, 68, 68, 0.1);
                    color: #f87171;
                    border-color: rgba(239, 68, 68, 0.2);
                }

                .flow-container__pivot {
                    background: rgba(204, 86, 30, 0.05);
                    backdrop-filter: blur(12px);
                    border: 1px solid rgba(204, 86, 30, 0.1);
                    padding: 20px 24px;
                    border-radius: 16px;
                    margin-bottom: 32px;
                    display: flex;
                    align-items: center;
                    gap: 16px;
                    animation: slideInDown 0.6s cubic-bezier(0.16, 1, 0.3, 1);
                }

                @keyframes slideInDown {
                    from { opacity: 0; transform: translateY(-20px); }
                    to { opacity: 1; transform: translateY(0); }
                }

                .pivot-icon {
                    font-size: 24px;
                }

                .flow-container__pivot p {
                    margin: 0;
                    color: rgba(204, 86, 30, 0.8);
                    font-size: 14px;
                    line-height: 1.6;
                    font-weight: 500;
                }

                .flow-container__cards {
                    display: flex;
                    flex-direction: column;
                    gap: 24px;
                }

                .flow-container__loader {
                    padding: 60px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 16px;
                    color: #64748b;
                    font-size: 14px;
                    font-weight: 500;
                }

                .spinner {
                    width: 24px;
                    height: 24px;
                    border: 2px solid rgba(204, 86, 30, 0.1);
                    border-top-color: #CC561E;
                    border-radius: 50%;
                    animation: spin 0.8s linear infinite;
                }

                @keyframes spin {
                    to { transform: rotate(360deg); }
                }
            `})]})},Bce=({userId:t,userEmail:e,onLogout:n})=>{const[r,i]=A.useState([]),a=A.useRef([]),[s,o]=A.useState("list"),[c,d]=A.useState(null),[f,p]=A.useState(!1),[m,y]=A.useState(null),[v,C]=A.useState(!1),[E,S]=A.useState(null),[_,N]=A.useState("DASHBOARD"),[k,O]=A.useState(!1),[I,M]=A.useState(!0),[L,B]=A.useState(null),[le,ae]=A.useState(!0),[fe,W]=A.useState(null),[de,xe]=A.useState(1),[H,J]=A.useState(""),[q,F]=A.useState("ALL"),[z,R]=A.useState("date_desc"),[$,Z]=A.useState(""),[pe,ge]=A.useState({}),[Q,Ee]=A.useState([]),[ie,K]=A.useState(!1),oe=A.useRef(!1),ke=A.useRef(0),Oe=A.useRef(new Set),Ue=A.useRef(!1),Ke=A.useRef(new Map),mt=A.useRef(0),$t=!0,je=A.useMemo(()=>{const V=Se=>Se.trim().toLocaleLowerCase("tr-TR"),X=new Map(k0.map(Se=>[V(Se),Se])),Ce=new Map;return r.filter(Se=>Se.type==="BOOK").forEach(Se=>{(Se.tags||[]).forEach(ue=>{const ve=X.get(V(ue));ve&&Ce.set(ve,(Ce.get(ve)||0)+1)})}),k0.filter(Se=>(Ce.get(Se)||0)>=Ez)},[r]);A.useEffect(()=>{a.current=r},[r]);const Je=A.useCallback(V=>{const X=Ke.current.get(V);X&&(window.clearTimeout(X.timerId),Ke.current.delete(V))},[]),Ie=A.useCallback(async V=>{mt.current+=1;try{return await V()}finally{mt.current=Math.max(0,mt.current-1)}},[]),Le=A.useCallback((V,X)=>{Je(X.id);const Ce=window.setTimeout(()=>{Ke.current.delete(X.id)},18e4);Ke.current.set(X.id,{mode:V,snapshot:X,timerId:Ce})},[Je]),Ve=V=>typeof V=="string"?V.trim():"",wn=V=>{if(typeof V=="number"&&Number.isFinite(V))return V;if(typeof V=="string"&&V.trim()!==""){const X=Number(V);return Number.isFinite(X)?X:null}return null},Jr=V=>Array.isArray(V)?V.map(X=>String(X||"").trim()).filter(Boolean).sort():[],an=(V=[])=>V.map(X=>({text:Ve(X.text),type:String(X.type||"highlight").trim().toLowerCase(),comment:Ve(X.comment),pageNumber:wn(X.pageNumber),paragraphNumber:wn(X.paragraphNumber),chapterTitle:Ve(X.chapterTitle),tags:Jr(X.tags)})).sort((X,Ce)=>JSON.stringify(X).localeCompare(JSON.stringify(Ce))),Ha=A.useCallback((V,X)=>{if(V.mode==="HIGHLIGHTS")return JSON.stringify(an(V.snapshot.highlights||[]))===JSON.stringify(an(X.highlights||[]));const Ce=Ve(X.title)===Ve(V.snapshot.title)&&Ve(X.author)===Ve(V.snapshot.author)&&Ve(X.translator)===Ve(V.snapshot.translator)&&Ve(X.publisher)===Ve(V.snapshot.publisher)&&Ve(X.publicationYear)===Ve(V.snapshot.publicationYear)&&Ve(X.isbn)===Ve(V.snapshot.isbn)&&Ve(X.url)===Ve(V.snapshot.url)&&Ve(X.status)===Ve(V.snapshot.status)&&Ve(X.readingStatus)===Ve(V.snapshot.readingStatus)&&JSON.stringify(Jr(X.tags))===JSON.stringify(Jr(V.snapshot.tags))&&Ve(X.generalNotes)===Ve(V.snapshot.generalNotes)&&Ve(X.summaryText)===Ve(V.snapshot.summaryText)&&Ve(X.coverUrl)===Ve(V.snapshot.coverUrl)&&wn(X.pageCount)===wn(V.snapshot.pageCount)&&Ve(X.contentLanguageMode)===Ve(V.snapshot.contentLanguageMode)&&Ve(X.contentLanguageResolved)===Ve(V.snapshot.contentLanguageResolved)&&Ve(X.sourceLanguageHint)===Ve(V.snapshot.sourceLanguageHint)&&Ve(X.languageDecisionReason)===Ve(V.snapshot.languageDecisionReason)&&wn(X.languageDecisionConfidence)===wn(V.snapshot.languageDecisionConfidence);return V.mode==="ITEM"?Ce:Ce&&Ve(X.personalNoteCategory)===Ve(V.snapshot.personalNoteCategory)&&Ve(X.personalFolderId)===Ve(V.snapshot.personalFolderId)&&Ve(X.folderPath)===Ve(V.snapshot.folderPath)},[]),pi=A.useCallback(V=>{if(Ke.current.size===0)return V;const X=[],Ce=V.map(Se=>{const ue=Ke.current.get(Se.id);if(!ue)return Se;if(Ha(ue,Se))return X.push(Se.id),Se;if(ue.mode==="HIGHLIGHTS")return{...Se,highlights:ue.snapshot.highlights};const ve={...Se,title:ue.snapshot.title,author:ue.snapshot.author,translator:ue.snapshot.translator,publisher:ue.snapshot.publisher,publicationYear:ue.snapshot.publicationYear,isbn:ue.snapshot.isbn,url:ue.snapshot.url,status:ue.snapshot.status,readingStatus:ue.snapshot.readingStatus,tags:ue.snapshot.tags,generalNotes:ue.snapshot.generalNotes,summaryText:ue.snapshot.summaryText,coverUrl:ue.snapshot.coverUrl,pageCount:ue.snapshot.pageCount,contentLanguageMode:ue.snapshot.contentLanguageMode,contentLanguageResolved:ue.snapshot.contentLanguageResolved,sourceLanguageHint:ue.snapshot.sourceLanguageHint,languageDecisionReason:ue.snapshot.languageDecisionReason,languageDecisionConfidence:ue.snapshot.languageDecisionConfidence};return ue.mode==="ITEM"?ve:{...ve,personalNoteCategory:ue.snapshot.personalNoteCategory,personalFolderId:ue.snapshot.personalFolderId,folderPath:ue.snapshot.folderPath}});return X.length>0&&X.forEach(Se=>Je(Se)),Ce},[Je,Ha]);A.useEffect(()=>()=>{for(const V of Ke.current.values())window.clearTimeout(V.timerId);Ke.current.clear()},[]),A.useEffect(()=>{let V=!0;async function X(){if(!t){M(!1);return}try{const[{items:Ce,lastDoc:Se},ue]=await Promise.all([Hp(t),uv(t)]);V&&(i(Ce),Ee(ue),B(Se),ae(!!Se),K(!1))}catch(Ce){console.error("Failed to load items:",Ce)}finally{V&&M(!1)}}return X(),()=>{V=!1}},[t]),A.useEffect(()=>{if(!t)return;let V=!1,X=null,Ce=!1;ke.current=Date.now(),Ue.current=!1;const Se=()=>{if(V)return;const et=typeof document<"u"&&document.visibilityState==="hidden"?5e3:2500;X=window.setTimeout(()=>{ue()},et)},ue=async()=>{if(V||Ue.current){Se();return}if(mt.current>0){Se();return}Ue.current=!0;try{const Ae=await zQ(t,ke.current,100),et=Ae.events||[],Fe=et.reduce((st,rt)=>{const gn=Number(rt.updated_at_ms||0);return gn>st?gn:st},0);if(ke.current=Math.max(ke.current,Number(Ae.server_time_ms||0),Fe),et.length>0){const[{items:st,lastDoc:rt},gn]=await Promise.all([Hp(t),uv(t)]);if(!V){const yt=Oe.current,Mt=yt.size>0?st.filter(ei=>!yt.has(ei.id)):st;i(pi(Mt)),Ee(gn),B(rt),ae(!!rt)}}}catch(Ae){if(Ae instanceof Error&&Ae.message==="REALTIME_ENDPOINT_NOT_FOUND"){Ce=!0,console.warn("Realtime polling disabled: endpoint is not available on current backend.");return}console.warn("Realtime polling failed (non-critical):",Ae)}finally{if(Ue.current=!1,Ce)return;Se()}},ve=()=>{X!==null&&window.clearTimeout(X),Se()};return Se(),document.addEventListener("visibilitychange",ve),()=>{V=!0,X!==null&&window.clearTimeout(X),document.removeEventListener("visibilitychange",ve)}},[pi,$t,t]),A.useEffect(()=>{},[t]),A.useEffect(()=>{const V=()=>{setTimeout(()=>{window.scrollTo(0,0),document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur()},100)},X=document.querySelectorAll("input, textarea");return X.forEach(Ce=>{Ce.addEventListener("blur",V)}),()=>{X.forEach(Ce=>{Ce.removeEventListener("blur",V)})}},[]),A.useEffect(()=>{if(!t||oe.current)return;oe.current=!0;let V=!1,X=null,Ce=null;const Se=()=>{V||kce({firebase_uid:t,anchor_type:"topic",anchor_id:"General Discovery",mode:"FOCUS",horizon_value:.25,resource_type:"ALL_NOTES"}).catch(ue=>{console.warn("Flow prewarm failed (non-critical):",ue)})};return typeof window<"u"&&typeof window.requestIdleCallback=="function"?Ce=window.requestIdleCallback(()=>Se(),{timeout:2500}):X=window.setTimeout(Se,1200),()=>{V=!0,X!==null&&window.clearTimeout(X),Ce!==null&&typeof window<"u"&&typeof window.cancelIdleCallback=="function"&&window.cancelIdleCallback(Ce)}},[t]);const On=A.useCallback(async(V,X=!1)=>{if(!vn(V))return!0;try{return await PQ(t,V.id,{title:V.title,author:V.author,content:V.generalNotes||"",tags:V.tags||[],category:Rr(V),delete_only:X}),!0}catch(Ce){return console.error("Failed to sync personal note to AI Backend:",Ce),!1}},[t]),Mn=A.useCallback(V=>{if(!V)return;const X=Q.find(Ce=>Ce.id===V);return X==null?void 0:X.name},[Q]),Gt=A.useCallback(async()=>{const[{items:V,lastDoc:X},Ce]=await Promise.all([Hp(),uv()]),Se=Oe.current,ue=Se.size>0?V.filter(ve=>!Se.has(ve.id)):V;i(pi(ue)),Ee(Ce),B(X),ae(!!X)},[pi,t]),mi=A.useCallback(async V=>{const X={...V,id:V.id||Date.now().toString(),addedAt:V.addedAt||Date.now(),highlights:[]};i(ue=>[X,...ue]),p(!1),ge({});let Ce=!1,Se="";try{await Ie(async()=>{await R1(t,X)}),Ce=!0}catch(ue){Se=ue instanceof Error?ue.message:String(ue),console.error("Failed to save item to Oracle:",ue)}if(!Ce){i(ue=>ue.filter(ve=>ve.id!==X.id)),window.alert(`Item kaydedilemedi: ${Se||"Bilinmeyen hata"}`);return}try{await Gt()}catch(ue){console.warn("Post-create refresh failed:",ue)}(async()=>{try{if(vn(X)){await On(X,!1);return}const ue=[];ue.push(`Title: ${X.title}`),ue.push(`Author: ${X.author}`),vn(X)&&X.personalNoteCategory&&ue.push(`Category: ${X.personalNoteCategory}`),vn(X)&&X.folderPath&&ue.push(`SubFile: ${X.folderPath}`),X.publisher&&ue.push(`Publisher: ${X.publisher}`),X.tags&&X.tags.length>0&&ue.push(`Tags: ${X.tags.join(", ")}`);const ve=vn(X)?X.generalNotes:X.summaryText||X.generalNotes;ve&&ue.push(`
Content/Notes:
${ve}`);const Ae=ue.join(`
`);Ae.length>20&&(await wM(Ae,X.title,X.author,vn(X)?X5(X):X.type,t,{book_id:X.id,tags:X.tags||[]}),console.log("Synced new item to AI Backend:",X.title))}catch(ue){console.error("Failed to sync item to AI Backend:",ue)}})(),V.type!=="PERSONAL_NOTE"&&(async()=>{try{const ue=Cm(X),ve=await Hw(ue),Ae=Em(X,ve),et=a.current.find(yt=>yt.id===X.id);if(!et)return;const Fe=(yt,Mt)=>JSON.stringify(Array.isArray(yt)?yt:[])===JSON.stringify(Array.isArray(Mt)?Mt:[]),st={},rt=yt=>{const Mt=X[yt],ei=et[yt],Mi=Ae[yt];Mi!==void 0&&Mi!==Mt&&ei===Mt&&(st[yt]=Mi)};if((()=>{const yt=X.tags||[],Mt=et.tags||[],ei=Ae.tags||[];Fe(ei,yt)||Fe(Mt,yt)&&(st.tags=ei)})(),rt("summaryText"),rt("publisher"),rt("translator"),rt("publicationYear"),rt("isbn"),rt("coverUrl"),rt("pageCount"),rt("contentLanguageMode"),rt("contentLanguageResolved"),rt("sourceLanguageHint"),rt("languageDecisionReason"),rt("languageDecisionConfidence"),Object.keys(st).length===0)return;i(yt=>yt.map(Mt=>Mt.id===X.id?{...Mt,...st}:Mt));try{await Ud(t,X.id,st)}catch(yt){console.error("Failed to patch enriched item in Oracle:",yt)}}catch(ue){console.error("Background enrichment failed:",ue)}})()},[Ud,Gt,Ie,On,t]),pr=A.useCallback(V=>{ge({personalNoteCategory:(V==null?void 0:V.category)||"DAILY",personalFolderId:V==null?void 0:V.folderId,folderPath:(V==null?void 0:V.folderPath)||Mn(V==null?void 0:V.folderId)}),y(null),p(!0)},[Mn]),ki=A.useCallback(V=>{mi({type:"PERSONAL_NOTE",title:V.title,author:"Self",status:"On Shelf",readingStatus:"Finished",tags:[],generalNotes:V.content,addedAt:Date.now(),personalNoteCategory:V.category,personalFolderId:V.folderId,folderPath:V.folderPath||Mn(V.folderId)})},[Mn,mi]),gi=A.useCallback(async V=>{if(!m)return;const X=a.current.find(Fe=>Fe.id===m);if(!X)return;const Ce={...X,...V};p(!1),y(null);const Se=vn(Ce);Le(Se?"PERSONAL_NOTE":"ITEM",Ce);let ue=!1,ve="";try{await Ie(async()=>{await R1(t,Ce)}),ue=!0}catch(Fe){ve=Fe instanceof Error?Fe.message:String(Fe),console.error("Failed to update item in Oracle:",Fe)}let Ae=!0,et="";if(Se)try{Ae=await Ie(async()=>On(Ce,!1))}catch(Fe){Ae=!1,et=Fe instanceof Error?Fe.message:String(Fe)}if(!ue||!Ae){Je(Ce.id);const Fe=[ve,et].filter(Boolean).join(" | ");window.alert(`Changes could not be saved.${Fe?`
${Fe}`:""}`);return}try{await Gt()}catch(Fe){console.warn("Post-update refresh failed:",Fe)}},[Je,m,Le,Gt,Ie,On,t]),pn=A.useCallback(async V=>{if(!window.confirm("Are you sure you want to delete this item?"))return;const X=r.find(ue=>ue.id===V);if(!X)return;Je(V),Oe.current.add(V),setTimeout(()=>Oe.current.delete(V),1e4),i(ue=>ue.filter(ve=>ve.id!==V)),c===V&&(d(null),o("list"));let Ce=!1,Se="";try{await Ie(async()=>{await yie(t,V)}),Ce=!0}catch(ue){Se=ue instanceof Error?ue.message:String(ue),console.error("Failed to delete item from Oracle:",ue)}if(!Ce){Oe.current.delete(V),i(ue=>[X,...ue]),window.alert(`Delete failed: ${Se||"Unknown error"}`);return}try{await Ie(async()=>{await _T(t,X.id)})}catch(ue){console.error("Failed to purge item from AI Backend:",ue)}try{await Gt()}catch(ue){console.warn("Post-delete refresh failed:",ue)}},[r,Je,Gt,Ie,c,t]),mr=A.useCallback(async V=>{if(!window.confirm(`Are you sure you want to delete ${V.length} items?`))return;const X=r.filter(ve=>V.includes(ve.id));if(X.length===0)return;V.forEach(ve=>{Je(ve),Oe.current.add(ve),setTimeout(()=>Oe.current.delete(ve),1e4)}),i(ve=>ve.filter(Ae=>!V.includes(Ae.id))),c&&V.includes(c)&&(d(null),o("list"));let Ce=!1,Se="";try{await Ie(async()=>{await vie(t,V)}),Ce=!0}catch(ve){Se=ve instanceof Error?ve.message:String(ve),console.error("Failed to delete items from Oracle:",ve)}if(!Ce){V.forEach(ve=>Oe.current.delete(ve)),i(ve=>[...X,...ve]),window.alert(`Bulk delete failed: ${Se||"Unknown error"}`);return}(await Promise.allSettled(X.map(ve=>Ie(async()=>_T(t,ve.id))))).forEach((ve,Ae)=>{ve.status==="rejected"&&console.error(`Failed to purge item ${X[Ae].id} from AI Backend:`,ve.reason)});try{await Gt()}catch(ve){console.warn("Post-bulk-delete refresh failed:",ve)}},[r,Je,Gt,Ie,c,t]),Ln=A.useCallback(async V=>{if(!c)return;const X=a.current.find(ve=>ve.id===c);if(!X)return;const Ce={...X,highlights:V};Le("HIGHLIGHTS",Ce);let Se=!1,ue="";try{await Ie(async()=>{await I2(t,Ce.id,Ce.title,Ce.author,Ce.highlights||[])}),Se=!0}catch(ve){ue=ve instanceof Error?ve.message:String(ve),console.error("Failed to sync highlights to AI Backend:",ve)}if(!Se){Je(Ce.id),window.alert(`Highlight changes could not be saved.${ue?`
${ue}`:""}`);return}try{await Gt()}catch(ve){console.warn("Post-highlight refresh failed:",ve)}},[Je,Le,Gt,Ie,c,t]),Ho=A.useCallback(async V=>{const X=r.findIndex(ue=>ue.id===V);if(X===-1)return;const Ce=r[X],Se={...Ce,isFavorite:!Ce.isFavorite};i(ue=>{const ve=[...ue];return ve[X]=Se,ve}),Le("ITEM",Se);try{await Ie(async()=>{await Ud(t,Se.id,{isFavorite:Se.isFavorite})}),await Gt()}catch(ue){console.error("Failed to update favorite status in Oracle:",ue),Je(Se.id),i(Ae=>{const et=[...Ae],Fe=et.findIndex(st=>st.id===V);return Fe!==-1&&(et[Fe]=Ce),et});const ve=ue instanceof Error?ue.message:String(ue);window.alert(`Favorite update failed. Previous value was restored.
${ve}`)}},[r,Je,Le,Ud,Gt,Ie,t]),Gn=A.useCallback(async(V,X)=>{const Ce=r.findIndex(Ae=>Ae.id===V);if(Ce===-1)return;const Se=r[Ce],ue=Se.highlights.map(Ae=>Ae.id===X?{...Ae,isFavorite:!Ae.isFavorite}:Ae),ve={...Se,highlights:ue};i(Ae=>{const et=[...Ae];return et[Ce]=ve,et});try{await Ie(async()=>{await I2(t,ve.id,ve.title,ve.author,ve.highlights||[])}),await Gt()}catch(Ae){console.error("Failed to update highlight favorite status in backend:",Ae),i(Fe=>{const st=[...Fe],rt=st.findIndex(gn=>gn.id===V);return rt!==-1&&(st[rt]=Se),st});const et=Ae instanceof Error?Ae.message:String(Ae);window.alert(`Highlight favorite update failed. Previous value was restored.
${et}`)}},[r,Gt,Ie,t]),ta=A.useCallback(V=>{i(X=>X.map(Ce=>{if(Ce.id!==V.id)return Ce;const Se={};return["summaryText","tags","publisher","translator","publicationYear","isbn","coverUrl","pageCount","contentLanguageMode","contentLanguageResolved","sourceLanguageHint","languageDecisionReason","languageDecisionConfidence","isIngested"].forEach(ve=>{const Ae=V[ve];Ae!==void 0&&(Se[ve]=Ae)}),{...Ce,...Se}}))},[]),{isEnriching:Qr,stats:Oi,startEnrichment:At,stopEnrichment:Bt}=Sce(t,ta),Wt=r.find(V=>V.id===c)||void 0,_t=r.find(V=>V.id===m),Tt=A.useCallback(V=>{N(V),o("list"),d(null),xe(1),J(""),F("ALL"),Z(""),V!=="BOOK"&&W(null)},[]),nr=A.useCallback(V=>{W(V),F("ALL"),N("BOOK"),o("list"),d(null),xe(1),J(""),Z(""),C(!1),S(null)},[]),kr=A.useCallback(V=>{F(V),W(null),N("BOOK"),o("list"),d(null),xe(1),J(""),Z(""),C(!1),S(null)},[]);A.useCallback(async()=>{if(L)try{const{items:V,lastDoc:X}=await Hp(t,1e3,L);i(Ce=>[...Ce,...V]),B(X),ae(!!X)}catch(V){console.error("Error loading more items:",V)}},[t,L]);const mn=()=>`folder-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,zr=A.useCallback(async(V,X)=>{const Ce=X.trim();if(!Ce)return null;const Se=Date.now(),ue=Q.filter(Ae=>Ae.category===V).reduce((Ae,et)=>Math.max(Ae,et.order),0)+1,ve={id:mn(),category:V,name:Ce,order:ue,createdAt:Se,updatedAt:Se};Ee(Ae=>[...Ae,ve]);try{return await kN(t,ve),ve}catch(Ae){return console.error("Failed to create personal note folder:",Ae),Ee(et=>et.filter(Fe=>Fe.id!==ve.id)),null}},[Q,t]),rr=A.useCallback(async(V,X)=>{const Ce=X.trim();if(!Ce)return!1;const Se=Q,ue=Date.now();Ee(ve=>ve.map(Ae=>Ae.id===V?{...Ae,name:Ce,updatedAt:ue}:Ae));try{return await ON(t,V,{name:Ce,updatedAt:ue}),i(ve=>ve.map(Ae=>!vn(Ae)||Ae.personalFolderId!==V?Ae:{...Ae,folderPath:Ce})),!0}catch(ve){return console.error("Failed to rename personal note folder:",ve),Ee(Se),!1}},[Q,t]),Or=A.useCallback(async V=>{if(!Q.find(ve=>ve.id===V))return!1;const Ce=Q,Se=r,ue=r.filter(ve=>vn(ve)&&ve.personalFolderId===V);Ee(ve=>ve.filter(Ae=>Ae.id!==V)),i(ve=>ve.map(Ae=>!vn(Ae)||Ae.personalFolderId!==V?Ae:{...Ae,personalFolderId:void 0,folderPath:void 0}));try{return await Promise.all([...ue.map(ve=>Vp(t,ve.id,Rr(ve),void 0,void 0)),bie(t,V)]),!0}catch(ve){return console.error("Failed to delete personal note folder:",ve),Ee(Ce),i(Se),!1}},[r,Q,t]),jn=A.useCallback(async(V,X)=>{const Ce=Q.find(Fe=>Fe.id===V);if(!Ce)return!1;if(Ce.category===X)return!0;const Se=Q,ue=r,ve=Date.now(),Ae=Q.filter(Fe=>Fe.category===X&&Fe.id!==V).reduce((Fe,st)=>Math.max(Fe,st.order),0)+1,et=r.filter(Fe=>vn(Fe)&&Fe.personalFolderId===V);Ee(Fe=>Fe.map(st=>st.id!==V?st:{...st,category:X,order:Ae,updatedAt:ve})),i(Fe=>Fe.map(st=>!vn(st)||st.personalFolderId!==V?st:{...st,personalNoteCategory:X,personalFolderId:V,folderPath:Ce.name}));try{return await Promise.all([ON(t,V,{category:X,order:Ae,updatedAt:ve}),...et.map(Fe=>Vp(t,Fe.id,X,V,Ce.name))]),await Promise.all(et.map(Fe=>On({...Fe,personalNoteCategory:X,personalFolderId:V,folderPath:Ce.name},!1))),!0}catch(Fe){return console.error("Failed to move personal note folder:",Fe),Ee(Se),i(ue),!1}},[r,Q,On,t]),xi=A.useCallback(async(V,X,Ce)=>{const Se=r.find(rt=>rt.id===V);if(!Se||!vn(Se))return!1;const ue=Ce?Q.find(rt=>rt.id===Ce):void 0,ve=ue==null?void 0:ue.id,Ae=ue==null?void 0:ue.name,et=Rr(Se),Fe=Se.personalFolderId,st=Se.folderPath;if(et===X&&(Fe||void 0)===(ve||void 0))return!0;i(rt=>rt.map(gn=>gn.id!==V||!vn(gn)?gn:{...gn,personalNoteCategory:X,personalFolderId:ve,folderPath:Ae}));try{return await Vp(t,V,X,ve,Ae),await On({...Se,personalNoteCategory:X,personalFolderId:ve,folderPath:Ae},!1),!0}catch(rt){return console.error("Failed to move personal note:",rt),i(gn=>gn.map(yt=>yt.id!==V||!vn(yt)?yt:{...yt,personalNoteCategory:et,personalFolderId:Fe,folderPath:st})),!1}},[r,Q,On,t]);return A.useEffect(()=>{if(I||ie)return;const V=r.filter(Se=>vn(Se)&&!!Se.folderPath&&!Se.personalFolderId);if(V.length===0){K(!0);return}let X=!1;return(async()=>{const Se=new Map;Q.forEach(Ae=>{const et=`${Ae.category}::${Ae.name.toLowerCase()}`;Se.set(et,Ae)});const ue=[],ve=[];if(V.forEach(Ae=>{const et=Rr(Ae),Fe=(Ae.folderPath||"").trim();if(!Fe)return;const st=`${et}::${Fe.toLowerCase()}`;let rt=Se.get(st);if(!rt){const gn=Date.now(),yt=Math.max(...Q.filter(Mt=>Mt.category===et).map(Mt=>Mt.order),...ue.filter(Mt=>Mt.category===et).map(Mt=>Mt.order),0)+1;rt={id:mn(),category:et,name:Fe,order:yt,createdAt:gn,updatedAt:gn},ue.push(rt),Se.set(st,rt)}ve.push({noteId:Ae.id,category:et,folderId:rt.id,folderPath:rt.name})}),!X){ue.length>0&&Ee(Ae=>[...Ae,...ue]),ve.length>0&&i(Ae=>Ae.map(et=>{const Fe=ve.find(st=>st.noteId===et.id);return!Fe||!vn(et)?et:{...et,personalNoteCategory:Fe.category,personalFolderId:Fe.folderId,folderPath:Fe.folderPath}}));try{await Promise.all([...ue.map(Ae=>kN(t,Ae)),...ve.map(Ae=>Vp(t,Ae.noteId,Ae.category,Ae.folderId,Ae.folderPath))])}catch(Ae){console.error("Legacy personal note folder migration failed:",Ae)}finally{X||K(!0)}}})(),()=>{X=!0}},[r,ie,I,Q,t]),I&&r.length===0?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 text-slate-500",children:"Loading your library from cloud..."}):g.jsxs("div",{className:"flex h-screen bg-[#F7F8FB] dark:bg-[#0b0e14] overflow-hidden",children:[g.jsx(Sie,{activeTab:_,onTabChange:Tt,isOpen:k,onClose:()=>O(!1)}),g.jsx("main",{className:`flex-1 flex flex-col h-full w-full relative overflow-y-auto transition-all duration-300 bg-[#F7F8FB] dark:bg-[#0b0e14] noise-bg\r
`,children:_==="PROFILE"?g.jsx(Nie,{email:e,userId:t,onLogout:n,onBack:()=>Tt("DASHBOARD"),books:r,onStartEnrichment:At,onStopEnrichment:Bt,isEnriching:Qr,enrichmentStats:Oi}):_==="SMART_SEARCH"?g.jsx(Mie,{userId:t,onBack:()=>Tt("DASHBOARD"),books:r}):_==="RAG_SEARCH"?g.jsx(Tce,{userId:t,userEmail:e,onBack:()=>Tt("DASHBOARD"),books:r}):_==="FLOW"?g.jsx(Pce,{firebaseUid:t,anchorType:"topic",anchorId:"General Discovery",categoryOptions:je,onClose:()=>Tt("DASHBOARD")}):s==="list"?g.jsx(FX,{books:r,activeTab:_,userId:t,categoryFilter:fe,onCategoryFilterChange:W,onCategoryNavigate:nr,onStatusNavigate:kr,onSelectBook:V=>{d(V.id),C(!1),o("detail")},onSelectBookWithTab:(V,X,Ce)=>{d(V.id),C(X==="highlights"),S(Ce||null),o("detail")},onAddBook:()=>{ge({}),y(null),p(!0)},personalNoteFolders:Q,onCreatePersonalFolder:zr,onRenamePersonalFolder:rr,onDeletePersonalFolder:Or,onMovePersonalFolder:jn,onMovePersonalNote:xi,onAddPersonalNote:({category:V,folderId:X,folderPath:Ce})=>{pr({category:V,folderId:X,folderPath:Ce})},onQuickCreatePersonalNote:ki,onMobileMenuClick:()=>O(!0),onDeleteBook:pn,onDeleteMultiple:mr,onToggleFavorite:Ho,onToggleHighlightFavorite:Gn,currentPage:de,onPageChange:xe,searchQuery:H,onSearchChange:J,statusFilter:q,onStatusFilterChange:F,sortOption:z,onSortOptionChange:R,publisherFilter:$,onPublisherFilterChange:Z,onTabChange:Tt}):Wt&&g.jsx(wie,{book:Wt,initialTab:v?"highlights":"info",autoEditHighlightId:E||void 0,onBack:()=>{d(null),C(!1),S(null),o("list")},onEdit:()=>{y(Wt.id),p(!0)},onDelete:()=>pn(Wt.id),onUpdateHighlights:Ln,onBookUpdated:ta})}),f&&g.jsx(Bre,{initialType:_t?_t.type:_==="NOTES"||_==="DASHBOARD"||_==="PROFILE"||_==="RAG_SEARCH"||_==="SMART_SEARCH"||_==="FLOW"?"BOOK":_,initialData:_t,noteDefaults:!_t&&_==="PERSONAL_NOTE"?pe:void 0,onSave:m?gi:mi,onCancel:()=>{p(!1),y(null),ge({})}})]})},Fce=()=>{const{user:t,loading:e,loginWithGoogle:n,logout:r}=Sm();return e?g.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-500",children:"Loading..."}):t?g.jsx(K9,{children:g.jsx(Bce,{userId:t.uid,userEmail:t.email,onLogout:r})}):g.jsx(Ece,{onLogin:n})},zce=()=>g.jsx(Pre,{children:g.jsx(Cie,{children:g.jsx(Fce,{})})}),dI=document.getElementById("root");if(!dI)throw new Error("Could not find root element to mount to");const Uce=T7.createRoot(dI);Uce.render(g.jsx(nt.StrictMode,{children:g.jsx(zce,{})}));export{Yp as A,jv as B,k0 as C,$ce as F,V5 as H,Gce as I,H5 as K,_D as L,XR as M,$5 as N,Ww as P,Vce as S,Zp as W,mle as a,Rie as b,Ne as c,IP as d,Ez as e,Hce as f,hf as g,Pj as h,jse as i,g as j,Ra as k,g5 as l,Vd as m,xl as n,ms as o,A as r,Die as u};
